{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"PhotoPrism: Browse Your Life in Pictures","text":"<p>PhotoPrism\u00ae is an AI-Powered Photos App for the Decentralized Web. It makes use of the latest technologies to tag and find pictures automatically without getting in your way. You can run it at home, on a private server, or in the cloud.</p> <p></p>"},{"location":"#feature-overview","title":"Feature Overview","text":"<p>Our mission is to provide the most user- and privacy-friendly solution to keep your pictures organized and accessible. That's why PhotoPrism was built from the ground up to run wherever you need it, without compromising freedom, privacy, or functionality:</p> <ul> <li>Browse all your pictures without worrying about RAW images or video formats</li> <li>Whether you're using a phone, tablet, or desktop computer, our intuitive PWA provides a native app-like experience and can be easily installed on your home screen</li> <li>Quickly find specific photos and videos with powerful search filters that can be combined and are available for many different properties, including labels, location, resolution, color, chroma, and quality</li> <li>Automatically labels your pictures based on content and location, and recognizes the faces of your family and friends</li> <li>Live Photos start playing when you hover over them and when viewing a slideshow</li> <li>Six high-resolution World Maps and our privacy-preserving geocoding service help bring back memories of your favorite trips and let you explore the world</li> <li>Metadata can be extracted and merged from Exif, XMP, and other sources like Google Photos</li> <li>Use compatible apps like PhotoSync to back up iOS and Android phones in the background</li> <li>WebDAV clients such as Microsoft's Windows Explorer and Apple's Finder can connect directly to PhotoPrism, allowing you to open, edit, and delete files from your computer as if they were local</li> </ul> <p>Compare Features \u203a</p>"},{"location":"#100-privacy","title":"100% Privacy","text":"<p>Because PhotoPrism is 100% self-funded and independent, we can promise you that we will never sell your data and that we will always be transparent about our software and services. Your data will never be shared with Google, Amazon, Microsoft or Apple unless you intentionally upload files to one of their services.</p> <p> TRY OUR DEMO GET STARTED </p>"},{"location":"credits/","title":"Credits","text":"<p>A big thank you to all current and past sponsors, whose generous support has been and continues to be essential to the success of the project! </p>"},{"location":"credits/#infrastructure","title":"Infrastructure","text":"<p>Our project infrastructure is provided by the following companies:</p> <ul> <li>GitHub hosts our code repositories and also provides many other important services</li> <li>Docker approved us for their Open Source Program and hosts all of our app images</li> <li>Element develops and operates the infrastructure that our community chat is based on</li> <li>BrowserStack provides free access to their device and browser testing infrastructure</li> </ul>"},{"location":"credits/#technologies","title":"Technologies","text":"<ul> <li>Go, Gin and Vuetify</li> <li>Google TensorFlow and Material Design</li> <li>MkDocs and Material for MkDocs</li> <li>Complete list of 3rd-party software packages</li> </ul>"},{"location":"credits/#artwork","title":"Artwork","text":"<ul> <li>Font Awesome Free by Fonticons, Inc.</li> <li>AI-Generated Faces by generated.photos</li> <li>NGC 1499 California Nebula by Remidone</li> <li>Prism Light Separation by digitalvosem</li> <li>Follow that light by Margeois</li> <li>Go Gopher designed by Renee French</li> <li>Gopher Stickers created by Takuya Ueda</li> </ul>"},{"location":"known-issues/","title":"Known Issues","text":"<p>PhotoPrism generally follows a zero-bug policy, which means that we do our best to provide a fix for every technical problem we learn about. However, sometimes this is not possible right away, for example because it needs to be fixed in a third-party library that our software depends on, or because it is a specific use case that we do not support at this time.</p> <p>GitHub Issues</p> <p>In order to improve readability and reduce maintenance effort, minor issues and recently reported bugs that we plan to fix in the short term are not listed here, but only in GitHub Issues. When browsing issues, please note that our team and all issue subscribers receive an email notification whenever a new comment is added, so these should only be used for sharing important information and not for discussions, questions, or expressing personal opinions. Thank you very much!</p>"},{"location":"known-issues/#self-hosted-setup","title":"Self-Hosted Setup","text":""},{"location":"known-issues/#shared-domain","title":"Shared Domain","text":"<p>Installation in a sub-directory on a shared domain is generally possible if you run your instance behind a reverse proxy. At the moment, this method is experimental. We do not recommend it because technical expertise is required and a number of specific issues still need to be addressed:</p> <ul> <li>Hosting: Resolve known issues when installing in a sub-directory on a shared domain #2391</li> </ul>"},{"location":"known-issues/#nested-import-folder","title":"Nested Import Folder","text":"<p>You must not configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files.</p> <p>Inexperienced users are advised to closely follow our documentation and to use the config examples we provide, as this issue can only occur with a custom setup.</p>"},{"location":"known-issues/#nested-storage-folder","title":"Nested Storage Folder","text":"<p>We recommend not to configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden.</p> <p>In older releases prior to 240420-ef5f14bc4, this could lead to an indexing loop by indexing thumbnails of already indexed files.</p>"},{"location":"known-issues/#symbolic-links","title":"Symbolic Links","text":"<p>Symbolic links to files and directories within the originals folder are supported if they are accessible from the environment in which your instance is running. However, you cannot mount a symbolic link as a storage folder or use links within the storage folder.</p>"},{"location":"known-issues/#authentication","title":"Authentication","text":""},{"location":"known-issues/#upgrading-from-previous-releases","title":"Upgrading From Previous Releases","text":"<p>Should you experience problems after upgrading from a previous release or development preview, we recommend running the <code>photoprism auth reset --yes</code> command in a terminal to reset the <code>auth_sessions</code> table to a clean state and force a re-login of all users. Note that this will also delete all client access tokens and any app passwords that users may have created.</p>"},{"location":"known-issues/#new-user-management","title":"New User Management","text":"<p>The session and user management was reimplemented in November 2022. If you are upgrading from a Development Preview with a build number between 221102-905925b4d and 220901-f493607b0, you will need to run the <code>photoprism users reset --yes</code> command in a terminal after the upgrade to recreate the new database tables so that they are compatible with the stable version. This will not affect your pictures or albums.</p> <p>Upgrading from the last stable version should work without any problems. However, if you have already created additional accounts with the previously offered unofficial multi-user support, you will notice that only the main admin account is migrated automatically. Run <code>photoprism users legacy</code> in a terminal to display the legacy accounts so you can migrate them manually if needed.</p>"},{"location":"known-issues/#openid-connect-oidc","title":"OpenID Connect (OIDC)","text":"<p>Changing the authentication of an existing user account to OIDC does not remove a previously set password, so that it can still be used to log in (optionally also in combination with 2FA).</p> <p>If a local password has been set for an account, you can remove it by running the <code>photoprism passwd --rm [username]</code> command in a terminal. Alternatively, super admins can set the account password to a long random value through the UI or CLI to effectively prevent local authentication.</p> <p>Please also note that you cannot change the authentication provider of your own account through the Admin UI, so you don't accidentally lock yourself out e.g. by setting it to \"none\".</p>"},{"location":"known-issues/#face-recognition","title":"Face Recognition","text":""},{"location":"known-issues/#legacy-hardware","title":"Legacy Hardware","text":"<p>Face recognition can be slow (or even crash) on old devices due to insufficient resources.</p> <p>Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p>"},{"location":"known-issues/#asian-faces-and-children","title":"Asian Faces and Children","text":"<p>It is a known issue that children and Asian-looking faces cannot be recognized reliably. Detection without automatic recognition should not be affected by that.</p> <p>This is because the model we use was trained with North American images, which unfortunately do not include many Asians. The absence of children in the training data comes from the fact that parents do not usually share such images under a public license (and may not have the right to do so).</p> <p>We will continue to improve our models over time as our resources allow.</p>"},{"location":"known-issues/#background-worker","title":"Background Worker","text":"<p>Face recognition was developed and tested under the assumption that the background worker runs every 15 minutes, unless the backend is busy with other tasks like indexing. It has not been tested with much longer intervals and is not designed for that.</p> <p>PhotoPrism's background worker groups new faces by similarity, compares faces with clusters, and optimizes existing clusters as needed. Without these routine tasks, the number of faces to be processed becomes too large. The first and next time the worker runs, it can then cause a heavy server load until all the faces, face clusters, and related pictures have been updated. The longer you wait, the more CPU is required and the longer it takes.</p> <p>An important reason for the worker to run independently of actual changes in the main instance is that some users change the database content directly or run additional instances, for example for indexing. It is a problem that can be solved, but it takes time. If we were to ignore this and don't run the worker at all times, it could lead to many additional support requests, further reducing the amount of time we can spend on development. </p> <p>The handling of changes in multiple instances will be improved over time so that the worker can be run less frequently in future releases.</p>"},{"location":"known-issues/#photos-with-all-faces-assigned-appear-under-new-faces","title":"Photos With All Faces Assigned Appear Under \u201cNew Faces\u201d","text":"<p>This can happen when multiple image files are grouped into a stack, for example, because they were taken at the same place and time, and stacking is enabled.</p> <p>Secondary images are not searched for faces by default. So the problem is limited to specific cases where you have manually changed the primary image or the images are stacked after detection, which may indicate more fundamental problems, e.g. with the metadata, filenames, or settings.</p> <p>One possible solution is to change the primary image of a stack to assign faces to the other images in the stack. You can also manually unstack these files and disable stacking in Settings &gt; Content. Note that files that are already stacked are not automatically unstacked when you change the stacking settings, and that Live Photos do not appear in Stacks because they are a special type of media that is always \"stacked\".</p>"},{"location":"known-issues/#removing-merged-clusters-fails","title":"Removing Merged Clusters Fails","text":"<p>Under certain conditions, inconsistent face assignments cannot be automatically resolved by the background worker, which can result in an unusually high CPU load when it is running:</p> <ul> <li>if you use multiple browser tabs or windows for assigning faces and don't wait until saving the changes is complete, the likelihood of this problem increases, especially if you accidentally enter different names for the same face</li> <li>another possible cause is running multiple instances (for example, parallel indexing workers started by a scheduler in the background) or modifying database content directly, as this may also lead to inconsistent faces, markers and subjects</li> <li>see Faces: Error \"Failed removing merged clusters for subject\" seems to cause tagging of faces to become slow #2806</li> </ul> <p>Running the following command in a terminal can resolve problems with inconsistent data:</p> <pre><code>docker compose exec photoprism photoprism faces audit --fix\n</code></pre> <p>It can also be helpful to manually check for inconsistent assignments and fix them in the user interface. Alternatively, you can use the <code>photoprism faces reset</code> command for a clean start if you haven't invested much time in assigning faces yet.</p> <p>Advanced users affected by this are welcome to privately provide us with a SQL dump of their subjects, faces, and markers database tables for debugging. Thank you very much!</p>"},{"location":"known-issues/#file-compatibility","title":"File Compatibility","text":""},{"location":"known-issues/#jpeg-bad-rst-marker","title":"JPEG: Bad RST Marker","text":"<p>This error can occur when decoding JPEG images that contain consecutive 0xFF bytes, e.g. images that have a \"glich\" (like a few lines of missing image information at the end) or were created with software that inserts them for padding, although this is based on an edge case of the specification and rather uncommon:</p> <ul> <li>Bug: (invalid JPEG format: bad RST marker) #1673</li> <li>image/jpeg: \"bad RST marker\" error when decoding #40130</li> <li>JPEG: Automatically check and repair broken/invalid images #2463</li> </ul>"},{"location":"known-issues/#raw-converters","title":"RAW Converters","text":""},{"location":"known-issues/#jpeg-size-limit","title":"JPEG Size Limit","text":"<p>RawTherapee and \"heif-convert\" cannot limit the resolution of JPEG files when converting files from other formats such as RAW, DNG, HEIC or AVIF. In general, when converting images, the resolution of the generated JPEG files can be limited with the environment variable <code>PHOTOPRISM_JPEG_SIZE</code> or the CLI parameter <code>--jpeg-size</code>.</p> <p>However, this does not work with certain converters because, unlike Darktable, they do not support CLI options to limit JPEG size:</p> <ul> <li>RAW: PHOTOPRISM_JPEG_SIZE is ignored when converting RAW with RawTherapee #2446</li> </ul> <p>It would probably also hurt indexing performance and image quality if PhotoPrism reduced the size of the generated file after conversion, for example, by using a temporary file.</p> <p>As a result, this option is ignored when generating JPEG files with these converters. Whether RawTherapee or \"heif-convert\" are used depends on additional settings such as <code>PHOTOPRISM_DARKTABLE_BLACKLIST</code>, <code>PHOTOPRISM_DISABLE_DARKTABLE</code>, <code>PHOTOPRISM_RAWTHERAPEE_BLACKLIST</code>, and <code>PHOTOPRISM_DISABLE_RAWTHERAPEE</code>.</p>"},{"location":"known-issues/#docker-compose","title":"Docker Compose","text":""},{"location":"known-issues/#dollar-signs","title":"Dollar Signs","text":"<p>If a configuration value in a <code>compose.yaml</code> or <code>docker-compose.yml</code> file contains a literal <code>$</code> character, for example in a password, you must use <code>$$</code> (a double dollar sign) to escape it so that e.g. <code>\"compo$e\"</code> becomes <code>\"compo$$e\"</code>:</p> <pre><code>services:\n  mariadb:\n    environment:\n      # sets password to \"compo$e\"\n      MARIADB_PASSWORD: \"compo$$e\"\n</code></pre> <p>Values that contain a <code>$</code> are otherwise interpreted as a variable. In this case, both the <code>$VARIABLE</code> and the <code>${VARIABLE}</code> syntax are supported. Further details on the use of variables can be found in the file format reference.</p>"},{"location":"known-issues/#true-false","title":"True / False","text":"<p>Boolean variable values like \"true\", \"false\", \"yes\", \"no\", \"on\", or \"off\" must be enclosed in double or single quotes so that they are passed as intended:</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_DEFAULT_TLS: \"true\"\n      PHOTOPRISM_READONLY: \"false\"\n</code></pre> <p>If you otherwise specify <code>true</code> as a value without quotes, Docker Compose will pass the host variable of the same name to the container instead of setting the value to \"true\" (results in an empty string if no environment variable with the same name is set on the host):</p> <pre><code>services:\n  photoprism:\n    environment:\n      # evaluated as \"\" (false)\n      PHOTOPRISM_READONLY: true\n</code></pre>"},{"location":"known-issues/#reporting-bugs","title":"Reporting Bugs","text":"<p>Before reporting a bug, first use our Troubleshooting Checklists to determine the cause of your problem. If you have a general question, need help, it could be a configuration issue, or a misunderstanding in how the software works:</p> <ul> <li>you are welcome to ask in our Community Chat</li> <li>or post your question in GitHub Discussions</li> </ul> <p>In order for us to investigate new bug reports, they must include a complete list of steps to reproduce the problem, the software versions used and information about the environment in which the problem occurred, such as browser type, browser version, browser plug-ins, operating system, storage type, processor type, and memory size.</p> <p>A template for creating bug reports can be found at photoprism.app/kb/reporting-bugs. We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>When browsing issues, please note that our team and all issue subscribers receive an email notification from GitHub whenever a new comment is added, so these should only be used for sharing important information and not for discussions, questions, or expressing personal opinions. Thank you very much!</p>"},{"location":"release-notes/","title":"Release Notes","text":"<p>You can test upcoming features and enhancements by changing the image tag from <code>:latest</code> to <code>:preview</code> and then following our update guide to download the newest image from Docker Hub and restart your instance.</p>"},{"location":"release-notes/#development-preview","title":"Development Preview","text":"<p>Build 250816-519a6ab34</p> <p>Our preview builds give you early access to additional features and enhancements that will be part of the next stable release. Learn more \u203a</p> <p>What's new?</p> <ul> <li>AI: Added support for using alternative image classification models by @raystlin</li> <li>AI: Added support for generating captions using the Ollama API by @lastzero</li> <li>AI: Improved vision model configuration and <code>photoprism vision run</code> command</li> <li>Auth: 2FA can be activated, even if the recovery code cannot be copied</li> <li>Search: Added a reverse sort query parameter for initial testing (work in progress)</li> <li>Index: Selecting \"Complete Rescan\" refreshes the detected media types</li> <li>Index: Underlying errors are logged when file type detection fails</li> <li>Intel QSV: <code>libvpl2</code> will be installed when <code>PHOTOPRISM_INIT</code> includes \"intel\"</li> <li>API: Corrected handling of CORS preflight requests by @techmatt101</li> <li>Config: <code>PHOTOPRISM_DISABLE_FRONTEND</code> disables the web user interface</li> <li>Setup: Updated <code>compose.yaml</code> configuration examples</li> <li>Docker: Preinstalled <code>libmagic-mgc</code> package for file type detection</li> <li>Security: Updated Go to v1.24.6, which includes fixes and improvements</li> <li>Translations: Updated Spanish and Vietnamese</li> </ul> <p>Missing user interface translations have been generated with the help of DeepL and Google Translate. Native speakers are welcome to help us improve them where needed.</p>"},{"location":"release-notes/#july-7-2025","title":"July 7, 2025","text":"<p>Build 250707-d28b3101e</p> <p>This release adds support for using Ollama models in the Vision AI service, improves search performance, and introduces an \"Adjust Location\" dialog for setting photo coordinates on a map. Users can now delete albums from the toolbar and customize the language of location details. Video and metadata handling have been refined, with updates to transcoding, scanner detection, and CLI tools. A fix for SQLite index updates is also included. Batch editing features are in final development and will be available in an upcoming release. As always, a big thank you to everyone who contributed and helped with testing! </p> <p>What's new?</p> <ul> <li>AI: Added Ollama model and data URL support to the Vision Service by @sgflt</li> <li>UX: Added \"Adjust Location\" dialog to set coordinates on a map by @omerdduran</li> <li>UX: Added \"Delete Album\" action to the album toolbar menu by @omerdduran</li> <li>UX: Optimized thumbnail rendering performance in result views by @lastzero</li> <li>Places: Added a config option to set the language of location details</li> <li>Viewer: Fixed timezone handling in the information sidebar by @omerdduran</li> <li>Viewer: Seeking disables looping when playing a short video</li> <li>Videos: Added config options for transcoding preset, quality, and device</li> <li>Videos: Fixed playback when using QSV to transcode HEVC files</li> <li>Videos: Short videos up to 3 seconds are no longer classified as Live Photos</li> <li>Motion Photos: Fixed playback of videos embedded in Samsung HEIF files</li> <li>Metadata: Updated list of unwanted descriptions by @srett</li> <li>Metadata: Improved scanner detection based on device make and model</li> <li>Metadata: Fixed an issue that prevented changing the day to \"Unknown\" in February</li> <li>Labels: Updated Animal and Snow label category assignments</li> <li>Upload: Improved token used to distinguish simultaneous uploads by @raxod502</li> <li>CLI: Added <code>photoprism dl</code> command to import media from a URL</li> <li>CLI: Fixed an error in the backup command when a custom filename is specified</li> <li>API: Added a Content-Type header to the metrics endpoint by @brandon1024</li> <li>API: Authorized clients are allowed to create album share links</li> <li>SQLite: Fixed \"'too many SQL variables'\" error on index updates by @keif888</li> <li>Security: Updated Go to v1.24.4, which includes fixes and improvements </li> <li>Translations: Updated Arabic, French, German, and Japanese</li> </ul> <p>Missing user interface translations have been generated with the help of DeepL and Google Translate. Native speakers are welcome to help us improve them where needed.</p>"},{"location":"release-notes/#april-26-2025","title":"April 26, 2025","text":"<p>Build 250426-27ec7a128</p> <p>This update adds preinstalled Linux Video Acceleration API (VAAPI) drivers and fixes the package names in the Intel QSV hardware driver installation script. \ud83d\udd27</p> <p>We have also fixed the .deb and .rpm installation package builds as an alternative to the plain .tar.gz packages attached to this release. Note that these are intended for experienced users and third-party integration maintainers only, as they require manual configuration and do not include tested system dependencies. Since we are unable to provide support for custom installations, we recommend using one of our Docker images to run PhotoPrism on a private server or NAS device. \ud83d\udce6</p> <p>What's new?</p> <ul> <li>Videos: Fixed hardware driver installation for Intel QSV</li> <li>Setup: Fixed .deb and .rpm installation package builds</li> </ul>"},{"location":"release-notes/#april-25-2025","title":"April 25, 2025","text":"<p>Build 250425-21ddba459</p> <p>This release includes a long list of enhancements and new features, many of them contributed by our community. Most notably, performance has been significantly improved in many areas, we have added a collapsible info sidebar to the fullscreen viewer, it is possible to choose a specific picture as album cover, and you can configure computer vision tasks like image classification to use an external service for scalability and customization. A big THANK YOU to everyone who submitted pull requests, improved translations, or helped with testing! </p> <p>Important Changes</p> <ul> <li>To take advantage of the performance improvements in TensorFlow 2, users of our Docker images can set the <code>PHOTOPRISM_INIT</code> variable to <code>\"tensorflow\"</code>. This will automatically detect, download, and install a version of TensorFlow optimized for your CPU.</li> <li>If you are using one of our manual installation packages, you can find libtensorflow binaries optimized for AMD64 and ARM64 CPUs on our download server. Updated libheif binaries for HEIC/HEIF image support are also available.</li> <li>A 32-bit version for Raspberry Pis with an ARMv7 CPU is no longer part of our regular releases, as TensorFlow 2 does not run on them. We have therefore created an ARMv7 architecture branch with an irregular release schedule and welcome contributions.</li> </ul> <p>What's new?</p> <ul> <li>AI: Upgraded Google TensorFlow from v1.15.2 to v2.18.0 by @raystlin</li> <li>AI: Vision API allows remote use of other instances and models</li> <li>UX: Reduced frontend bundle size by 54% for faster loading by @AsikNasik</li> <li>UX: Asynchronous updates improve backend responsiveness by @tschechniker</li> <li>UX: Arrow keys can be used to navigate in the Edit dialog by @tomplast</li> <li>UX: Added additional keyboard shortcuts with usage hints in action menus</li> <li>UX: Improved focus management for more reliable keyboard event handling</li> <li>UX: Disabled animation when refreshing search results to prevent flickering</li> <li>UX: User interface language can be changed on the login page</li> <li>UX: Fixed incorrect spelling in log messages by @yarikoptic</li> <li>People: Improved performance and strategy for manual tagging by @theshadow27</li> <li>Search: Find pictures with specific or no terms in Title and Caption</li> <li>Search: Result views are reset when there are no matches or an error occurs</li> <li>Viewer: Added a collapsible sidebar for displaying metadata by @omerdduran</li> <li>Viewer: Added a new menu control in the top bar for additional actions</li> <li>Viewer: Added \"Set as Album Cover\" and Archive/Restore actions to the menu</li> <li>Viewer: Fixed opening pictures from randomly sorted search results</li> <li>Viewer: Optimized thumbnail size selection for high aspect ratios</li> <li>Videos: Transcoding creates fragmented MP4s optimized for streaming</li> <li>Videos: Fixed Intel Quick Sync Video (QSV) hardware transcoding by @hicasper</li> <li>Videos: Improved transcoding and indexing logs by @Akashic101</li> <li>Places: Improved styles, colors, and mountain shading of the default world map</li> <li>Upload: Added support for uploading multiple pictures as a zip archive</li> <li>Upload: File extensions and total size of Web uploads can be restricted</li> <li>Import: Hidden <code>.keep</code> and <code>.gitkeep</code> files are preserved by @zhzy0077</li> <li>WebDAV: Added <code>Depth</code> header to improve service discovery by @esteve</li> <li>Config: Passwords and secrets can be read from files by @petertrr</li> <li>Setup: Improved inline documentation in compose.yaml examples</li> <li>Docker: Upgraded Ubuntu 25.04 (Plucky Puffin) base image includes FFmpeg v7.1.1, Darktable v5.0.1, RawTherapee v5.11, ExifTool v13.10, and libheif v1.19.7</li> <li>Security: Go has been updated to v1.24.2, which includes fixes and improvements </li> <li>Translations: Updated Arabic, French, and German</li> </ul>"},{"location":"release-notes/#march-21-2025","title":"March 21, 2025","text":"<p>Build 250321-57590c48b</p> <p>This release includes some major usability enhancements, PDF file format support, the latest translations contributed by our community, and fixes for recently discovered issues. With the UI update now largely complete, we know that many users will be excited to hear that after this release, our development focus will shift to batch editing, as well as improved multi-user and AI capabilities. We've been very much looking forward to this, and it's a great feeling to finally get started! \ud83e\udd16</p> <p>What's new?</p> <ul> <li>UX: Search toolbars and tabs remain visible while scrolling</li> <li>UX: Users can choose their Start Page and Time Zone in Settings</li> <li>UX: Disk usage can be limited and displayed in sidebar navigation</li> <li>UX: Metadata displayed in the Cards View can be configured</li> <li>UX: Improved List View layout for easier selection</li> <li>Index: Added file format support for Adobe PDF documents</li> <li>Albums: Added file name and file type settings for zip downloads</li> <li>Albums: Added default sort order settings for each album type</li> <li>Videos: Added codec search filter and Nvidia GPU detection</li> <li>Labels: Fixed searching for labels that consist only of emojis</li> <li>Upload: Fixed an issue that could cause the same album to be created multiple times</li> <li>WebDAV: File downloads are flagged as failed when retry limit is reached</li> <li>MariaDB: Added version check to determine zero-configuration SSL support</li> <li>Translations: Updated Chinese (Simplified), French, German, Turkish, and Ukrainian</li> <li>Security: Go has been updated to v1.24.1, which includes fixes and improvements</li> </ul>"},{"location":"release-notes/#february-28-2025","title":"February 28, 2025","text":"<p>Build 250228-43447fa38</p> <p>With this update, you'll get additional usability and performance improvements, as well as a new thumbnail size for Retina 5K displays that bridges the gap between 4K and 8K. We would also like to take this opportunity to thank our community, whose support has been and continues to be essential to the success of the project! \ud83c\udf08\ud83d\udc8e\u2728</p> <p>What's new?</p> <ul> <li>UX: Added menu action button for archiving pictures from albums</li> <li>UX: Upload to WebDAV menu action only appears if sharing is enabled</li> <li>Viewer: Content preloading is less eager to reduce server load</li> <li>Viewer: Fullscreen toggle is always visible in experimental mode</li> <li>Viewer: Added a new thumbnail size suitable for Retina 5K displays</li> <li>Videos: M4V container files are assumed to be MP4 compatible</li> <li>Places: Browser scrollbar stays hidden when cluster view is open</li> </ul>"},{"location":"release-notes/#february-24-2025","title":"February 24, 2025","text":"<p>Build 250224-834c16bc7</p> <p>This service release changes the default thumbnail size in the Photo/Video Viewer to improve loading and swiping performance, especially on mobile Retina displays. It also includes updated translations and dependencies.</p> <p>What's new?</p> <ul> <li>Viewer: Changed thumbnail size calculation for improved performance</li> </ul>"},{"location":"release-notes/#february-23-2025","title":"February 23, 2025","text":"<p>Build 250223-b79d21907</p> <p>This major new release features an updated user interface with many usability enhancements and new features, such as a hybrid photo and video viewer that replaces the dedicated video player, a redesigned edit dialog that is more responsive and easier to use, and an immersive 3D Earth view in Places. It also includes dozens of layout optimizations for right-to-left languages.</p> <p>It's been a long road to get here, as we've put a lot of effort into quality and detail, and welcomed new team members along the way. So thank you for your patience while we got this ready for you, and we hope you enjoy the new look and features as much as we do! \ud83d\udc68\u200d\ud83d\ude80\ud83d\ude80\u2728</p> <p>Breaking Changes</p> <ul> <li>It is recommended that you perform a complete rescan of your library after upgrading, as otherwise videos that do not require transcoding may be transcoded during playback due to missing metadata, resulting in high CPU and disk usage. Learn more \u203a</li> </ul> <p>What's new?</p> <ul> <li>UX: Updated user interface with many new features and enhancements</li> <li>UX: Edit dialog has been redesigned to be more mobile and user-friendly</li> <li>UX: New hybrid photo and video viewer replaces dedicated video player</li> <li>Viewer: Higher resolution thumbnails are used when zooming into an image</li> <li>Viewer: Videos are played automatically when a slideshow is running</li> <li>Search: Cards view and mosaic view show the video duration on thumbnails</li> <li>Search: Cards view always shows the filename and camera details for videos</li> <li>Places: Added a 3D Earth view mode that can be enabled for any map</li> <li>Places: Upgraded MapLibre GL JS library from v3.6 to v5.1 by @QyuBee</li> <li>Places: Locations are no longer estimated for non-photographic pictures</li> <li>Places: Updated reverse geocoding data to include corrections from OSM</li> <li>Metadata: Labels are set based on matching keywords in title, subject and caption</li> <li>Metadata: Improved recognition of images created by digital film scanners</li> <li>Metadata: Numerals are preserved in titles generated from file and folder names</li> <li>Import: Advanced users can configure a custom destination file path pattern</li> <li>Settings: Fixed Windows resource string in WebDAV dialog when using HTTPS</li> <li>API: <code>Description</code> field has been renamed to <code>Caption</code> in <code>/photos</code> endpoints</li> <li>CLI: Added a <code>users</code> command flag to find and restore deleted user accounts</li> <li>Setup: Renamed <code>docker-compose.yml</code> config examples to <code>compose.yaml</code></li> <li>Config: Added options to recreate Unix server socket and set permissions</li> <li>Docker: Replaced entrypoint script for graceful server shutdown and restart</li> <li>Docker: Base image has been upgraded from Ubuntu 24.04 to 24.10 (Oracular Oriole)</li> <li>Docker: NAS devices running a very old Linux kernel can use the <code>:legacy</code> image</li> <li>Security: Added <code>X-Robots-Tag</code> header and <code>robots.txt</code> file to control crawlers</li> <li>Security: Go has been upgraded to v1.24, which includes fixes and improvements </li> </ul>"},{"location":"release-notes/#september-15-2024","title":"September 15, 2024","text":"<p>Build 240915-e1280b2fb</p> <p>This update includes improved HEIC file support for iOS 18 compatibility, updated dependencies and translations, UX enhancements, and fixes for recently discovered issues. Please note that a complete re-scan of your library is required to increase the GPS location accuracy of pictures, e.g. under Places. A big thank you to everyone who contributed and helped with testing! \ud83d\udef0\ud83c\udf0e</p> <p>What's new?</p> <ul> <li>HEIC: Improved <code>.heic</code> image file support for compatibility with iOS 18</li> <li>Search: Sidecar files are no longer shown in the results when sorting by file size</li> <li>Archive: Recently archived pictures are displayed first by default</li> <li>Places: Fixed an issue where no pictures were found when clicking on clusters</li> <li>Library: Removed the archive button from the action menu under Library &gt; Hidden</li> <li>API: Fixed an issue where update requests could fail silently in case of database errors</li> <li>API: Added interactive Swagger developer documentation with examples</li> <li>Security: Go has been updated to v1.22.7, which includes security and bug fixes </li> <li>Translations: Added Irish (Gaeilge) and updated Basque, French and German</li> </ul>"},{"location":"release-notes/#july-11-2024","title":"July 11, 2024","text":"<p>Build 240711-2197af848</p> <p>Our latest update adds support for single sign-on via OpenID Connect (OIDC). We would like to thank everyone who contributed to this, especially Timo Volkmann, who got things rolling and did much of the necessary work! \ud83c\udf08</p> <p>What's new?</p> <ul> <li>Auth: Added support for single sign-on via OpenID Connect (OIDC)</li> <li>Index: Slashes and null bytes are trimmed from <code>.ppignore</code> patterns</li> <li>Videos: Added support for MPEG-5 Essential Video Coding (EVC)</li> <li>Videos: Added filter to transcode 10bit videos with Intel QSV</li> <li>CLI: Local passwords can be removed with <code>photoprism passwd --rm</code></li> <li>Security: Go has been updated to the latest stable release v1.22.5 </li> <li>Translations: Updated French and Japanese</li> </ul>"},{"location":"release-notes/#may-31-2024","title":"May 31, 2024","text":"<p>Build 240531-60b3a4628</p> <p>With this update, you can choose to install FFmpeg 7 for faster software video transcoding. You also get the latest translations contributed by our community as well as improved backup commands and configuration defaults.</p> <p>What's new?</p> <ul> <li>Videos: You can choose to install FFmpeg 7.0 for faster transcoding</li> <li>MariaDB: Backup and restore commands support socket connections</li> <li>Config: Increased auto-index delay and disabled auto-import by default</li> <li>Translations: Updated Japanese</li> </ul>"},{"location":"release-notes/#may-28-2024","title":"May 28, 2024","text":"<p>Build 240528-977d6c0de</p> <p>This service release reduces the server load when downloading many files, expands the list of available config options, and gets you the latest translations contributed by our community.</p> <p>What's new?</p> <ul> <li>Download: Zip archives are not compressed to reduce server load</li> <li>Search: Added <code>added</code>, <code>updated</code> and <code>edited</code> search filters for app developers</li> <li>Config: Replaced the terms whitelist and blacklist with alternatives</li> <li>Config: New feature flag <code>PHOTOPRISM_DISABLE_BACKUPS</code> disables all backups</li> <li>Config: New feature flag <code>PHOTOPRISM_DISABLE_VIPS</code> disables the use of libvips</li> <li>Config: Due to compatibility issues, libvips is disabled on 32-bit operating systems</li> <li>Setup: Improved .deb packages for installation on Ubuntu/Debian Linux</li> <li>Setup: Improved AUR packages for installation on Arch Linux (Thomas Eizinger)</li> <li>Translations: Updated French and German</li> </ul>"},{"location":"release-notes/#may-23-2024","title":"May 23, 2024","text":"<p>Build 240523-923ee0cf7</p> <p>This update adds a scheduler so you can easily create database backups and re-index your library at regular intervals. It also includes many updated dependencies and support for ICC color profiles, which especially benefits Apple iPhone and professional users working with color spaces other than sRGB. \ud83c\udfa8</p> <p>Important Changes</p> <ul> <li>If you keep the default settings, daily database backups will be automatically created, with up to 3 backup files being retained. This is to prevent the available storage space from filling up. We recommend setting the corresponding config options before installing the update if you want to disable scheduled backups, keep more backup files, or prefer a specific time for creating backups. The previously available <code>--disable-backups</code> flag has been deprecated in favor of these finer-grained options.</li> <li>In order to preserve ICC color profiles and reduce memory usage, new thumbnails will be generated with the <code>libvips</code> image processing library. You can run the <code>photoprism thumbs -f</code> command in a terminal to regenerate your existing thumbs as needed, or delete the <code>storage/cache/thumbnails</code> folder and then re-index your library. To continue using the native image processing library, set <code>PHOTOPRISM_THUMB_LIBRARY</code> to <code>\"imaging\"</code> in your <code>compose.yaml</code> or <code>docker-compose.yml</code> configuration file. If you build from source or use one of our binary installation packages, the system on which you build and/or run PhotoPrism must have <code>libvips</code> &gt;= 8.10 installed.</li> </ul> <p>What's new?</p> <ul> <li>Colors: Added libvips support to preserve ICC profiles in thumbnails</li> <li>Search: Clicking on a timestamp finds pictures taken on the same day</li> <li>Search: Added a sort option to order search results by picture title</li> <li>Review: Photos are automatically approved when adding them to an album</li> <li>People: Faces tagged on private or archived pictures will be ignored</li> <li>Index: <code>*.thm</code> thumbnail files are not used as primary image anymore</li> <li>Index: Added a config option for scheduling automatic library rescans</li> <li>Index: Improved recovery of metadata from sidecar YAML files</li> <li>Upload: Improved ETA display when using the web upload dialog</li> <li>Backups: Added config options for creating backups at regular intervals</li> <li>Moments: Background worker no longer creates backups to avoid disk activity</li> <li>Docker: Upgraded base image from Ubuntu 23.10 to Ubuntu 24.04 LTS</li> <li>Security: Go has been updated to the latest stable release v1.22.3</li> <li>Translations: Updated Chinese (traditional), Danish, French, and German</li> </ul>"},{"location":"release-notes/#april-20-2024","title":"April 20, 2024","text":"<p>Build 240420-ef5f14bc4</p> <p>Our new stable release comes with a long list of indexing and security-related improvements. Most notably, we've added support for 2-Factor Authentication (2FA) to protect your account in case someone gains access to your password. As all security-related changes had to be thoroughly tested, this is one of the updates that were longer in the making. We appreciate your patience while we've been working on this and would like to thank everyone involved! \ud83d\udd10</p> <p>What's new?</p> <ul> <li>Account: Added support for 2-Factor Authentication (2FA)</li> <li>Account: Added dialog to manage App Passwords from the UI</li> <li>Places: Updated reverse geocoding data and standard map tiles</li> <li>Albums: Fixed links to albums in the settings tab of the edit dialog</li> <li>Photos: Non-JPEG files like HEIC are no longer flagged as stacks in the UI</li> <li>Videos: Improved Intel QSV hardware transcoding support and performance</li> <li>Videos: Added support for Material Exchange Format (MXF) files</li> <li>UI/UX: Improved visibility of buttons and toggles in search results</li> <li>Index: A warning is shown for files with an invalid filename extension</li> <li>Index: Nested storage folders within the originals path are ignored</li> <li>Import: Modification times are preserved when moving or copying files</li> <li>Metadata: Media files with a matching <code>ContentIdentifier</code> can be stacked</li> <li>Metadata: File mod time instead of birth time is used as creation time fallback</li> <li>Metadata: Improved validation for focal length, f-number, and exposure values</li> <li>Metadata: Stop words are no longer ignored when generating titles from filenames</li> <li>WebDAV: File modification date is preserved if client submits an <code>X-OC-MTime</code> header</li> <li>API: Added support for OAuth2 Client Credentials and Access Tokens</li> <li>API: Added Prometheus-compatible metrics and monitoring endpoint</li> <li>CDN: Improved Cross-Origin Resource Sharing (CORS) and cache headers</li> <li>MariaDB: Info log is shown when waiting for the database to become available</li> <li>MariaDB: Changed image name in Docker Compose config example for ARMv7</li> <li>Docker: Missing user accounts are automatically created by the entrypoint script</li> <li>Setup: Added ARMv7 <code>tar.gz</code> packages for installation without Docker</li> <li>Performance: Added index for <code>files.file_error</code> to reduce query time</li> <li>Security: Go has been updated to the latest stable release v1.22.2</li> </ul>"},{"location":"release-notes/#november-28-2023","title":"November 28, 2023","text":"<p>Build 231128-f48ff16ef</p> <p>Our latest service release provides updated dependencies and fixes for recently discovered issues. In addition, official installation packages with binaries for Linux are now available as an alternative to our Docker images. Please note that only experienced users should choose this installation method, since these do not include all dependencies and need to be set up manually.</p> <p>What's new?</p> <ul> <li>Search: Improved camera and lens information in the cards view details</li> <li>Search: Fixed cards view rendering when a lens has no model description</li> <li>Search: Added filter to find pictures by resolution range in Megapixels (MP)</li> <li>PWA: Fixed list of available icon sizes in the app manifest file</li> <li>JPEG: Fixed regression when handling image files with EOF error</li> <li>JPEG: Fixed indexing of image files with invalid color metadata</li> <li>JPEG/PNG: Added panic handler for unexpected thumbnail save errors</li> <li>HEIC: Libheif has been upgraded from version 1.13.0 to 1.17.1</li> <li>RAW: Darktable has been upgraded from version 4.2.1 to 4.4.2</li> <li>Videos: Improved performance when extracting still images for creating thumbnails</li> <li>Vectors: Improved SVG conversion using RSVG instead of ImageMagick</li> <li>Docker: Base image has been upgraded from Ubuntu 23.04 to 23.10 (Mantic Minotaur)</li> <li>Setup: Added <code>tar.gz</code>, <code>deb</code> and <code>rpm</code> packages for installation without Docker</li> <li>Security: Go has been updated to the latest stable release v1.21.4</li> </ul>"},{"location":"release-notes/#october-21-2023","title":"October 21, 2023","text":"<p>Build 231021-9abea5b55</p> <p>This update adds search filters for finding pictures by ISO number, focal length, aperture, and altitude. It also includes a number of user interface improvements, updated translations, as well as fixes for recently discovered issues. We would like to thank everyone who submitted pull requests, helped with testing, or contributed in other ways! \u2728</p> <p>What's new?</p> <ul> <li>Search: Added filters for ISO number, focal length, and aperture range</li> <li>Search: Added <code>alt:...</code> filter to find pictures by altitude range</li> <li>Search: Cards view shows ISO number, focal length, aperture, and exposure</li> <li>Live Photos: Fixed Google HEVC motion photo playback and transcoding</li> <li>Live Photos: Improved indexing of related files with vendor-specific naming schemes</li> <li>Metadata: Updated offline map data for more accurate timezone lookups</li> <li>Metadata: Creation time is calculated with UTC offset if timezone is unknown</li> <li>Config: Creation of default certificate is skipped if HTTPS/TLS is disabled</li> <li>Translations: Updated German, Greek, and Romanian</li> </ul>"},{"location":"release-notes/#october-11-2023","title":"October 11, 2023","text":"<p>Build 231011-63f708417</p> <p>This service release includes an updated ARMv7 build, a number of usability improvements requested by our community, and fixes for recently discovered issues. We would like to thank everyone involved!</p> <p>What's new?</p> <ul> <li>PWA: Fixed automatic screen orientation in Google Chrome on Android</li> <li>Upload: Current album is preselected when using the mobile nav menu</li> <li>Videos: Creation of thumbnails can only be disabled in experimental mode</li> <li>Settings: Ability to permanently delete files is now enabled by default</li> <li>RAW/HEIC: Original media information is shown in the cards view details</li> <li>Live Photos: Embedded video files can be streamed and transcoded</li> <li>Metadata: Improved camera make and model name normalization</li> <li>Docker: An updated ARMv7 image is available on Docker Hub</li> <li>Security: Go has been updated to the latest stable release v1.21.3</li> </ul>"},{"location":"release-notes/#september-23-2023","title":"September 23, 2023","text":"<p>Build 230923-e59851350</p> <p>Our latest release includes a redesigned Places view, with the search box moved to the top and a preview for selected clusters at the bottom. We've also added support for Samsung/Google Motion Photos, so you can view them like Apple Live Photos after re-indexing your library. Beyond those highlights, you'll get many usability improvements, new search filters, and fixes for recently discovered issues. A big thank you to everyone who contributed!</p> <p>What's new?</p> <ul> <li>UX: Added a preview image to the Labels tab in the photo edit dialog</li> <li>UX: Reduced padding in mosaic view in favor of larger thumbnails</li> <li>UX: Edit dialog allows pasting latitude and longitude in a single operation</li> <li>UX: Reduced the number of info notifications in the user interface</li> <li>UX: Improved user interface styles, added new \"Chrome\" and \"Mint\" themes</li> <li>Search: Added <code>scan:false</code> filter to find photos that are not scans</li> <li>Search: Added <code>favorite:false</code> filter to find pictures not marked as favorites</li> <li>Albums: New share preview shows album contents as a stack of Polaroids</li> <li>Albums: Fixed preview image URL when sharing album links</li> <li>Albums: Current album is preselected when opening the upload dialog</li> <li>Albums: Last edited timestamp is updated when pictures are added</li> <li>People: Fixed an error when reusing the name of a previously deleted person</li> <li>Places: Added cluster view to browse pictures close to each other in an overlay</li> <li>Places: Added support sub-km distances when searching for locations</li> <li>Places: Added support for the <code>label</code> and <code>category</code> search filters</li> <li>Places: Added map style selector and a scale for comparing distances</li> <li>Archive: Added \"Delete All\" button to permanently delete all archived files</li> <li>Library: Added option for admins to perform index and cache cleanup from the UI</li> <li>Library: Fixed escaping of hash characters in folder names</li> <li>Live Photos: Added support for Samsung Motion Photos</li> <li>Live Photos: Added support for Google Camera Motion Photos</li> <li>Live Photos: Fixed indexing of sidecar video file properties</li> <li>Videos: Added support for AMD GPUs in <code>install-gpu.sh</code> script</li> <li>Videos: Removed deprecated FFmpeg <code>-vsync vfr</code> command flag</li> <li>Metadata: Changed order of field names from which the title is extracted</li> <li>Metadata: Added support for reading fstop favorite flag from XMP sidecar files</li> <li>Metadata: Samsung/Google Motion Photos are flagged as Live Photos</li> <li>Config: Added support for serving HTTP requests over Unix sockets</li> <li>Config: A lower cache duration can be set for video content</li> <li>SQLite: Updates are performed in batches to limit the number of variables</li> <li>Docker: Added support for user ID ranges 1201-1250 and 2000-2100</li> <li>Security: Reduced bcrypt cost for faster login on small devices</li> <li>Security: Go has been updated to the latest stable release v1.21.1</li> <li>Translations: Updated Chinese (Simplified and Traditional)</li> </ul>"},{"location":"release-notes/#july-19-2023","title":"July 19, 2023","text":"<p>Build 230719-73fa7bbe8</p> <p>Our latest release includes new features and enhancements contributed by our community, a number of security improvements, as well as fixes for recently discovered issues. Thank you to everyone who submitted pull requests, helped with testing, signed up as a member, or contributed in other ways! We appreciate it very much.</p> <p>What's new?</p> <ul> <li>Setup: Added a batch script for simplified installation under Windows</li> <li>Search: Added <code>geo:false</code> filter to find pictures without GPS coordinates</li> <li>Photos: JPEG files with missing EOI marker are automatically repaired</li> <li>Photos: Fixed an error when opening panoramas taken with a Samsung S21</li> <li>Videos: Added a config option to limit the resolution of transcoded videos</li> <li>Videos: Fixed container and codec checks in <code>photoprism convert</code> command</li> <li>Metadata: Dates in WhatsApp generated file names can be parsed</li> <li>Metadata: Year 0000 is mapped to 0001 when parsing dates from Exiftool</li> <li>Security: Default to a self-signed HTTPS/TLS certificate if no other certificate is available</li> <li>Security: Clipboard contents are cleared on logout and when user privileges change</li> <li>Security: Go has been updated to v1.20.6, which includes bug fixes and enhancements</li> <li>Translations: Updated Japanese</li> </ul> <p>We recommend that you explicitly disable TLS by adding <code>PHOTOPRISM_DISABLE_TLS: \"true\"</code> to your <code>compose.yaml</code> or <code>docker-compose.yml</code> file when running PhotoPrism behind a reverse proxy. HTTPS could otherwise be accidentally enabled if a certificate matching the site URL is found or <code>PHOTOPRISM_DEFAULT_TLS</code> is set to <code>\"true\"</code>. </p>"},{"location":"release-notes/#june-25-2023","title":"June 25, 2023","text":"<p>Build 230625-17242fb07</p> <p>This service release includes the latest translations contributed by our community, as well as fixes for recently discovered issues.</p> <p>What's new?</p> <ul> <li>Albums: Invalid entries are automatically hidden and flagged as missing</li> <li>CLI: Fixed an issue where entering a very long password could disable the login</li> <li>Security: Updated third-party dependencies in backend and frontend</li> <li>Translations: Updated Chinese (Simplified), Italian, and Japanese</li> </ul>"},{"location":"release-notes/#june-15-2023","title":"June 15, 2023","text":"<p>Build 230615-90a18f6e7</p> <p>This update includes new features and enhancements contributed by our community, as well as fixes for recently discovered issues. We would like to thank everyone involved!</p> <p>What's new?</p> <ul> <li>Photos: Related albums are displayed in the Info tab of the edit dialog</li> <li>Photos: Added a link from the Files tab to the related folder in the file browser</li> <li>Moments: Added labels to match Holidays as well as additional Pets</li> <li>CLI: Added <code>photoprism find</code> command to search the index for specific files</li> <li>CLI: Fixed the <code>photoprism import</code> command destination parameter type</li> <li>PikaPods: Fixed an issue that caused newly deployed instances to require a restart</li> <li>Security: Updated third-party dependencies in backend and frontend</li> </ul>"},{"location":"release-notes/#june-7-2023","title":"June 7, 2023","text":"<p>Build 230607-9e086c7eb</p> <p>With this much anticipated update, our new high-resolution vector world map becomes available to all users. It also features a special terrain mode for mountain lovers, so you can view the \"Satellite\", \"Outdoor\" and \"Topography\" maps in 3D!</p> <p>What's new?</p> <ul> <li>Places: Improved the level of detail of the freely available default world map</li> <li>Places: Added terrain mode to display the satellite, outdoor and topography maps in 3D</li> <li>Security: Go has been updated to v1.20.5, which includes bug fixes and enhancements</li> <li>Translations: Updated Chinese (Simplified), Italian, and Slovak</li> </ul> <p>PhotoPrism\u00ae Plus</p> <ul> <li>Config: CSP header is updated automatically when a CDN is configured</li> </ul>"},{"location":"release-notes/#june-3-2023","title":"June 3, 2023","text":"<p>Build 230603-378d4746a</p> <p>This service release fixes recently discovered issues and improves compatibility with the upcoming MariaDB v11.0. If you are upgrading from MariaDB 10.x to 11.0, please make sure that you replace <code>command: mysqld</code> with <code>command:</code> (followed by the command flags) in your <code>compose.yaml</code> or <code>docker-compose.yml</code> file, otherwise the database server might fail to start. Thank you to everyone who contributed with pull requests, reported bugs, and helped us test the changes!</p> <p>What's new?</p> <ul> <li>Folders: Searching for substrings now returns all matching albums</li> <li>Search: Fixed an issue where the \"Unknown country\" filter has been ignored</li> <li>Navigation: Fixed account feature check when clicking on the profile picture</li> <li>Config: Fixed setting the title of the search page based on the site title</li> <li>MariaDB: Improved compatibility with the upcoming release 11.0</li> <li>Security: Updated third-party dependencies in backend and frontend</li> <li>Security: Go has been updated to v1.20.4, which includes bug fixes and enhancements</li> <li>Translations: Updated Chinese (Traditional), Dutch, German, and French</li> </ul> <p>PhotoPrism\u00ae Plus</p> <ul> <li>Security: Malicious client requests can be automatically detected and blocked</li> </ul>"},{"location":"release-notes/#may-13-2023","title":"May 13, 2023","text":"<p>Build 230513-0b780defb</p> <p>As promised, this update makes hardware transcoding and many other config options available to all users. A big thank you to all of our contributors, members, and sponsors, whose generous support has been and continues to be essential to the success of the project! </p> <p>What's new?</p> <ul> <li>Config: Additional options are now available to all users</li> </ul>"},{"location":"release-notes/#may-6-2023","title":"May 6, 2023","text":"<p>Build 230506-9de9a3540</p> <p>This update resolves two recently reported issues and includes updated translations.</p> <p>What's new?</p> <ul> <li>Sharing: Upload checks if files have been deleted</li> <li>CLI: Logging output is reduced in production mode</li> <li>Translations: Updated French</li> </ul>"},{"location":"release-notes/#may-4-2023","title":"May 4, 2023","text":"<p>Build 230504-cbf48798c</p> <p>This service release makes the Nordic theme and the Hide People feature available to all users. It also changes the theme order in Settings so that the freely available themes come first.</p> <p>What's new?</p> <ul> <li>Settings: Changed order in the theme dropdown so the freely available themes come first</li> </ul>"},{"location":"release-notes/#may-2-2023","title":"May 2, 2023","text":"<p>Build 230502-c405f6eff</p> <p>With this major new release, you'll get a long list of new features and enhancements with a focus on performance, security, and file type support. In addition, our Plus Members can now register directly in the app to unlock additional features like vector graphics support and a new admin web UI for user and session management. Thank you to all contributors, members, and sponsors who made this possible!</p> <p>What's new?</p> <ul> <li>UX: Improved user interface layout for right-to-left languages</li> <li>UX: Improved highlight and background colors in the cards view</li> <li>UX: Improved theme styles and search field contrast in Places</li> <li>UX: Navigation shows the total number of pictures without those under review</li> <li>UX: Enabled long-touch menu in photo viewer on iOS Safari</li> <li>PWA: Increased allowed length of app name on home screen</li> <li>PWA: Improved manifest.json for more reliable installation prompts</li> <li>Themes: Added \"Carbon\", \"Neon\", and \"Nordic\" based on colors from nordtheme.com</li> <li>Themes: Removed \"Electra\", \"Moonlight\", \"Seaweed\", and \"Cyano\"</li> <li>People: Ambiguous faces are skipped when matching to improve performance</li> <li>People: Entering names is faster with many faces tagged</li> <li>Search: Added <code>id:...</code> filter to find pictures by Exif UID, XMP Document ID or Instance ID</li> <li>Search: Increased batch size for better performance when loading results</li> <li>Search: Deleted albums are ignored when using the <code>unsorted</code> filter</li> <li>Search: Sepia colored pictures are excluded when using the <code>mono</code> filter</li> <li>Photos: Image orientation can be changed through the user interface</li> <li>RAW: Upgraded RawTherapee from v5.8 to v.5.9 to fix ProRAW support</li> <li>Videos: Improved player compatibility with browser plugins</li> <li>Videos: Improved preview image generation depending on duration</li> <li>Videos: Playback durations of less than one second can be indexed and displayed</li> <li>Videos: Added .dv to the list of known video file types</li> <li>Videos: Specific video and audio streams can be selected for transcoding</li> <li>Videos: Improved detection of HEVC support for Google Chrome</li> <li>Albums: Added extended search form with sorting options</li> <li>Albums: Fixed form field styles in the share dialog</li> <li>Albums: Double quotes in album names are replaced by Unicode characters</li> <li>Albums: Improved error handling and validation of query parameters</li> <li>Albums: \"Download as zip\" button is displayed on mobile screens</li> <li>Moments: Changed default sort order in the overview to \"newest\"</li> <li>Folders: Search is case-insensitive and uses wildcards for improved usability</li> <li>Metadata: GPS coordinates are normalized to be within a common range</li> <li>Metadata: Out-of-range altitude values are ignored to prevent indexing errors</li> <li>Metadata: Date defaults caused by software or camera bugs are ignored</li> <li>Metadata: Software name is displayed on the Files tab, if available</li> <li>Metadata: Valid year range in Exif data and filenames has been extended from 1990 to 1970</li> <li>Metadata: Scanned images are automatically recognized by device name</li> <li>Metadata: Added TakenAtLocal to YAML backups to prevent incorrectly restored times</li> <li>Metadata: Notes can be extracted from the Comment and UserComment fields</li> <li>Index: Improved performance by skipping updates when there are no changes</li> <li>Index: Improved performance when flagging hidden files</li> <li>Index: Added file format support for Adobe Photoshop PSD images</li> <li>Index: Added support for decoding JPEG XL and playing PNG animations</li> <li>Index: Corrupted JPEG images are automatically repaired if necessary</li> <li>Index: TIFF images with unsupported file format features can be converted</li> <li>Upload: Estimated time remaining is displayed in minutes and seconds</li> <li>Download: Added settings to choose which files to download by default</li> <li>Backups: Improved backup and restore commands to better handle large index dumps</li> <li>WebDAV: Enabled access to the originals and import folders in read-only mode</li> <li>WebDAV: Replaced client library to prevent incomplete uploads to other servers</li> <li>WebDAV: Download sync is prevented when read-only mode is enabled</li> <li>API: Search results can be sorted randomly to get a random set of pictures</li> <li>API: HEAD requests are now supported for frontend bootstrap paths</li> <li>CLI: Added file extension flag to the <code>photoprism convert</code> command</li> <li>CLI: Commands create thumbnails and convert files in deterministic order</li> <li>Config: Migrations are skipped if the same version has already been initialized</li> <li>Config: Use dynamic social preview image based on app name</li> <li>Config: Custom template path is not searched for files if not specified</li> <li>Config: Advanced settings include additional options for PNGs and vector graphics</li> <li>Config: Added advanced HTTP cache control options</li> <li>Config: Added option to stream videos over a Content Delivery Network (CDN)</li> <li>Docker: Ubuntu base image has been upgraded from v22.04 to v23.04</li> <li>Docker: MariaDB image and binaries have been upgraded from v10.9 to v10.11</li> <li>Podman: Added config examples for users of Red Hat-based Linux distributions</li> <li>Security: Improved bcrypt password support with explicit 72-character limit</li> <li>Security: Go has been updated to v1.20.3, which includes bug fixes and other improvements</li> <li>Translations: Added Afrikaans (South Africa) and Basque (Euskara)</li> <li>Translations: Updated Arabic, Bulgarian, Chinese, Czech, Dutch, Estonian, French, German, Italian, Malay, Russian, Ukrainian and many others</li> </ul> <p>PhotoPrism\u00ae Plus</p> <ul> <li>Auth: Admins can manage user accounts and active sessions through the web UI </li> <li>Index: Added file format support for SVG, AI, PS and EPS vector graphics</li> </ul> <p>Our new Plus License is used for both the extensions we provide to our members and the standard Docker images available on Docker Hub. This allows us to bundle the extensions with the compiled application, while the Community Edition remains freely available under the terms of the GNU Affero General Public License (AGPL).</p> <p>If you don't plan to use any additional features, you can alternatively use the \"ce\" tag instead of \"latest\" to get a slightly smaller Docker image distributed under the AGPL. Note that system dependencies and other third-party components included in this image are still subject to additional terms and conditions.</p> <p>View Membership FAQ \u203a View Plus License \u203a</p>"},{"location":"release-notes/#november-18-2022","title":"November 18, 2022","text":"<p>Build 221118-e58fee0fb</p> <p>This service release includes compatibility fixes for MariaDB 10.10, the latest translations, a new theme, and updated dependencies. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version.</p> <p>What's new?</p> <ul> <li>UI: Added \"Electra\" theme</li> <li>MariaDB: Compatibility fixes for version 10.10</li> <li>Translations: Updated Czech and Estonian</li> </ul>"},{"location":"release-notes/#november-17-2022","title":"November 17, 2022","text":"<p>Build 221117-3268c4de8</p> <p>This update includes video transcoding improvements and the latest translations contributed by our community.</p> <p>What's new?</p> <ul> <li>Videos: Fixed installation of Intel Quick Sync drivers for hardware transcoding</li> <li>Videos: Added <code>.m2ts</code> to known file extensions</li> <li>Translations: Updated Chinese (Traditional) and Estonian</li> </ul>"},{"location":"release-notes/#november-16-2022","title":"November 16, 2022","text":"<p>Build 221116-122ebfb70</p> <p>With this update you get the latest translations, updated dependencies, and two metadata bug fixes. Thanks to all who contributed!</p> <p>What's new?</p> <ul> <li>Metadata: Bad Unicode strings are sanitized automatically </li> <li>Metadata: UTC can be overridden by local time with unknown zone</li> <li>MariaDB: Unsupported versions are allowed in \"unsafe\" mode</li> <li>Translations: Added Estonian</li> <li>Translations: Updated Polish, Italian, Korean, Romanian, and Chinese (Traditional)</li> </ul>"},{"location":"release-notes/#november-5-2022","title":"November 5, 2022","text":"<p>Build 221105-7a295cab4</p> <p>This service release provides UX improvements for the photo editing dialog and includes the latest translations contributed by our community. Note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> to start and stop your instance.</p> <p>What's new?</p> <ul> <li>UX: Improved layout of form fields in photo edit dialog</li> <li>Account: Disabled \"gender\" dropdown when busy or in demo mode</li> <li>Docker: Changed \"docker-compose\" command to \"docker compose\"</li> <li>Translations: Updated Estonian, Hungarian, and Russian</li> </ul>"},{"location":"release-notes/#november-4-2022","title":"November 4, 2022","text":"<p>Build 221104-20d180b21</p> <p>A small update featuring improved NVIDIA GPU support, the latest translations contributed by our community, and updated dependencies.</p> <p>What's new?</p> <ul> <li>NVIDIA: Added a ready-to-use <code>docker-compose.yml</code> config example</li> <li>NVIDIA: Updated FFmpeg parameters for hardware video transcoding</li> <li>NVIDIA: Updated install-gpu.sh script and related documentation</li> <li>Translations: Updated Chinese</li> </ul>"},{"location":"release-notes/#november-3-2022","title":"November 3, 2022","text":"<p>Build 221103-211eb36ea</p> <p>With this update you'll get the latest translations contributed by our community, updated dependencies as well as a few minor bug fixes and improvements.</p> <p>What's new?</p> <ul> <li>Index: Paths starting with <code>_.</code> and <code>__</code> like <code>__MACOSX</code> are ignored</li> <li>Config: Updated new trusted proxy header options and command help</li> <li>MariaDB: Improved server version check on startup</li> <li>Security: Go has been updated to v1.19.3, which includes security fixes</li> <li>Translations: Updated Chinese, French, Norwegian Bokm\u00e5l, and Romanian</li> </ul>"},{"location":"release-notes/#november-2-2022","title":"November 2, 2022","text":"<p>Build 221102-905925b4d</p> <p>Due to the many new features, enhancements and bug fixes, this is one of those updates that took longer to release. Before upgrading, please read the full release notes and note that this release does not yet include support for user roles other than Admin, as we need to specify, create and test each new role before we can release it. Once this is done, we will also provide additional user management documentation.</p> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are invited to help us improve those if needed. A special thank you to everyone who contributed!</p> <p>Breaking Changes</p> <ul> <li>In order to improve security and compatibility, the default Docker image is now based on Ubuntu 22.04 LTS (Jammy Jellyfish) instead of Debian 12 (Bookworm). The entrypoint script has been updated to preserve group permissions required for hardware transcoding.</li> <li>Session and user management have been re-implemented. If you are upgrading from a preview build, you will need to run the <code>photoprism users reset --yes</code> command in a terminal after the upgrade to recreate the new database tables so that they are compatible with the stable version. This will not affect your pictures or albums.</li> <li>Upgrading from the last stable version should work without any problems. However, if you have already created additional accounts with the previously offered unofficial multi-user support, you will notice that only the main admin account is migrated automatically. Run <code>photoprism users legacy</code> in a terminal to display the legacy accounts so you can migrate them manually if needed.</li> <li>Sharing link visitors can now see the picture locations in the regular album view and optionally on a map after clicking the link. Based on user feedback, we may add settings to hide the locations for enhanced privacy.</li> <li>We recommend performing a full rescan after the upgrade to take advantage of new search filters and sort options.</li> <li>Indexing is also necessary to find and view HEIC, DNG, and AVIF images that were previously unsupported or had errors. In some cases with incorrectly converted images, it may be necessary to recreate the JPEG sidecar files by running the <code>photoprism convert -f</code> command in a terminal before starting the rescan. To regenerate your thumbnails, run <code>photoprism thumbs -f</code>.</li> </ul> <p>What's new?</p> <ul> <li>Auth: Session and user management have been re-implemented</li> <li>Auth: API has been improved to prevent unnecessary re-logins</li> <li>Auth: User interface routes have been prefixed with <code>/library</code></li> <li>UX: Scroll position is restored again when navigating back</li> <li>UX: Loading screen and mobile toolbar menu have been redesigned</li> <li>UX: Improved user interface styles for RTL languages</li> <li>Search: Added <code>city:...</code> and <code>state:...</code> to filter by location details</li> <li>Search: Results can now also be sorted by \"File Size\" and \"Video Duration\"</li> <li>Albums: Added breadcrumbs to navigate back on large screens</li> <li>Albums: Deselected labels are ignored when adding photos by label</li> <li>HEIC: Added support for Sony's <code>.HIF</code> file extension</li> <li>HEIC: Updated <code>heif-convert</code> tool to fix conversion problems</li> <li>AVIF: Added support for the AV1 Image File Format</li> <li>RAW: Updated Darktable from v3.8.1 to v4.0.1 (AMD64 only)</li> <li>ProRAW: JPEGs embedded in <code>.DNG</code> files can be searched and viewed</li> <li>Videos: Added VAAPI hardware AVC encoder support</li> <li>Index: Delayed RAW file format check to improve indexing performance</li> <li>Import: Selection of a source folder with dots in its name is now possible</li> <li>Import: Related original names are indexed in addition to the main filename</li> <li>Settings: Services cannot be managed in public mode to increase security</li> <li>Backups: Worker no longer recreates all album YAML files on every run</li> <li>Metadata: Added more place names with known countries</li> <li>Metadata: Default to UTC when reading time from XMP file</li> <li>Config: Increased default resolution limit from 100 to 150 MP</li> <li>Config: <code>imprint</code> info text option has been renamed to <code>legal-info</code></li> <li>SQLite: Added busy timeout preset to reduce locking errors when indexing</li> <li>MariaDB: Startup fails with an error message if an unsupported version is used</li> <li>Docker: Default image is based on Ubuntu 22.04 LTS (Jammy Jellyfish)</li> <li>Docker: Switched from <code>gosu</code> to <code>setpriv</code> in entrypoint.sh script</li> <li>Security: New files are created without execution permission</li> <li>Security: Go has been updated to v1.19.2, which includes security fixes</li> <li>Translations: Added Persian</li> <li>Translations: Updated Chinese, Dutch, Finnish, French, German, Spanish, and many more</li> </ul>"},{"location":"release-notes/#september-1-2022","title":"September 1, 2022","text":"<p>Build 220901-f493607b0</p> <p>With this update you get all the latest translations contributed by our community, mobile navigation enhancements, updated dependencies and, as usual, fixes for recently discovered issues. Thanks to everyone involved!</p> <p>What's new?</p> <ul> <li>UX: Mobile toolbar menu has been redesigned and expanded</li> <li>UX: Improved search result and Gemstone theme styles</li> <li>Search: Known file extensions are stripped from <code>name:...</code> filter string</li> <li>Library: Indexing will be aborted if the originals folder is empty</li> <li>Videos: Local time is extracted from <code>DateTimeOriginal</code> if possible</li> <li>Albums: All pictures are shown if \"Private\" has been disabled in Settings</li> <li>Thumbs: <code>photoprism thumbs</code> command regenerates thumbnails of sidecar files</li> <li>Docker: Permissions of original media files are no longer updated on startup</li> <li>Build: Go has been updated to v1.19, which includes fixes and enhancements</li> <li>Build: NodeJS has been updated from v16 to v18</li> <li>Translations: Added Catalan, Finnish, Ukrainian, and Slovene</li> </ul>"},{"location":"release-notes/#july-30-2022","title":"July 30, 2022","text":"<p>Build 220730-0e1222c83</p> <p>Fixes the activation of public mode with <code>PHOTOPRISM_AUTH_MODE</code> instead of <code>PHOTOPRISM_PUBLIC</code>.</p> <p>What's new?</p> <ul> <li>Auth: Activate public mode via <code>PHOTOPRISM_AUTH_MODE=\"public\"</code></li> </ul>"},{"location":"release-notes/#july-28-2022","title":"July 28, 2022","text":"<p>Build 220728-729ddd920</p> <p>Includes indexing, metadata, and authentication enhancements, as well as updated translations.</p> <p>What's new?</p> <ul> <li>Library: Added support for indexing and importing symbolically linked files</li> <li>Thumbs: Creating redundant JPEG files is skipped to save disk space</li> <li>Zip: Improved file system rights detection and temporary file handling</li> <li>Metadata: Creation time is extracted from DateTimeCreated, if available</li> <li>Metadata: Unknown values are ignored when parsing timestamps</li> <li>Purge: Fixed SQL error when the photo ID of a file is missing</li> <li>Cleanup: Improved logging when deleting related sidecar files</li> <li>Config: Added <code>PHOTOPRISM_AUTH_MODE</code> option to select authentication mode</li> <li>Config: Improved inline docs in <code>docker-compose.yml</code> examples</li> <li>Build: Updated Go to v1.18.4, which includes a number of security and compiler fixes</li> <li>Translations: Added Greek</li> </ul> <p>Breaking Changes</p> <ul> <li>Config: <code>PHOTOPRISM_AUTH</code> has been removed in favor of <code>PHOTOPRISM_AUTH_MODE</code></li> <li>Config: <code>PHOTOPRISM_PUBLIC</code> has been deprecated in favor of <code>PHOTOPRISM_AUTH_MODE</code></li> </ul>"},{"location":"release-notes/#june-29-2022","title":"June 29, 2022","text":"<p>Build 220629-5d7448d2</p> <p>With this update, you'll enjoy a much faster and smoother scrolling experience as well as direct streaming of OGV, VP8, VP9, AV1, WebM and HEVC videos if they do not exceed the configured bitrate limit. Special thanks to Heiko Mathes and Andre Carrera for their contributions!</p> <ul> <li>UX: Much faster and smoother scrolling experience in albums and search results</li> <li>Videos: Direct streaming of OGV, VP8, VP9, AV1, WebM, and HEVC where supported</li> <li>Videos: Fixed incorrect frame rate when using NVIDIA hardware transcoding</li> <li>Sharing: Fixed the spacing of the top navigation toolbar on small screens</li> <li>RAW: Display actual dimensions as Exif metadata can be wrong, e.g. for <code>.NEF</code> files</li> <li>WebDAV: Endpoints have been disabled in public mode as they cannot be used</li> <li>API: Maximum number of search results has been increased to 100,000 files</li> <li>CLI: Config command also lists <code>disable-webdav</code> and <code>http-compression</code></li> <li>Documentation: Added notes about manual session invalidation and other known issues</li> <li>Translations: Updated Arabic, Dutch, Polish, Japanese, Chinese, French, German, and Italian</li> </ul>"},{"location":"release-notes/#june-17-2022","title":"June 17, 2022","text":"<p>Build 220617-0402b8d3</p> <p>This update features updated translations as well as fixes for recently discovered issues.</p> <ul> <li>Albums: A deleted album is restored when trying to add a new album with the same name</li> <li>WebDAV: Added support for auto indexing/importing in a sub-directory on a shared domain</li> <li>Translations: Updated Arabic, Czech, Korean, and Norwegian Bokm\u00e5l</li> </ul>"},{"location":"release-notes/#june-14-2022","title":"June 14, 2022","text":"<p>Build 220614-dea9ff68</p> <p>A small but important update that includes translations to Arabic, a migration fix for MariaDB, and many updated dependencies.</p> <ul> <li>Security: Updated Go to v1.18.3, which includes TLS and validation fixes</li> <li>MariaDB: Removed migration that could corrupt photo descriptions in the index</li> <li>Translations: Added Arabic, updated Danish and Polish</li> </ul>"},{"location":"release-notes/#may-28-2022","title":"May 28, 2022","text":"<p>Build 220528-efb5d710</p> <p>This update includes translations that were recently contributed via translate.photoprism.app. Missing translations were added by us using DeepL and Google Translate. Native speakers are invited to help improve those if needed. Thank you very much!</p> <ul> <li>UX: Mobile toolbar menu has been redesigned and made accessible in public mode</li> <li>Themes: Gemstone and Raspberry have been updated</li> </ul>"},{"location":"release-notes/#may-27-2022","title":"May 27, 2022","text":"<p>Build 220527-005770ca</p> <p>This update improves navigation fonts and mobile submenu colors for light themes. We are also working to establish PhotoPrism+ as the name for our community membership and associated benefits. For this, membership information in the app, on our website, on GitHub Sponsors and Patreon is gradually being updated.</p> <ul> <li>UX: Fixed light theme colors of mobile navigation submenu</li> <li>UX: Splash screen has been updated and no longer depends on admin theme</li> </ul>"},{"location":"release-notes/#may-24-2022","title":"May 24, 2022","text":"<p>Build 220524-c76de0df</p> <p>This service release fixes potential issues with our new Debian 12-based Docker image that shipped with the last update. These may have prevented users from deploying it without making changes to their environment. In our ongoing effort to improve usability and performance, we have also implemented a number of UX/UI optimizations, such as using the default operating system font instead of Google's Roboto.</p> <ul> <li>UX: Added submenu to mobile navigation toolbar</li> <li>UX: Updated splash screen information and animation</li> <li>UX: Numerous translations have been added and updated</li> <li>UX: Improved UI styles for right-to-left languages</li> <li>Auth: Short initial passwords are permitted again to avoid login problems</li> <li>Logs: Repeated log messages are omitted to prevent feedback loops</li> <li>Logs: Trace and debug messages are no longer displayed in the UI to avoid information leaks and reduce websocket communication overhead</li> <li>Search: <code>mono:true</code> filter now omits files with unknown chroma</li> <li>Docker: Removed incorrect permission check for storage folder on startup</li> <li>Docker: Supported User and Group ID ranges have been documented</li> </ul> <p>Thank you to everyone who helped with testing, signed up as a member, or contributed in other ways! We appreciate it very much.</p>"},{"location":"release-notes/#may-17-2022","title":"May 17, 2022","text":"<p>Build 220517-b9c68f8f</p> <p>This update features search UX enhancements, a new Docker base image based on Debian 12 \"Bookworm\", as well as fixes for recently discovered issues. Front- and backend translations in numerous languages have been added and updated. Thanks to all involved!</p> <ul> <li>File Formats: Added native support for WebP images and animated GIFs</li> <li>UX: RAW files are skipped by default when downloading photos and ZIP archives</li> <li>Auth: Passwords must have at least 8 characters to mitigate brute-force attacks</li> <li>Search: User interface and database performance optimizations</li> <li>Search: Fixed occasional lag when entering queries in the search toolbar</li> <li>Search: Improved <code>album:...</code> filter supports numeric names, <code>albums:..</code> also AND/OR</li> <li>Search: Improved <code>camera:...</code> and <code>lens:...</code> filters accept names in addition to IDs</li> <li>Search: Added <code>square:yes</code> and <code>landscape:yes</code> filters</li> <li>Albums: \"Add to album\" dialog preloads more names for auto-completion</li> <li>Albums: Album names are shortened if necessary to avoid errors when saving</li> <li>Albums: Fixed accidental creation of duplicates by pressing Enter multiple times</li> <li>People: Improved logging and fixed potential issues with matching unrecognized faces</li> <li>Places: Number of pictures rendered on the map has been limited to 500,000</li> <li>Library: Added button to clear log history under Library &gt; Errors</li> <li>Library: RAW previews and the number of actual files are shown under Originals</li> <li>Library: Disabled hidden files warning while indexing as it can be misleading</li> <li>Index: Fixed errors when re-indexing libraries with archived photos</li> <li>Index: RAW and video conversion commands run in a virtual home directory</li> <li>Thumbnails: Reduced default JPEG quality from 92 to 85 to optimize storage and loading</li> <li>Metadata: Manual local time changes are always preserved when reindexing</li> <li>Metadata: Fixed Exif orientation flag when converting HEIF/HEIC images to JPEG</li> <li>Metadata: Fault-tolerant parsing of timestamps from Exif and JSON sidecar files</li> <li>Metadata: Improved parsing of two-digit years in original file paths</li> <li>Metadata: Exif IFD1 tags with existing IFD0 values are ignored to improve standard compliance</li> <li>Metadata: Brute-force search is skipped by default if no Exif headers were found in JPEG, PNG, TIFF, and HEIF files</li> <li>Metadata: SubSecDateTimeOriginal and SubSecCreateDate timestamps are preferred</li> <li>WebDAV: Up- and download sync can no longer be enabled at the same time to prevent unexpected behavior</li> <li>WebDAV: Added timeout/retry settings and improved handling of sync errors</li> <li>WebDAV: Fixed sharing videos and uploading automatically created albums</li> <li>CLI: Renamed <code>--config-file</code> to <code>--defaults-yaml</code> and improved command help</li> <li>CLI: Added short names for common config flags, e.g. <code>-i</code> for <code>--wakeup-interval</code></li> <li>CLI: Run <code>photoprism show tags</code> to display metadata tags and supported standards</li> <li>CLI: Run <code>photoprism show formats</code> to display supported media and sidecar file formats</li> <li>CLI: Run <code>photoprism show filters</code> to display a search filter overview with examples</li> <li>Config: Improved FFmpeg parameters for Intel QSV hardware transcoding</li> <li>Config: Added NVIDIA hardware video transcoding support for members</li> <li>Config: Added <code>--disable-raw</code> flag to disable indexing and conversion of RAW files</li> <li>Config: Added <code>--resolution-limit</code> option to skip high-resolution images when indexing</li> <li>Docker: New Debian 12 \"Bookworm\" base image with FFmpeg 4.4.1 and Darktable 3.8.1</li> <li>Docker: Added default users and groups for enhanced video transcoding compatibility</li> <li>Translations: Added Swedish, Romanian, Turkish, Lithuanian, Bulgarian, Malay, and Croatian</li> </ul>"},{"location":"release-notes/#march-2-2022","title":"March 2, 2022","text":"<p>Build 220302-0059f429</p> <p>The Docker images for this release are based on Debian 11 \"Bullseye\" and include many updated dependencies such as Darktable 3.8. Behind the scenes, the build process has also been improved so that it will be easier to provide standalone packages in the future.</p> <ul> <li>Auth: New login screen with more space for buttons, links, and legal information</li> <li>Metadata: Redesigned file details tab in the edit dialog</li> <li>Metadata: Support for Zulu formatted timestamps in Exiftool JSON and XMP</li> <li>Sharing: Fixed upload of complete albums via WebDAV</li> <li>Sharing: Manual WebDAV upload of video and RAW files</li> <li>iOS: Fixed multi-select via long touch in Safari PWA mode</li> <li>API: Added cache control header for faster thumbnail loading</li> <li>Config: Simplified configuration of Unix domain socket database connections</li> <li>Config: Added <code>--imprint</code> and <code>--imprint-url</code> to display legal information in the footer</li> <li>Docker: Automatic installation of compatible CPU and GPU drivers</li> <li>Translations: Updated all front- and backend locales</li> </ul> <p>You can now join us on translate.photoprism.app to help translate the UI!</p>"},{"location":"release-notes/#january-21-2022","title":"January 21, 2022","text":"<p>Build 220121-2b4c8e1f</p> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are invited to help us improve those if needed. Learn how to contribute.</p> <ul> <li>Minimum memory requirements have been reduced to 3 GB</li> <li>Photos: Fixed buttons in full screen view</li> <li>People: Fixed typo that prevented face matching optimization</li> <li>Moments: Improved update performance on MariaDB</li> <li>Translations: Pre-translated missing UI messages</li> </ul>"},{"location":"release-notes/#january-18-2022","title":"January 18, 2022","text":"<p>Build 220118-76c94a1f</p> <ul> <li>Auth: Logout redirects to base URI instead of site root</li> <li>Videos: Excluded streaming from gzip compression</li> <li>Videos: Fixed Content-Type header and streaming in Safari</li> <li>Folders: Fixed search query string substitutions and sanitation</li> <li>UI: Updated information and links in Settings &gt; About</li> <li>UI: Improved bootstrap template rendering performance</li> </ul>"},{"location":"release-notes/#january-7-2022","title":"January 7, 2022","text":"<p>Build 220107-f5b7ef83</p> <p>Based on our zero bug policy, this update focuses on bug fixes, security, and UX enhancements for search  filters, metadata, and the indexer. In addition, one of the merged pull requests may improve face recognition  performance on smaller devices and with large libraries.</p> <ul> <li>People: Improved update performance on MariaDB</li> <li>People: Improved contrast of person selection menu</li> <li>Albums: Private pictures are excluded from download as zip</li> <li>Search: Improved query parser for additional security</li> <li>Search: Added <code>uid:...</code> search filter to find photos by uid</li> <li>Search: <code>keywords:...</code> filter does not exclude stopwords anymore</li> <li>Index: Original filenames can be extracted from Exiftool JSON</li> <li>Index: More accurate and resilient handling of related files and photo stacks</li> <li>Live Photos: HEIF is used to create primary JPEG instead of a MOV still image</li> <li>Metadata: Reduced log level for missing Exif data from warn to info</li> <li>Metadata: Increased size of projection and color profile fields to 40 characters</li> <li>Backups: Improved help for config options and CLI commands</li> <li>Help: Fixed reverse proxy documentation links</li> <li>Config: Added Apple Video Toolbox hardware transcoding support for macOS</li> <li>Config: Added <code>/opt/photoprism</code> to search path for asset and storage folders</li> </ul>"},{"location":"release-notes/#december-15-2021","title":"December 15, 2021","text":"<p>Build 211215-93b26f19</p> <p>PhotoPrism is not directly affected by the Apache Log4j vulnerability. Logs may still contain messages that can cause harm if consumed by an unpatched Java application. As a precaution, this release includes additional rules and filters to validate user input.</p> <ul> <li>Sharing: Fixed album link redirect on shared domains</li> <li>Import: More helpful warning when another import is already running</li> <li>Docker: ARMv7 image for 32-bit processors and operating systems</li> </ul>"},{"location":"release-notes/#december-10-2021","title":"December 10, 2021","text":"<p>Build 211210-2cb90e7e</p> <p>Starting with this release, the regular multi-arch Docker image is 64-bit only.  A 32-bit version of our stable release for older devices  is offered separately. This frees up development and infrastructure resources with minimal impact.</p> <ul> <li>Security: Updated Go to v1.17.5, which includes HTTP/2 and networking fixes</li> <li>People: Concurrent updates are no longer possible to prevent inconsistencies</li> <li>Places: Additional logs to detect invalid GPS coordinates in metadata</li> <li>SQLite: Reduced routine maintenance log levels and fixed migration warnings</li> <li>Thumbnails: Apple Display P3 profile support for more accurate colors</li> <li>Translations: Updated French</li> </ul>"},{"location":"release-notes/#december-3-2021","title":"December 3, 2021","text":"<p>Build 211203-fdb6b5e1</p> <p>Since the funding goal required to make all features and maps generally available has not been reached, early-access features have been renamed to sponsor features in this update. Offline and high-resolution street maps remain free for everyone, while hybrid, topographic, and outdoor maps are  now a member feature. We believe this is fair. A big thank you to all our sponsors and contributors!</p> <ul> <li>CLI: Improved parameter and command descriptions</li> <li>CLI: Reset command optionally also deletes files in the cache folder</li> <li>Config: Improved <code>docker-compose.yml</code> examples</li> </ul>"},{"location":"release-notes/#november-30-2021","title":"November 30, 2021","text":"<p>Build 211130-13cfcf6d</p> <ul> <li>Videos: Live photos page has been added to the sub-navigation</li> <li>Albums: Manually created albums are sorted by name, with favorites first</li> <li>Places: Improved location details in border regions and near Paris</li> <li>PWA: Updated app icons, style is now also applied to the user interface</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UI: New Abyss and Gemstone dark themes \ud83d\udc8e</li> </ul>"},{"location":"release-notes/#november-28-2021","title":"November 28, 2021","text":"<p>Build 211128-7e8974fd</p> <p>Official support for MySQL 8 is discontinued with this update as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible. We recommend upgrading to MariaDB 10.6 or later. PostgreSQL support is planned for 2022 without a specific release date yet.</p> <ul> <li>CLI: <code>photoprism migrations run --failed</code> will re-run previously failed migrations</li> </ul>"},{"location":"release-notes/#november-27-2021","title":"November 27, 2021","text":"<p>Build 211127-86c43159</p> <p>When possible, location estimates now include a latitude and longitude. Photos load faster when you open  them in Places, and the viewer sorts them by distance. Time zone handling has been completely reworked,  in particular for UTC. The Docker base image has been updated to Ubuntu 21.10, which ships with  Darktable 3.6 among other updated dependencies. </p> <ul> <li>UX: Redesigned splash screen based on theme colors</li> <li>Places: Viewer loads faster and sorts photos by distance instead of date</li> <li>Places: Less frequent estimates to reduce background activity</li> <li>Places: Normalized names of states, oceans, and lakes</li> <li>Places: Updated location data from OpenStreetMap</li> <li>Places: State albums are grouped by country name</li> <li>Folders: Path names are searched in addition to titles</li> <li>People: Improved face detection performance</li> <li>People: Fixed naming faces in non-primary files</li> <li>People: Optimized matching of children's faces</li> <li>RAW: Updated Darktable to 3.6.0</li> <li>Metadata: Improved estimates and UTC time zone handling</li> <li>Metadata: Altitude is indexed even if coordinates are missing</li> <li>Auth: Usernames are not case-sensitive anymore</li> <li>CLI: Added <code>--force</code> flag to <code>photoprism optimize</code> command</li> <li>CLI: Improved parameter and command descriptions</li> <li>Config: Improved <code>docker-compose.yml</code> examples</li> <li>Translations: Added Bahasa Indonesia and Hungarian</li> <li>Translations: Updated Polish and Italian</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>CLI: Run <code>photoprism places update</code> to retrieve updated location details</li> <li>Config: Set <code>PHOTOPRISM_APP_ICON</code> to choose an alternative PWA icon</li> </ul>"},{"location":"release-notes/#october-18-2021","title":"October 18, 2021","text":"<p>Build 211018-e200f322</p> <ul> <li>UI: Updated Lavender theme</li> <li>Places: Fixed maps initialization after reload in non-public mode</li> <li>Search: Added <code>live</code> and <code>raw:true</code> filters as alternative to <code>type:\u2026</code></li> <li>Search: Added <code>faces:new</code> alias for <code>face:new</code></li> <li>Config: Maximum background worker interval has been increased to 7 days</li> <li>Security: Added <code>Content-Security-Policy</code> header to prevent framing attacks</li> <li>Translations: Updated Russian and Slovak</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UI: New Vanta dark theme \u2728</li> </ul>"},{"location":"release-notes/#october-10-2021","title":"October 10, 2021","text":"<p>Build 211010-83b4f783</p> <ul> <li>Translations: Fixed German frontend typo</li> <li>Translations: Updated all backend locales</li> </ul> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are  invited to help us improve those if needed. Learn how to contribute.</p>"},{"location":"release-notes/#october-9-2021","title":"October 9, 2021","text":"<p>Build 211009-d6cc8df5`</p> <ul> <li>UX: Improved wording of search result notifications</li> <li>UX: Fixed sidebar navigation on small screens</li> <li>Users: Show name and email in sidebar navigation</li> <li>Folders: Directory names listed in .ppignore are ignored</li> <li>Config: Allows bypassing low memory suggestion</li> <li>Docs: Updated about page</li> <li>Translations: Updated all frontend locales</li> </ul>"},{"location":"release-notes/#october-7-2021","title":"October 7, 2021","text":"<p>Build 211007-8f55d6f8</p> <ul> <li>People: Improved stability and performance of new faces overview page</li> <li>Index: Duplicate error logs caused by broken JPEG files have been removed</li> <li>UX: Enhanced visibility of file errors in the edit dialog files tab</li> <li>CLI: Revised descriptions of commands and configuration flags</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>People: Recognized faces can be hidden on the overview page </li> </ul>"},{"location":"release-notes/#october-2-2021","title":"October 2, 2021","text":"<p>Build 211002-bf015326</p> <ul> <li>People: Enhanced UI / UX for renaming and merging faces</li> <li>People: Improved face detection accuracy</li> <li>Labels: Improved photo count accuracy</li> <li>Covers: Thumbnails load and update faster</li> <li>Search: Finds titles when query is too short for full-text index</li> <li>Search: <code>name:\u2026</code> filter ignores path and extension</li> <li>Videos: Optional Intel GPU hardware transcoding support</li> <li>Index: Automatic cleanup of orphaned file entries</li> <li>Logs: Updated log messages for improved readability</li> <li>Translations: Updated German and French</li> <li>Docker: Simplified installation of TensorFlow with AVX / AVX2 support</li> <li>Docker: Entrypoint script uses prefixed environment variables, <code>UID</code> and <code>GID</code> are deprecated</li> </ul>"},{"location":"release-notes/#september-25-2021","title":"September 25, 2021","text":"<p>Build 210925-96168e4b</p> <ul> <li>Recognizes faces so that specific people can be found</li> <li>UX: Improved UI design, navigation, and wording</li> <li>Search: Omit full-text index if query is too short</li> <li>Search: Added <code>keywords:\u2026</code>, <code>subjects:\u2026</code>, and <code>albums:\u2026</code> filters</li> <li>Places: Internationalized maps incl RTL support</li> <li>Labels: Added photo counts to overview page </li> <li>Albums: Fixed share expiration date in form label</li> <li>Calendar: Empty month albums are hidden</li> <li>Viewer: Photos will be updated when search filters change</li> <li>Index: Ignore Synology <code>@eaDir</code> folders</li> <li>Import: Ignore dot files listed in <code>.ppignore</code></li> <li>Upload: Added more detailed error logs</li> <li>Videos: Skip related images when downloading</li> <li>Videos: Added .mp as known MP4 file extension</li> <li>Videos: Default to UTC as metadata time zone</li> <li>Exiftool: Enabled large file support</li> <li>Metadata: Improved Exif parser with cycle detection</li> <li>Metadata: Support for long projection type names like transverse-cylindrical</li> <li>Config: Added RAW file extension blacklists for Darktable and RawTherapee</li> <li>Config: Added disable options for image classification and facial recognition</li> <li>Config: Added support for non-root site URLs</li> <li>Config: Added content delivery network URL option</li> <li>MariaDB: Set explicit table engine, charset, and collation</li> <li>MariaDB: Added log message for old versions with broken table name resolution</li> <li>Docker: Added <code>HOME</code> env for Darktable &amp; RawTherapee</li> <li>Docker: Single multi-arch image for AMD64, ARM64, and ARMv7</li> </ul>"},{"location":"release-notes/#may-23-2021","title":"May 23, 2021","text":"<p>Build 210523-b1856b9d</p> <ul> <li>RAW: Added RawTherapee flag to use existing sidecar files</li> <li>Import: Never remove ignored folders such as for Syncthing</li> </ul>"},{"location":"release-notes/#may-20-2021","title":"May 20, 2021","text":"<p>Build 210520-4b32bac7</p> <ul> <li>Docker: Fixed home directory permissions in new base image</li> <li>HEIF: Test if JPEG was already rotated based on video metadata</li> </ul>"},{"location":"release-notes/#may-19-2021","title":"May 19, 2021","text":"<p>Build 210519-24b5c7e6</p> <ul> <li>Metadata: Updated Exiftool to fix security issue</li> </ul>"},{"location":"release-notes/#may-18-2021","title":"May 18, 2021","text":"<p>Build 210518-80981c25</p> <ul> <li>Safari: Fixed PWA file download on iOS</li> <li>Docker: Added config example for scheduled background tasks</li> <li>Docker: Updated base image includes Darktable 3.4.1, RawTherapee 5.8, and FFmpeg 4.3.2</li> <li>TensorFlow: Improved error handling</li> <li>Translations: Updated French</li> </ul>"},{"location":"release-notes/#may-5-2021","title":"May 5, 2021","text":"<p>Build 210505-d3e53a89</p> <ul> <li>UI: Improved RTL (right-to-left language) alignment</li> <li>RAW: Added config options to disable specific converters</li> <li>Metadata: Preserve stopwords in existing keywords</li> <li>Metadata: Allow single quotes in keywords</li> <li>WebDAV: Keep favorite flag when uploading via PhotoSync</li> <li>Translations: Updated Dutch   and German</li> </ul>"},{"location":"release-notes/#april-26-2021","title":"April 26, 2021","text":"<p>Build 210426-da6e948f</p> <ul> <li>UI: Added Yellowstone theme for members, unlocked Grayscale theme for everyone</li> <li>Metadata: Support for XMP sidecar CreateDate and Keywords</li> <li>Metadata: Merge keywords from different sources</li> <li>Translations: Updated Hebrew</li> </ul>"},{"location":"release-notes/#april-22-2021","title":"April 22, 2021","text":"<p>Build 210422-97e75b04</p> <ul> <li>UX: Improved touch event accuracy</li> <li>UX: Optimized rendering on small screens</li> <li>UX: Fixed autocomplete in \"add to album\" dialog</li> <li>HEIF: Prevent redundant sidecar JPEG files</li> <li>Backup: Added command flags and usage docs</li> <li>Translations: Added Danish    and Kurdish</li> </ul>"},{"location":"release-notes/#february-22-2021","title":"February 22, 2021","text":"<p>Build 210222-ac5a9d5e</p> <ul> <li>UX: Autofocus for input fields and confirm on enter</li> <li>Restore: Find YAML album backups in originals folder</li> <li>Metadata: Improved location labels and moments</li> <li>Thumbnails: Fixed auto-rotation for HEIF, TIFF, and PNG images</li> <li>Translations: Added Norwegian (Bokm\u00e5l)</li> </ul>"},{"location":"release-notes/#february-17-2021","title":"February 17, 2021","text":"<p>Build 210217-49039368</p> <ul> <li>Videos: Optimized transcoding parameters</li> <li>Videos: Use AAC audio for MP4 transcoding </li> <li>Metadata: Default to landscape orientation if data is invalid</li> <li>Translations: Updated Brazilian Portuguese</li> </ul>"},{"location":"release-notes/#february-16-2021","title":"February 16, 2021","text":"<p>Build 210216-4939e36a</p> <ul> <li>UX: Automatically hide scrollbar in photo viewer and Places</li> <li>Delete: Permanently remove all related sidecar files</li> <li>Videos: Added transcoding config options</li> <li>Videos: Added batch transcoding via convert command</li> <li>Metadata: Remove estimate when setting a new country</li> <li>Metadata: Workaround for Exif strings containing newlines</li> </ul>"},{"location":"release-notes/#february-11-2021","title":"February 11, 2021","text":"<p>Build 210211-b9595dd4</p> <ul> <li>Videos: Native player featuring performance and UX enhancements</li> <li>Index: Improved detection of missing photos, files, and folders</li> </ul>"},{"location":"release-notes/#february-8-2021","title":"February 8, 2021","text":"<p>Build 210208-9e10ba69</p> <ul> <li>Upload: Adds duplicates to selected albums as well</li> <li>Library: Show folder covers in Originals</li> <li>Metadata: Automatically remove orphan countries, cameras, and lenses</li> <li>Metadata: Improved Exif parser</li> <li>Backup: Restore archive flag from YAML files</li> <li>Docker: Improved entrypoint script</li> </ul>"},{"location":"release-notes/#january-28-2021","title":"January 28, 2021","text":"<p>Build 210128-a82061e0</p> <ul> <li>UX: Improved theme colors and icons</li> <li>UX: Download all related media files using their current name by default</li> <li>UX: Redirect already authenticated users from /login to /browse</li> <li>Mobile: Prevent like on touch swipe</li> <li>Translations: Updated German and French</li> <li>Config: Reduced auto index &amp; import safety delay defaults</li> <li>Metadata: Improved photo titles, removed small words from title endings</li> <li>Metadata: Improved date extraction from current and original file names</li> <li>Metadata: Fallback to earliest file mod time in case there is no other date</li> <li>Import: Index keywords from non-primary filenames as well</li> <li>WebDAV: Improved service discovery</li> <li>Purge: Hide missing files in edit dialog and set new primary if needed</li> <li>Archive: Physically delete files after confirmation</li> <li>Moments: Added delete button to context menu</li> <li>Settings: Added Estimates and Delete feature flags</li> <li>CLI: Added cleanup command to remove orphaned index entries and thumbnails</li> </ul>"},{"location":"release-notes/#january-21-2021","title":"January 21, 2021","text":"<p>Build 210121-07e559df</p> <ul> <li>UX: Improved video playback and icons</li> <li>UX: Restructured main navigation</li> <li>Mobile: Show search field in albums</li> </ul>"},{"location":"release-notes/#january-20-2021","title":"January 20, 2021","text":"<p>Build 210120-e7cd5e9a</p> <ul> <li>API: Apply limit, offset and sort order when searching for IDs</li> <li>ARM64: Reverted database image back to arm64v8/mariadb in config example</li> </ul>"},{"location":"release-notes/#january-19-2021","title":"January 19, 2021","text":"<p>Build 210119-a5399f06</p> <ul> <li>UX: Optimized user interface for iOS and tablets</li> <li>UX: Improved theme colors</li> <li>UX: Scroll position is restored when navigating back</li> <li>Translations: Added Czech</li> <li>Metadata: Estimate timezone    and allow overwriting estimated locations </li> <li>Settings: Fixed disabling logs</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UX: Added two dark themes</li> </ul>"},{"location":"release-notes/#january-11-2021","title":"January 11, 2021","text":"<p>Build 210111-cc05c430</p> <ul> <li>UX: Disabled preloading in live photo player to reduce memory footprint</li> <li>UX: Updated main navigation, find all media types via /browse</li> <li>UX: Removed lag when selecting pictures</li> <li>UX: Tweaked tile size breakpoints in Albums, Labels, and Search</li> <li>UX: Added tooltips to navigation expand and minimize buttons</li> <li>UX: Preload additional search results</li> <li>UX: Removed image loading spinners for faster rendering</li> <li>Thumbnails: Added cache control headers for improved performance</li> <li>Album Covers: Cache will be flushed after updating private flags</li> <li>Search: Improved performance of photos query</li> <li>PWA: Added service worker so that app can be installed more easily</li> <li>PWA: Enabled auto-rotate   so that photos may be viewed in landscape mode</li> <li>Frontend: Removed unused dependencies and    reduced build size</li> <li>Translations: Updated Russian,    French,   Simplified Chinese, and   German</li> <li>Index: Automatically create JPEGs for related media files as well</li> <li>Import: Improved error handling when the file system becomes unavailable</li> <li>Config: Updated docker-compose.yml examples</li> <li>Config: Added optional gzip compression for built-in web server</li> <li>Config: Limit number of indexing workers to half the number of physical cores by default to    avoid high load on hyper-threading capable CPUs</li> </ul>"},{"location":"release-notes/#january-4-2021","title":"January 4, 2021","text":"<p>Build 210104-7f9e806a</p> <ul> <li>Config: Added auto index &amp; import defaults to Dockerfiles</li> <li>Import: Extract metadata with ExifTool before moving</li> <li>Import: Automatically create folder albums</li> <li>Help: Updated WebSocket page</li> <li>UX: Added <code>UI.Zoom</code> setting to re-enable page zoom</li> <li>UI: Updated default theme</li> <li>Translations: Added Hebrew &amp; Japanese, updated Brazilian Portuguese</li> <li>Albums &amp; Cards View: Reduced tile size on large screens</li> <li>WebDAV: Less verbose logging</li> </ul>"},{"location":"release-notes/#january-2-2021","title":"January 2, 2021","text":"<p>Build 210102-af71e5f7</p> <ul> <li>WebDAV: Uploads and other changes trigger auto indexing / importing</li> <li>Config: Use random hash for improved preview token security </li> <li>UX: Disabled page zoom so that app feels more native on mobile devices</li> <li>UX: Reduced min password length to 4 characters</li> <li>UX: Improved docker-compose.yml examples</li> <li>UX: Reduced icon size in \"add to album\" dialog</li> </ul>"},{"location":"release-notes/#december-31-2020","title":"December 31, 2020","text":"<p>Build 201231-8e22fbf8</p> <ul> <li>Initial Stable Release</li> </ul>"},{"location":"release-notes/#getting-updates","title":"Getting Updates","text":"<p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. To update, you can either manually pull the newest image and restart, or set up a service like Watchtower to get automatic updates.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/","title":"Every Contribution Makes a Difference","text":"<p>We welcome contributions of any kind, including blog posts, tutorials, testing, writing documentation, and pull requests.</p>"},{"location":"developer-guide/#our-milestones","title":"Our Milestones","text":""},{"location":"developer-guide/#upcoming-features-and-enhancements","title":"Upcoming Features and Enhancements","text":"<p>The public roadmap shows what tasks are in progress, what needs testing, and which features are going to be implemented next.</p> <p>You are welcome to submit specific feature requests after you have verified that no similar issue already exists. Give ideas you like a thumbs-up \ud83d\udc4d  , so that we know what is most popular.</p>"},{"location":"developer-guide/#join-the-community","title":"Join the Community","text":"<p>Follow us on Mastodon, Bluesky, or join the Community Chat to get regular updates, connect with other users, and discuss your ideas. Our Code of Conduct explains the \"dos and don\u2019ts\" when interacting with other community members.</p> <p>As a contributor, you are also welcome to contact us directly if you have something on your mind that you don't want to discuss publicly. Please note, however, that due to the high volume of emails we receive, our team may be unable to get back to you immediately. We do our best to respond within five business days or less.</p>"},{"location":"developer-guide/#creating-bug-reports","title":"Creating Bug Reports","text":"<p>Before reporting a bug, first use our Troubleshooting Checklists to determine the cause of your problem. If you have a general question, need help, it could be a configuration issue, or a misunderstanding in how the software works:</p> <ul> <li>you are welcome to ask in our Community Chat</li> <li>or post your question in GitHub Discussions</li> </ul> <p>In order for us to investigate new bug reports, they must include a complete list of steps to reproduce the problem, the software versions used and information about the environment in which the problem occurred, such as browser type, browser version, browser plug-ins, operating system, storage type, processor type, and memory size.</p> <p>A template for creating bug reports can be found at photoprism.app/kb/reporting-bugs. We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>When browsing issues, please note that our team and all issue subscribers receive an email notification from GitHub whenever a new comment is added, so these should only be used for sharing important information and not for discussions, questions, or expressing personal opinions.Thank you very much!</p>"},{"location":"developer-guide/#submitting-pull-requests","title":"Submitting Pull Requests","text":"<p>Follow our step-by-step guide to learn how to submit new features, bug fixes, and documentation enhancements.</p> <p>Pull requests solving \"help wanted\" issues are the easiest to merge and the most helpful to us, as they allow us to spend more time on core functionality and other issues that are difficult for external contributors to work on. If you are new to this project, anything labeled \"easy\" may be a good first contribution.</p> <p>Be aware that reviewing, testing and finally merging pull requests requires significant resources on our side. It can therefore take several months if it is not just a small fix, especially if extensive testing is needed to prevent bugs from getting into our stable version.</p>"},{"location":"developer-guide/#thank-you-to-all-current-and-past-sponsors","title":"Thank You to All Current and Past Sponsors","text":"<p>A big thank you to all of our sponsors, whose generous support has been and continues to be essential to the success of the project! </p> <p>Our project infrastructure is provided by the following companies:</p> <ul> <li>GitHub hosts our code repositories and also provides many other important services</li> <li>Docker approved us for their Open Source Program and hosts all of our app images</li> <li>Element develops and operates the infrastructure that our community chat is based on</li> <li>BrowserStack provides free access to their device and browser testing infrastructure</li> </ul> <p>View Sponsors \u203a View Credits \u203a</p> <p>Privacy Notice</p> <p>We operate a number of web services that help us develop and maintain our software in collaboration with the open source community, for example translate.photoprism.app.</p> <p>Because many of these apps and tools were originally developed for internal use without a high level of privacy in mind, we ask that you do not enter personal information such as your real name or personal email address if you want it to remain private.</p> <p>Personal details may otherwise show up in logs, source code, translation files, commit messages, and pull request comments.</p>"},{"location":"developer-guide/code-quality/","title":"Quality and Best Practices","text":"<p>The quality of code has a practical impact on both your agility and the cost of development:<sup>1</sup></p> <ul> <li>you can't change buggy and/or bloated code fast enough to be truly agile</li> <li>existing bugs can easily increase development costs (and time) by 10x</li> <li>the mess eventually becomes so big and so deep that you cannot clean it up anymore<sup>2</sup></li> </ul> <p> </p> Productivity vs Time <p>All developers with more than a few years experience know that previous messes slow them down. And yet all developers feel the pressure to make messes in order to meet deadlines. In short, they don\u2019t take the time to go fast! You will not make the deadline by making a mess. Indeed, the mess will slow you down instantly, and will force you to miss the deadline. \u2014 Robert C. Martin</p>"},{"location":"developer-guide/code-quality/#bottom-up-development","title":"Bottom-Up Development","text":"<p>Breaking a problem down into small, coherent fragments lends itself to organization. Start with the basic low-level components and then proceed to higher-level abstractions.</p> <p>Bottom-up development emphasizes coding and early testing, which can begin before having a detailed understanding of the final system. In practice, this may never be the case as requirements are constantly evolving.</p> <p>Advantages of the bottom-up approach are component reusability, agility, and testability.</p> <p>I compared Mel's hand-optimized programs with the same code massaged by the optimizing assembler program, and Mel's always ran faster. That was because the \u201ctop-down\u201d method of program design hadn't been invented yet, and Mel wouldn't have used it anyway.  He wrote the innermost parts of his program loops first. \u2014 The Story of Mel</p>"},{"location":"developer-guide/code-quality/#opportunistic-refactoring","title":"Opportunistic Refactoring","text":"<p>We encourage developers to refactor existing code when they notice a specific issue, even though this may seem difficult when working with a distributed team, branches, and pull requests due to potential merge conflicts and delayed feedback.</p> <p>It is best to do this while you are working on the same component anyway, for example to implement a feature or enhancement. This way you can easily validate if the proposed changes make sense and you avoid conflicts with others.</p> <p>Releasing imperfect code is not a problem as long as it is accompanied by automated tests. This makes it easy to refactor later without breaking anything or requiring detailed knowledge of the requirements and a lot of time for manual testing. Be pragmatic. Done is better than perfect.</p> <p>Potential security issues are an important exception. These should never be ignored. If you find a problem, please report it to us immediately so we can fix it.</p> <p>Feel free to think ahead, just don't code ahead. But also, don't feel the need to decide so many details ahead. Learn enough to get started and build only what you need. \u2014 J. B. Rainsberger</p>"},{"location":"developer-guide/code-quality/#premature-optimization","title":"Premature Optimization","text":"<p>One of the hardest parts of software development is knowing what to work on. Don't get carried away implementing unnecessary abstractions and focusing on scalability optimization before you've even validated the functionality of a feature or component.</p> <p>Instead of spending a lot of time on something you may not need, focus on user needs and test automation. That way, you'll make sure you're developing the right functionality, and you can refactor it later for scalability and other non-functional aspects without breaking anything.</p> <p>Also keep in mind that it's much easier and less effort to maintain small amounts of duplicate code than to choose the wrong abstraction.</p> <p>Premature optimization is the root of all evil. \u2014 Donald Knuth</p>"},{"location":"developer-guide/code-quality/#be-careful-with-caching","title":"Be Careful with Caching","text":"<p>There are two hard things in computer science: cache invalidation and naming things.</p> <p>A cache is just a memory leak you haven't met yet. \u2014 Dave Cheney</p>"},{"location":"developer-guide/code-quality/#go-slow-before-you-go-fast","title":"Go Slow Before You Go Fast \ud83d\udc30","text":"<p>Read the docs, understand the context, and talk to others to gather missing information before you start coding. Write tests. Stay focused.</p> <p>Don't worry that this will take too long. Take your time. It's the fastest and only sustainable way to get things done. You have to go slow before you can go fast.</p> <p>Simple, elegant solutions are more effective, but they are harder to find than complex ones, and they require more time, which we too often believe to be unaffordable. \u2014 Niklaus Wirth, Communications of the ACM, 1985</p>"},{"location":"developer-guide/code-quality/#effectiveness-efficiency","title":"Effectiveness &gt; Efficiency","text":"<p>Optimize for effectiveness before efficiency when prioritizing tasks:</p> <ul> <li>Effectiveness is about achieving a specific outcome, such as providing the features that best help users solve their problems.</li> <li>Efficiency means doing things in an optimal way, for example, faster and cheaper. We all strive to be efficient, but that's worthless if it doesn't contribute to effectiveness.</li> </ul> <p>In contrast, a feature factory focuses on the quantity of new features rather than their quality:</p> <p></p> <p>It is fundamentally the confusion between effectiveness and efficiency that stands between doing the right things and doing things right. There is surely nothing quite so useless as doing with great efficiency what should not be done at all. \u2014 Peter Drucker</p>"},{"location":"developer-guide/code-quality/#test-automation-guidelines","title":"Test Automation Guidelines","text":"<p>We strive for complete test coverage as it is a useful tool for finding  untested parts of our code base. Test coverage is of limited use as a numerical statement of how good our tests are.</p> <p>The F.I.R.S.T. Principle includes five rules that good tests should follow:<sup>2</sup></p> <ul> <li>Fast. If tests are slow, you won't run them frequently, which makes them much less useful and increases the cost of development.</li> <li>Independent. You should be able to run each test independently and run the tests in any order you like. When tests depend on each other, then the first one to fail causes a cascade of downstream failures, making diagnosis difficult and hiding downstream defects.</li> <li>Repeatable. If your tests aren\u2019t repeatable in any environment, then you\u2019ll always have an excuse for why they fail. You\u2019ll also find yourself unable to run the tests when the environment isn\u2019t available.</li> <li>Self-Validating. You should not have to read through a log file to tell whether the tests pass. If the tests aren\u2019t self-validating, then failure can become subjective and running the tests can require a long manual evaluation.</li> <li>Timely. If you write the tests after the production code, you will generally find that the production code is difficult to test. Instead, add tests at implementation time to ensure that the code is testable, does what you expect it to do, and meets the requirements.</li> </ul> <p>Code that cannot be tested is flawed. \u2014 Anonymous</p>"},{"location":"developer-guide/code-quality/#code-quality-reports","title":"Code Quality Reports","text":"<p>goreportcard.com generates reports on the quality of Open Source Go projects. It uses several measures, including <code>gofmt</code>, <code>go vet</code>, <code>go lint</code> and <code>gocyclo</code>. If you find this helpful and also use the tool for your own projects, you can support the developers on Patreon.</p> <p></p> <p>Take inspiration from quality reports, but keep in mind that not every reported issue must be fixed immediately.</p>"},{"location":"developer-guide/code-quality/#security-best-practices","title":"Security Best Practices","text":"<p>The Open Source Security Foundation (OpenSSF) maintains standardized security criteria and best practices for open-source projects:</p> <p></p> <p>View Security Testing Guide \u203a</p> <ol> <li> <p>Allen Holub, twitter.com/allenholub/status/1073738216140791808, 2018\u00a0\u21a9</p> </li> <li> <p>Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship, 2009\u00a0\u21a9\u21a9</p> </li> </ol>"},{"location":"developer-guide/configuration/","title":"Configuration","text":""},{"location":"developer-guide/configuration/#command-line-interface","title":"Command-Line Interface","text":"<p>The <code>photoprism help</code> (or <code>photoprism --help</code>) command lists all supported subcommands and config options available in the current version:</p> <pre><code>./photoprism help\n</code></pre> <p>Run the following to display all global config options and their current values:</p> <pre><code>./photoprism show config\n</code></pre> <p>You can also use the <code>photoprism show</code> command to display supported search filters, file types, thumbnail sizes, and metadata tags:</p> <pre><code>./photoprism show --help\n</code></pre>"},{"location":"developer-guide/configuration/#config-options","title":"Config Options","text":"<p>You can either use environment variables like <code>PHOTOPRISM_CACHE_PATH</code>, config files (in the <code>storage/config</code> directory) or command line parameters like <code>--cache-path</code> to change the value of config options.</p> <p>Learn more \u203a</p> <p>Changes to the config options always require a restart to take effect. For development purposes, you do not need to change any settings if you followed the steps described under Build Setup.</p>"},{"location":"developer-guide/directories/","title":"Project Directory Structure","text":"<p>The directory layout that we use for our public project repository is loosely based on golang-standards/project-layout:</p> <ul> <li><code>/</code> contains a Makefile, a readme, the license and various config files for dependency management, building and continuous integration</li> <li><code>/assets</code> contains subdirectories for various assets such as photos, built JS/HTML/CSS files and server-side HTML templates</li> <li><code>/cmd</code> contains the application source code (main package)</li> <li><code>/docker</code> contains Dockerfiles and related assets, e.g. for Development, TensorFlow and ARM64</li> <li><code>/frontend</code> contains our Web frontend JS/HTML/CSS source code</li> <li><code>/internal</code> contains the source code of our internal Go packages</li> <li><code>/pkg</code> contains the source code of our public Go packages</li> <li><code>/scripts</code> contains shell scripts used for building, deployment and continuous integration</li> </ul>"},{"location":"developer-guide/documentation/","title":"Documentation","text":""},{"location":"developer-guide/documentation/#user-facing-documentation","title":"User Facing Documentation","text":"<p>User-facing documentation lives in the photoprism-docs repository and can be browsed on docs.photoprism.app.</p> <p>See the README for how to easily edit the docs yourself.</p>"},{"location":"developer-guide/documentation/#package-documentation-godoc","title":"Package Documentation (GoDoc)","text":"<p>Godoc generates documentation automatically, so it's tightly coupled to the photoprism source code.</p> <p> View Package Docs </p> <p>Some highlights to explore:</p> <ul> <li>cmd/photoprism - main application</li> <li>internal/photoprism - main library package</li> <li>internal/server - server initialization and routing</li> <li>internal/api - server api</li> <li>internal/commands - command line interface</li> <li>internal/form - input validation (based on gin)</li> <li>internal/entity - models (based on GORM)</li> </ul>"},{"location":"developer-guide/faq/","title":"Frequently Asked Questions","text":""},{"location":"developer-guide/faq/#can-your-development-environment-be-used-under-windows","title":"Can your development environment be used under Windows?","text":"<p>Yes, this is possible if you have Git and Docker Desktop installed. However, you are likely to experience problems when using our Makefile and other scripts directly on Windows, as they were developed and tested on Linux/Unix.</p> <p>We therefore recommend not to use Make for setting up your development environment and to instead run the required commands manually from the main project directory (where the <code>compose.yaml</code> file is located):</p> <pre><code>docker compose --profile=all pull --ignore-pull-failures\ndocker compose build\ndocker compose up\n</code></pre> <p>Once the services have been built and started as shown above, you can open a terminal session:</p> <pre><code>docker compose exec photoprism bash\n</code></pre> <p>In addition, you should disable the \"autocrlf\" option in Git under Windows to avoid problems with Linux/Unix line endings:</p> <pre><code>git config --global core.autocrlf false\n</code></pre> <p>That's it! Most of the other Make targets are used from within the terminal session, i.e. not under Windows, so no compatibility issues or missing dependencies are to be expected.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/faq/#why-not-use-a-more-permissive-public-license-so-that-for-example-developers-at-google-can-contribute-more-easily","title":"Why not use a more permissive public license so that, for example, developers at Google can contribute more easily?","text":"<p>Since we had hoped for a collaboration with Google and were aware of their AGPL policy, PhotoPrism was initially licensed under Apache 2.0, which is much more permissive. However, no one seemed interested, although we did talk to quite a few personal acquaintances at Google. That made it easy for our community to convince us to use AGPL instead.</p>"},{"location":"developer-guide/faq/#isnt-it-insecure-that-thumbnail-urls-work-even-if-you-are-not-logged-in","title":"Isn't it insecure that thumbnail URLs work even if you are not logged in?","text":"<p>Like most commercial image hosting services, we've chosen to use a cookie-free thumbnail API to minimize request latency and avoid unnecessary network traffic. If you were to copy private session cookies and use them in a different browser window, you would have a similar problem, except that they also work for other API endpoints, not just a single image.</p> <p>Even if URLs were to become invalid every minute: Digital copies are as good as originals. Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back. Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p> <p>Visit docs.photoprism.app/developer-guide/media/thumbnails/ to learn more.</p>"},{"location":"developer-guide/faq/#does-your-software-depend-on-any-external-services","title":"Does your software depend on any external services?","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>In order to use the maps and view location details in PhotoPrism, as well as successfully run our test suite as a developer, you must allow requests to these API endpoints if you have a firewall installed and make sure your Internet connection is working.</p> <p>Should you wish to operate one or both of these services on your own premises, we can set up such a fully autonomous solution for you, provided you are prepared to cover the initial setup costs as well as ongoing maintenance fees for content licenses and updates.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p> <p>Other applications sometimes use the API that OpenStreetMap provides for development and testing. In this case, their usage and privacy policies apply, which means that your request data is stored and used to generate publicly available reports. This differs from our self-hosted service, which ensures your privacy and provides a better user experience with faster loading times.</p>"},{"location":"developer-guide/faq/#why-do-i-see-connection-errors-when-requesting-api-keys-at-startup","title":"Why do I see connection errors when requesting API keys at startup?","text":"<p>Retrieving location data with reverse geocoding and loading the interactive world maps we provide requires a connection to external services. Please make sure that requests to these API endpoints are allowed if you have a firewall installed, and that your internet connection is working.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/faq/#are-the-keys-for-using-interactive-world-maps-provided-free-of-charge","title":"Are the keys for using interactive world maps provided free of charge?","text":"<p>All users have access to a high-resolution vector map that we host on our own infrastructure, so no commercial API key is required. It is based on data published by OpenStreetMap (OSM).</p> <p>In addition, we automatically provide our members and business customers with an API key for MapTiler's commercial service, which includes satellite, outdoor and 3D maps. You can test these on our public demo.</p> <p>Learn more \u203a</p> <p>Although experienced users could alternatively register test accounts with a commercial provider to gain access to additional map styles instead of signing up for a membership, we believe this would not be fair. Keep in mind that we have a much larger user base than others who might encourage their users to do so, and that providers might then stop offering free test accounts, which is something we don't want to be responsible for.</p>"},{"location":"developer-guide/faq/#why-dont-you-use-the-free-map-tile-service-provided-by-openstreetmap","title":"Why don't you use the free map tile service provided by OpenStreetMap?","text":"<p>Other free and open-source software sometimes uses the public maps that OpenStreetMap provides for development and testing. These are not intended for end-user applications like ours.</p> <p>Using their service also means that their usage and privacy policies apply, as your request data is stored and used to generate publicly available reports. This differs from our services, which ensure a high level of privacy and provide a better user experience with faster loading times.</p>"},{"location":"developer-guide/issues/","title":"GitHub Issues","text":"<p>We use GitHub issues for managing bugs, ideas, and enhancements. Issues labeled help wanted / easy can be good (first) contributions. You are welcome to email us if you want to work on something specific, need help with a pull request, or have something on your mind that you don't want to discuss publicly.</p> <p>When browsing issues, please note that our team and all issue subscribers receive an email notification from GitHub whenever a new comment is added, so these should only be used for sharing important information and not for discussions, questions, or expressing personal opinions.</p>"},{"location":"developer-guide/issues/#writing-user-stories","title":"Writing User Stories","text":"<p>Start describing new ideas and enhancements with a user story similar to this one:</p> <p>As a [type of person] I'd like to be able to [do something] so that I can [get some result].</p> <p>This makes it easier for everyone to understand who wants what and why.</p> <p>Reading between the lines consumes a lot of time that can be used more effectively. Vague requirements become even more expensive when the wrong things are implemented, or they don't provide value in the way they were implemented.</p>"},{"location":"developer-guide/issues/#creating-bug-reports","title":"Creating Bug Reports","text":"<p>In order for us to investigate new bug reports, they must include a complete list of steps to reproduce the problem, the software versions used and information about the environment in which the problem occurred, such as browser type, browser version, browser plug-ins, operating system, storage type, processor type, and memory size:</p> <p>https://www.photoprism.app/kb/reporting-bugs</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Before reporting a bug, first use our Troubleshooting Checklists to determine the cause of your problem. Contact us or a community member if you need help, it could be a configuration problem, or a misunderstanding in how the software works.</p> <p>This gives us the opportunity to improve our documentation and provide best-in-class support instead of dealing with unclear/duplicate bug reports or triggering a flood of notifications by replying to comments. Thank you very much!</p>"},{"location":"developer-guide/issues/#acceptance-criteria","title":"Acceptance Criteria","text":"<p>Issues should include a list of Acceptance Criteria that clearly state what is expected. We recommend using MAY, SHOULD, and MUST as keywords to indicate priorities.</p> <p>Clickable checkboxes for each item can be created via GitHub Markdown:</p> <pre><code>Acceptance Criteria:\n\n- [ ] \"Log In\" button MUST be visible on /login page\n- [ ] \"Log In\" button MAY be disabled if password field is empty\n- [ ] Page SHOULD use existing Vuetify components\n- [ ] Login MUST work in latest Firefox, Safari and Chrome\n</code></pre>"},{"location":"developer-guide/pull-requests/","title":"Pull Requests","text":""},{"location":"developer-guide/pull-requests/#acceptance-criteria","title":"Acceptance Criteria","text":"<p>Because we want to create the best possible product for our users, we have a set of criteria to ensure that all submissions are acceptable:</p> <ul> <li> Features and enhancements must be fully implemented so that they can be released at any time without additional work</li> <li> Automated unit and/or acceptance tests are mandatory to ensure the changes work as expected and to reduce repetitive manual work</li> <li> Frontend components must be responsive to work and look properly on phones, tablets, and desktop computers; you must have tested them on all major browsers and different devices</li> <li> Documentation and translation updates should be provided if needed</li> <li> In case you submit database-related changes, they must be tested and compatible with SQLite 3 and MariaDB 10.5.12+</li> </ul> <p>These guidelines are not intended as a filter or barrier to participation. If you are unfamiliar with Open Source development, we will help you.</p>"},{"location":"developer-guide/pull-requests/#contributor-license-agreement","title":"Contributor License Agreement","text":"<p>After you submit your first pull request, you will be asked to accept our Contributor License Agreement (CLA). Visit photoprism.app/cla to learn more.</p>"},{"location":"developer-guide/pull-requests/#how-to-create-and-submit-a-pull-request","title":"How to Create and Submit a Pull Request","text":""},{"location":"developer-guide/pull-requests/#fork-our-repository","title":"Fork our repository","text":"<ul> <li>Click the Fork button in the header of our main repository</li> <li>Clone the forked repository on your local computer: <ul> <li><code>git clone https://github.com/[your username]/photoprism</code></li> </ul> </li> <li>Connect your local to our \"upstream\" main repository by adding it as a remote: <ul> <li><code>git remote add upstream https://github.com/photoprism/photoprism.git</code> </li> </ul> </li> <li>Create a new branch from <code>develop</code> - it should have a short and descriptive name (not \"patch-1\") that does not already exist, for example:<ul> <li><code>git checkout -b feature/your_feature_name</code> </li> </ul> </li> <li>See also https://guides.github.com/activities/forking/</li> </ul>"},{"location":"developer-guide/pull-requests/#make-your-changes","title":"Make your changes","text":"<ul> <li>While you are working on it and your pull request is not merged yet, pull in changes from \"upstream\" often so that you stay up to date and there is a lower risk for merge conflicts:<ul> <li><code>git fetch upstream</code></li> <li><code>git merge upstream/develop</code></li> </ul> </li> <li>We recommend running tests after each change to make sure you didn't break anything:<ul> <li><code>make test</code></li> </ul> </li> <li>Add tests for any new code <ul> <li>If you have questions about how to do this, please ask in your pull request</li> </ul> </li> <li>Run <code>make fmt</code> to ensure code is properly formatted according to our standards</li> <li>If all tests are green and you see no other errors, commit your changes. To reference related GitHub issues, please end your commit message with the issue ID like <code>#1234</code>:<ul> <li><code>git status -s</code></li> <li><code>git add .</code></li> <li><code>git commit -m \"Your commit message #1234\"</code></li> </ul> </li> </ul>"},{"location":"developer-guide/pull-requests/#when-you-are-ready","title":"When you are ready...","text":"<ul> <li> Verify you didn't forget to add / commit files, output of <code>git status -s</code> should be empty</li> <li> Push all commits to your forked remote repository on GitHub:<code>git push -u origin feature/your_feature_name</code></li> <li> Create a pull request with a helpful description of what it does</li> <li> Wait for us to perform a code review and fix the remaining issues, if any</li> <li> Update and/or add documentation if needed</li> <li> Sign the Contributor License Agreement (CLA)</li> </ul> <p>You can also create a pull request if your changes are not yet complete or working. Just let us know  it's in progress, so we don't try to merge them. We can help you with a code review or other feedback  if needed. Please be patient with us.</p> <p>Be aware that reviewing, testing and finally merging pull requests requires significant resources on our side. It can therefore take several months if it is not just a small fix, especially if extensive testing is needed to prevent bugs from getting into our stable version.</p> <p>Privacy Notice</p> <p>We operate a number of web services that help us develop and maintain our software in collaboration with the open source community, for example translate.photoprism.app.</p> <p>Because many of these apps and tools were originally developed for internal use without a high level of privacy in mind, we ask that you do not enter personal information such as your real name or personal email address if you want it to remain private.</p> <p>Personal details may otherwise show up in logs, source code, translation files, commit messages, and pull request comments.</p>"},{"location":"developer-guide/setup/","title":"Setting Up Your Development Environment","text":""},{"location":"developer-guide/setup/#step-1-use-git-to-clone-the-project-from-github","title":"Step 1: Use Git to Clone the Project from GitHub","text":"<p>Before running any commands, please make sure you have Git, Make, Docker, and Docker Compose installed on your system. These are available for Mac, Linux, and Windows.<sup>1</sup></p> <p>In case you are using Ubuntu Linux, you can run this script to install the latest Docker version including the Compose Plugin on your computer in one step:</p> <pre><code>bash &lt;(curl -s https://setup.photoprism.app/ubuntu/install-docker.sh)\n</code></pre> <p>When working on Microsoft Windows or Apple macOS, you need to install the latest version of Docker Desktop and also disable \"autocrlf\" in Git to avoid errors<sup>2</sup>:</p> <pre><code>git config --global core.autocrlf false\n</code></pre> <p>Now change to the directory where you usually keep your development projects, and run this command to download the project from GitHub:</p> <pre><code>git clone git@github.com:photoprism/photoprism.git\n</code></pre> <p>Once all code has been downloaded, change to the project directory which should now exist:</p> <pre><code>cd photoprism\n</code></pre> <p>Developing on Windows</p> <p>Our standard development environment can also be used on Windows if you have Git, Docker Desktop, and a suitable IDE like GoLand installed. However, we recommend running the required <code>docker compose</code> commands manually instead of using <code>make docker-build</code> and <code>make terminal</code>. Learn more \u203a</p>"},{"location":"developer-guide/setup/#step-2-launch-your-local-development-environment","title":"Step 2: Launch Your Local Development Environment","text":"<p>Pull the latest Docker images and then launch the pre-configured build environment we provide to have an isolated development container pre-installed with all the tools you might need, including the latest versions of Go, NodeJS, and NPM:<sup>3</sup></p> <pre><code>make docker-build\ndocker compose up\n</code></pre> <p>This environment is for testing and development purposes only. Do not use it in production. Also note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p>"},{"location":"developer-guide/setup/#step-3-install-the-dependencies-and-start-developing","title":"Step 3: Install the Dependencies and Start Developing","text":"<p>Open a terminal to run commands directly in your local development environment:</p> <pre><code>make terminal\n</code></pre> <p>Before starting to build, make sure all dependencies, such as NPM packages and TensorFlow models, are installed:</p> <pre><code>make dep\n</code></pre> <p>Congratulations! You can now build the frontend assets (JS), compile the backend binary (Go) and then run a custom PhotoPrism version in your local environment:</p> <p><pre><code>make build-js\nmake build-go\n./photoprism start\n</code></pre> After PhotoPrism has been started as shown above, the user interface can be opened in a web browser by navigating to one of these URLs:</p> <ul> <li>http://localhost:2342/ (HTTP)</li> <li>https://app.localssl.dev/ (HTTPS)</li> </ul> <p>In the build environment, the default login is <code>admin</code> with the password <code>photoprism</code>. You can disable it with the <code>--public</code> command flag:</p> <pre><code>./photoprism --public start\n</code></pre> <p>You can find the default settings in the <code>compose.yaml</code> file located in the root of the project. Keep them when you run tests. Otherwise, the tests may fail for others, even if they succeed in your local environment.</p> <p>You can find a list of all <code>make</code> targets in the Makefile. For example, <code>make test</code> will run frontend and backend unit tests. Wrong filesystem permissions can be fixed by running <code>make fix-permissions</code> in a terminal.</p>"},{"location":"developer-guide/setup/#optional-build-the-frontend-in-watch-mode","title":"Optional: Build the Frontend in Watch Mode","text":"<p>The integrated web server not only provides the backend API, but is also used to serve static assets. These can be automatically rebuilt (updated) when you change a file. To do this, run the following command in a terminal, either inside or outside the container (outside is faster if your host is not running Linux):</p> <pre><code>make watch-js\n</code></pre> <p>Alternatively, you can change to the <code>frontend</code> directory and run NPM directly:</p> <pre><code>cd frontend\nnpm run watch\n</code></pre> <p>To update the frontend dependencies, also change to the <code>frontend</code> directory and run:</p> <pre><code>npm update\n</code></pre>"},{"location":"developer-guide/setup/#optional-use-a-go-debugger","title":"Optional: Use a Go Debugger","text":"<p>To debug the backend Go code, first make sure you have built and run the containers as described above:</p> <pre><code>make docker-build\ndocker compose up\n</code></pre> <p>Note: If you make changes in the <code>Dockerfile</code> to test things out, you can build and run the <code>photoprism</code> container individually:</p> <pre><code>docker compose build photoprism\ndocker compose up photoprism\n</code></pre> <p>Then open a terminal to the container as described above:</p> <pre><code>make terminal\n</code></pre> <p>and if you made code changes, make sure the rebuild the Go code:</p> <pre><code>make build-go\n</code></pre> <p>You can then run the Delve command from inside the container to start the debugger - the command-line options can be customized based on your needs:</p> <pre><code>dlv --listen=:40000 --headless=true --log=true --log-output=debugger,debuglineerr,gdbwire,lldbout,rpc --accept-multiclient --api-version=2 exec ./photoprism -- start\n</code></pre> <p>Once you run this command, you can use VSCode or Goland to add breakpoints and step through breakpoints in the code. Follow the instructions here to set up VSCode, and here to set up Goland to connect to the debugger.</p> <p>Once the debugger is running, you can view the app at <code>http://localhost:2342/</code> and debug the code.</p> <p>Questions?</p> <ul> <li>Radomir Sohlich wrote a pragmatic introduction to Makefiles for Go developers</li> <li>we are using Go Modules for managing our dependencies (new in 1.11)</li> <li>this guide was not tested on Windows, you might need to edit your <code>compose.yaml</code> or <code>docker-compose.yml</code> to make it work with Windows specific paths</li> </ul>"},{"location":"developer-guide/setup/#apple-silicon-raspberry-pi-and-arm64","title":"Apple Silicon, Raspberry Pi, and ARM64","text":"<p>Our development environment has been built into a single multi-arch image for 64-bit AMD, Intel, and ARM processors. That means, Apple Silicon, Raspberry Pi 3 / 4, and other ARM64-based devices can pull from the same repository.</p>"},{"location":"developer-guide/setup/#multi-arch-docker-builds","title":"Multi-Arch Docker Builds","text":"<p>For information about multi-architecture Docker builds, see the following documentation:</p> <ul> <li>Docker Buildx</li> <li>Leverage multi-CPU architecture support</li> </ul>"},{"location":"developer-guide/setup/#qemu-quick-start","title":"QEMU Quick Start","text":"<ol> <li>install qemu-user-static from docker hub: <code>docker run --rm --privileged multiarch/qemu-user-static --reset -p yes</code> multiarch/qemu-user-static</li> <li>verify that dockers buildx command is installed <code>docker buildx version</code>. if missing, follow install instructions here</li> <li>create buildx builder: <code>docker buildx create --name multiarch-builder &amp;&amp; docker buildx inspect --builder multiarch-builder --bootstrap</code></li> <li>start building: <code>make docker-development-multiarch</code> or <code>make docker-photoprism-multiarch</code></li> </ol> <ol> <li> <p>Instead of using Docker, you can also set up your own build environment based on the steps documented in the Dockerfiles we provide. For this, you should have at least Go 1.24, TensorFlow for C, Make, NPM 11 and MariaDB 11 installed. Note that the test results will be unreliable without Docker. This method is therefore not well suited for contributors and we cannot provide support if something does not work as expected.\u00a0\u21a9</p> </li> <li> <p>If the Git config value \"core.autocrlf\" is set to \"true\", the following error may occur when trying to run shell scripts or Make targets: <code>env: bash\\r: No such file or directory</code> \u21a9</p> </li> <li> <p>Docker uses human-readable Dockerfiles that contain all the commands a user would invoke in a terminal to assemble a complete application image.\u00a0\u21a9</p> </li> </ol>"},{"location":"developer-guide/tests/","title":"Running Unit and Acceptance Tests","text":"<p>In any process, obsessing about the wait times will yield greater enhancements than practically anything else, for longer than you might think. Automation, simplification, etc. are implementation details of that obsession. \u2014 Dan North</p>"},{"location":"developer-guide/tests/#unit-tests","title":"Unit Tests","text":""},{"location":"developer-guide/tests/#go","title":"Go","text":"<p>To run all unit tests, type <code>make test</code> or <code>go test ./internal/...</code> in a terminal.</p> <p>These <code>make</code> targets are currently defined for tests:</p> <ul> <li><code>test</code>: Executes all tests found in a) /internal with a timeout of 20 min and verbose output and b) frontend/tests/unit</li> <li><code>test-short</code>: Executes only fast tests found in /internal with a timeout of 5 min and verbose output</li> <li><code>test-race</code>: Same as <code>test</code> but with race condition detector (much slower) and higher timeout of 60 min</li> <li><code>test-codecov</code>: Same as <code>test</code> but creates a coverage log in coverage.txt and sends it to Codecov (don't use it locally)</li> <li><code>test-coverage</code>: Same as <code>test</code> but creates a coverage.txt file as well as a human-readable report in coverage.html; timeout is elevated to 30 min</li> </ul> <p>You can run single tests via <code>go test -run</code> in a package directory, e.g. /internal/photoprism:</p> <pre><code>$ go test -run NameOfTest\n</code></pre> <p>See docs for more info.</p>"},{"location":"developer-guide/tests/#test-frameworks","title":"Test Frameworks","text":"<p>Go comes with a cool testing framework, it allows you to write test code using the same language, without needing to learn any library or test engine. Go advanced testing tips &amp; tricks contains a lot of useful information. We only import testify/assert to save a few lines for common assertions.</p> <p>Todo: Use a SQL mock driver to test database interactions, for example DATA-DOG/go-sqlmock.</p>"},{"location":"developer-guide/tests/#slow-tests","title":"Slow Tests","text":"<p>Slow tests and benchmarks can be skipped using the <code>-short</code> flag:</p> <pre><code>func TestTimeConsuming(t *testing.T) {\n    if testing.Short() {\n        t.Skip(\"skipping test in short mode.\")\n    }\n    ...\n}\n</code></pre> <p>To execute:</p> <pre><code>go test -short\n</code></pre>"},{"location":"developer-guide/tests/#javascript","title":"Javascript","text":"<p>To run all javascript unit tests, type <code>make test-js</code> in a terminal.</p> <p>In case you want to run a single test add .only to the test you want to run e.g.:</p> <pre><code> it.only(\"should get album id\",  () =&gt; {\n        const values = {\n            ID: 5, AlbumName: \"Christmas 2019\", \n            AlbumSlug: \"christmas-2019\", AlbumUUID: 66\n        };\n        const album = new Album(values);\n        const result = album.getId();\n        assert.equal(result, \"66\");\n    });\n</code></pre> <p>Test coverage output is saved to frontend/coverage/html</p>"},{"location":"developer-guide/tests/#test-frameworks_1","title":"Test Frameworks","text":"<p>To test javascript code we use mocha in combination with karma, chai, sinon and the karma-istanbul-coverage-reporter.</p>"},{"location":"developer-guide/tests/#acceptance-tests","title":"Acceptance Tests","text":"<p>Before you proceed run</p> <pre><code>make dep-acceptance\n</code></pre>"},{"location":"developer-guide/tests/#running-tests-inside-the-docker-container","title":"Running Tests Inside the Docker Container","text":"<p>In the development container environment, you can run the tests in headless chrome:</p> <pre><code>make acceptance-run-chromium\n</code></pre>"},{"location":"developer-guide/tests/#test-frameworks_2","title":"Test Frameworks","text":"<p>Our goal was to implement UI acceptance tests using JavaScript, so that frontend developers are able to run and write them without learning Go.</p> <p>To make a final decision, we compared  TestCafe, Cypress and Nightwatch.js. We agreed on using TestCafe as tests were the most stable and pretty fast (because no long timeouts are needed).</p> Feature TestCafe Cypress Nightwatch.js Supported Browsers Local Chrome, Firefox, Opera, Safari, Internet Explorer, Microsoft Edge, Google Chrome Canary, Chromium Chrome, Chromium, Chrome Canary, Electron Geckodriver, Chromedriver, Microsoft Webdriver, Safaridriver Supported Browsers Headless Chrome, Firefox Electron Problems running headless Continuous Integration Support yes yes yes Setup easy via npm easy via npm easy via npm Usability +++ +++ ++ Speed (3 tests) 2 min (headless chrome and firefox) 1 min (only chrome headless) 1 min (chrome headed) 5 min (headless electron) 2,5 min (chrome headed) 7 min (chrome headed) headless not working Stability nice unstable --&gt; waiting times needed unstable --&gt; waiting times needed Documentation +++ ++ ++ Notes easy to find elements easy to find elements additional library needed to find selectors by text <p>Other test libraries and frameworks we currently don't use:</p> <ul> <li>https://codecept.io/</li> <li>https://funcunit.com/</li> <li>https://www.browserstack.com/</li> <li>http://nightwatchjs.org/ (used by Mozilla's Coral Project)</li> <li>https://developers.google.com/web/updates/2017/04/headless-chrome</li> </ul>"},{"location":"developer-guide/translations-weblate/","title":"Contributing Translations with Weblate","text":"<p>We operate translate.photoprism.app so that you can easily add and update user interface translations without having any development skills.</p> <p>You can either sign in with your GitHub account or create a new account with an email account you have access to:</p> <ul> <li>Provide an alternate address if you want your personal email to remain private as it may appear as authorship in commits, translation files, and pull requests.</li> <li>You are also not required to provide your full name if you do not wish to do so.</li> <li>Let us know privately that you have registered so that we can grant you permissions if needed.</li> </ul> <p>When you sign up, you will be asked to accept our Contributor License Agreement (CLA). Visit photoprism.app/cla to learn more.</p> Sign upAgree to CLAAdd missing translationsReview translationsAdd new language <ol> <li> <p>Navigate to https://translate.photoprism.app/</p> </li> <li> <p>Click Register and create an account</p> </li> </ol> <p></p> <p></p> <ol> <li>Sign in </li> <li>Select the language you want translate to</li> </ol> <p> 3. Open your Dashboard and click Backend (or access to the Backend by clicking here)</p> <p> 4. Click on View contributor agreement</p> <p> 5. Accept the contributor agreement and click Submit</p> <p> 6. Go back to your Dashboard and repeat steps 3-5 for the Frontend-Component</p> <p>Your Dashboard shows you how many strings have no translation yet.</p> <p></p> <ol> <li>Click on the count</li> <li>Enter the translation and click Save and continue</li> </ol> <p> 3. Repeat until all strings are translated</p> <p>Your translations will be reviewed and included in one of the next releases.</p> <p>If translations are missing, we pre-translate messages using services such as DeepL and Google Translate.  This can lead to grammatical errors and misunderstandings.  Native speakers should check existing translations and improve them if necessary.</p> <p>If you are a native speaker and would like to support us by reviewing existing translations, please contact us at hello@photoprism.app so that we can grant you the rights to review.</p> <ol> <li>From your Dashboard open one of the components by clicking on the language</li> </ol> <p> 2. Click on Strings waiting for review</p> <p> 3. Review the translation - edit the string if needed. Then select Approved and click Save and continue</p> <p> 4.  Repeat until all strings are reviewed</p> <p>Please contact us at hello@photoprism.app and we will set up a new language for you to translate!</p>"},{"location":"developer-guide/translations/","title":"Translations","text":"<p>Please don't use the method described here to add/edit translations anymore use this instead!</p> <p>PhotoPrism uses gettext for frontend and backend localization. It is one of the most widely used standards for user interface translation:</p> <ul> <li>Human-readable messages such as <code>File not found</code> are used as identifiers to search for appropriate translations. They also serve as default values when no translation is available.</li> <li>Messages can optionally contain placeholders for numbers and other variables, for example <code>Found %{n} files</code>.</li> </ul> <p>We recommend Poedit for creating and updating translations. The download is free for Mac, Windows and Linux. The source code can be obtained on GitHub.</p> <p>If translations are missing, we pre-translate messages using services such as DeepL and Google Translate. This can lead to grammatical errors and misunderstandings. Native speakers should check existing translations and improve them if necessary. You can use the version compare feature on GitHub to detect changes in translation files.</p>"},{"location":"developer-guide/translations/#frontend","title":"Frontend","text":"<p>Localizations can be found in <code>/frontend/src/locales</code>. The POT file, only containing message ids,  is <code>translations.pot</code>.</p> <p><code>*.po</code> files contain localized messages for each  language identified by their locale,  for example <code>de.po</code> for German and <code>pt_BR.po</code> for Brazilian Portuguese. You can open, edit and save them with Poedit to update existing translations.</p>"},{"location":"developer-guide/translations/#add-new-translation","title":"Add new translation","text":"<ul> <li>In /frontend run <code>npm run gettext-extract</code></li> <li>Install a translation tool e.g. Poedit</li> <li>Open the <code>/frontend/src/locales/translations.pot</code> file with Poedit</li> <li>In Poedit click on \"Create New Translation\" at the bottom and select the language</li> <li>Now you can start translating</li> <li>When done, save your translation as <code>*.po</code> file using the language locale (e.g. <code>de.po</code>) as name</li> <li>Add the new language to the <code>Languages</code> function in  <code>/frontend/src/options/options.js</code></li> <li>Run <code>npm run gettext-compile</code> to compile existing translations into a single <code>translations.json</code> file</li> <li>To test your translations you need to build the frontend again using <code>npm run build</code> or <code>npm run watch</code></li> </ul>"},{"location":"developer-guide/translations/#update-existing-translation","title":"Update existing translation","text":"<ul> <li>In /frontend run <code>npm run gettext-extract</code></li> <li>Install a translation tool e.g. Poedit</li> <li>Open the <code>*.po</code> file of your language e.g. <code>/frontend/src/locales/fr.po</code> file with Poedit</li> <li>In the Poedit menu click \"Catalogue\" --&gt; \"Update from POT File\" --&gt; select the <code>translations.pot</code> file from <code>/frontend/src/locales</code></li> <li>Now you can start proofreading and adding the missing translations</li> <li>Once your done save the changes in the <code>*.po</code> file</li> <li>Run <code>npm run gettext-compile</code> to compile existing translations into a single <code>translations.json</code> file</li> <li>To test your translations you need to build the frontend again using <code>npm run build</code> or <code>npm run watch</code></li> </ul> <p>A binary <code>*.mo</code> (machine object) file will be automatically saved along with every <code>*.po</code> file.  You won't be able to open those in a text editor, but please include them in git commits or when sending translations via email. The compiled <code>translations.json</code> file is not required for pull requests  and often causes merge conflicts.</p>"},{"location":"developer-guide/translations/#backend","title":"Backend","text":"<p>Only asynchronous notifications and certain API responses need translation to provide a  consistent user experience. Technical log messages should be in English to avoid ambiguities and (even slightly) wrong translations. </p> <p>Localizations are kept in <code>/assets/locales</code>. The POT file, only containing message ids, is <code>messages.pot</code>.</p> <p><code>default.po</code> files in sub directories contain localized messages for each  language identified by their locale,  for example <code>de/default.po</code> for German and <code>pt_BR/default.po</code> for Brazilian Portuguese.  You can open, edit and save them with Poedit. Please also add and commit binary <code>*.mo</code> files,  which will be automatically created by Poedit.</p>"},{"location":"developer-guide/translations/#add-new-translation_1","title":"Add new translation","text":"<ul> <li>Run <code>make generate</code> to update <code>/assets/locales/messages.pot</code></li> <li>Open the <code>/assets/locales/messages.pot</code> file with Poedit</li> <li>In Poedit click on \"Create New Translation\" at the bottom and select the language</li> <li>Now you can start translating</li> <li>When done, create a new directory (using the locale as name) and save your translation there as <code>default.po</code></li> </ul>"},{"location":"developer-guide/translations/#update-existing-translation_1","title":"Update existing translation","text":"<ul> <li>Run <code>make generate</code> to update <code>/assets/locales/messages.pot</code></li> <li>Open the <code>/assets/locales/fr/default.po</code> file with Poedit</li> <li>In the Poedit menu click \"Catalogue\" --&gt; \"Update from POT File\" --&gt; select the messages.pot file from /assets/locales/</li> <li>Now you can start proofreading and adding the missing translations</li> <li>Once you're done, save the changes in the default.po file</li> </ul> <p>This will only work when you have gettext installed on your system. We recommend using our latest development image as described in the setup instructions.</p>"},{"location":"developer-guide/api/","title":"Web Service API","text":""},{"location":"developer-guide/api/#rest-api-endpoints","title":"REST API Endpoints","text":"<p>For the currently implemented REST request endpoints available under <code>/api/v1</code>, please refer to the automatically generated backend API documentation as well as the request forms and entity models in our public repository:</p> <ul> <li>https://pkg.go.dev/github.com/photoprism/photoprism/internal/api</li> <li>https://github.com/photoprism/photoprism/tree/develop/internal/api</li> </ul> <p>API request bodies and responses are usually JSON-encoded, except for binary data and some of the OAuth2 endpoints. Note that the <code>Content-Type</code> header must be set to <code>application/json</code> for this, as the request may otherwise fail with error 400.</p> <p>We welcome any contributions that help improve our API docs and make them easier to use for developers. To learn how to access the API while our Swagger documentation is not complete yet, we recommend checking the requests in the browser console that our JS frontend sends when you perform actions like creating an album - and then use the same method, URI, encoding, value names and types for sending requests with your own application.</p>"},{"location":"developer-guide/api/#client-authentication","title":"Client Authentication","text":"<p>When clients have a valid access token, e.g. obtained through the <code>POST /api/v1/session</code> or <code>POST /api/v1/oauth/token</code> endpoint, they can use a standard Bearer Authorization header to authenticate their requests:</p> <pre><code>Authorization: Bearer &lt;token&gt;\n</code></pre> <p>Submitting the access token with a custom <code>X-Auth-Token</code> header is supported as well:</p> <pre><code>curl -H \"X-Auth-Token: 7dbfa37b5a3db2a9e9dd186479018bfe2e3ce5a71fc2f955\" \\\nhttp://localhost:2342/api/v1/photos?count=10\n</code></pre> <p>Besides using the API endpoints provided for this, you can also generate valid access tokens by running the <code>photoprism auth add</code> command in a terminal.</p> <p>Learn more \u203a</p> <p>App passwords can be used as access tokens in the Bearer Authorization header without first creating a session access token, and to obtain short-lived session access tokens through the <code>POST /api/v1/session</code> endpoint.</p>"},{"location":"developer-guide/api/#service-discovery-endpoints","title":"Service Discovery Endpoints","text":""},{"location":"developer-guide/api/#oauth2-authorization-server","title":"OAuth2 Authorization Server","text":"<pre><code>/.well-known/oauth-authorization-server\n</code></pre> <p>\u21aa https://demo.photoprism.app/.well-known/oauth-authorization-server</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/#openid-configuration","title":"OpenID Configuration","text":"<p>It is not yet possible to use PhotoPrism as an OpenID Connect (OIDC) Identity Provider, since not all the required endpoints and grant types have been fully implemented. However, querying the <code>/.well-known/openid-configuration</code> endpoint shows what has already been implemented, so the missing capabilities can be identified and added over time.</p> <p>\u21aa https://demo.photoprism.app/.well-known/openid-configuration</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/#deprecation-policy","title":"Deprecation Policy","text":"<p>Our REST API endpoints are currently not covered by an official deprecation policy, so some routes and request parameters may change as we add new features in upcoming releases.</p> <p>However, we avoid making breaking changes, especially to endpoints that we know other developers are using.</p>"},{"location":"developer-guide/api/auth/","title":"Client Authentication","text":"<p>In order to grant limited access to API clients, you can use the <code>photoprism auth</code> and <code>photoprism clients</code> subcommands to generate authentication tokens for them. While app passwords are bound to user accounts and can be generated by anyone from the UI, OAuth2 access tokens and client credentials can be used to access the REST API without being bound to an account.</p>"},{"location":"developer-guide/api/auth/#app-passwords","title":"App Passwords","text":"<p>All users can generate app-specific passwords for their own use from the web interface by navigating to Settings &gt; Account and then clicking the Apps and Devices button.</p> <p>Alternatively, running the following command in a terminal will generate a new app-specific password e.g. for the admin account, so that WebDAV-compatible clients can synchronize files even if 2FA is enabled for the account or the account password is changed:</p> <pre><code>photoprism auth add -n Sync -s \"webdav\" admin\n</code></pre> <p>You will then be shown the generated app password so you can copy it and keep it in a safe place or enter it directly into an app, as you will not be able to see it again:</p> <pre><code>|-----------------------------|---------------------|\n| App Password                | Authorization Scope |\n|-----------------------------|---------------------|\n| HY8fxO-8hvNqB-43UV4q-1AZ0vu | webdav              |\n|-----------------------------|---------------------|\n</code></pre> <p>For added security, we recommend setting an expiration date for the app passwords and access tokens you generate. Common scopes for use with app passwords are either \"*\" for Full Access or \"webdav\" for WebDAV-compatible file synchronization apps.</p> <p>App passwords can be used as access tokens in the Bearer Authorization header without first creating a session access token, and to obtain short-lived session access tokens through the <code>POST /api/v1/session</code> endpoint.</p>"},{"location":"developer-guide/api/auth/#command-options","title":"Command Options","text":"<p>The following flags can be used with the <code>photoprism auth add</code> command (if you omit name or scope, you will be asked to enter them interactively):</p> Command Flag Description <code>--name CLIENT, -n CLIENT</code> CLIENT name to help identify the application <code>--scope SCOPES, -s SCOPES</code> authorization SCOPES e.g. \"metrics\" or \"photos albums\" (<code>\"*\"</code> to allow all) <code>--expires LIFETIME, -e LIFETIME</code> authentication LIFETIME in seconds, after which access expires (-1 to disable the limit) (default: 31536000)"},{"location":"developer-guide/api/auth/#authorization-scopes","title":"Authorization Scopes","text":"<p>One or more of these scopes can be specified to limit the access to certain API endpoints:</p> <p>files, folders, shares, photos, videos, favorites, albums, moments, calendar, people, places, labels, config, settings, services, users, sessions, logs, webdav, metrics</p> <p>Clients authenticated with app passwords are unable to change the account password or manage user accounts, even if you specify all scopes or use the wildcard <code>\"*\"</code> to allow all.</p>"},{"location":"developer-guide/api/auth/#access-tokens","title":"Access Tokens","text":"<p>If you do not specify a username as argument for the <code>photoprism auth add</code> command, a client access token will be generated (the same flags and scopes as above can be used to limit token authorization and lifetime):</p> <pre><code>|--------------------------------------------------|---------------------|\n| Access Token                                     | Authorization Scope |\n|--------------------------------------------------|---------------------|\n| 7dbfa37b5a3db2a9e9dd186479018bfe2e3ce5a71fc2f955 | files folders       |\n|--------------------------------------------------|---------------------|\n</code></pre> <p>Generating access tokens is a good choice for developers and other advanced users to connect scripts and external services to the PhotoPrism API, e.g. services that collect metrics or start indexing at regular intervals.</p> <p>Please note, however, that client access tokens cannot be used to synchronize files via WebDAV, even if the token authorization scope is set to \"webdav\" or \"*\", as this requires a registered user account. Access tokens can also not be used as a direct password replacement for apps, since clients are not allowed to use the <code>POST /api/v1/session</code> endpoint, which is required for logging in through the user interface.</p>"},{"location":"developer-guide/api/auth/#client-credentials","title":"Client Credentials","text":"<p>If clients support authentication via OAuth2 client credentials, you can use the following terminal commands to generate a <code>client_id</code> and <code>client_secret</code> for them, list registered clients, and delete client credentials that are no longer used:</p> CLI Command Description <code>photoprism clients ls [search]</code> Lists registered client applications <code>photoprism clients add [username]</code> Registers a new client application <code>photoprism clients show [identifier]</code> Shows client configuration details <code>photoprism clients mod [identifier]</code> Updates client application settings <code>photoprism clients rm [identifier]</code> Deletes the specified client application <code>photoprism clients reset --yes</code> Removes all registered client applications <p>For example, running the following in a terminal will generate credentials for Prometheus, with access limited to the metrics endpoint:</p> <pre><code>photoprism clients add -n Prometheus -s metrics\n</code></pre> <p>You will then be shown the generated <code>client_id</code> and <code>client_secret</code> so you can copy them and keep them in a safe place:</p> <pre><code>|------------------|----------------------------------|\n| Client ID        | Client Secret                    |\n|------------------|----------------------------------|\n| csce0w2joodmirvi | 5VKkBeZLDvojjpE9XzCMXShnrxmxHWvN |\n|------------------|----------------------------------|\n</code></pre> <p>OAuth2 client credentials cannot be directly used for synchronizing files via WebDAV, as a password replacement for apps, or for logging in to the web interface.</p>"},{"location":"developer-guide/api/auth/#command-options_1","title":"Command Options","text":"<p>The following parameters can be used with the <code>photoprism clients add</code> command, e.g. to limit the number of access tokens the client can request:</p> Command Flag Description <code>--name CLIENT, -n CLIENT</code> CLIENT name to help identify the application <code>--role ROLE, -r ROLE</code> client authorization ROLE (default: \"client\") <code>--scope SCOPES, -s SCOPES</code> client authorization SCOPES e.g. \"metrics\" or \"photos albums\" (<code>\"*\"</code> to allow all) <code>--expires LIFETIME, -e LIFETIME</code> access token LIFETIME in seconds, after which a new token must be requested (default: 86400) <code>--tokens NUMBER, -t NUMBER</code> maximum NUMBER of access tokens that the client can request (-1 to disable the limit) (default: 10) <p>If you omit the name or scope parameter, you will be asked to enter them interactively. One or more of these scopes can be specified to limit the access to certain API endpoints:</p> <p>files, folders, shares, photos, videos, favorites, albums, moments, calendar, people, places, labels, config, settings, services, users, sessions, logs, webdav, metrics</p> <p>When requesting access tokens, clients can further restrict the scope of the tokens by passing the scope parameter to the <code>POST /api/v1/oauth/token</code> endpoint.</p>"},{"location":"developer-guide/api/docs/","title":"Swagger API Documentation","text":"<p>Our interactive API documentation, publicly available at docs.photoprism.dev, is automatically generated from the source code annotations in the <code>/internal/api</code> package.</p> <p>Running the following command in your local development environment will update the <code>/internal/api/swagger.json</code> file, which contains the API endpoint documentation in machine-readable form:</p> <pre><code>make swag\n</code></pre> <p>You can view it as HTML by navigating to /api/v1/docs/index.html after you have rebuilt and started <code>photoprism</code> with the commands <code>make build</code> and <code>./photoprism start</code>: </p> <p></p> <p>Any help with adding annotations to improve our documentation is much appreciated!</p> <p>The <code>/api/v1/docs</code> API documentation endpoint is disabled in production builds.</p>"},{"location":"developer-guide/api/oauth2/","title":"OAuth2 Grant Types","text":"<p>The OAuth 2.0 specification is an authorization framework that contains a set of methods, or grants, that a client application can use to obtain an access token. Each grant type is designed for a specific use case:</p> <ul> <li>Password Grant</li> <li>Client Credentials</li> </ul> <p>The access token can then be passed to an API endpoint, which checks it to determine validity and authorization scope.</p> <p>Support for the Authorization Code Flow is planned for a future release.</p>"},{"location":"developer-guide/api/oauth2/#server-endpoints","title":"Server Endpoints","text":"Resource Endpoint Methods Authorization <code>/api/v1/oauth/authorize</code> GET, POST Token <code>/api/v1/oauth/token</code> POST UserInfo <code>/api/v1/oauth/userinfo</code> GET, POST Registration not implemented yet Introspection not implemented yet Revocation <code>/api/v1/oauth/revoke</code> POST End Session not implemented yet Device Authorization not implemented yet <p>Clients can query the <code>/.well-known/oauth-authorization-server</code> and <code>/.well-known/openid-configuration</code> endpoints for automatic service discovery:</p> <ul> <li>https://demo.photoprism.app/.well-known/oauth-authorization-server</li> <li>https://demo.photoprism.app/.well-known/openid-configuration</li> </ul> <p>Note that the Authorization and UserInfo endpoints cannot be used yet as they are still under development.</p>"},{"location":"developer-guide/api/oauth2/#access-tokens","title":"Access Tokens","text":"<p>When clients have a valid access token, e.g. obtained through the <code>POST /api/v1/oauth/token</code> endpoint, they can use a standard Bearer Authorization header to authenticate their requests:</p> <pre><code>Authorization: Bearer &lt;token&gt;\n</code></pre> <p>Submitting the access token with a custom <code>X-Auth-Token</code> header is supported as well:</p> <pre><code>curl -H \"X-Auth-Token: 7dbfa37b5a3db2a9e9dd186479018bfe2e3ce5a71fc2f955\" \\\nhttp://localhost:2342/api/v1/photos?count=10\n</code></pre> <p>Besides using the API endpoints provided for this, you can also generate valid access tokens by running the <code>photoprism auth add</code> command in a terminal.</p> <p>Learn more \u203a</p> <p>App passwords can be used as access tokens in the Bearer Authorization header without first creating a session access token, and to obtain short-lived session access tokens through the <code>POST /api/v1/session</code> endpoint.</p>"},{"location":"developer-guide/api/oauth2/#related-issues","title":"Related Issues","text":"<ul> <li>API: Expose Prometheus-style metrics endpoint #3730</li> <li>Monitoring: Add a Prometheus-compatible API endpoint #213</li> <li>Account: Add Support for 2-Factor Authentication #808</li> <li>Account: Add Support for OpenID Connect (OIDC) #782</li> <li>Multi-User Photo Gallery with private and shared photos/albums #98</li> </ul>"},{"location":"developer-guide/api/oauth2/#protocol-references","title":"Protocol References","text":"<ul> <li>https://datatracker.ietf.org/doc/html/rfc8693</li> <li>https://prometheus.io/docs/prometheus/latest/configuration/configuration/#oauth2</li> <li>https://www.scottbrady91.com/oauth/client-authentication#:~:text=OAuth%20client%20secrets</li> <li>https://www.scottbrady91.com/oauth/oauth-is-not-user-authorization</li> <li>https://www.oauth.com/oauth2-servers/access-tokens/refreshing-access-tokens/</li> <li>https://www.oauth.com/oauth2-servers/access-tokens/access-token-lifetime/</li> <li>https://www.oauth.com/oauth2-servers/access-tokens/access-token-response/ </li> <li>https://www.oauth.com/oauth2-servers/client-registration/client-id-secret/</li> <li>https://www.oauth.com/oauth2-servers/authorization/the-authorization-request/</li> <li>https://www.oauth.com/oauth2-servers/authorization/requiring-user-login/</li> <li>https://www.oauth.com/oauth2-servers/authorization/the-authorization-interface/</li> <li>https://www.oauth.com/oauth2-servers/authorization/the-authorization-response/</li> <li>https://learn.microsoft.com/en-us/linkedin/shared/authentication/programmatic-refresh-tokens</li> <li>https://oauth.net/2/grant-types/client-credentials/</li> <li>https://oauth.net/2/scope/</li> <li>https://datatracker.ietf.org/doc/html/rfc6749#section-4.4</li> <li>https://auth0.com/docs/get-started/authentication-and-authorization-flow/call-your-api-using-the-client-credentials-flow#example-post-to-token-url</li> <li>https://auth0.com/intro-to-iam/what-is-oauth-2</li> <li>https://auth0.com/docs/authenticate/protocols/oauth</li> <li>https://auth0.com/docs/secure/tokens/id-tokens/id-token-structure</li> <li>https://auth0.com/docs/authenticate/protocols/openid-connect-protocol</li> <li>https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2#grant-type-client-credentials</li> <li>https://aaronparecki.com/oauth-2-simplified/</li> <li>https://rclone.org/webdav/</li> <li>https://owncloud.dev/clients/rclone/webdav-sync-oidc/</li> <li>https://www.webdavsystem.com/server/documentation/choosing_authentication/</li> <li>http://www.webdav.org/specs/rfc2617.html#rfc.section.4.1</li> <li>https://frontegg.com/blog/oauth-grant-types</li> </ul>"},{"location":"developer-guide/api/oauth2/#authentication-libraries","title":"Authentication Libraries","text":"<ul> <li>zitadel/oidc</li> <li>https://pkg.go.dev/golang.org/x/oauth2</li> <li>https://pkg.go.dev/golang.org/x/oauth2/jwt</li> <li>go-oauth2/oauth2</li> <li>pquerna/otp</li> </ul>"},{"location":"developer-guide/api/oauth2/#documentation-examples","title":"Documentation Examples","text":"<ul> <li>https://learn.microsoft.com/en-us/machine-learning-server/operationalize/how-to-manage-access-tokens</li> <li>https://docs.semui.co/administration-guide/openid</li> <li>https://api.stackexchange.com/docs/authentication</li> <li>https://dev.fitbit.com/build/reference/web-api/developer-guide/authorization/</li> <li>https://cloudentity.com/developers/basics/oauth-client-authentication/client-secret-authentication/</li> <li>https://developer.okta.com/docs/reference/api/oidc/#get-started</li> <li>https://www.authelia.com/configuration/identity-providers/open-id-connect/</li> <li>https://goauthentik.io/integrations/sources/oauth/#openid-connect</li> <li>https://developers.google.com/identity/openid-connect/openid-connect</li> <li>https://connect2id.com/products/server/docs/api</li> <li>https://connect2id.com/products/server/docs/api/discovery</li> <li>https://connect2id.com/products/server/docs/api/authorization</li> <li>https://connect2id.com/products/server/docs/api/token</li> <li>https://www.zoho.com/accounts/protocol/oauth/token-limits.html</li> <li>https://docs.github.com/en/authentication/securing-your-account-with-two-factor-authentication-2fa/configuring-two-factor-authentication-recovery-methods</li> <li>https://help.akana.com/content/current/cm/api_oauth/oauth_oauth20/m_oauth20_getTokenPOST.htm</li> <li>https://help.akana.com/content/current/cm/api_oauth/aaref/Ref_Values.htm#values_oauthgranttypes</li> </ul>"},{"location":"developer-guide/api/oidc/","title":"Single Sign-On via OpenID Connect","text":"<p>OpenID Connect (OIDC) extends OAuth 2.0 to allow users to log in and optionally register through an external identity provider instead of manually entering a username and password:</p> <p></p>"},{"location":"developer-guide/api/oidc/#authentication-flow","title":"Authentication Flow","text":"<p>Learn more \u203a</p>"},{"location":"developer-guide/api/oidc/#config-options","title":"Config Options","text":"Environment CLI Flag Default Description PHOTOPRISM_OIDC_URI --oidc-uri issuer <code>URI</code> for single sign-on via OpenID Connect, e.g. https://accounts.google.com PHOTOPRISM_OIDC_CLIENT --oidc-client client <code>ID</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_SECRET --oidc-secret client <code>SECRET</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_SCOPES --oidc-scopes openid email profile address client authorization <code>SCOPES</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_PROVIDER --oidc-provider custom identity provider <code>NAME</code>, e.g. Google PHOTOPRISM_OIDC_ICON --oidc-icon custom identity provider icon <code>URI</code> PHOTOPRISM_OIDC_REDIRECT --oidc-redirect automatically redirect unauthenticated users to the configured identity provider PHOTOPRISM_OIDC_REGISTER --oidc-register allow new users to create an account when they sign in with OpenID Connect PHOTOPRISM_OIDC_USERNAME --oidc-username preferred_username preferred username <code>CLAIM</code> for new OpenID Connect users (preferred_username, name, nickname, email) PHOTOPRISM_OIDC_WEBDAV --oidc-webdav allow new OpenID Connect users to use WebDAV when they have a role that allows it PHOTOPRISM_DISABLE_OIDC --disable-oidc disable single sign-on via OpenID Connect, even if an identity provider has been configured <p>Your PhotoPrism instance and the OpenID Connect Identity Provider (IdP) must be accessible via HTTPS and have valid TLS certificates configured for it. Please also make sure that the hostname in the Redirect URL configured on the IdP matches the Site URL used by PhotoPrism. Single sign-on via OIDC can otherwise not be enabled.</p>"},{"location":"developer-guide/api/oidc/#identity-providers","title":"Identity Providers","text":"<p>To allow users to log in via OIDC, you can either set up and use a self-hosted identity provider such as ZITADEL or Keycloak, or choose a public authentication service such as those provided by Google, Microsoft, GitHub, or Amazon.</p> <p>Single sign-on can then be configured automatically through your identity provider's <code>/.well-known/openid-configuration</code> service discovery endpoint, for example:</p> <ul> <li>https://accounts.google.com/.well-known/openid-configuration</li> </ul>"},{"location":"developer-guide/api/oidc/#issuer-uri","title":"Issuer URI","text":"<p>The Issuer URI in your configuration must match the <code>issuer</code> value returned by the <code>/.well-known/openid-configuration</code> endpoint of your OpenID Connect Identity Provider (IdP), for example <code>https://accounts.google.com</code> if you use Google for authentication.</p> <p>You may not modify the URI in any way, e.g. by adding or omitting slashes at the end. If the values do not match, the validation will fail and users cannot be redirected to your provider's login page. For security reasons, only a generic error message is displayed in this case.</p>"},{"location":"developer-guide/api/oidc/#redirect-url","title":"Redirect URL","text":"<p>The Redirect URL that must be specified when registering a new client with an Identity Provider is as follows, where <code>{hostname}</code> must be replaced by the hostname in the Site URL, e.g. configured via <code>PHOTOPRISM_SITE_URL</code>:</p> <pre><code>https://{hostname}/api/v1/oidc/redirect\n</code></pre> <p>Note that both the Site URL configured for your instance and the Redirect URL must start with <code>https://</code> and that their hostnames must match, as the use of secure connections is a strict requirement for OpenID Connect.</p>"},{"location":"developer-guide/api/oidc/#local-development","title":"Local Development","text":"<p>Our development environment comes with a pre-configured Keycloak OIDC Identity Provider running at https://keycloak.localssl.dev/ for local testing:</p> <ul> <li>https://keycloak.localssl.dev/realms/master/.well-known/openid-configuration</li> </ul> <p>An <code>admin</code> account for managing users and a <code>user</code> account for testing single sign-on are pre-registered. Both have the password <code>photoprism</code>.</p> <p>Please do not use this test identity provider in a production environment as its configuration is not secure.</p>"},{"location":"developer-guide/api/oidc/#preferred-username","title":"Preferred Username","text":"<p>When a new user signs in with OpenID Connect<sup>1</sup>, their preferred username may already be registered. In this case, a random 6-digit number is appended to resolve the conflict.</p> <p>The config option <code>PHOTOPRISM_OIDC_USERNAME</code> allows you to change the preferred username claim for new accounts from <code>preferred_username</code> to <code>name</code>, <code>nickname</code> or verified<sup>2</sup> <code>email</code>. The other claims are used as fallback if no value is returned for the configured claim. Names are changed to lowercase so that, for example, \"John Doe\" becomes \"john.doe\".</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/oidc/#existing-accounts","title":"Existing Accounts","text":"<p>Super admins can manually connect existing user accounts<sup>3</sup> under Settings &gt; Users by changing the authentication to OIDC and then setting the Subject ID to match the account identifier from the configured Identity Provider:</p> <p></p> <p>The Edit Account dialog may additionally contain a text field for the Issuer URL. It does not need to be entered manually as it is set automatically after the first login.</p> <p>Alternatively, you can run the following command in a terminal to allow authentication via OIDC and set a Subject ID to connect existing accounts:</p> <pre><code>photoprism users mod --auth=oidc --auth-id=[sub] [username]\n</code></pre> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/oidc/#passwords","title":"Passwords","text":"<p>Changing the authentication of an account to OIDC does not remove a previously set password, so that it can still be used to log in (optionally also in combination with 2FA).</p> <p>If a local password has been set for an account, you can remove it by running the following command in a terminal:</p> <pre><code>photoprism passwd --rm [username]\n</code></pre> <p>Super admins can alternatively set the account password to a long random value through the Admin Web UI or CLI to effectively prevent local authentication.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/oidc/#deleting-accounts","title":"Deleting Accounts","text":"<p>Deleted accounts remain linked to the Subject ID, so logging in via OIDC is no longer possible and no new account can be registered for the same Subject ID either.</p> <p>If you wish to change the connected user account or create a new account instead, you must therefore change the authentication of the old account e.g. to None before deleting it:</p> <pre><code>photoprism users mod --auth=none [username]\n</code></pre> <p>To restore a previously deleted account, admins can follow the same steps as for creating a new account with the same username through the Admin Web UI or the <code>photoprism users add</code> command. You will then be asked if you want to restore the account.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/oidc/#service-discovery","title":"Service Discovery","text":"<p>It is not yet possible to use PhotoPrism as an Identity Provider, since not all the required endpoints and grant types have been fully implemented.</p> <p>However, querying the <code>/.well-known/openid-configuration</code> endpoint shows what has already been implemented, so the missing capabilities can be identified and added over time:</p> <ul> <li>https://demo.photoprism.app/.well-known/openid-configuration</li> </ul>"},{"location":"developer-guide/api/oidc/#related-issues","title":"Related Issues","text":"<ul> <li>Auth: Add support for single sign-on via OpenID Connect (OIDC) #782</li> <li>Auth: Add <code>userinfo</code> API endpoint to get information about the logged in user #4369</li> <li>Auth: Add <code>authorize</code> API endpoint to implement the authorization code flow #4368</li> </ul>"},{"location":"developer-guide/api/oidc/#software-libraries","title":"Software Libraries","text":"<ul> <li>zitadel/oidc by https://zitadel.com/</li> </ul>"},{"location":"developer-guide/api/oidc/#protocol-references","title":"Protocol References","text":"<ul> <li>https://openid.net/developers/how-connect-works/</li> <li>https://dl.photoprism.app/pdf/publications/20220113-Volkmann_OpenID_Connect_Thesis.pdf</li> <li>https://oauth.net/openid-for-verifiable-credentials/</li> <li>https://developers.google.com/identity/openid-connect/openid-connect</li> <li>https://www.ory.sh/docs/oauth2-oidc/authorization-code-flow</li> <li>https://developer.okta.com/docs/concepts/oauth-openid/</li> <li>https://developer.okta.com/docs/reference/api/oidc/</li> <li>https://developer.okta.com/docs/reference/api/oauth-clients/</li> <li>https://auth0.com/docs/authenticate/protocols/openid-connect-protocol</li> <li>https://learn.microsoft.com/en-us/entra/identity-platform/scopes-oidc#openid-connect-scopes</li> <li>https://owncloud.dev/clients/rclone/webdav-sync-oidc/</li> <li>https://blog.cubieserver.de/2022/complete-guide-to-nextcloud-oidc-authentication-with-authentik/</li> <li>https://auth0.com/docs/get-started/applications/configure-applications-with-oidc-discovery</li> <li>https://connect2id.com/products/server/docs/api/authorization</li> <li>https://www.authlete.com/developers/definitive_guide/authorization_endpoint_spec/</li> <li>https://www.oauth.com/oauth2-servers/authorization/the-authorization-request/</li> <li>https://www.oauth.com/oauth2-servers/authorization/requiring-user-login/</li> <li>https://www.oauth.com/oauth2-servers/authorization/the-authorization-interface/</li> <li>https://www.oauth.com/oauth2-servers/authorization/the-authorization-response/</li> </ul>"},{"location":"developer-guide/api/oidc/#session-management","title":"Session Management","text":"<ul> <li>https://openid.net/specs/openid-connect-session-1_0.html#OPiframe</li> <li>https://zitadel.com/blog/session-timeouts-logouts</li> <li>https://ldapwiki.com/wiki/Wiki.jsp?page=OpenID%20Connect%20Session%20Management</li> <li>https://ldapwiki.com/wiki/Wiki.jsp?page=OpenID%20Connect%20Back-Channel%20Logout</li> <li>https://openid.net/specs/openid-connect-rpinitiated-1_0.html</li> <li>https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0</li> <li>https://medium.com/@robert.broeckelmann/openid-connect-logout-eccc73df758f</li> </ul>"},{"location":"developer-guide/api/oidc/#frequently-asked-questions","title":"Frequently Asked Questions","text":""},{"location":"developer-guide/api/oidc/#is-it-possible-to-set-a-default-role-for-new-oidc-users","title":"Is it possible to set a default role for new OIDC users?","text":"<p>For security reasons, our Personal Editions currently default to the Guest role, which admins can then upgrade after checking the eligibility of newly registered accounts.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/oidc/#can-i-configure-a-custom-claim-for-the-preferred-username","title":"Can I configure a custom claim for the preferred username?","text":"<p>You can choose between <code>preferred_username</code>, <code>name</code>, <code>nickname</code> and verified<sup>2</sup> <code>email</code>, where <code>preferred_username</code> is the default. The other claims are used as fallback if no value is returned for the configured claim.</p> <p>Please note that it is currently not possible to use other standard or non-standard claims, as these may not be suitable for generating a username and no logic is implemented for doing so.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/api/oidc/#what-if-my-provider-does-not-return-any-claims-for-generating-a-username","title":"What if my provider does not return any claims for generating a username?","text":"<p>Certified OIDC Identity Providers, as well as public service providers such as Google, should support (at least) a subset of the standard claims that PhotoPrism can use to generate a username for newly registered accounts. These are <code>preferred_username</code>, <code>name</code>, <code>nickname</code> and verified<sup>2</sup> <code>email</code>, where <code>preferred_username</code> is the default.</p> <p>If only an unverified <code>email</code> address<sup>2</sup> or none of these claims are returned, we recommend that you report this to the vendor of the Identity Provider you are using, as this is also likely to cause problems with other software. In a future release, we may offer additional config options to work around this issue, e.g. by generating a random username. However, this is currently not possible.</p> <p>Learn more \u203a</p> <ol> <li> <p><code>PHOTOPRISM_OIDC_REGISTER</code> must be set to <code>\"true\"</code> to allow new users to create an account via OpenID Connect.\u00a0\u21a9</p> </li> <li> <p>The <code>email_verified</code> flag must be set by the OIDC Identity Provider so that the <code>email</code> address can be used to send notifications and/or confirm the identity of users. If we do not insist on verification, this could otherwise have a negative impact on trust and security.\u00a0\u21a9\u21a9\u21a9\u21a9</p> </li> <li> <p>Admins are unable to change the authentication method of their own user account through the Admin Web UI, so they cannot accidentally lock themselves out e.g. by setting it to None.\u00a0\u21a9</p> </li> </ol>"},{"location":"developer-guide/api/search/","title":"Search API Endpoints","text":""},{"location":"developer-guide/api/search/#get-apiv1photos","title":"<code>GET /api/v1/photos</code>","text":"<p>When querying the <code>/api/v1/photos</code> endpoint, matching files will be returned along with the metadata of the corresponding photos. This may be unexpected at first due to the endpoint name. However, this approach allows to sort results e.g. by color or file size, which differ at the file level and therefore require dynamic sorting/grouping of multiple matching files that may belong to the same photo (see Stacks).</p> <p>To simplify processing in the client/user interface, you can set the <code>merged</code> parameter to <code>true</code> so that consecutive files with the same photo ID are merged into a single result with the <code>Files</code> property containing the related files.</p> <p>In particular, multiple files are returned for a single photo in the case of multi-file/hybrid media formats such as Live Photos, as these consist of a photo and a video file. The same applies to RAW/JPEG.</p> <p>If you only want the primary image (thumbnail) to be returned, you can set the <code>primary</code> filter to <code>true</code>. In this case, it is not necessary to also set <code>merged</code> to <code>true</code> as a single file will be returned for each photo. This can simplify things if you don't need to know anything about the additional files, e.g. when just rendering thumbnails without metadata.</p>"},{"location":"developer-guide/api/search/#composite-id-and-uids","title":"Composite ID and UIDs","text":"<p>The <code>ID</code> returned by the search API is a composite ID consisting of the photo ID and the related file ID (usually the file selected as primary image), so that this <code>ID</code> is unique as required for rendering in the user interface.</p> <p>Note that you do not need this composite ID to communicate with any of our API endpoints. Instead, you will either have to pass a <code>UID</code> (e.g. when updating photo metadata) or the SHA1 <code>Hash</code> of a file (e.g. when requesting a thumbnail).</p> <p>Using random UIDs prevents possible caching issues in proxies/clients, e.g. if the index is reset on the server and the numeric IDs would thus start at 0 again. They are also hard to guess, so a time-consuming brute force attack is required instead of simply enumerating integers starting from 0.</p>"},{"location":"developer-guide/api/search/#response-example","title":"Response Example","text":"<pre><code>[{\n    \"ID\": \"11-21\",\n    \"UID\": \"pse1yzastu36irsj\",\n    \"Type\": \"image\",\n    \"TypeSrc\": \"\",\n    \"TakenAt\": \"2012-08-27T12:40:25Z\",\n    \"TakenAtLocal\": \"2012-08-27T14:40:25Z\",\n    \"TakenSrc\": \"meta\",\n    \"TimeZone\": \"Europe/Madrid\",\n    \"Path\": \"2012\",\n    \"Name\": \"20120827-144025-Bodegas-Ysios-Winery-Laguardia-Spain\",\n    \"OriginalName\": \"\",\n    \"Title\": \"Bodegas Ysios Winery / Laguardia / Spain\",\n    \"Description\": \"\",\n    \"Year\": 2012,\n    \"Month\": 8,\n    \"Day\": 27,\n    \"Country\": \"es\",\n    \"Stack\": 0,\n    \"Favorite\": false,\n    \"Private\": false,\n    \"Iso\": 100,\n    \"FocalLength\": 28,\n    \"FNumber\": 11,\n    \"Exposure\": \"1/160\",\n    \"Quality\": 4,\n    \"Resolution\": 8,\n    \"Color\": 2,\n    \"Scan\": false,\n    \"Panorama\": false,\n    \"CameraID\": 5,\n    \"CameraSrc\": \"meta\",\n    \"CameraSerial\": \"1730906408\",\n    \"CameraMake\": \"Canon\",\n    \"CameraModel\": \"EOS 30D\",\n    \"LensID\": 5,\n    \"LensModel\": \"EF28mm f/1.8 USM\",\n    \"Lat\": 42.568302,\n    \"Lng\": -2.5908582,\n    \"CellID\": \"s2:0d4ff9b1b32c\",\n    \"PlaceID\": \"es:7v314KSnaCLy\",\n    \"PlaceSrc\": \"meta\",\n    \"PlaceLabel\": \"Laguardia, Euskadi, Spain\",\n    \"PlaceCity\": \"Laguardia\",\n    \"PlaceState\": \"Euskadi\",\n    \"PlaceCountry\": \"es\",\n    \"InstanceID\": \"\",\n    \"FileUID\": \"fse1yza2r4gsjq6f\",\n    \"FileRoot\": \"/\",\n    \"FileName\": \"2012/20120827-144025-Bodegas-Ysios-Winery-Laguardia-Spain.jpg\",\n    \"Hash\": \"4bc82c3ea5aaa323aea801fe0125b554af8e49af\",\n    \"Width\": 3368,\n    \"Height\": 2246,\n    \"Portrait\": false,\n    \"Merged\": false,\n    \"CreatedAt\": \"2024-05-25T17:52:22.291451832Z\",\n    \"UpdatedAt\": \"2024-05-25T17:52:22.307889576Z\",\n    \"EditedAt\": \"0001-01-01T00:00:00Z\",\n    \"CheckedAt\": \"2024-05-26T06:15:09Z\",\n    \"Files\": [\n        {\n        \"UID\": \"fse1yza2r4gsjq6f\",\n        \"PhotoUID\": \"pse1yzastu36irsj\",\n        \"Name\": \"2012/20120827-144025-Bodegas-Ysios-Winery-Laguardia-Spain.jpg\",\n        \"Root\": \"/\",\n        \"Hash\": \"4bc82c3ea5aaa323aea801fe0125b554af8e49af\",\n        \"Size\": 2473990,\n        \"Primary\": true,\n        \"Codec\": \"jpeg\",\n        \"FileType\": \"jpg\",\n        \"MediaType\": \"image\",\n        \"Mime\": \"image/jpeg\",\n        \"Width\": 3368,\n        \"Height\": 2246,\n        \"Orientation\": 1,\n        \"AspectRatio\": 1.5,\n        \"Colors\": \"616121222\",\n        \"Luminance\": \"AACA5A888\",\n        \"Diff\": 767,\n        \"Chroma\": 15,\n        \"CreatedAt\": \"2024-05-25T17:52:22.291451832Z\",\n        \"UpdatedAt\": \"2024-05-25T17:52:22.307889576Z\",\n        \"Markers\": []\n        }\n    ]\n}]\n</code></pre>"},{"location":"developer-guide/api/search/#response-headers","title":"Response Headers","text":"Header Type Example Notes X-Count int 120 Actual number of files returned X-Limit int 120 Maximum number of files requested X-Offset int 0 File offset X-Download-Token string 3qjg1db2 Security token required to download original files X-Preview-Token string 174utza5 Security token required for the Thumbnail Image API <p>In order to fetch all results, you can perform a follow-up query if the number in the <code>X-Count</code> response header matches <code>X-Limit</code>. For this, the <code>offset</code> request parameter must be set to the number of files already returned.</p>"},{"location":"developer-guide/api/search/#request-parameters","title":"Request Parameters","text":"Name Type Example Notes q string dog color:red Search query as entered by the user in the search toolbar, see Search Filters s string ariqwb43p5dh9h13 Limits the result scope to the specified album UID count int 1000 Maximum number of files to be returned offset int 0 File offset order string added Sort order e.g. <code>added</code>, <code>updated</code>, <code>edited</code>, <code>relevance</code>, <code>duration</code>, <code>size</code>, <code>newest</code>, <code>oldest</code>, <code>similar</code>, <code>name</code>, <code>title</code>, or <code>random</code> merged bool true Merges consecutive files that belong to the same photo into a single result, see above for an explanation"},{"location":"developer-guide/api/search/#search-filters","title":"Search Filters","text":"<p>Search filters can be used as regular GET request parameters or submitted as part of a search query with the <code>q</code> request parameter.</p>"},{"location":"developer-guide/api/thumbnails/","title":"Thumbnail Image API","text":""},{"location":"developer-guide/api/thumbnails/#introduction","title":"Introduction","text":"<p>Like most commercial image hosting services, we have chosen to implement a cookie-free thumbnail API to minimize request latency by avoiding unnecessary network traffic:</p> <ul> <li>When a browser requests static files such as images from a server over HTTPS, it is generally unnecessary to send a cookie with each request if the URLs cannot be guessed, so for most practical use cases</li> <li>One possible use of cookies may be to prevent the user from intentionally or accidentally sharing confidential thumbnail URLs with others</li> <li>This is possible with most image hosting services/social media sites, and could also be considered a feature if you just want to share a few thumbnails without a lot of bells and whistles</li> <li>Once an image has been downloaded by someone else, blocking the original URL provides little additional security, as digital copies are just as good as the original, see info box below</li> <li>Keeping that in mind, previously shared URLs can be invalidated by changing the security token in your config</li> <li>This will invalidate the browser cache on all connected devices, requiring previously cached thumbnails to be downloaded again</li> <li>Be aware that frequent token changes result in performance degradation and a poor user experience.</li> </ul> <p>In addition to better performance, a major advantage of cookie-free thumbnails is that they can be easily integrated into a content delivery network (CDN), since there is no need to check cookies or add other complex logic on edge servers.</p> <p>Since most users only have one domain/host name and modern web applications can store authentication tokens in localStorage, our Thumbnail Image API does not currently require or use cookies.</p>"},{"location":"developer-guide/api/thumbnails/#security-considerations","title":"Security Considerations","text":"<p>Digital copies are as good as originals: Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back, even if the download URL becomes invalid or the service is shut down completely.</p> <p>Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p>"},{"location":"developer-guide/api/thumbnails/#further-reading","title":"Further Reading","text":"<ul> <li>https://ourcodeworld.com/articles/read/1341/why-you-should-use-a-cookie-less-domain-for-serving-your-static-content-cdn</li> <li>https://pragmaticwebsecurity.com/articles/oauthoidc/localstorage-xss.html</li> </ul>"},{"location":"developer-guide/api/thumbnails/#image-endpoint-uri","title":"Image Endpoint URI","text":"<p>A GET request to the following URI returns a thumbnail image of the specified size for the picture referenced by the SHA1 hash:</p> <pre><code>/api/v1/t/:hash/:token/:size\n</code></pre> <p>If the instance requires authentication, you must also specify a valid security token, e.g.:</p> <pre><code>/api/v1/t/a2195b6840f46b555719d8e22e9b080e61a7317c/10d68214/tile_500\n</code></pre> <p>With public mode enabled, you can instead use \"public\" as security token placeholder:</p> <pre><code>/api/v1/t/a2195b6840f46b555719d8e22e9b080e61a7317c/public/tile_500\n</code></pre>"},{"location":"developer-guide/api/thumbnails/#video-endpoint-uri","title":"Video Endpoint URI","text":"<p>A GET request to the following URI returns the video referenced by the SHA1 hash (transcoding and range requests are supported for streaming):</p> <pre><code>/api/v1/videos/:hash/:token/:format\n</code></pre> <p>If the instance requires authentication, you must also specify a valid security token, e.g.:</p> <pre><code>/api/v1/videos/51843134d75f4cbde534270cdd5954067f887ee6/10d68214/avc\n</code></pre> <p>With public mode enabled, you can instead use \"public\" as security token placeholder:</p> <pre><code>/api/v1/videos/51843134d75f4cbde534270cdd5954067f887ee6/public/avc\n</code></pre> <p>The only target format currently available for transcoding is <code>avc</code> (MPEG-4 AVC). Additional formats will become available in a future release.</p>"},{"location":"developer-guide/api/thumbnails/#thumbnail-sizes","title":"Thumbnail Sizes","text":"<p>The smallest configurable static and dynamic size limit is 720px, so most sizes up to <code>fit_720</code> are always generated by default. Higher size limits generate thumbnails with more detail at higher resolutions - either statically (pre-generated while indexing) or on demand if the configuration permits.</p> <p>Optional thumbnail sizes cannot be pre-generated and are only rendered on request, for example when sharing an image on Instagram.</p> <p>The following overview shows the name, dimensions, and aspect ratio for each thumbnail size as well as a description of how it is used:</p> Name Width Height Aspect Ratio Available Usage colors 3 3 1:1 Always Color Detection tile_50 50 50 1:1 Always List View tile_100 100 100 1:1 Always Places View left_224 224 224 1:1 On-Demand AI right_224 224 224 1:1 On-Demand AI tile_224 224 224 1:1 Always AI, Mosaic View left_384 384 384 1:1 Optional AI right_384 384 384 1:1 Optional AI tile_384 384 384 1:1 Optional AI left_480 480 480 1:1 Optional AI right_480 480 480 1:1 Optional AI tile_480 480 480 1:1 Optional AI tile_500 500 500 1:1 Always Cards View fit_720 720 720 Preserved Always SD TV, Mobile tile_1080 1080 1080 1:1 Optional Instagram fit_1280 1280 1024 Preserved On-Demand HD TV, SXGA fit_1600 1600 900 Preserved Optional Social Media fit_1920 1920 1200 Preserved On-Demand Full HD fit_2048 2048 2048 Preserved Optional DCI 2K, Tablets fit_2560 2560 1600 Preserved On-Demand Quad HD fit_3840 3840 2400 Preserved Optional 4K Ultra HD fit_4096 4096 4096 Preserved On-Demand DCI 4K, Retina 4K fit_5120 5120 5120 Preserved On-Demand Retina 5K fit_7680 7680 4320 Preserved On-Demand 8K Ultra HD 2 <p>\u21aa <code>internal/thumb/sizes.go</code></p> <p>Generated thumbnail files are stored in the <code>storage/cache/thumbnails</code> folder, where the path and file name depend on the thumbnail size and original file hash. Learn more \u203a</p>"},{"location":"developer-guide/api/clients/go/","title":"Go API Client","text":"<p>Maintained by Kris N\u00f3va</p> <p>GitHub URL: kris-nova/photoprism-client-go</p>"},{"location":"developer-guide/api/clients/go/#installation","title":"Installation","text":"<pre><code>go get github.com/kris-nova/photoprism-client-go\n</code></pre>"},{"location":"developer-guide/api/clients/go/#methods","title":"Methods","text":"<pre><code>func New(connURL *url.URL, token, downloadToken string) *V1Client\nfunc (v1 *V1Client) AddPhotosToAlbum(albumUUID string, photoIDs []string) error\nfunc (v1 *V1Client) ApprovePhoto(uuid string) error\nfunc (v1 *V1Client) CancelIndex() error\nfunc (v1 *V1Client) CloneAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) CreateAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) DeleteAlbums(albumUUIDs []string) error\nfunc (v1 *V1Client) DELETE(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) DeletePhotosFromAlbum(albumUUID string, photoIDs []string) error\nfunc (v1 *V1Client) DislikeAlbum(uuid string) error\nfunc (v1 *V1Client) DislikePhoto(uuid string) error\nfunc (v1 *V1Client) Endpoint(str string) string\nfunc (v1 *V1Client) GetAlbumDownload(uuid string) ([]byte, error)\nfunc (v1 *V1Client) GetAlbums(options *AlbumOptions) ([]Album, error)\nfunc (v1 *V1Client) GetAlbum(uuid string) (Album, error)\nfunc (v1 *V1Client) GET(endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) GetPhotoDownload(uuid string) ([]byte, error)\nfunc (v1 *V1Client) GetPhotos(options *PhotoOptions) ([]Photo, error)\nfunc (v1 *V1Client) GetPhoto(uuid string) (Photo, error)\nfunc (v1 *V1Client) GetPhotoYaml(uuid string) ([]byte, error)\nfunc (v1 *V1Client) Index() error\nfunc (v1 *V1Client) LikeAlbum(uuid string) error\nfunc (v1 *V1Client) LikePhoto(uuid string) error\nfunc (v1 *V1Client) PhotoPrimary(uuid, fileuuid string) error\nfunc (v1 *V1Client) POST(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) PUT(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) SetToken(token string)\nfunc (v1 *V1Client) UpdateAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) UpdatePhoto(photo Photo) (Photo, error)\n</code></pre>"},{"location":"developer-guide/api/clients/go/#example","title":"Example","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"io/ioutil\"\n    \"path\"\n\n    photoprism \"github.com/kris-nova/photoprism-client-go\"\n    \"github.com/kris-nova/logger\"\n)\n\nfunc main()\n    logger.Level = 4\n\n    uuid := \"pqnzigq351j2fqgn\" // This is a known ID\n    client := photoprism.New(\"http://localhost:8080\")\n    err := client.Auth(photoprism.NewClientAuthLogin(\"admin\", \"missy\"))\n    if err != nil\n        logger.Critical(\"Error logging into API: %v\", err)\n        os.Exit(1)\n    }\n\n    // -----------------\n    // GetPhoto()\n    //\n    photo, err := client.V1().GetPhoto(uuid)\n    if err != nil\n        logger.Critical(\"Error fetching photo: %v\", err)\n        os.Exit(1)\n    }\n\n    // -----------------\n    // UpdatePhoto()\n    //\n    photo.PhotoTitle = \"A really great photo!\"\n    photo, err = client.V1().UpdatePhoto(photo)\n    if err != nil\n        logger.Critical(\"Error updating photo: %v\", err)\n        os.Exit(1)\n    }\n\n    // -----------------\n    // GetPhotoDownload()\n    //\n    file, err := client.V1().GetPhotoDownload(photo.UUID)\n    if err != nil\n        logger.Critical(\"Error getting photo download: %v\", err)\n        os.Exit(1)\n    }\n\n    for _, f := range photo.Files\n        fileName := fmt.Sprintf(\"/tmp/%s\", path.Base(f.FileName))\n        logger.Always(fileName)\n        ioutil.WriteFile(fileName, file, 0666)\n    }\n    os.Exit(0)\n}\n</code></pre>"},{"location":"developer-guide/database/","title":"Database Schema","text":"<p>This schema description is for illustrative purposes only and should not be used to update or replace an existing production database.</p>"},{"location":"developer-guide/database/#entity-relationship-diagram","title":"Entity-Relationship Diagram","text":"<p>\u21aa docs.photoprism.app/developer-guide/database/schema/</p>"},{"location":"developer-guide/database/#mermaid-markup","title":"Mermaid Markup","text":"<p>With Mermaid.js you can generate visual diagrams from this markup file:</p> <p>\u21aa mariadb.mmd</p>"},{"location":"developer-guide/database/#mariadb-sql-dump","title":"MariaDB SQL Dump","text":"<p>An SQL schema dump can be created using the command shown below, for example:</p> <p>\u21aa mariadb.sql</p> <p>If you need an updated dump, you can run this command in your development environment:</p> <pre><code>mariadb-dump --no-data --skip-add-locks --skip-comments \\\n --skip-opt --skip-set-charset photoprism &gt; mariadb.sql\n</code></pre> <p>Please note that the dump we provide is only updated at irregular intervals and should therefore not be used to update or replace an existing production database.</p>"},{"location":"developer-guide/database/#schema-migrations","title":"Schema Migrations","text":"<p>\u21aa docs.photoprism.app/developer-guide/database/migrations/</p> <p>\u21aa github.com/photoprism/photoprism/tree/develop/internal/migrate</p>"},{"location":"developer-guide/database/migrations/","title":"Schema Migrations","text":"<p>When using Docker Compose, you can prepend commands like <code>docker compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where your <code>compose.yaml</code> file is located.</p>"},{"location":"developer-guide/database/migrations/#show-migration-status","title":"Show Migration Status","text":"<p>Run the <code>photoprism migrations ls</code> command in a terminal to see a list of all migrations and their current status:</p> <pre><code>$ photoprism migrations ls\n\n|-----------------|---------|---------------------|---------------------|--------|\n|       ID        | Dialect |     Started At      |     Finished At     | Status |\n|-----------------|---------|---------------------|---------------------|--------|\n| 20211121-094727 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20211124-120008 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-030000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-040000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-050000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-060000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-061000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-070000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-071000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-080000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-081000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-083000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-090000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-091000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-093000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220421-200000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000001 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000002 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000003 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n|-----------------|---------|---------------------|---------------------|--------|\n</code></pre>"},{"location":"developer-guide/database/migrations/#run-specific-migrations","title":"Run Specific Migrations","text":"<p>To explicitly re-run specific migrations, you can pass them as arguments to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run 20220521-000003\n\nINFO[2022-07-12T11:45:29Z] migrate: 20220521-000003 successful [12.967654ms] \nINFO[2022-07-12T11:45:29Z] migration completed in 40.89123ms            \nINFO[2022-07-12T11:45:29Z] closed database connection \n</code></pre>"},{"location":"developer-guide/database/migrations/#retry-failed-migrations","title":"Retry Failed Migrations","text":"<p>To automatically retry previously failed migrations, pass the <code>-f</code> flag to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run -f\n</code></pre>"},{"location":"developer-guide/database/schema/","title":"Entity-Relationship Diagram","text":"<p>Please keep in mind that some information may be outdated or missing, as these docs were automatically generated from the source code.</p> user_uiduser_uiduser_uiduser_uidcell_idplace_idlabel_idcategory_idplace_idphoto_idphoto_idfile_idservice_idfile_idservice_idfile_uidface_idsubject_uidsubject_uidcamera_idcell_idlens_idplace_idphoto_countryalbum_countrypathcreated_byuser_uidplace_countrykeyword_idphoto_idlabel_idphoto_idalbum_uidphoto_uiduser_uidcreated_byuiduser_uidclient_uiduser_uidphoto_uidalbum_uiduser_uidalbumsdatetime created_atdatetime updated_atdatetime published_atdatetime deleted_atvarbinary(42) : album_uidvarbinary(42) : parent_uidvarbinary(160) : album_slugvarchar(1024) : album_pathvarbinary(8) : album_typevarchar(160) : album_titlevarchar(160) : album_locationvarchar(100) : album_categoryvarchar(1024) : album_captionvarchar(2048) : album_descriptionvarchar(1024) : album_notesvarbinary(2048) : album_filtervarbinary(32) : album_ordervarbinary(255) : album_templatevarchar(100) : album_statevarbinary(2) : album_countryint(11) : album_yearint(11) : album_monthint(11) : album_daytinyint(1) : album_favoritetinyint(1) : album_privatevarbinary(128) : thumbvarbinary(8) : thumb_srcvarbinary(42) : created_byint(10) : unsigned idalbums_usersvarbinary(42) : team_uidint(10) : unsigned permvarbinary(42) : uidvarbinary(42) : user_uidauth_clientsdatetime created_atdatetime updated_atdatetime expires_atdatetime deleted_atvarbinary(42) : user_uidvarchar(200) : client_namevarbinary(16) : client_typevarbinary(255) : callback_urlvarbinary(128) : auth_providervarbinary(128) : auth_methodvarchar(1024) : auth_scopebigint(20) : auth_expiresbigint(20) : auth_timeouttinyint(1) : auth_enabledbigint(20) : last_activevarbinary(16) : ref_idvarchar(64) : user_namevarbinary(255) : client_urlvarbinary(255) : auth_domainvarbinary(255) : auth_idbigint(20) : auth_tokensvarbinary(42) : client_uidauth_sessionsdatetime login_atdatetime created_atdatetime updated_atvarchar(64) : client_ipvarbinary(42) : user_uidvarchar(64) : user_namevarbinary(128) : auth_providervarbinary(128) : auth_methodvarbinary(255) : auth_domainvarbinary(128) : auth_idvarchar(1024) : auth_scopebigint(20) : last_activebigint(20) : sess_expiresbigint(20) : sess_timeoutvarbinary(64) : preview_tokenvarbinary(64) : download_tokenvarbinary(4096) : access_tokenvarbinary(512) : refresh_tokenvarbinary(1024) : id_tokenvarchar(512) : user_agentvarbinary(4096) : data_jsonvarbinary(16) : ref_idvarchar(64) : login_ipvarbinary(2048) : idauth_usersdatetime login_atdatetime expires_atdatetime verified_atdatetime consent_atdatetime born_atdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(64) : user_uuidvarbinary(42) : user_uidvarbinary(128) : auth_providervarbinary(255) : auth_idvarchar(255) : user_namevarchar(200) : display_namevarchar(255) : user_emailvarchar(255) : backup_emailvarchar(64) : user_rolevarchar(1024) : user_attrtinyint(1) : super_admintinyint(1) : can_logintinyint(1) : webdavvarbinary(1024) : base_pathvarbinary(1024) : upload_pathtinyint(1) : can_invitevarbinary(64) : invite_tokenvarchar(64) : invited_byvarbinary(64) : verify_tokenvarbinary(64) : reset_tokenvarbinary(64) : preview_tokenvarbinary(64) : download_tokenvarbinary(128) : thumbvarbinary(8) : thumb_srcvarbinary(16) : ref_idint(11) : idauth_users_detailsdatetime created_atdatetime updated_atvarbinary(42) : subj_uidvarbinary(8) : subj_srcvarbinary(42) : place_idvarbinary(8) : place_srcvarbinary(42) : cell_idint(11) : birth_yearint(11) : birth_monthint(11) : birth_dayvarchar(32) : name_titlevarchar(64) : given_namevarchar(64) : middle_namevarchar(64) : family_namevarchar(32) : name_suffixvarchar(64) : nick_namevarbinary(8) : name_srcvarchar(16) : user_gendervarchar(512) : user_aboutvarchar(2048) : user_biovarchar(512) : user_locationvarbinary(2) : user_countryvarchar(32) : user_phonevarbinary(512) : site_urlvarbinary(512) : profile_urlvarbinary(512) : feed_urlvarbinary(512) : avatar_urlvarchar(64) : org_titlevarchar(128) : org_namevarchar(255) : org_emailvarchar(32) : org_phonevarbinary(512) : org_urlvarbinary(512) : id_urlvarbinary(42) : user_uidauth_users_settingsdatetime created_atdatetime updated_atvarbinary(32) : ui_themevarbinary(32) : ui_languagevarbinary(64) : ui_time_zonevarbinary(32) : maps_styleint(11) : maps_animatevarbinary(1024) : index_pathint(11) : index_rescanvarbinary(1024) : import_pathint(11) : import_moveint(11) : download_originalsint(11) : download_media_rawint(11) : download_media_sidecarvarbinary(1024) : upload_pathvarbinary(128) : default_pagevarbinary(42) : user_uidauth_users_sharesdatetime expires_atdatetime created_atdatetime updated_atvarbinary(42) : link_uidvarchar(512) : commentint(10) : unsigned permvarbinary(16) : ref_idvarbinary(42) : user_uidvarbinary(42) : share_uidcamerasdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(160) : camera_slugvarchar(160) : camera_namevarchar(160) : camera_makevarchar(160) : camera_modelvarchar(100) : camera_typevarchar(2048) : camera_descriptionvarchar(1024) : camera_notesint(10) : unsigned idcategoriesint(10) : unsigned label_idint(10) : unsigned category_idcellsdatetime created_atdatetime updated_atvarchar(200) : cell_namevarchar(100) : cell_streetvarchar(50) : cell_postcodevarchar(50) : cell_categoryvarbinary(42) : place_idvarbinary(42) : idcountriesvarbinary(160) : country_slugvarchar(160) : country_namevarchar(2048) : country_descriptionvarchar(1024) : country_notesint(10) : unsigned country_photo_idvarbinary(2) : iddetailsdatetime created_atdatetime updated_atvarchar(2048) : keywordsvarbinary(8) : keywords_srcvarchar(2048) : notesvarbinary(8) : notes_srcvarchar(1024) : subjectvarbinary(8) : subject_srcvarchar(1024) : artistvarbinary(8) : artist_srcvarchar(1024) : copyrightvarbinary(8) : copyright_srcvarchar(1024) : licensevarbinary(8) : license_srcvarchar(1024) : softwarevarbinary(8) : software_srcint(10) : unsigned photo_idduplicatesvarbinary(128) : file_hashbigint(20) : file_sizebigint(20) : mod_timevarbinary(755) : file_namevarbinary(16) : file_rooterrorsdatetime error_timevarbinary(32) : error_levelvarbinary(2048) : error_messageint(10) : unsigned idfacesdouble sample_radiusdouble collision_radiusmediumblob embedding_jsondatetime matched_atdatetime created_atdatetime updated_atvarbinary(8) : face_srcint(11) : face_kindtinyint(1) : face_hiddenvarbinary(42) : subj_uidint(11) : samplesint(11) : collisionsvarbinary(64) : idfilesdatetime photo_taken_atdouble file_fpsfloat file_aspect_ratiodatetime created_atdatetime updated_atdatetime published_atdatetime deleted_atint(10) : unsigned photo_idvarbinary(42) : photo_uidvarbinary(64) : time_indexvarbinary(32) : media_idbigint(20) : media_utcvarbinary(64) : instance_idvarbinary(42) : file_uidvarbinary(1024) : file_namevarbinary(16) : file_rootvarbinary(755) : original_namevarbinary(128) : file_hashbigint(20) : file_sizevarbinary(32) : file_codecvarbinary(16) : file_typevarbinary(16) : media_typevarbinary(64) : file_mimetinyint(1) : file_primarytinyint(1) : file_sidecartinyint(1) : file_missingtinyint(1) : file_portraittinyint(1) : file_videobigint(20) : file_durationint(11) : file_framesint(11) : file_widthint(11) : file_heightint(11) : file_orientationvarbinary(8) : file_orientation_srcvarbinary(64) : file_projectiontinyint(1) : file_hdrtinyint(1) : file_watermarkvarbinary(64) : file_color_profilevarbinary(16) : file_main_colorvarbinary(18) : file_colorsvarbinary(18) : File_luminanceint(11) : file_diffsmallint(6) : file_chromavarchar(64) : file_softwarevarbinary(512) : file_errorbigint(20) : mod_timebigint(20) : created_inbigint(20) : updated_inint(10) : unsigned idfiles_sharedatetime created_atdatetime updated_atvarbinary(16) : statusvarbinary(512) : errorint(11) : errorsint(10) : unsigned file_idint(10) : unsigned service_idvarbinary(255) : remote_namefiles_syncdatetime remote_datedatetime created_atdatetime updated_atint(10) : unsigned file_idbigint(20) : remote_sizevarbinary(16) : statusvarbinary(512) : errorint(11) : errorsvarbinary(255) : remote_nameint(10) : unsigned service_idfoldersdatetime created_atdatetime updated_atdatetime modified_atdatetime published_atdatetime deleted_atvarbinary(1024) : pathvarbinary(16) : rootvarbinary(16) : folder_typevarchar(200) : folder_titlevarchar(100) : folder_categoryvarchar(2048) : folder_descriptionvarbinary(32) : folder_ordervarbinary(2) : folder_countryint(11) : folder_yearint(11) : folder_monthint(11) : folder_daytinyint(1) : folder_favoritetinyint(1) : folder_privatetinyint(1) : folder_ignoretinyint(1) : folder_watchvarbinary(42) : folder_uidkeywordsvarchar(64) : keywordtinyint(1) : skipint(10) : unsigned idlabelsdatetime created_atdatetime updated_atdatetime published_atdatetime deleted_atvarbinary(42) : label_uidvarbinary(160) : label_slugvarbinary(160) : custom_slugvarchar(160) : label_nameint(11) : label_prioritytinyint(1) : label_favoritevarchar(2048) : label_descriptionvarchar(1024) : label_notesint(11) : photo_countvarbinary(128) : thumbvarbinary(8) : thumb_srcint(10) : unsigned idlensesdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(160) : lens_slugvarchar(160) : lens_namevarchar(160) : lens_makevarchar(160) : lens_modelvarchar(100) : lens_typevarchar(2048) : lens_descriptionvarchar(1024) : lens_notesint(10) : unsigned idlinksdatetime created_atdatetime modified_atvarbinary(42) : share_uidvarbinary(160) : share_slugvarbinary(160) : link_tokenint(11) : link_expiresint(10) : unsigned link_viewsint(10) : unsigned max_viewstinyint(1) : has_passwordvarchar(512) : commentint(10) : unsigned permvarbinary(16) : ref_idvarbinary(42) : created_byvarbinary(42) : link_uidmarkersdouble face_distmediumblob embeddings_jsonmediumblob landmarks_jsonfloat xfloat yfloat wfloat hdatetime matched_atdatetime created_atdatetime updated_atvarbinary(42) : file_uidvarbinary(8) : marker_typevarbinary(8) : marker_srcvarchar(160) : marker_nametinyint(1) : marker_reviewtinyint(1) : marker_invalidvarbinary(42) : subj_uidvarbinary(8) : subj_srcvarbinary(64) : face_idint(11) : qint(11) : sizesmallint(6) : scorevarbinary(128) : thumbvarbinary(42) : marker_uidpasswordsdatetime created_atdatetime updated_atvarbinary(255) : hashvarbinary(255) : uidphotosdatetime taken_atdatetime taken_at_localfloat photo_latfloat photo_lngfloat photo_f_numberdatetime created_atdatetime updated_atdatetime edited_atdatetime published_atdatetime checked_atdatetime estimated_atdatetime deleted_atvarbinary(64) : uuidvarbinary(8) : taken_srcvarbinary(42) : photo_uidvarbinary(8) : photo_typevarbinary(8) : type_srcvarchar(200) : photo_titlevarbinary(8) : title_srcvarchar(4096) : photo_descriptionvarbinary(8) : description_srcvarbinary(1024) : photo_pathvarbinary(255) : photo_namevarbinary(755) : original_nametinyint(4) : photo_stacktinyint(1) : photo_favoritetinyint(1) : photo_privatetinyint(1) : photo_scantinyint(1) : photo_panoramavarbinary(64) : time_zonevarbinary(42) : place_idvarbinary(8) : place_srcvarbinary(42) : cell_idint(11) : cell_accuracyint(11) : photo_altitudevarbinary(2) : photo_countryint(11) : photo_yearint(11) : photo_monthint(11) : photo_dayint(11) : photo_isovarbinary(64) : photo_exposureint(11) : photo_focal_lengthsmallint(6) : photo_qualityint(11) : photo_facessmallint(6) : photo_resolutionbigint(20) : photo_durationsmallint(6) : photo_colorint(10) : unsigned camera_idvarbinary(160) : camera_serialvarbinary(8) : camera_srcint(10) : unsigned lens_idvarbinary(42) : created_byint(10) : unsigned idphotos_albumsdatetime created_atdatetime updated_atint(11) : ordertinyint(1) : hiddentinyint(1) : missingvarbinary(42) : photo_uidvarbinary(42) : album_uidphotos_keywordsint(10) : unsigned photo_idint(10) : unsigned keyword_idphotos_labelsvarbinary(8) : label_srcsmallint(6) : uncertaintyint(10) : unsigned photo_idint(10) : unsigned label_idphotos_usersvarbinary(42) : team_uidint(10) : unsigned permvarbinary(42) : uidvarbinary(42) : user_uidplacesdatetime created_atdatetime updated_atvarchar(400) : place_labelvarchar(100) : place_districtvarchar(100) : place_cityvarchar(100) : place_statevarbinary(2) : place_countryvarchar(300) : place_keywordstinyint(1) : place_favoriteint(11) : photo_countvarbinary(42) : idreactionsdatetime reacted_atint(11) : reactedvarbinary(42) : uidvarbinary(42) : user_uidvarbinary(64) : reactionservicesdatetime sync_datedatetime created_atdatetime updated_atdatetime deleted_atvarchar(160) : acc_namevarchar(160) : acc_ownervarchar(255) : acc_urlvarbinary(255) : acc_typevarbinary(255) : acc_keyvarbinary(255) : acc_uservarbinary(255) : acc_passvarbinary(16) : acc_timeoutvarbinary(512) : acc_errorint(11) : acc_errorstinyint(1) : acc_sharetinyint(1) : acc_syncint(11) : retry_limitvarbinary(1024) : share_pathvarbinary(16) : share_sizeint(11) : share_expiresvarbinary(1024) : sync_pathvarbinary(16) : sync_statusint(11) : sync_intervaltinyint(1) : sync_uploadtinyint(1) : sync_downloadtinyint(1) : sync_filenamestinyint(1) : sync_rawint(10) : unsigned idsubjectsdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(8) : subj_typevarbinary(8) : subj_srcvarbinary(160) : subj_slugvarchar(160) : subj_namevarchar(160) : subj_aliasvarchar(512) : subj_aboutvarchar(2048) : subj_biovarchar(1024) : subj_notestinyint(1) : subj_favoritetinyint(1) : subj_hiddentinyint(1) : subj_privatetinyint(1) : subj_excludedint(11) : file_countint(11) : photo_countvarbinary(128) : thumbvarbinary(8) : thumb_srcvarbinary(42) : subj_uidusers"},{"location":"developer-guide/media/","title":"Supported Media and Sidecar File Formats","text":"Format Description Type Extensions ZIP ZIP Archive File Archive .zip PDF Portable Document Format (PDF) Document .pdf AVIF AV1 Image File Format Image .avif AVIFS AV1 Image Sequence Image .avifs, .avis BMP Bitmap Image .bmp GIF Graphics Interchange Format Image .gif HEIC High Efficiency Image Container Image .avci, .avcs, .heic, .heif, .hif HEICS HEIC Image Sequence Image .heics, .heifs JPG Joint Photographic Experts Group (JPEG) Image .jfi, .jfif, .jif, .jpe, .jpeg, .jpg JXL JPEG XL Image .jxl MPO Stereoscopic JPEG (3D) Image .mpo PNG Portable Network Graphics Image .apng, .pn, .png, .pnga PSD Adobe Photoshop Image .psd THM Thumbnail Image Image .thm TIFF Tag Image File Format Image .tif, .tiff WEBP Google WebP Image .webp DNG Adobe Digital Negative Raw .dng RAW Unprocessed Sensor Data Raw .3fr, .ari, .arw, .bay, .cap, .cr2, .cr3, .crw, .data, .dcr, .dcs, .drf, .eip, .erf, .fff, .gpr, .iiq, .k25, .kdc, .mdc, .mef, .mos, .mrw, .nef, .nrw, .obm, .orf, .pef, .ptx, .pxn, .r3d, .raf, .raw, .rw2, .rwl, .rwz, .sr2, .srf, .srw, .x3f AAE Apple Image Edits XML Sidecar .aae JSON Serialized JSON Data (Exiftool, Google Photos) Sidecar .json MD Markdown Formatted Text Sidecar .markdown, .md NFO Info Text Sidecar .nfo TXT Plain Text Sidecar .txt XML Extensible Markup Language Sidecar .xml XMP Adobe Extensible Metadata Platform Sidecar .xmp YML Serialized YAML Data (Config, Metadata) Sidecar .yaml, .yml AI Adobe Illustrator Vector .ai EPS Encapsulated PostScript Vector .epi, .eps, .eps2, .eps3, .epsf, .epsi, .ept PS Adobe PostScript Vector .ps, .ps2, .ps3 SVG Scalable Vector Graphics Vector .svg 3G2 Mobile Multimedia Container (CDMA2000) Video .3g2 3GP Mobile Multimedia Container (3G) Video .3gp ASF Advanced Systems Format Video .asf AV1 AOMedia Video 1 Video .av01, .av1 AVC Advanced Video Coding (H.264, MPEG-4 Part 10) Video .avc, .avc1, .avc10, .avc2, .avc3, .dva, .dva1, .dvav, .h264 AVI Microsoft Audio Video Interleave Video .avi DV DV Video Video .dv EVC Essential Video Coding (MPEG-5 Part 1) Video .evc, .evc1 FLV Adobe Flash Video .f4v, .flv HEV High Efficiency Video Coding (HEVC) Bitstream Video .dvhe, .hev, .hev1, .hev10, .hev2, .hev3 HVC High Efficiency Video Coding (H.265) Video .dvh, .dvh1, .h265, .hevc, .hevc10, .hvc, .hvc1, .hvc10, .hvc2, .hvc3 M2TS Blu-ray MPEG-2 Transport Stream Video .m2ts M4V Apple iTunes Multimedia Container Video .m4v MJPG Motion JPEG Video .mjpeg, .mjpg MKV Matroska Multimedia Container Video .mkv MOV Apple QuickTime Video .mov, .qt MP2 MPEG 2 (H.262) Video .mp2, .mpv MP4 Multimedia Container (MPEG-4 Part 14) Video .mp, .mp4 MPG Moving Picture Experts Group (MPEG) Video .mpeg, .mpg MTS Advanced Video Coding High Definition (AVCHD) Video .mts MXF Material Exchange Format Video .mxf OGV Ogg Media (OGG) Video .ogg, .ogv, .ogx VP8 Google VP8 Video Video .vp8 VP9 Google VP9 Video Video .vp9 VVC Versatile Video Coding (H.266) Video .h266, .vvc, .vvc1 WEBM Google WebM Video .webm WMV Windows Media Video .wmv"},{"location":"developer-guide/media/#cli-command","title":"CLI Command","text":"<p>Run <code>photoprism show file-formats</code> in a terminal to list supported media and sidecar file formats.</p> <p>Command Flags:</p> <ul> <li><code>--md</code>, <code>-m</code>     format as machine-readable Markdown</li> <li><code>--csv</code>, <code>-c</code>    export as semicolon separated values</li> <li><code>--tsv</code>, <code>-t</code>    export as tab separated values</li> <li><code>--short</code>, <code>-s</code>  hide format descriptions</li> </ul>"},{"location":"developer-guide/media/colors/","title":"Color Profiles","text":""},{"location":"developer-guide/media/colors/#standard-rgb","title":"Standard RGB","text":"<p>sRGB is the default color space used when generating thumbnails. PhotoPrism and web browsers assume this color space for all pictures that do not have an embedded ICC color profile.</p>"},{"location":"developer-guide/media/colors/#icc-profiles","title":"ICC Profiles","text":"<p>An ICC color profile for wide-gamut displays can optionally be embedded in image and video files. For color profiles other than sRGB and Display P3, the thumbnails must be generated with <code>libvips</code> by setting the <code>PHOTOPRISM_THUMB_LIBRARY</code> config option to <code>vips</code> or <code>auto</code> so that the ICC profiles are preserved: </p> Environment CLI Flag Default Description PHOTOPRISM_THUMB_LIBRARY --thumb-library auto image processing <code>LIBRARY</code> to be used for generating thumbnails (auto, imaging, vips) PHOTOPRISM_THUMB_COLOR --thumb-color auto standard color <code>PROFILE</code> for thumbnails (auto, preserve, srgb, none) <p>Image colors may otherwise not be displayed correctly, which is particularly noticeable with ProPhoto RGB and Adobe RGB, as these cover a wide range of colors:</p> <p></p>"},{"location":"developer-guide/media/colors/#color-detection","title":"Color Detection","text":"<p>Color detection is performed while indexing using a 3x3 thumbnail that covers the top, bottom, and center of an image e.g. https://demo.photoprism.app/library/browse?color=green.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/media/heif/","title":"HEIC / HEIF","text":"<p>HEIC / HEIF is a new image file format employing HEVC (h.265) image coding for the best compression ratios currently possible. Newer iPhones use it for internal photo storage. It is supported on iOS 11 and macOS High Sierra and later.</p>"},{"location":"developer-guide/media/heif/#testing-conversion-and-orientation","title":"Testing Conversion and Orientation","text":"<p>Let's say you have Docker installed and want to test HEIF image conversion and orientation with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and <code>libheif-examples</code> (includes the <code>heif-convert</code> command) via <code>apt</code>:</p> <pre><code>apt update\napt install -y libheif-examples exiftool\n</code></pre> <p>Finally, run the <code>heif-convert</code> command (<code>-q 92</code> is optional and determines the JPEG quality/compression):</p> <pre><code>root@1ad9fb887a4f:/test# heif-convert -q 92 IMG_8437.HEIC IMG_8437.HEIC.jpg\nFile contains 1 image\nWritten to IMG_8437.HEIC.jpg\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code> and optionally use grep to filter the output:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre> <p>Rotation and Orientation are the important values you should pay attention to and compare. The rotation is in degrees.</p>"},{"location":"developer-guide/media/heif/#exiftool-parameters","title":"Exiftool Parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>"},{"location":"developer-guide/media/heif/#exif-orientation","title":"Exif Orientation","text":"<p>The Exif orientation values are numbered from 1 to 8:</p> <ol> <li>= 0 degrees: the correct orientation, no adjustment is required.</li> <li>= 0 degrees, mirrored: image has been flipped back-to-front.</li> <li>= 180 degrees: image is upside down.</li> <li>= 180 degrees, mirrored: image has been flipped back-to-front and is upside down.</li> <li>= 90 degrees: image has been flipped back-to-front and is on its side.</li> <li>= 90 degrees, mirrored: image is on its side.</li> <li>= 270 degrees: image has been flipped back-to-front and is on its far side.</li> <li>= 270 degrees, mirrored: image is on its far side.</li> </ol> <p>Learn more \u203a</p>"},{"location":"developer-guide/media/heif/#software-libraries-and-references","title":"Software Libraries and References","text":"<ul> <li>https://www.idownloadblog.com/2017/10/18/how-to-convert-heif-to-jpeg-imazing-heic-converter/ - How to convert HEIF images to JPEGs with iMazing HEIC Converter</li> <li>strukturag/libheif - libheif is a ISO/IEC 23008-12:2017 HEIF file format decoder and encoder (C++)</li> <li>nokiatech/heif - Reader/Writer Engine is an implementation of the HEIF standard to demonstrate its powerful features and capabilities (C++)</li> <li>monostream/tifig - A fast HEIF image converter aimed at thumbnailing</li> <li>perkeep/perkeep#969 - HEIC/HEVC support in Perkeep</li> <li>jdeng/goheif - A decoder/converter for HEIC based on libde265 (CGO)</li> </ul>"},{"location":"developer-guide/media/import/","title":"Importing, Indexing, and Uploading","text":"<p>PhotoPrism is meant to be a complete photo management solution that not only lets you index your existing pictures, but also add or upload new files to your photo collection or delete existing files to free up space.</p> <p>You can therefore choose to index your originals directly, leaving all file and folder names unchanged, or use the optional import feature that automatically removes duplicates, gives files a unique name and sorts them by year and month.</p> <p>To learn more, follow our First Steps \ud83d\udc63 tutorial which will guide you through the interface and settings.</p>"},{"location":"developer-guide/media/import/#read-only-mode","title":"Read-Only Mode","text":"<p>Early in development there was some debate about whether PhotoPrism should be responsible for naming files, see Support Photos In Place on Hard Drive #41. Once you want the software to automatically create new files or merge photo libraries from different devices, this is often the only viable option.</p> <p>Besides the index-only functionality for users who want to name their files manually, we have also introduced a read-only mode for those who want to use the software as a gallery with limited features, see Read-Only Mode #56.</p>"},{"location":"developer-guide/media/import/#post-processing","title":"Post Processing","text":"<p>After importing new pictures, it would be great if users could quickly sort and review them. This way, the library stays clean and organized, even without applying filters to hide bad shots.</p> <p>This is common workflow among users of Adobe Bridge, a tool used by many professionals. They go through complete asset collections and sort photos using keyboard shortcuts, where keys toggle pre-defined tags or flags like \"favorite\".</p>"},{"location":"developer-guide/media/import/#upload-options","title":"Upload Options","text":"<p>Users can either use WebDAV to upload files and add them to their originals or import folder, or use the Web Upload to add them to a temporary directory on the server, from which they will be imported to the originals folder.</p> <p>We might later use WebAssembly or the File API to improve the performance and capabilities of the Web Upload.</p>"},{"location":"developer-guide/media/live/","title":"Hybrid Photo/Video Formats","text":""},{"location":"developer-guide/media/live/#apple-iphone-and-ipad","title":"Apple iPhone and iPad","text":"<p>iOS Live Photos consist of a JPEG/HEIC image and a QuickTime AVC/HEVC video, which are both required for viewing.</p> <p>We recommend using an app like PhotoSync to upload Live Photos to PhotoPrism, since the iOS web upload usually only submits the HEIC image file without the video.</p>"},{"location":"developer-guide/media/live/#android-devices","title":"Android Devices","text":"<p>Some Samsung and Google Android devices support taking \"Motion Photos\" with the included Camera app. Motion Photos are JPEG/HEIC image with a short MP4 video embedded after the image data.</p> <p>The image part of these files can be opened in any image viewer that supports JPEG/HEIC, but the video part cannot. However, since the MP4 video is simply appended at the end of the image file, it can be easily read by our software and streamed through the API as needed.</p>"},{"location":"developer-guide/media/live/#introductory-tutorials","title":"Introductory Tutorials","text":"Title Date URL How to detect Android motion photos in Flutter May 2023 https://ente.io/blog/tech/android-motion-photos-flutter/ Stripping Embedded MP4s out of Android 12 Motion Photos Oct 2021 https://mjanja.ch/2021/10/stripping-embedded-mp4s-out-of-android-12-motion-photos/ Google Pixel \"Motion Photo\" Howto Mar 2021 https://linuxreviews.org/Google_Pixel_%22Motion_Photo%22 go-mp4: Golang Library and CLI Tool for MP4 Jul 2020 https://dev.to/sunfishshogi/go-mp4-golang-library-and-cli-tool-for-mp4-52o1 Working with Motion Photos Jan 2019 https://medium.com/android-news/working-with-motion-photos-da0aa49b50c Google: Behind the Motion Photos Technology in Pixel 2 Mar 2018 https://blog.research.google/2018/03/behind-motion-photos-technology-in.html"},{"location":"developer-guide/media/live/#software-libraries-and-references","title":"Software Libraries and References","text":"Title URL Web Video Codec Guide https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Video_codecs Media Container Formats https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Containers MP4 Signature Format https://www.file-recovery.com/mp4-signature-format.htm List of file signatures (Wikipedia) https://en.wikipedia.org/wiki/List_of_file_signatures Go library for reading and writing MP4 files abema/go-mp4 Go library for buffered I/O with io.Seeker interface sunfish-shogi/bufseekio How to use the io.Reader interface https://yourbasic.org/golang/io-reader-interface-explained/ AV1 Codec ISO Media File Format https://aomediacodec.github.io/av1-isobmff"},{"location":"developer-guide/media/live/#related-github-issues","title":"Related GitHub Issues","text":"<ul> <li>#439 (Samsung: Initial support for Motion Photos)</li> <li>#1739 (Google: Initial support for Motion Photos)</li> <li>#2788 (Metadata: Flag Samsung/Google Motion Photos as Live Photos)</li> <li>cliveontoast/GoMoPho#23 (Google Motion Photos Video Extractor: Add Android 12 Support)</li> </ul>"},{"location":"developer-guide/media/live/#related-pull-requests","title":"Related Pull Requests","text":"<ul> <li>#3709 (Google: Initial support for Motion Photos)</li> <li>#3722 (Google: Add support for Motion Photos)</li> <li>#3660 (Samsung: Improved support for Motion Photos)</li> </ul>"},{"location":"developer-guide/media/raw/","title":"RAW Images","text":"<p>Professional and semi-professional photographers often keep their originals in a lossless RAW format, close to how they were taken with the physical sensor, rather than in a compressed image format like JPEG, especially if they shoot with a digital SLR camera. Newer mobile phones may also be able to capture images in RAW mode. Our goal is to provide top-notch support for all RAW images, regardless of camera make and model. A full list of file types and extensions can be found in our Knowledge Base.</p> <p></p>"},{"location":"developer-guide/media/raw/#raw-conversion","title":"RAW Conversion","text":"<p>Since web browsers generally cannot display RAW image files directly, they must be converted. This is done during import or initial indexing. It can also be triggered manually in a terminal with the <code>photoprism convert</code> command.</p>"},{"location":"developer-guide/media/raw/#adobe-xmp","title":"Adobe XMP","text":"<p>PhotoPrism currently supports Darktable and RawTherapee as RAW image converters (as well as Sips on macOS). Darktable fully supports XMP sidecar files, RawTherapee might only partially. However, XMP is only a \"container\" format, so the fields (namespaces) used there to indicate how an image should be converted (as well as other metadata) differ between Lightroom/Photoshop, Darktable, and RawTherapee.</p> <p>In other words, just because an application generally supports XMP that doesn't mean it can use metadata created with another application or by another vendor like Adobe. If you think that's confusing, well, that's because it is. You have an open format, but you still suffer from vendor lock-in - probably not entirely unintentional on Adobe's part.</p> <p>From our experience, some basic edits done with Adobe tools - such as cropping - might be preserved when you convert the same RAW image with other software like Darktable. Advanced edits, such as lens or color corrections, will likely not be applied.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/media/raw/#darktable","title":"Darktable","text":"<p>If installed, Darktable CLI can be used for RAW image conversion. Note that PhotoPrism will only run one instance of <code>darktable-cli</code> at the same time if the <code>PHOTOPRISM_RAW_PRESETS</code> config option is enabled, so existing Darktable presets can be applied (requires an exclusive lock).</p>"},{"location":"developer-guide/media/raw/#using-darktable-as-library","title":"Using Darktable as library","text":"<p>We had the idea to use cgo and link directly against <code>libdarktable.so</code> to convert RAW images to JPEG, see darktable-dev mailing list. However this requires calling/wrapping a large number of C functions and also has other disadvantages. The idea is postponed until a clear benefit becomes visible. Running <code>darktable-cli</code> or any other binary that does the job (see above) seems to be the way to go.</p>"},{"location":"developer-guide/media/raw/#rawtherapee","title":"RawTherapee","text":"<p>If installed, RawTherapee CLI can also be used for RAW image conversion. If it used by default if Darktable isn't installed or disabled.</p>"},{"location":"developer-guide/media/raw/#jpeg-size-limit","title":"JPEG Size Limit","text":"<p>RawTherapee cannot limit the resolution of JPEG files when converting files from other formats such as RAW, DNG, HEIC or AVIF. In general, when converting images, the resolution of the generated JPEG files can be limited with the environment variable <code>PHOTOPRISM_JPEG_SIZE</code> or the CLI parameter <code>--jpeg-size</code>.</p>"},{"location":"developer-guide/media/raw/#scriptable-image-processing-system-sips","title":"Scriptable Image Processing System (Sips)","text":"<p>On a Mac, PhotoPrism can convert multiple files at once using Sips (pre-installed on OS X). It is not available for other operating systems.</p>"},{"location":"developer-guide/media/raw/#comparison-of-raw-to-jpeg-converters","title":"Comparison of RAW to JPEG converters","text":"<ul> <li>darktable - popular open-source photography app and raw developer; available for Mac, Linux, and Windows; supports XMP (compatible with photoshop/lightroom?)</li> <li>Mac OS X ships with sips: <code>sips -s format jpeg IMAGE.RAW --out IMAGE.JPG</code></li> <li>Photivo - open-source photo processor; available for Mac, Linux, and Windows; no XMP support?</li> <li>RawTherapee - open-source RAW image processing app; available for Mac, Linux, and Windows; no XMP support?</li> <li>digiKam - open-source digital photo management application based on Qt (KDE); available for Mac, Linux, and Windows; supports XMP (compatible with photoshop/lightroom?)</li> <li>UFRaw - Unidentified Flying Raw is a utility to read and manipulate raw images from digital cameras</li> </ul> Tool Command line options Compatible OS JPG Diff* XMP support Possible settings EXIF Diff* Compatible with Raspberry (ARM64) Darktable 1) <code>darktable-cli IMG_0310.CR2  IMG_0310_darktable1.jpg</code> 2) <code>darktable-cli IMG_0310_EDITED.CR2 IMG_0310_EDITED.xmp IMG_0310_EDITED_darktable2.jpg</code> macOS, Linux, Windows **** yes (but seems to be not compatible with adobe xmps) ? **** yes Sips <code>sips -s format jpeg IMG_0310.CR2 --out IMG_0310_sips.jpg</code> macOS ***** no ? **** not available for ubuntu Rawtherapee <code>rawtherapee-cli -o IMG_0310_rawtherapee.jpg -c IMG_0310.CR2</code> macOS, Linux, Windows *** no ? **** yes UFraw <code>ufraw-batch --out-type=jpg --output=IMG_0310_ufraw.jpg IMG_0310.CR2</code> macOS, Linux, Windows * no ? ** yes ImageMagick <code>magick IMG_0310.CR2 IMG_0310_magick.jpg</code> macOS, Linux, Windows * no ? ** yes Digikam ? macOS, Linux, Windows - - - - - Photiva ? macOS, Linux, Windows - - - - - <code>*</code> Compared to JPG/EXIF converted from photoshop"},{"location":"developer-guide/media/raw/#image-diff","title":"Image Diff","text":"<p>The following table shows the difference between the JPEG files converted by Darktable, Sips, Rawtherapee, UFraw and ImageMagick compared to Adobe Photoshop. Red are pixel that differ from the photoshop version, white are equal pixels. In total 5 Images have been compared (full results). The diff was created using ewanmellor/git-diff-image.</p> Tool Diff (left is Photoshop) Darktable Sips Rawtherapee UFraw ImageMagick"},{"location":"developer-guide/media/raw/#exif-diff","title":"EXIF Diff","text":"<p>The following table shows the difference between the JPG files converted by the tools compared to JPG files converted by photoshop. 5 Images have been compared.</p> Info Photoshop Sips Darktable Raw-therapee Image Magick UFraw Kind identical identical identical identical identical identical Size 2.881.969 bytes (EXIF)/ 2.7M (ls -alh) 2.673.777 bytes / 2.5M 5.446.710 bytes / 5.2M always bigger 3.467.998 bytes / 3.3M 3.467.998 bytes / 3.3M 1.558.587 bytes / 1.5M always smaller Where reference different different different different different Created reference different different different different different Modified reference different different different different different Dimension identical - 5472\u200a\u00d7\u200a3648 5472\u200a\u00d7\u200a3648 different - 5494\u200a\u00d7\u200a3666 different - 5488\u200a\u00d7\u200a3662 different - 5496\u200a\u00d7\u200a3670 different - 5496\u200a\u00d7\u200a3670 Device Make refrence identical identical identical not set not set Colour space reference identical identical identical identical identical Colour profile Adobe RGB (1998) different - Display P3 different - sRGB different - RTv2_sRGB not set not set Focal length reference identical identical identical not set not set Alpha Channel reference identical identical identical not set not set Red eye reference identical identical identical not set not set Metering Mode reference identical identical identical not set not set F number reference identical identical identical not set not set Exposure program reference identical identical identical not set not set Exposure time reference identical identical identical not set not set Latitude reference sometimes very small differences identical identical not set not set Longitude reference sometimes very small differences identical identical not set not set"},{"location":"developer-guide/media/raw/#adobe-photoshop-lightroom","title":"Adobe Photoshop / Lightroom","text":"<p>Ideally we can convert images directly with Photoshop or Lightroom, if installed. It seems like Photoshop comes with some sort of command-line automation tool based on NodeJS: adobe-photoshop/generator-core</p> <p>See https://photo.stackexchange.com/questions/39532/command-line-approach-to-develop-raw-images-with-adobe-xmp-sidecars</p> <p>This needs further investigation. Contributions welcome!</p>"},{"location":"developer-guide/media/raw/#todo-reading-list","title":"Todo / Reading List","text":"<ul> <li>Compare the quality and XMP compatibility of different RAW converters #65</li> <li>Investigate if PhotoShop or Lightroom can be used to convert images on the command line</li> <li>Collect example RAW files of common camera brands and models</li> <li>Figure out how we can implement \"auto-enhance\" (automatically fix exposure and write XMP file while converting to JPEG)</li> <li>https://howtogimp.com/raw-photos-in-gimp/ - RAW converters to use with GIMP</li> <li>mdouchement/hdr - HDR is a library that handles RAW image format written with Golang</li> </ul>"},{"location":"developer-guide/media/samples/","title":"File Samples","text":"<p>We welcome image and video file samples from our community. You can email them to samples@photoprism.app, either as attachments or with a download link.</p> <p>Please include the file format and GitHub issue number (if applicable) or other helpful reference (e.g. camera model) in the subject line, and let us know if we have permission to upload your files to dl.photoprism.app/samples for future use.</p> <p> Contact Us Submit Files Browse Archive </p>"},{"location":"developer-guide/media/storage/","title":"File Storage","text":"<p>At the moment, all media and sidecar files as well as thumbnail images are stored directly in the server's file system, see Config Options.</p>"},{"location":"developer-guide/media/storage/#filesystem-abstraction","title":"Filesystem Abstraction","text":"<p>We may eventually want to add a filesystem abstraction e.g. to speed up testing or support cloud storage. Afero seems to be the gold standard for this in the Go world:</p> <ul> <li>spf13/afero</li> </ul>"},{"location":"developer-guide/media/storage/#related-github-issues","title":"Related GitHub Issues","text":"<ul> <li>Support for cloud storage with encryption</li> <li>Embedded Database + Bleve for search? #55</li> <li>Postgres support? #47</li> </ul>"},{"location":"developer-guide/media/storage/#software-libraries-and-references","title":"Software Libraries and References","text":"<ul> <li>rclone/rclone - rsync for cloud storage (Google Drive, AWS, One Drive, ...)</li> <li>@minio - Object Storage for AI</li> <li>upper.io/db.v3 - a productive data access layer for Go</li> <li>LevelDB - fast key-value storage library written at Google (written in Go)</li> <li>Bleve - full-text search and indexing for Go</li> <li>TiDB - a distributed HTAP database compatible with the MySQL protocol (written in Go)</li> <li>KSQL - the Streaming SQL Engine for Apache Kafka</li> <li>CockroachDB - ultra-resilient SQL for global business (written in Go)</li> <li>LedisDB - a high performance NoSQL like Redis powered by Go</li> <li>go-pg/pg - Golang ORM with focus on PostgreSQL features and performance</li> <li>go-redis/redis - Type-safe Redis client for Golang</li> </ul>"},{"location":"developer-guide/media/thumbnails/","title":"Thumbnail Generation and Storage","text":""},{"location":"developer-guide/media/thumbnails/#introduction","title":"Introduction","text":"<p>PhotoPrism can use <code>libvips</code> and the native disintegration/imaging package to generate thumbnails for display in search results and in the full-screen viewer.</p> <p>The smallest configurable size limit is 720px, which corresponds to the <code>fit_720</code> thumbnail size. Most sizes up to 720x720 will be generated by default and should therefore always be available.</p> <p>Besides their obvious use in the frontend, the indexer also uses thumbnails for color detection, face recognition and image classification, see Advanced Settings in the User Guide.</p>"},{"location":"developer-guide/media/thumbnails/#standard-sizes","title":"Standard Sizes","text":"<p>The smallest configurable static and dynamic size limit is 720px, so most sizes up to <code>fit_720</code> are always generated by default. Higher size limits generate thumbnails with more detail at higher resolutions - either statically (pre-generated while indexing) or on demand if the configuration permits.</p> <p>Optional thumbnail sizes cannot be pre-generated and are only rendered on request, for example when sharing an image on Instagram.</p> <p>The following overview shows the name, dimensions, and aspect ratio for each thumbnail size as well as a description of how it is used:</p> Name Width Height Aspect Ratio Available Usage colors 3 3 1:1 Always Color Detection tile_50 50 50 1:1 Always List View tile_100 100 100 1:1 Always Places View left_224 224 224 1:1 On-Demand AI right_224 224 224 1:1 On-Demand AI tile_224 224 224 1:1 Always AI, Mosaic View left_384 384 384 1:1 Optional AI right_384 384 384 1:1 Optional AI tile_384 384 384 1:1 Optional AI left_480 480 480 1:1 Optional AI right_480 480 480 1:1 Optional AI tile_480 480 480 1:1 Optional AI tile_500 500 500 1:1 Always Cards View fit_720 720 720 Preserved Always SD TV, Mobile tile_1080 1080 1080 1:1 Optional Instagram fit_1280 1280 1024 Preserved On-Demand HD TV, SXGA fit_1600 1600 900 Preserved Optional Social Media fit_1920 1920 1200 Preserved On-Demand Full HD fit_2048 2048 2048 Preserved Optional DCI 2K, Tablets fit_2560 2560 1600 Preserved On-Demand Quad HD fit_3840 3840 2400 Preserved Optional 4K Ultra HD fit_4096 4096 4096 Preserved On-Demand DCI 4K, Retina 4K fit_5120 5120 5120 Preserved On-Demand Retina 5K fit_7680 7680 4320 Preserved On-Demand 8K Ultra HD 2 <p>\u21aa <code>internal/thumb/sizes.go</code></p>"},{"location":"developer-guide/media/thumbnails/#color-profiles","title":"Color Profiles","text":"<p>sRGB is the standard color space used when generating thumbnails. An ICC color profile for wide-gamut displays can optionally be embedded.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/media/thumbnails/#file-storage","title":"File Storage","text":"<p>Generated thumbnail files are stored in the <code>storage/cache/thumbnails</code> folder, where the path and file name depend on the thumbnail size and original file hash, e.g.:</p> <pre><code>storage/cache/thumbnails/1/a/3/1a30c1f...9_100x100_center.jpg\n</code></pre>"},{"location":"developer-guide/media/thumbnails/#downscaling-filters","title":"Downscaling Filters","text":""},{"location":"developer-guide/media/thumbnails/#linear","title":"Linear","text":"<p>Bilinear interpolation takes a weighted average of the four neighborhood pixels to calculate its final interpolated value. The result is a much smoother image than the original image. When all known pixel distances are equal, then the interpolated value is simply their sum divided by four. This technique performs interpolation in both directions, horizontal and vertical. This technique gives better result than nearest neighbor interpolation and take less computation time compared to bicubic interpolation.</p>"},{"location":"developer-guide/media/thumbnails/#cubic","title":"Cubic","text":"<p>Catmull-Rom is a local interpolating spline developed for computer graphics purposes. Its initial use was in design of curves and surfaces, and has recently been used in several applications. Catmull-Rom splines are a family of cubic interpolating splines formulated such that the tangent at each point is calculated using the previous and next point on the spline. The results are similar to ones produced by bicubic interpolation with regards to sharpness, but the Catmull-Rom reconstruction is clearly superior in smooth signal region.</p>"},{"location":"developer-guide/media/thumbnails/#lanczos","title":"Lanczos","text":"<p>The Lanczos interpolation function is a mathematical formula used to smoothly interpolate the value of a digital image between its samples. It maps each sample of the given image to a translated and scaled copy of the Lanczos kernel, which is a sinc function windowed by the central hump of a dilated sinc function. The sum of these translated and scaled kernels is then evaluated at the desired pixel. Lanczos interpolation has the best properties in terms of detail preservation and minimal generation of aliasing artifacts for geometric transformations not involving strong down sampling. However higher order Lanczos interpolation requires high computational time, which makes it unsuitable for most commercial software.</p>"},{"location":"developer-guide/media/thumbnails/#blackman","title":"Blackman","text":"<p>Blackman is a modification of Lanczos that has better control of ringing artifacts.</p>"},{"location":"developer-guide/media/thumbnails/#server-api","title":"Server API","text":"<p>Like most commercial image hosting services, we have chosen to implement a cookie-free thumbnail API to minimize request latency by avoiding unnecessary network traffic.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/media/thumbnails/#further-reading","title":"Further Reading","text":"<ul> <li>https://en.wikipedia.org/wiki/Image_scaling</li> <li>https://en.wikipedia.org/wiki/Lanczos_resampling</li> <li>https://en.wikipedia.org/wiki/Comparison_gallery_of_image_scaling_algorithms</li> </ul>"},{"location":"developer-guide/media/videos/","title":"Video File Support","text":""},{"location":"developer-guide/media/videos/#codecs-and-containers","title":"Codecs and Containers","text":"<p>For maximum browser compatibility, PhotoPrism can transcode video codecs and containers supported by FFmpeg to MPEG-4 AVC.</p> <p>Running the following command in a terminal displays a list of supported codecs:</p> <pre><code>ffmpeg -decoders\n</code></pre> <p>See our advanced setup guide to learn how to configure hardware video transcoding.</p> <p>Please Note:</p> <ol> <li>Not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</li> <li>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</li> <li>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have ExifTool enabled to extract metadata such as duration, resolution, and codec.</li> </ol>"},{"location":"developer-guide/media/videos/#hybrid-photovideo-formats","title":"Hybrid Photo/Video Formats","text":"<p>For more information on hybrid photo/video file formats, e.g. Apple Live Photos and Samsung/Google Motion Photos, see github.com/photoprism/photoprism/tree/develop/pkg/media and /developer-guide/media/live/.</p>"},{"location":"developer-guide/media/videos/#standard-resolutions","title":"Standard Resolutions","text":"<p>The <code>PHOTOPRISM_FFMPEG_SIZE</code> config option allows to limit the resolution of transcoded videos. It accepts the following standard sizes, while other values are automatically adjusted to the next supported size:</p> Size Usage 720 SD TV, Mobile 1280 HD TV, SXGA 1920 Full HD 2048 DCI 2K, Tablets 2560 Quad HD 3840 4K Ultra HD 4096 DCI 4K, Retina 4K 7680 8K Ultra HD 2"},{"location":"developer-guide/media/videos/#technical-references-and-tutorials","title":"Technical References and Tutorials","text":"Title URL Web Video Codec Guide https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Video_codecs Web Video Content-Type Headers https://developer.mozilla.org/en-US/docs/Web/Media/Formats/codecs_parameter Media Container Formats https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Containers MP4 Signature Format https://www.file-recovery.com/mp4-signature-format.htm List of file signatures (Wikipedia) https://en.wikipedia.org/wiki/List_of_file_signatures How to use the io.Reader interface https://yourbasic.org/golang/io-reader-interface-explained/ AV1 Codec ISO Media File Format https://aomediacodec.github.io/av1-isobmff"},{"location":"developer-guide/metadata/cameras/","title":"Camera Brands and Models","text":""},{"location":"developer-guide/metadata/cameras/#market-share-by-brand-2016","title":"Market Share by Brand (2016)","text":"<p>DSLR Cameras</p> Brand Share Canon 63.3% Nikon 31.6% Ricoh Imaging (Pentax) 4.8% <p>System Cameras</p> Brand Share Olympus 26.8% Canon 18.5% Sony 17.9% <p>See also Brands with the highest market share 2016.</p>"},{"location":"developer-guide/metadata/cameras/#most-popular-brands-on-flickr","title":"Most Popular Brands on Flickr","text":"<p>https://www.flickr.com/cameras</p>"},{"location":"developer-guide/metadata/cameras/#camera-models-supported-by-photoshop","title":"Camera Models Supported by Photoshop","text":"<p>https://helpx.adobe.com/camera-raw/kb/camera-raw-plug-supported-cameras.html</p>"},{"location":"developer-guide/metadata/colors/","title":"Color Detection","text":"<p>Color detection is performed while indexing using a 3x3 thumbnail that covers the top, bottom, and center of an image e.g. https://demo.photoprism.app/library/browse?color=green.</p>"},{"location":"developer-guide/metadata/colors/#standard-colors","title":"Standard Colors","text":"<p>The following color names can be used when searching for pictures:</p> ID Name Code Sample 0 Black #000000 1 Brown #795548 2 Grey #9E9E9E 3 White #FFFFFF 4 Purple #9C27B0 5 Gold #FFDF00 6 Blue #3F51B5 7 Cyan #00BCD4 8 Teal #009688 9 Green #4CAF50 A Lime #CDDC39 B Yellow #FFEB3B C Magenta #FF00FF D Orange #FF9800 E Red #F44336 F Pink #E91E63"},{"location":"developer-guide/metadata/colors/#color-examples","title":"Color Examples","text":"<p>This overview shows additional examples of matching color codes:</p> ID Name Code Sample 0 Black #000000 1 Brown #A1887F #8D6E63 #A07F6C #9B7B5B #75645B #795548 #6D4C41 #5D4037 #9B6136 #C1A487 #AA8062 #6B5546 #B4B59C #B2B49B 2 Grey #E0E0E0 #9E9E9E #757575 #616161 #424242 #847A72 #DFE0E1 3 White #FFFFFF #E4E4E4 #E7E7E7 4 Purple #F3E5F5 #E1BEE7 #CE93D8 #BA68C8 #AB47BC #9C27B0 #9B318F #86007E #8E24AA #7B1FA2 #6A1B9A #4A148C #AA00FF #EDE7F6 #D1C4E9 #B39DDB #9575CD #7E57C2 #5E35B1 #673AB7 #512DA8 #4527A0 #311B92 #B388FF #7C4DFF #8E6493 #5E3A5E #440E79 #483678 #4E3880  #3B0E79 5 Gold #EDDEAC #E8B451 #C08A3E #A27D4b #755531 #D19327 #DEA253 #D5AA6F #F5EAD4 6 Blue #3F51B5 #C5CAE9 #5C6BC0 #3949AB #303F9F #283593 #1A237E #536DFE #3D5AFE #304FFE #2196F3 #BBDEFB #90CAF9 #64B5F6 #42A5F5 #1E88E5 #1976D2 #1565C0 #0D47A1 #82B1FF #448AFF #2979FF #2962FF #03A9F6 #B3E5FC #81D4FA #4FC3F7 #29B6F6 #039BE5 #0288D1 #0277BD #01579B #80D8FF #40C4FF #00B0FF #0091EA #607D8B #78909C #546E7A #37474F #E4EBFD #7DD3EA #076399 #28446B #4AC8F5 #0800F4 #012D5F 7 Cyan #B2EBF2 #80DEEA #4DD0E1 #26C6DA #00B8D4 #00BCD4 #00ACC1 #0097A7 #00838F #006064 #84FFFF #18FFFF #00E5FF 8 Teal #009688 #00897B #00796B #00695C #045D5C #245A5F #03454F #2C545E #174741 9 Green #E8F5E9 #C8E6C9 #ABC7B0 #A5D6A7 #81C784 #66BB6A #4CAF50 #43A047 #388E3C #2E7D32 #1B5E20 #F1F8E9 #DCEDC8 #C5E1A5 #AED581 #8BC34A #9CCC65 #7CB342 #689F38 #558B2F #33691E #B9F6CA #69F0AE #00C853 #00E676 #CCFF90 #B2FF59 #76FF03 #64DD17 #DDD579 #EEECA2 #244E3B #9A9D47 #BEBD76 #5C5A30 #B3C16C #ACA783 #474C25 #CDD087 #796D41 A Lime #F0F4C3 #E6EE9C #DCE775 #D4E157 #CDDC39 #C0CA33 #AFB42B #EEFF41 #C6FF00 #AEEA00 B Yellow #FFF9C4 #FFF59D #FFF176 #FFEE58 #FFFF8D #FFFF00 #FFD54F #FFCA28 #E3CE81 #D1AF52 #EEBB2B #D3A83A #C5A702 #9F8201 #E8CE03 C Magenta #FF00FF #E500E5 #F000B5 #CE009B #C0055B #B00085 #A82863 #5B002F #4B0121 #860225 #CB023D #64071A #9E0047 #DC7ACF D Orange #FF9800 #FFA726 #FB8C00 #F57C00 #EF6C00 #FF9100  #FF6D00 #FD9A31 #7D2704 #FD571F #F86704 #FD9A00 #FE8A00 #F19652 #E58347 #C94C30 #9F5601 #FA6801 #F9A825 #BB723D E Red #FF5252 #F44336 #EF5350 #E53935 #F6292E  #FC252D #D32F2F #C62828 #BA2830 #B71C1C #D50000 #DB0806 #CF0904 #D81A14 #CC1708 #D80807 #DE2616 #EE240F #A1211F  #701219 #511218 #491114 F Pink #FCE4EC #FDC8EB #E79FA6 #F8BBD0 #F48FB1 #FF80AB #FF4081 #F50057 #F06292 #EC407A #E91E63 #D81B60 #C2185B"},{"location":"developer-guide/metadata/colors/#hcl-vs-hsl","title":"HCL vs HSL","text":"<p>Our color library stores colors in RGB and provides methods to convert them to different color spaces, including HCL and HSL:</p> <p></p> <p>Learn more \u203a</p>"},{"location":"developer-guide/metadata/colors/#color-profiles","title":"Color Profiles","text":"<p>sRGB is the standard color space used when generating thumbnails. An ICC color profile for wide-gamut displays can optionally be embedded.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/metadata/geocoding/","title":"Reverse Geocoding","text":"<p>If enabled, reverse geocoding enriches photo and video metadata with details such as country, state, city, and category.</p>"},{"location":"developer-guide/metadata/geocoding/#privacy-policy","title":"Privacy Policy","text":"<p>As explained in detail in our Privacy Policy, reverse geocoding depends on retrieving the necessary information from a backend that we provide for this purpose.</p> <p>The costs are currently fully covered by us for all users, including non-sponsors, and we ensure a very high level of privacy and confidentiality:</p> <ul> <li>API requests are not logged permanently.</li> <li>Our API approximates the coordinates and encodes them with a fuzzy S2 cell ID that does not include the house number or any other data identifying a specific residential address, except possibly in very sparsely populated areas of the world. Even then, we cannot trace the request back to a person, picture or point in time.</li> <li>We may store your server's IP address and other HTTP request headers for a limited time to perform authorization checks, prevent abuse, and implement rate limits. Since the traffic is encrypted, no one intercepting the server-to-server communication can see the exact request and response; only the fact that you exchanged data with our backend.</li> </ul> <p>Other open source applications sometimes use the free developer APIs operated by openstreetmap.org. In this case, their usage and privacy policies apply, which means that your request data is stored and used to create publicly available reports. This is different from our approach, which focuses on our users' privacy and user experience.</p>"},{"location":"developer-guide/metadata/geocoding/#example-request","title":"Example Request","text":"<p><code>GET https://places.photoprism.app/v1/location/149ce78563</code></p> <pre><code>{\n  \"id\": \"s2:149ce78563\",\n  \"name\": \"Elafonisi Kite Club\",\n  \"street\": \"\u039a\u03b5\u03c6\u03b1\u03bb\u03ae\",\n  \"postcode\": \"\",\n  \"category\": \"nature\",\n  \"timezone\": \"Europe/Athens\",\n  \"lat\": 35.269638,\n  \"lng\": 23.536951,\n  \"place\": {\n    \"id\": \"gr:GCd9oey68OFr\",\n    \"label\": \"\u03a7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03b9\u03c3\u03c3\u03b1, Greece\",\n    \"district\": \"\",\n    \"city\": \"\u03a7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03b9\u03c3\u03c3\u03b1\",\n    \"state\": \"\u0391\u03c0\u03bf\u03ba\u03b5\u03bd\u03c4\u03c1\u03c9\u03bc\u03ad\u03bd\u03b7 \u0394\u03b9\u03bf\u03af\u03ba\u03b7\u03c3\u03b7 \u039a\u03c1\u03ae\u03c4\u03b7\u03c2\",\n    \"country\": \"gr\",\n    \"keywords\": \"\u03c7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03c3\u03b1\"\n  },\n  \"events\": [],\n  \"licence\": \"Data \u00a9 PhotoPrism\"\n}\n</code></pre>"},{"location":"developer-guide/metadata/geocoding/#location-data","title":"Location Data","text":"<p>See: internal/maps/location.go</p>"},{"location":"developer-guide/metadata/geocoding/#world-maps","title":"World Maps","text":"<p>PhotoPrism also includes six high-resolution world maps that allow you to browse photos by location, see Web User Interface &gt; Interactice Maps. Visit try.photoprism.app/library/places to try them on our demo.</p>"},{"location":"developer-guide/metadata/geocoding/#related-resources","title":"Related Resources","text":""},{"location":"developer-guide/metadata/geocoding/#event-discovery","title":"Event Discovery","text":"<ul> <li>https://schedjoules.github.io/event-discovery-api/#introduction</li> <li>https://www.gdeltproject.org/data.html#rawdatafiles</li> </ul>"},{"location":"developer-guide/metadata/geocoding/#libraries","title":"Libraries","text":"<ul> <li>https://tegola.io/ - An open source vector tile server written in Go</li> <li>https://tegola.io/tutorials/tegola-with-open-layers/ - Using Tegola with OpenLayers</li> <li>go-spatial/tegola-osm - scripts for importing and running a mirror of OSM with tegola</li> <li>https://pelias.io/ - Pelias Geocoder (GitHub)</li> <li>Leaflet/Leaflet - JavaScript library for mobile-friendly interactive maps</li> <li>tidwall/tile38 - a geospatial database and realtime geofencing server</li> <li>melihmucuk/geocache - an in-memory cache that is suitable for geolocation based applications</li> <li>aaronland/go-slippy-tiles - a proxy for map tiles</li> <li>paulmach/osm - a general purpose library for reading, writing and working with OpenStreetMap data</li> <li>maguro/pbf - a Go-based OpenStreetMap PBF encoder/ decoder</li> <li>golang/geo - S2 geometry library in Go</li> <li>https://gist.github.com/antoniomo/3371e44cbe2f0cc75a525aac0d188cfb - example for S2 geometry library</li> <li>tidwall/redcon - Redis compatible server framework (Go)</li> <li>siddontang/ledisdb - a high performance NoSQL DB powered by Go (homepage)</li> <li>https://github.com/blevesearch/bleve/tree/master/geo - geo support in bleve</li> </ul>"},{"location":"developer-guide/metadata/geocoding/#commercial-services","title":"Commercial Services","text":"<ul> <li>https://developers.google.com/maps/documentation/</li> <li>https://www.mapbox.com/maps/</li> </ul>"},{"location":"developer-guide/metadata/geocoding/#tutorials","title":"Tutorials","text":"<ul> <li>https://developers.google.com/maps/solutions/store-locator/clothing-store-locator#findnearsql</li> <li>https://blog.mastermaps.com/2014/08/showing-geotagged-photos-on-leaflet-map.html - Showing geotagged photos on a Leaflet map</li> <li>https://rubenspgcavalcante.github.io/leaflet-ant-path/ - Animate polylines as ants walking in a path</li> </ul>"},{"location":"developer-guide/metadata/orientation/","title":"Image Orientation","text":""},{"location":"developer-guide/metadata/orientation/#using-exiftool","title":"Using Exiftool","text":"<p>Assuming you have Docker installed and want to run <code>exiftool</code> with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and any other packages you need, e.g. <code>libheif-examples</code> to convert HEIF images to JPEG, via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code> and optionally use grep to filter the output:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre> <p>Rotation and Orientation are the important values you should pay attention to and compare. The rotation is in degrees.</p>"},{"location":"developer-guide/metadata/orientation/#exiftool-parameters","title":"Exiftool Parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>"},{"location":"developer-guide/metadata/orientation/#exif-values","title":"Exif Values","text":"<p>The numbers used to specify the image orientation are defined as follows: </p> <ol> <li>= 0 degrees: the correct orientation, no adjustment is required.</li> <li>= 0 degrees, mirrored: image has been flipped back-to-front.</li> <li>= 180 degrees: image is upside down.</li> <li>= 180 degrees, mirrored: image has been flipped back-to-front and is upside down.</li> <li>= 90 degrees: image has been flipped back-to-front and is on its side.</li> <li>= 90 degrees, mirrored: image is on its side.</li> <li>= 270 degrees: image has been flipped back-to-front and is on its far side.</li> <li>= 270 degrees, mirrored: image is on its far side.</li> </ol> <p>Learn more \u203a</p>"},{"location":"developer-guide/metadata/perceptual-hashes/","title":"Perceptual Image Hashes","text":"<p>Perceptual Image Hashing refers to the use of a fingerprint algorithm to generate a hash that correlates with the appearance of an image without depending on other parameters such as file size, type, name, resolution, or other metadata.</p>"},{"location":"developer-guide/metadata/perceptual-hashes/#sorting-by-visual-similarity","title":"Sorting by Visual Similarity","text":"<p>PhotoPrism currently generates a perceptual hash while indexing, which can be used to sort search results by visual similarity, e.g.:</p> <ul> <li>https://demo.photoprism.app/library/browse?view=cards&amp;order=similar</li> </ul> <p>Note, though, that it is not yet possible to automatically stack files based on this and that the hash is not 100% precise, so visually different images may have the same hash. This is because it was developed for sorting and not for stacking or finding duplicates.</p>"},{"location":"developer-guide/metadata/perceptual-hashes/#stacking-of-similar-files","title":"Stacking of Similar Files","text":"<p>Developing a user-friendly web interface for semi-automatic stacking of a large number of images based on their appearance is expected to require a significant amount of work.</p> <p>A simpler solution could be to add one or more additional stacking options on the library settings page and allow them to be applied to existing pictures by pressing a button or running a terminal command, but without being able to see the result in advance or perform manual changes.</p> <p>See the following issues for related feature requests: </p> <ul> <li>Stacks: Search + manually stack similar images #28</li> <li>Stacks: Stack compressed and original version of a photo e.g. from Google Photos #1182</li> </ul>"},{"location":"developer-guide/metadata/perceptual-hashes/#related-resources","title":"Related Resources","text":""},{"location":"developer-guide/metadata/perceptual-hashes/#software-libraries-examples","title":"Software Libraries &amp; Examples","text":"<ul> <li>corona10/goimagehash</li> <li>Nr90/imgsim</li> <li>azr/phash</li> <li>ajdnik/imghash</li> <li>burntcarrot/hashsearch</li> <li>dsoprea/go-perceptualhash</li> <li>9elt/fast-dhash</li> <li>Estella/ImageDNA</li> <li>jenssegers/imagehash</li> </ul>"},{"location":"developer-guide/metadata/perceptual-hashes/#references-algorithms-tutorials","title":"References, Algorithms &amp; Tutorials","text":"<ul> <li>https://en.wikipedia.org/wiki/Perceptual_hashing</li> <li>https://www.microsoft.com/en-us/photodna</li> <li>https://news.microsoft.com/en-gb/2013/11/18/tacklingproliferatio/</li> </ul>"},{"location":"developer-guide/metadata/xmp/","title":"Adobe XMP","text":"<p>XMP (Extensible Metadata Platform) is the standard sidecar file format supported by Adobe Lightroom. While YAML files might be easier to understand, read and edit for humans, using the XML-based XMP format simplifies importing metadata from Lightroom and we can leverage a documented standard. Ideally, data can be kept in sync continuously between PhotoPrism and other photo management applications.</p> <p>A proof-of-concept for reading <code>Title</code>, <code>Copyright</code>, <code>Artist</code> and <code>Description</code> is implemented but full support is a lot more work, contributions welcome. One issue is proper XML parsing in Go as basic types like date and time are not supported by <code>xml.Unmarshaler</code>. GPS coordinates are not stored as float but as a string like <code>52,27.5814N</code>.</p> <p>The original plan to build upon <code>go-xmp</code> didn't work out as we couldn't read many fields, so we're using pure Go for now until we find a way to get the data we need with <code>go-xmp</code>. It might be a bug and/or it's an issue with our specific XMP files.</p>"},{"location":"developer-guide/metadata/xmp/#raw-conversion","title":"RAW Conversion","text":"<p>PhotoPrism currently supports Darktable and RawTherapee as RAW image converters (as well as Sips on macOS). Darktable fully supports XMP sidecar files, RawTherapee might only partially. However, XMP is only a \"container\" format, so the fields (namespaces) used there to indicate how an image should be converted (as well as other metadata) differ between Lightroom/Photoshop, Darktable, and RawTherapee.</p> <p>In other words, just because an application generally supports XMP that doesn't mean it can use metadata created with another application or by another vendor like Adobe. If you think that's confusing, well, that's because it is. You have an open format, but you still suffer from vendor lock-in - probably not entirely unintentional on Adobe's part.</p> <p>From our experience, some basic edits done with Adobe tools - such as cropping - might be preserved when you convert the same RAW image with other software like Darktable. Advanced edits, such as lens or color corrections, will likely not be applied.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/metadata/xmp/#file-samples","title":"File Samples","text":"<p>We would be happy to receive more XMP files for testing, either via pull request or email.</p>"},{"location":"developer-guide/metadata/xmp/#specification","title":"Specification","text":"<ul> <li>Part 1: Data and Serialization Model</li> <li>Part 2: Standard Schemas</li> <li>Part 3: Storage in Files </li> <li>Adobe XMP Programmers Guide</li> <li>Adobe XMP Files Plugin SDK</li> <li>Adobe BSD 3-Clause License and XMP Toolkit SDK</li> </ul>"},{"location":"developer-guide/metadata/xmp/#open-issues","title":"Open Issues","text":"<ul> <li>Experiment with Adobe Lightroom to see how it uses sidecar files. The new version doesn't seem to use XMP to automatically sync metadata anymore, probably because Adobe focuses on cloud storage. Needs further investigation.</li> <li>Create a matrix showing what fields are used/supported by which application/tool (Photoshop, Lightroom, Darktable and others, see</li> <li>Read http://www.exiv2.org/tags-xmp-crs.html (Camera Raw Schema)</li> </ul>"},{"location":"developer-guide/metadata/xmp/#released-features","title":"Released Features","text":"<ul> <li>Store metadata in the filesystem #4</li> <li>Compare the quality and XMP compatibility of different RAW converters #65</li> </ul>"},{"location":"developer-guide/metadata/xmp/#external-resources","title":"External Resources","text":"<ul> <li>trimmer-io/go-xmp - A native Go SDK for the Extensible Metadata Platform (XMP)</li> <li>XMP code in GIMP - Nothing beyond some comments. It was a code drop, we needed the feature, but unfortunately the original contributor left.</li> </ul>"},{"location":"developer-guide/metadata/exif/","title":"Exif Extraction","text":"<p>PhotoPrism uses the dsoprea/go-exif package to natively extract EXIF information from images. Exiftool support can be optionally enabled to support a wider range of metadata formats and extraction from video files.</p> <ul> <li>see internal/meta/exif.go for which tags are integrated into PhotoPrism </li> <li>see official EXIF specification for more information about EXIF tags</li> </ul>"},{"location":"developer-guide/metadata/exif/#using-exiftool","title":"Using Exiftool","text":"<p>Assuming you have Docker installed and want to run <code>exiftool</code> with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and any other packages you need, e.g. <code>libheif-examples</code> to convert HEIF images to JPEG, via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code>:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre>"},{"location":"developer-guide/metadata/exif/#exiftool-parameters","title":"Exiftool Parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>"},{"location":"developer-guide/metadata/exif/#screenshots","title":"Screenshots","text":"<p>This is how other apps show metadata:</p> <p></p> <p></p> <p></p>"},{"location":"developer-guide/metadata/exif/edit/","title":"Editing Exif Data","text":"<p>You can install ExifTool via homebrew, another package manager, or from the homepage:</p> <p>https://exiftool.org/</p> <p>The Exif-Read-Tool can be found on GitHub:</p> <p>dsoprea/go-exif</p>"},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-for-debugging","title":"Show exif data for debugging","text":""},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-read-from-exiftool","title":"Show exif data read from exiftool","text":"<p><code>exiftool -j photo.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-read-from-exif-read-tool","title":"Show exif data read from exif-read-tool","text":"<p><code>exif-read-tool -f photo.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#edit-exif-data-for-testing","title":"Edit EXIF data for testing","text":""},{"location":"developer-guide/metadata/exif/edit/#set-createdate","title":"Set CreateDate","text":"<p><code>exiftool -CreateDate=\"1919:05:04 05:59:26+02:00\" dog_toshi_yellow.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#remove-all-gps-data","title":"Remove all GPS data","text":"<p><code>exiftool -GPS:all= file.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#remove-all-exif-data","title":"Remove all exif data","text":"<p><code>exiftool -all= foo.jpg</code></p> <p>Further examples can be found here: https://exiftool.org/examples.html</p>"},{"location":"developer-guide/native-apps/","title":"Native Mobile Apps for iOS and Android","text":"<p>As an addition to our platform-independent Progressive Web App (PWA), the following native apps are being maintained by other companies and individual developers:</p> Name Platform Developer License Download Gallery for PhotoPrism Android Oleg Koretsky GPL 3.0 Google Play, F-Droid PhotoSync iOS, Android touchbyte GmbH Proprietary App Store, Google Play Photoflare iOS Chris Wunsch n/a TestFlight Prismatic iOS Chris Li n/a TestFlight Stream iOS Yu Yang Proprietary App Store"},{"location":"developer-guide/native-apps/#gallery-for-photoprism","title":"Gallery for PhotoPrism","text":"<p>With this Android app, you can easily browse the pictures in your library and share them with other apps. The app offers a timeline view, authentication, bookmarks, and many other useful features. It can also be installed on Android TV, so you can browse your library with a remote control. Learn more \u203a</p>"},{"location":"developer-guide/native-apps/#photosync","title":"PhotoSync","text":"<p>PhotoSync lets you transfer photos and videos directly from your mobile phone. It backs up your pictures securely in the background or you can manually select files to upload into specific folders. Learn more \u203a</p>"},{"location":"developer-guide/native-apps/#photoflare","title":"Photoflare","text":"<p>Photoflare is an iOS app that is currently being developed by Chris Wunsch. It is at an early stage and already offers some basic functionality that can be tested via Apple TestFlight. Learn more \u203a</p>"},{"location":"developer-guide/native-apps/#prismatic","title":"Prismatic","text":"<p>Prismatic is an iOS app developed by Chris Li that allows you to display pictures from your library in customizable widgets on your phone's home screen.</p> <p>You can test this and other features by installing it via Apple TestFlight.</p> <p>Give feedback \u203a</p>"},{"location":"developer-guide/native-apps/#stream","title":"Stream","text":"<p>Stream is an iOS app that brings PhotoPrism and local photos together in one unified gallery. It features natural language search for easy photo discovery and supports batch operations for efficient management. Learn more \u203a Read FAQ \u203a</p>"},{"location":"developer-guide/security/","title":"Security Testing Guide","text":""},{"location":"developer-guide/security/#vulnerability-scanners","title":"Vulnerability Scanners","text":"<p>Nuclei is a fast and customizable vulnerability scanner based on a simple YAML-based DSL. It uses community curated templates to find vulnerabilities in applications.</p> <p>On a Mac, you can install it via Homebrew by running the following command:</p> <pre><code>brew install nuclei\n</code></pre>"},{"location":"developer-guide/security/#web-security-checklist","title":"Web Security Checklist","text":"<p>The following OWASP\u00ae Web Application Security Checklist is also available as PDF or Docx for printing:</p>"},{"location":"developer-guide/security/#information-gathering","title":"Information Gathering","text":"<ul> <li> Manually explore the site</li> <li> Spider/crawl for missed or hidden content</li> <li> Check for files that expose content, such as robots.txt, sitemap.xml, .DS_Store</li> <li> Check the caches of major search engines for publicly accessible sites</li> <li> Check for differences in content based on User Agent (eg, Mobile sites, access as a Search engine Crawler)</li> <li> Perform Web Application Fingerprinting</li> <li> Identify technologies used</li> <li> Identify user roles</li> <li> Identify application entry points</li> <li> Identify client-side code</li> <li> Identify multiple versions/channels (e.g. web, mobile web, mobile app, web services)</li> <li> Identify co-hosted and related applications</li> <li> Identify all hostnames and ports</li> <li> Identify third-party hosted content</li> </ul>"},{"location":"developer-guide/security/#configuration-management","title":"Configuration Management","text":"<ul> <li> Check for commonly used application and administrative URLs</li> <li> Check for old, backup and unreferenced files</li> <li> Check HTTP methods supported and Cross Site Tracing (XST)</li> <li> Test file extensions handling</li> <li> Test for security HTTP headers (e.g. CSP, X-Frame-Options, HSTS)</li> <li> Test for policies (e.g. Flash, Silverlight, robots)</li> <li> Test for non-production data in live environment, and vice-versa</li> <li> Check for sensitive data in client-side code (e.g. API keys, credentials)</li> </ul>"},{"location":"developer-guide/security/#secure-transmission","title":"Secure Transmission","text":"<ul> <li> Check SSL Version, Algorithms, Key length</li> <li> Check for Digital Certificate Validity (Duration, Signature and CN)</li> <li> Check credentials only delivered over HTTPS</li> <li> Check that the login form is delivered over HTTPS</li> <li> Check session tokens only delivered over HTTPS</li> <li> Check if HTTP Strict Transport Security (HSTS) in use</li> </ul>"},{"location":"developer-guide/security/#authentication","title":"Authentication","text":"<ul> <li> Test for user enumeration</li> <li> Test for authentication bypass</li> <li> Test for bruteforce protection</li> <li> Test password quality rules</li> <li> Test remember me functionality</li> <li> Test for autocomplete on password forms/input</li> <li> Test password reset and/or recovery</li> <li> Test password change process</li> <li> Test CAPTCHA</li> <li> Test multi factor authentication</li> <li> Test for logout functionality presence</li> <li> Test for cache management on HTTP (eg Pragma, Expires, Max-age)</li> <li> Test for default logins</li> <li> Test for user-accessible authentication history</li> <li> Test for out-of channel notification of account lockouts and successful password changes</li> <li> Test for consistent authentication across applications with shared authentication schema / SSO</li> </ul>"},{"location":"developer-guide/security/#session-management","title":"Session Management","text":"<ul> <li> Establish how session management is handled in the application (eg, tokens in cookies, token in URL)</li> <li> Check session tokens for cookie flags (httpOnly and secure)</li> <li> Check session cookie scope (path and domain)</li> <li> Check session cookie duration (expires and max-age)</li> <li> Check session termination after a maximum lifetime</li> <li> Check session termination after relative timeout</li> <li> Check session termination after logout</li> <li> Test to see if users can have multiple simultaneous sessions</li> <li> Test session cookies for randomness</li> <li> Confirm that new session tokens are issued on login, role change and logout</li> <li> Test for consistent session management across applications with shared session management</li> <li> Test for session puzzling</li> <li> Test for CSRF and clickjacking</li> </ul>"},{"location":"developer-guide/security/#authorization","title":"Authorization","text":"<ul> <li> Test for path traversal</li> <li> Test for bypassing authorization schema</li> <li> Test for vertical Access control problems (a.k.a. Privilege Escalation)</li> <li> Test for horizontal Access control problems (between two users at the same privilege level)</li> <li> Test for missing authorization</li> </ul>"},{"location":"developer-guide/security/#data-validation","title":"Data Validation","text":"<ul> <li> Test for Reflected Cross Site Scripting</li> <li> Test for Stored Cross Site Scripting</li> <li> Test for DOM based Cross Site Scripting</li> <li> Test for Cross Site Flashing</li> <li> Test for HTML Injection</li> <li> Test for SQL Injection</li> <li> Test for LDAP Injection</li> <li> Test for ORM Injection</li> <li> Test for XML Injection</li> <li> Test for XXE Injection</li> <li> Test for SSI Injection</li> <li> Test for XPath Injection</li> <li> Test for XQuery Injection</li> <li> Test for IMAP/SMTP Injection</li> <li> Test for Code Injection</li> <li> Test for Expression Language Injection</li> <li> Test for Command Injection</li> <li> Test for Overflow (Stack, Heap and Integer)</li> <li> Test for Format String</li> <li> Test for incubated vulnerabilities</li> <li> Test for HTTP Splitting/Smuggling</li> <li> Test for HTTP Verb Tampering</li> <li> Test for Open Redirection</li> <li> Test for Local File Inclusion</li> <li> Test for Remote File Inclusion</li> <li> Compare client-side and server-side validation rules</li> <li> Test for NoSQL injection</li> <li> Test for HTTP parameter pollution</li> <li> Test for auto-binding</li> <li> Test for Mass Assignment</li> <li> Test for NULL/Invalid Session Cookie</li> </ul>"},{"location":"developer-guide/security/#denial-of-service","title":"Denial of Service","text":"<ul> <li> Test for anti-automation</li> <li> Test for account lockout</li> <li> Test for HTTP protocol DoS</li> <li> Test for SQL wildcard DoS</li> </ul>"},{"location":"developer-guide/security/#business-logic","title":"Business Logic","text":"<ul> <li> Test for feature misuse</li> <li> Test for lack of non-repudiation</li> <li> Test for trust relationships</li> <li> Test for integrity of data</li> <li> Test segregation of duties</li> </ul>"},{"location":"developer-guide/security/#cryptography","title":"Cryptography","text":"<ul> <li> Check if data which should be encrypted is not</li> <li> Check for wrong algorithms usage depending on context</li> <li> Check for weak algorithms usage</li> <li> Check for proper use of salting</li> <li> Check for randomness functions</li> </ul>"},{"location":"developer-guide/security/#html-5","title":"HTML 5","text":"<ul> <li> Test Web Messaging</li> <li> Test for Web Storage SQL injection</li> <li> Check CORS implementation</li> <li> Check Offline Web Application</li> </ul>"},{"location":"developer-guide/security/#risky-functionality","title":"Risky Functionality","text":""},{"location":"developer-guide/security/#file-uploads","title":"File Uploads","text":"<ul> <li> Test that acceptable file types are whitelisted</li> <li> Test that file size limits, upload frequency and total file counts are defined and are enforced</li> <li> Test that file contents match the defined file type</li> <li> Test that all file uploads have Anti-Virus scanning in-place.</li> <li> Test that unsafe filenames are sanitised</li> <li> Test that uploaded files are not directly accessible within the web root</li> <li> Test that uploaded files are not served on the same hostname/port</li> <li> Test that files and other media are integrated with the authentication and authorisation schemas</li> </ul>"},{"location":"developer-guide/security/#card-payment","title":"Card Payment","text":"<ul> <li> Test for known vulnerabilities and configuration issues on Web Server and Web Application</li> <li> Test for default or guessable password</li> <li> Test for non-production data in live environment, and vice-versa</li> <li> Test for Injection vulnerabilities</li> <li> Test for Buffer Overflows</li> <li> Test for Insecure Cryptographic Storage</li> <li> Test for Insufficient Transport Layer Protection</li> <li> Test for Improper Error Handling</li> <li> Test for all vulnerabilities with a CVSS v2 score &gt; 4.0</li> <li> Test for Authentication and Authorization issues</li> <li> Test for CSRF</li> </ul> <p>Source: 0xRadi/OWASP-Web-Checklist</p>"},{"location":"developer-guide/security/#openssf-security-criteria","title":"OpenSSF Security Criteria","text":"<p>The Open Source Security Foundation maintains standardized security criteria and best practices for open-source projects:</p> <p></p>"},{"location":"developer-guide/security/go/","title":"Secure Coding in Go","text":"<p>The Go Language: Web Application Secure Coding Practices is a book written for anyone who is using the Go Programming Language and aims to use it for Web development.</p> <p>You can download it in the following formats:</p> <ul> <li>PDF</li> <li>Mobi</li> <li>and ePub</li> </ul> <p>This book is collaborative effort of Checkmarx Security Research Team and it follows the OWASP Secure Coding Practices - Quick Reference Guide v2 (stable) release.</p> <p>Source: OWASP/Go-SCP</p>"},{"location":"developer-guide/security/policy/","title":"Vulnerability Disclosure Guidelines","text":"<p>Visit photoprism.app/security-policy to learn more about our security policy, responsible disclosure, and how you can report issues as a business or organization.</p>"},{"location":"developer-guide/technologies/broadway/","title":"Broadway","text":"<p>Broadway is a display server for using GTK+ applications in a web browser like Chrome or Firefox. It is based on HTML5 and WebSockets. GTK (originally GIMP Toolkit) is a GUI toolkit used by many Linux desktop applications like Darktable, Gimp and RawTherapee. Obviously this technology is ideal for editing images in the browser, at least when the connection is fast enough.</p>"},{"location":"developer-guide/technologies/broadway/#docker-configuration","title":"Docker Configuration","text":"<pre><code># Configure broadwayd (HTML5 display server)\nRUN apt-get update &amp;&amp; apt-get install libgtk-3-bin\nENV GDK_BACKEND broadway\nENV BROADWAY_DISPLAY :5\nEXPOSE 8080\nCMD broadwayd -p 8080 -a 0.0.0.0 :5\n</code></pre> <p>When this is configured, all you need to do is open http://localhost:8080 in a browser and start any GTK application in the same container (broadwayd must be running). It should be displayed instantly, otherwise the screen is white, but you shouldn't see an error.</p>"},{"location":"developer-guide/technologies/broadway/#screenshot","title":"Screenshot","text":""},{"location":"developer-guide/technologies/docker/","title":"Docker","text":"<p>Docker is an Open Source container virtualization tool. It is ideal for running  applications on any computer without extensive installation, configuration, or performance overhead.</p> <p>We are aware Docker is not widely used by end users despite its many advantages. For this reason, we aim  to provide native binaries for common operating systems at a later time.</p>"},{"location":"developer-guide/technologies/docker/#what-are-the-benefits-of-using-docker","title":"What are the benefits of using Docker?","text":"<p>(1) Docker uses standard features of the Linux kernel. Containers are nothing new; Solaris Zones were released about 20 years ago and the chroot system call was introduced during development of Version 7 Unix in 1979. It is used ever since for hosting applications exposed to the public Internet. Modern Linux containers are an incremental improvement of this, based on standard functionality that is part of the kernel.</p> <p>(2) Docker saves time through simplified deployment and testing. A main advantage of Docker is that application images can be easily made available to users via Internet. It provides a common standard across most operating systems and devices, which saves our team a lot of time that we can then spend more effectively, for example, providing support and developing one of the many features that users are waiting for.</p> <p>(3) Dockerfiles are part of the source code repository. Human-readable and versioned Dockerfiles that are part of our public source code help avoid \"works for me\" moments and other unwelcome surprises by enabling us to have the exact same environment everywhere in development, staging, and production.</p> <p>(4) Running applications in containers is more secure. Last but not least, virtually all file format parsers have vulnerabilities that just haven't been discovered yet. This is a known risk that can affect you even if your computer is not directly connected to the Internet. Running apps in a container with limited host access is an easy way to improve security without compromising performance and usability.</p> <p>A virtual machine with a dedicated operating system environment provides even more security, but usually has side effects such as lower performance and more difficult handling. Using a VM, however, doesn't prevent you from running containerized apps to get the best of both worlds. This is essentially what happens when you install Docker on virtual cloud servers and operating systems other than Linux.</p>"},{"location":"developer-guide/technologies/docker/#running-docker-images","title":"Running Docker Images","text":"<p>Assuming you have Docker installed and want to test Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Additional packages can be installed via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre>"},{"location":"developer-guide/technologies/docker/#continuous-integration-deployment","title":"Continuous Integration / Deployment","text":"<p>Build and push of an updated container image to Docker Hub is automatically performed by Travis CI whenever develop is merged into master and the tests are all green. For that reason, we don't use semantic versioning for our binaries and container images. A version string might look like <code>181112-edc7c2f-Darwin-i386-DEBUG</code> instead. Travis CI uses the photoprism/development image for running unit and integration tests on all branches and for pull requests, see Dockerfile.</p>"},{"location":"developer-guide/technologies/docker/#multi-stage-build","title":"Multi-Stage Build","text":"<p>When creating new images, Docker supports so called multi-stage builds, that means you can compile an application like PhotoPrism in a container that contains all development dependencies (like source code, debugger, compiler,...) and later copy the binary to a fresh container. This way we could reduce the compressed container size from ~1 GB to less than 200 MB. Most of that is used by Darktable, TensorFlow and Ubuntu 18.04. Our <code>photoprism</code> binary is smaller than 20 MB.</p> <p>Example:</p> <pre><code>FROM photoprism/development:20181112 as build\n\n# Build PhotoPrism\nWORKDIR \"/go/src/github.com/photoprism/photoprism\"\nCOPY . .\nRUN make all install DESTDIR=/opt/photoprism\n\n# Base base image as photoprism/development\nFROM ubuntu:18.04\n\nWORKDIR /opt/photoprism\n\n# Copy built binaries and assets to this image\nCOPY --from=build /usr/local/bin/photoprism /usr/local/bin/photoprism\nCOPY --from=build /opt/photoprism /opt/photoprism\n\n# Expose HTTP port\nEXPOSE 80\n\n# Start PhotoPrism server\nCMD photoprism start\n</code></pre>"},{"location":"developer-guide/technologies/docker/#kubernetes","title":"Kubernetes","text":"<ul> <li>https://forge.sh/ - Define and deploy multi-container apps in Kubernetes, from source</li> <li>https://www.telepresence.io/ - a local development environment for a remote Kubernetes cluster</li> </ul>"},{"location":"developer-guide/technologies/docker/#external-resources","title":"External Resources","text":"<ul> <li>estesp/manifest-tool</li> <li>docker/app</li> <li>moby/moby</li> <li>https://hub.docker.com/r/multiarch/qemu-user-static/ - quemu for building multiarch images with Docker</li> <li>https://github.com/opencontainers/image-spec - standard labels for Docker image metadata</li> <li>Yelp/dumb-init - A minimal init system for Linux containers</li> </ul>"},{"location":"developer-guide/technologies/external-apis/","title":"External APIs","text":""},{"location":"developer-guide/technologies/external-apis/#photo-sharing","title":"Photo Sharing","text":"<ul> <li>Instagram Developer API </li> <li>Twitter API</li> <li>Facebook Photo API</li> <li>Google Photos API</li> <li>EyeEm API</li> <li>Nextcloud API</li> </ul>"},{"location":"developer-guide/technologies/external-apis/#books-prints","title":"Books / Prints","text":"<ul> <li>Cewe Stiftung &amp; Co. KGaA - Europe's leading online printing experts</li> </ul>"},{"location":"developer-guide/technologies/external-apis/#tools","title":"Tools","text":"<ul> <li>KrakenD - API Gateway that sits between clients and services to offer tailored endpoints</li> <li>Photobak - Back up your content from Google Photos</li> </ul>"},{"location":"developer-guide/technologies/golang/","title":"Golang","text":"<p>We have chosen Go because of its simplicity and performance. On top, it enables us to build a single binary for distribution.</p>"},{"location":"developer-guide/technologies/golang/#learning","title":"Learning","text":"<ul> <li>https://golang.org/doc/code.html - how to write Go code</li> <li>https://golang.org/doc/effective_go.html -  gives tips for writing clear, idiomatic Go code</li> <li>https://golangbridge.org/ - Go workshops for underrepresented communities</li> <li>https://www.sohamkamani.com/blog/golang/2018-06-20-golang-factory-patterns/ - there are many different ways in which you can use the factory pattern to make your code cleaner and more concise</li> <li>https://www.alexedwards.net/blog/form-validation-and-processing - Form Validation and Processing in Go</li> </ul>"},{"location":"developer-guide/technologies/golang/#testing","title":"Testing","text":"<ul> <li>https://medium.com/@povilasve/go-advanced-tips-tricks-a872503ac859 - Go advanced testing tips &amp; tricks</li> <li>Golang version of Pact - contract testing framework for HTTP APIs and non-HTTP asynchronous messaging systems</li> <li>Integration Tests in Go - blog post </li> <li>Parallelize your table-driven tests - blog post</li> </ul>"},{"location":"developer-guide/technologies/golang/#useful-libraries-and-frameworks","title":"Useful libraries and frameworks","text":"<ul> <li>spf13/afero - a filesystem abstraction library</li> <li>gin-gonic/gin - HTTP web framework</li> <li>gobuffalo/pop - a database abstraction layer</li> <li>jinzhu/gorm - another database abstraction layer</li> <li>appleboy/gorush - a push notification micro server for Gin</li> <li>cavaliercoder/grab - a download manager package</li> <li>russross/blackfriday - a library for rendering Markdown</li> <li>sirupsen/logrus - structured, pluggable logging for Go</li> <li>alecthomas/participle - a dead simple parser package for Go</li> <li>tidwall/tile38 - a geospatial database and realtime geofencing server</li> <li>melihmucuk/geocache - an in-memory cache that is suitable for geolocation based applications</li> <li>aaronland/go-slippy-tiles - a proxy for map tiles</li> <li>paulmach/osm - a general purpose library for reading, writing and working with OpenStreetMap data</li> <li>@minio - Object Storage for AI</li> <li>http://www.gorillatoolkit.org/pkg/schema - fills a struct with form values</li> </ul>"},{"location":"developer-guide/technologies/golang/#jobs","title":"Jobs","text":"<ul> <li>SoundCloud is looking for backend developers (Berlin, permanent, full-time)</li> </ul>"},{"location":"developer-guide/technologies/tensorflow/","title":"TensorFlow","text":""},{"location":"developer-guide/technologies/tensorflow/#using-tensorflow-with-go","title":"Using TensorFlow with Go","text":"<p>For an introduction please read Understanding Tensorflow using Go.</p> <p>The TensorFlow API for Go is well suited to loading existing models and executing them within a Go application. It requires the TensorFlow C library to be installed. A full TensorFlow installation is not needed.</p> <p>It is not possible to statically link against the C library, but the issue is known and there might be a fix later this year.</p>"},{"location":"developer-guide/technologies/tensorflow/#vision","title":"Vision","text":"<p>Our long-term goal is to become an open platform for machine learning research based on real-world photo collections.</p>"},{"location":"developer-guide/technologies/tensorflow/#external-resources","title":"External Resources","text":"<ul> <li>https://tfhub.dev/ - TensorFlow Hub is a library for reusable machine learning modules</li> <li>https://www.tensorflow.org/install/lang_c - TensorFlow for C</li> <li>http://www.asimovinstitute.org/neural-network-zoo/ - types of neural networks explained</li> <li>http://playground.tensorflow.org/ - Experiment with neural networks in your browser</li> <li>http://jupyter.org/ - open-source web application for creating and sharing documents that contain live code</li> <li>https://developers.google.com/machine-learning/crash-course/ - Machine Learning Crash Course with TensorFlow APIs</li> <li>https://medium.com/implodinggradients/tensorflow-or-keras-which-one-should-i-learn-5dd7fa3f9ca0</li> <li>https://medium.com/analytics-vidhya/deploy-your-first-deep-learning-model-on-kubernetes-with-python-keras-flask-and-docker-575dc07d9e76 - Deploy Your First Deep Learning Model On Kubernetes With Python, Keras, Flask, and Docker</li> <li>https://medium.com/mlreview/getting-inception-architectures-to-work-with-style-transfer-767d53475bf8 - Getting Inception Architectures to Work with Style Transfer</li> <li>jdeng/goface - Face Detector based on MTCNN, tensorflow and golang</li> <li>https://www.tensorflow.org/tutorials/representation/word2vec - Vector Representations of Words (for searching/tagging)</li> <li>chtorr/go-tensorflow-realtime-object-detection - Real-time object detection with Go, Tensorflow, and OpenCV</li> <li>https://ai.googleblog.com/2018/07/accelerated-training-and-inference-with.html - Accelerated Training and Inference with the Tensorflow Object Detection API</li> <li>NanoNets/object-detection-sample-golang - NanoNets Object Detection API Example for Golang</li> <li>https://hub.packtpub.com/object-detection-go-tensorflow/ - Implementing Object detection with Go using TensorFlow</li> </ul>"},{"location":"developer-guide/technologies/yaml/","title":"Introduction to YAML","text":"<p>YAML is a human-friendly format that we use for metadata exports and configuration files because of its simplicity and widespread support. The name originally meant Yet Another Markup Language. Common file extensions are <code>.yml</code>and <code>.yaml</code>.</p> <p>Values are represented in the form <code>key: value</code> with one entry per line:</p> <pre><code>Type: image\nTitle: \"La Tour Eiffel \ud83c\udf08\"\nYear: 2014\n# Key-Value Collection Example:\nDetails:\n  Notes: \"Bonjour\\nla France!\" \n  Keywords: 'paris, france' # Comment\n</code></pre>"},{"location":"developer-guide/technologies/yaml/#basic-rules","title":"Basic Rules","text":"<ul> <li>Keys are case-sensitive</li> <li>Related values must start at the same indentation level<ul> <li>We recommend using 2 spaces, but any number will work as long as it is consistent</li> <li>Tabs are not allowed for indentation and using them may result in errors</li> </ul> </li> <li>Comments begin with <code>#</code>, can start anywhere on a line, and continue until the end of the line</li> <li>You can generally use all Unicode characters in YAML files, including Emojis<ul> <li>To avoid ambiguity, it is recommended to enclose text strings in single <code>'</code> or double quotes <code>\"</code>, especially if they contain spaces or Boolean values like \"true\" or \"false\"</li> <li>The difference between single and double quotes is that double quotes support escape sequences like <code>\\t</code> for a tab or <code>\\n</code> for a new line</li> <li>Additional special characters may need to be escaped, e.g. the <code>$</code> sign when working with Docker Compose</li> </ul> </li> </ul>"},{"location":"developer-guide/technologies/yaml/#multiple-values","title":"Multiple Values","text":"<p>List are lines that start at the same indentation level and begin with a dash and a space as shown in the example below. They are commonly used to define service dependencies, exposed network ports, or folders shared between host and container in <code>compose.yaml</code> files:</p> <pre><code>services:\n  photoprism:\n    depends_on:\n      - mariadb\n      - nextcloud\n    ports:\n      # \"host:container\"\n      - \"2342:2342\"\n    volumes:\n      # \"/host/folder:/container/folder\"\n      - \"/photos:/photoprism/originals\"\n</code></pre>"},{"location":"developer-guide/technologies/yaml/#key-value-pairs","title":"Key-Value Pairs","text":"<p>Collections of key-value pairs are commonly used to specify the names and values of environment variables in <code>compose.yaml</code> files (see below for additional rules). Similar to lists, the keys of related values start at the same indentation level, but without a dash:</p> <pre><code>services:\n  mariadb:\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      MARIADB_ROOT_PASSWORD: \"Y(&amp;^UIk34\"\n      MARIADB_DATABASE: photoprism\n      MARIADB_USER: photoprism\n      MARIADB_PASSWORD: insecure\n</code></pre>"},{"location":"developer-guide/technologies/yaml/#docker-compose","title":"Docker Compose","text":"<p>When using Docker Compose, some additional rules apply, as <code>compose.yaml</code> or <code>docker-compose.yml</code> files extend the YAML format with features such as variable interpolation.</p>"},{"location":"developer-guide/technologies/yaml/#dollar-signs","title":"Dollar Signs","text":"<p>If a configuration value in a <code>compose.yaml</code> or <code>docker-compose.yml</code> file contains a literal <code>$</code> character, for example in a password, you must use <code>$$</code> (a double dollar sign) to escape it so that e.g. <code>\"compo$e\"</code> becomes <code>\"compo$$e\"</code>:</p> <pre><code>services:\n  mariadb:\n    environment:\n      # sets password to \"compo$e\"\n      MARIADB_PASSWORD: \"compo$$e\" \n</code></pre> <p>Values that contain a <code>$</code> are otherwise interpreted as a variable. In this case, both the <code>$VARIABLE</code> and the <code>${VARIABLE}</code> syntax are supported. Further details on the use of variables can be found in the file format reference.</p>"},{"location":"developer-guide/technologies/yaml/#true-false","title":"True / False","text":"<p>Boolean variable values like \"true\", \"false\", \"yes\", \"no\", \"on\", or \"off\" must be enclosed in double or single quotes so that they are passed as intended:</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_DEFAULT_TLS: \"true\"\n      PHOTOPRISM_READONLY: \"false\"\n</code></pre> <p>If you otherwise specify <code>true</code> as a value without quotes, Docker Compose will pass the host variable of the same name to the container instead of setting the value to \"true\" (results in an empty string if no environment variable with the same name is set on the host):</p> <pre><code>services:\n  photoprism:\n    environment:\n      # evaluated as \"\" (false)\n      PHOTOPRISM_READONLY: true\n</code></pre>"},{"location":"developer-guide/ui/browsers/","title":"Browsers","text":"<p>We should at least support the latest Firefox and Chrome on Linux, OS X and Windows. Ideally also Safari (OS X) and Explorer/Edge (Windows). </p>"},{"location":"developer-guide/ui/browsers/#testing","title":"Testing","text":"<ul> <li>BrowserStack is free for open-source projects</li> </ul>"},{"location":"developer-guide/ui/components/","title":"Components","text":"<p>Our frontend code is structured into reusable VueJS components. So far, it was clear enough for developers to add features and send pull requests, so it's probably not necessary to document individual components in our Developer Guide. Let us know via email or chat when you have any questions!</p> <p>Frontend contains general information about the front-end libraries we use and how to trigger a build.</p>"},{"location":"developer-guide/ui/design/","title":"Design & Colors","text":"<p>We strive for a user interface that is clutter-free, well-organized, and doesn't behave in unexpected ways. It should work across a wide range of devices and be easy to use for everyone.</p>"},{"location":"developer-guide/ui/design/#theme-colors","title":"Theme Colors","text":"<p>The colors we use should be consistent and functional, for example, provide sufficient contrast. For the included themes, the preferred primary colors are violet and cyan, but other colors can be used as well.</p> <p>To avoid distorting the visual impression of photos and videos, large background areas should generally be neutral or just slightly saturated.</p>"},{"location":"developer-guide/ui/design/#context-menu","title":"Context Menu","text":"<p>The context menu at the bottom right should use a color spectrum for the individual actions to reflect the spectral colors of a prism:</p> <p></p>"},{"location":"developer-guide/ui/design/#icon-fonts","title":"Icon Fonts","text":"<p>We stick to Google's Material icons and use other icons only when absolutely necessary:</p> <ul> <li>https://material.io/resources/icons/</li> <li>https://jossef.github.io/material-design-icons-iconfont/</li> </ul>"},{"location":"developer-guide/ui/design/#inspirational-quotes","title":"Inspirational Quotes","text":"<p>Design is a funny word. Some people think design means how it looks. But of course, if you dig deeper, it's really how it works.\u2014 Steve Jobs</p> <p>Choice is the enemy of productivity. Put another way, if your solution does everything, and has no opinions about anything, then it solves nothing.\u2014 Asim Aslam</p> <p>Any fool can make something complicated. It takes a genius to make it simple.\u2014 Woody Guthrie</p>"},{"location":"developer-guide/ui/design/#external-resources","title":"External Resources","text":""},{"location":"developer-guide/ui/design/#color-schemes","title":"Color Schemes","text":"<ul> <li>https://www.nordtheme.com/#palettes-modularity</li> <li>Scheme Color Finder<ul> <li>https://www.schemecolor.com/?s=colorful</li> <li>https://www.schemecolor.com/?s=google</li> <li>https://www.schemecolor.com/memories-of-the-garden.php</li> <li>https://www.schemecolor.com/double-disclosure.php</li> <li>https://www.schemecolor.com/true-lovers-color-scheme.php</li> <li>https://www.schemecolor.com/sunset-painting.php</li> <li>https://www.schemecolor.com/happy-with-self.php</li> </ul> </li> </ul>"},{"location":"developer-guide/ui/design/#web-color-tools","title":"Web Color Tools","text":"<ul> <li>Adobe Color Wheel</li> <li>Artyclick Color Name Finder</li> <li>Coolors Color Palette Generator</li> <li>FFFuel HEX, RGB &amp; HSL Color Picker</li> <li>iColorpalette</li> </ul>"},{"location":"developer-guide/ui/design/#related-content","title":"Related Content","text":"<ul> <li>Screenshots - development of our user interface in time lapse \u23f1</li> <li>The 7 pillars of design - slides by Raffaella Isidori (Codemotion Berlin 2018)</li> </ul>"},{"location":"developer-guide/ui/infinite-scrolling/","title":"Infinite Scrolling","text":"<p>There are two problems to solve when allowing the user to scroll through an \"infinite\" number of elements/photos:</p> <ol> <li>You can't load an infinite amount of data.</li> <li>You can't render an infinite amount of elements.</li> </ol> <p>The solution to both is to not provide an infinite amount of elements, but instead create the illusion of an infinite amount of elements by only loading and displaying what the user would actually currently be able to see.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#loading-data-progressively","title":"Loading Data - Progressively","text":"<p>The problem of infinite data is solved by loading the actually required elements progressively, in fixed amounts (batches).</p> <ul> <li>Load a batch of elements. If they don't fill the screen, load the next batch. repeat until the screen is filled.</li> <li>When the user is getting close to the end of the currently loaded elements, load the next batch of data.</li> </ul> <p>In an ideal world the \"next batch\" is always loaded fast and early enough so that the user doesn't even notice that it wasn't there from the beginning. This creates the illusion of having an infinite amount of data available. There are two parameters to consider:</p> <ol> <li>When to start loading the next batch?<ul> <li>loading to early results in to much unnecessary data getting laoded.</li> <li>loading to late results in the user bumping into the end of the list of elements, because the next batch hasn't finished loading yet.</li> </ul> </li> <li>How large are the batches?<ul> <li>to small batches can slow down the overall loading time by resulting in overhad because of too many requests.</li> <li>to large batches need to long to load for a single batch, so that the data may not yet be ready when it is needed.</li> </ul> </li> </ol> <p>The best values for these parameters vary vastly depending on the current network speed, number of elements that fit on the screen and the speed the user is scrolling. Luckily these values don't need to be perfect, just good enough.</p> <p>We currently use vue-infinite-scroll to detect when the user is about to reacht the end of the currently loaded list, so we can load the next batch. The batchsize depends on the current view and is currently somewhere in the range of 50 - 300 elements.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#rendering-elements-virtualized","title":"Rendering elements - Virtualized","text":"<p>The further a user scrolls, the more batches of elements get loaded and displayed. The more elements get displayed, the slower the browser gets and the more memory it needs. This means, if we were to just render all loaded elements, the limit how far you can scroll would be entirely determined by the available cpu and memory of the client.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#regular-virtualization","title":"Regular virtualization","text":"<p>This problem is usually solved by virtualization:</p> <ol> <li>determine the scrollposition and screensize of the client.</li> <li>calculate what elements would be on the screen.</li> <li>render only those elements.</li> </ol> <p>The problem with this regular virtualization is that it requires the elements to be positioned absolutely and may prescribe how they are structured. Implementing it would therefore imply a potentialy larger rewrite and less freedom when designing the elements.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#pseudo-virtualization-with-placeholders","title":"Pseudo-Virtualization with placeholders","text":"<p>Using the IntersectionObserver API we can efficiently determine wether something is currently visible or not. We can use this information to replace all elements that are currently not in the visible area with simple placeholders of the same size. This drastically reduces the load on the browser, because these (often single-domnode) placeholder-elements require a LOT less ressources.</p> <p>This has the huge benefit that it doesn't restrict how components are structured or positioned, while also being easier to implement. There are however two caveats:</p> <ol> <li>We are still rendering something for every single loaded elements<ul> <li>The load on the browser therefore technically still increases (slightly) the more elements are loaded</li> <li>This however reduces the load so much, that this slight increase per element barely matters at all</li> </ul> </li> <li>The placeholders size should be as close to the originals size as possible.<ul> <li>If the sizes don't match, scrolling might become a little janky.</li> </ul> </li> </ol> <p>This type of virtualization more than fast enough, and because we think the benefits outweigh the downsides, we decided go this route.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#implementation-details","title":"Implementation details","text":"<p>The setup for a component that uses the placeholder-virtualization is as follows:</p> <ol> <li>Add a ref to all the elements whose visibilty needs to be tracked</li> <li>create a single <code>IntersectionObserver</code> in the <code>beforeCreate</code> that calls a (yet to be defined) <code>this.visibilitiesChanged</code></li> <li>add a watcher that is called when the list of elements changes. call observe on all refs from step 1</li> <li>define a function that takes an IntersectionObserverEntry and returns the index of the corresponding target (for example by adding a <code>data-index</code>-attribute to the observed element)</li> <li>add <code>firstVisibleElementIndex: 0</code>, <code>lastVisibleElementIndex: 0</code> and <code>visibleElementIndices: new Set()</code> to the components state</li> <li>conditionally render elements whose index is between <code>firstVisibleElementIndex</code> and <code>lastVisibleElementIndex</code>. Render placeholders for all other elements</li> <li>define <code>visibilitiesChanged</code>. Let it call <code>virtualizationTools.updateVisibleElementIndices</code>. Use the result as new <code>this.firstVisibleElementIndex</code> and <code>this.lastVisibileElementIndex</code></li> </ol> <p>We use the <code>visibleElementIndices</code>-Set to keep track of elements that became visible or invisible. We also use <code>firstVisibleElementIndex</code> and <code>lastVisibleElementIndex</code> for two reasons:</p> <ol> <li>Vue doesn't react to Set-changes (because its identity never changes), so manipulating it doesn't cause a rerender</li> <li>When scrolling very fast, the set may for a very brief moment contain holes (for example it has the indices <code>1, 2, 4, 5, 6</code>). By implying that everything between the smallest and largest index is visible, these short-lived holes don't have any negative effect (index 3 would be rendered anyway)</li> </ol> <p>As a bonus, you can make the IntersectionObserver only observe for example every 5th element to speed up calculation of intersections. If you do so, you should add for Example -4 to <code>firstVisibleElementIndex</code> and +4 to <code>lastVisibleElementIndex</code></p>"},{"location":"developer-guide/ui/infinite-scrolling/#render-performance","title":"Render Performance","text":"<p>When working with a huge amount of elements, render performance of these elements is critically important. The better the render performance, the more it actually feels like scrolling through an infinite list. It allowes the user to scroll faster without having to see placeholders and makes the application feel way snappier, especially on lower-end devices.</p> <p>Here are some tips on how to gain performance. They are ordered from most to least important and only apply to things that are rendered for every element:</p> <ul> <li>Prefer regular HTML-Elements over vue-components<ul> <li>Rendering vue components executes a lot of JavaScript, blocking everything else. Rendering regular HTML elements is way faster</li> <li>Example: use <code>&lt;button&gt;</code> instead of <code>&lt;v-btn&gt;</code></li> </ul> </li> <li>Prefer conditional rendering over hiding/showing elements via css<ul> <li>showing/hiding via css may prevent rerenders, but it increases the amount of rendered elements</li> <li>The less elements (and therefore domnodes) are rendered the better</li> </ul> </li> <li>Use less elements<ul> <li>Why use a <code>&lt;v-card&gt;&lt;v-img&gt;&lt;/v-img&gt;&lt;/v-card&gt;</code> when performance is important and a <code>&lt;div&gt;&lt;/div&gt;</code> with some css works too?</li> </ul> </li> </ul>"},{"location":"developer-guide/ui/infinite-scrolling/#memoization","title":"Memoization","text":"<p>Memoization is a technique to speed up function calls by caching results. This can have a noticable impact on render-performance, especially when function results are used for placeholders</p> <p>Example: The texts on the cards in the cards-view. There are function-calls like <code>photo.locationInfo()</code> and <code>photo.getDateString()</code>. The resulting values rarely change, but are calculated again and again on every render, resulting in ~280k calls per function when scrolling through ~2k pictures.</p> <p>We use <code>memoize-one</code> for much called, non-trivial functions whose parameters rarely change. The funtions in the Photo model are a prime example for that.</p> <p>For this to work the memoized function must be pure, which means its result must not depend on outside factors, but only on its parameters. Calling the same function twice with the same parameters must always return the same result.</p> <p>If you want to memoize a function that is not pure you can still do so by moving all its logic into a new, memoized, pure function and having the old funtion just call the memoized one, providing the required parameters. Example: <pre><code>// ------------------ before ------------------\nisPlayable() {\n  if (this.Type === MediaAnimated) {\n    return true;\n  } else if (!this.Files) {\n    return false;\n  }\n\n  return this.Files.some((f) =&gt; f.Video);\n}\n</code></pre> <pre><code>// ------------------ after ------------------\nisPlayable() {\n  return this.generateIsPlayable(this.Type, this.Files);\n}\n\ngenerateIsPlayable = memoizeOne((type, files) =&gt; {\n  if (type === MediaAnimated) {\n    return true;\n  } else if (!files) {\n    return false;\n  }\n\n  return files.some((f) =&gt; f.Video);\n})\n</code></pre></p>"},{"location":"developer-guide/ui/introduction/","title":"Introduction","text":"<p>Open a terminal and type <code>photoprism start</code> to start the built-in server. It will listen on localhost:2342 by default, see compose.yaml and Configuration.</p>"},{"location":"developer-guide/ui/introduction/#frameworks","title":"Frameworks","text":"<p>Vuetify is a powerful open-source Material Design UI component framework for building modern single-page applications.</p> <p>It is based on VueJS, a JavaScript library that combines the best ideas from AngularJS (Google) and React (Facebook); development is community driven and the API fairly stable.</p> <p>Vuetify and VueJS are initialized in frontend/src/app.js. Webpack is used as a module loader / bundler. It creates single, optimized JS and CSS files in the server assets public build directory from the original source code. You can find the build configuration in <code>frontend/webpack.config.js</code>.</p> <p>For our docs and landing pages, we may use https://materializecss.com/ as a lightweight alternative to Vuetify.</p>"},{"location":"developer-guide/ui/introduction/#components","title":"Components","text":"<p>Components are reusable user-interface widgets. UI Components contains a list of custom components. Standard components like buttons or forms are well documented on vuetifyjs.com.</p>"},{"location":"developer-guide/ui/introduction/#dependencies","title":"Dependencies","text":"<p>The full list of dependencies can be found in <code>frontend/package.json</code>. You need to run <code>npm install</code> in the frontend directory to install them (automatically happens during installation, see <code>Makefile</code>). Run <code>npm install -P [package name]</code> to add a new package (library or framework).</p>"},{"location":"developer-guide/ui/introduction/#building","title":"Building","text":"<p>A build can be triggered by running <code>npm run watch</code> (watches for changes and re-builds when needed) or <code>npm run build</code> (single build) in the frontend directory. NPM is the default package manager that comes with NodeJS, a JavaScript run-time environment that executes JavaScript code outside of a browser.</p>"},{"location":"developer-guide/ui/introduction/#external-resources","title":"External Resources","text":"<ul> <li>https://web.dev/progressive-web-apps/</li> <li>vuejs-templates/pwa - a progressive web app template for VueJS</li> <li>https://hackernoon.com/a-progressive-web-app-in-vue-tutorial-part-1-the-vue-app-f9231b032a0b</li> <li>https://medium.com/the-web-tub/creating-your-first-vue-js-pwa-project-22f7c552fb34</li> <li>https://developers.google.com/web/fundamentals/native-hardware/fullscreen/</li> <li>https://webpack.js.org/configuration/optimization/</li> <li>https://photoswipe.com/documentation/responsive-images.html</li> <li>https://seregpie.github.io/VueWordCloud/ - Word cloud for VueJS</li> <li>snorpey/jpg-glitch - JPEG Glitch lib for JS</li> <li>https://stylable.io/ - scopes styles to components so they don\u2019t \u201cleak\u201d and clash with other styles (not sure if this is of any use for us)</li> <li>Building the Google Photos Web UI - Antin Harasymiv on Medium</li> <li>Progressive Image Grid - arrange images in a responsive, progressive-loading grid managed in JavaScript, see #85</li> </ul>"},{"location":"developer-guide/ui/maps/","title":"Rendering Interactive Maps in the UI","text":"<p>PhotoPrism includes six high-resolution world maps that allow you to browse photos by location. Visit try.photoprism.app/library/places to try them on our demo.</p> <p></p> <p>The API keys required to use these maps are unfortunately not free for us due to the number of users we have, see FAQ.</p>"},{"location":"developer-guide/ui/maps/#mapboxmaplibre-gl-js","title":"Mapbox/MapLibre GL JS","text":"<p>Because Mapbox GL JS is no longer open-source, we now sponsor and use MapLibre GL JS for rendering maps in the UI. MapLibre GL is a fork from the last Mapbox GL version available under a permissive BSD license.</p> <p>Statement by former Mapbox engineer Tom MacWright:</p> <p>OSS, we hoped, was about enabling people and unlocking people\u2019s ability to collaborate. It turns out that in 2020, it\u2019s mostly helping companies and getting nothing in return. That\u2019s not a dynamic you can build a sustainable business on.</p>"},{"location":"developer-guide/ui/screenshots/","title":"UI Development in Fast Motion \u23f1","text":""},{"location":"developer-guide/ui/screenshots/#august-15-2018","title":"August 15 , 2018","text":"<p>The first prototype was based on Bootstrap 4.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-6-2018","title":"September 6, 2018","text":"<p>We switched to the Vuetify component framework, which comes complete with everything modern Web applications need.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-7-2018","title":"September 7, 2018","text":"<p>Navigation was extended.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-7-2018_1","title":"September 7, 2018","text":"<p>We started to experiment with the search form.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-8-2018","title":"September 8, 2018","text":"<p>Search dropdowns got populated with options.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-10-2018","title":"September 10, 2018","text":"<p>New logo and speed-dial action button.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-11-2018","title":"September 11, 2018","text":""},{"location":"developer-guide/ui/screenshots/#september-19-2018","title":"September 19, 2018","text":"<p>Pastel colored buttons and photo selection.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-26-2018","title":"September 26, 2018","text":"<p>The detail view.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#july-3-2019","title":"July 3, 2019","text":"<p>Improved UI with flat look, photo upload and powerful filters as well as new pages for searching places and labels.</p> <p></p> <p></p> <p></p>"},{"location":"developer-guide/ui/screenshots/#january-24-2020","title":"January 24, 2020","text":""},{"location":"developer-guide/ui/screenshots/#january-26-2020","title":"January 26, 2020","text":""},{"location":"developer-guide/ui/screenshots/#june-24-2020","title":"June 24, 2020","text":""},{"location":"developer-guide/ui/screenshots/#january-21-2021","title":"January 21, 2021","text":""},{"location":"developer-guide/ui/screenshots/#october-18-2021","title":"October 18, 2021","text":""},{"location":"developer-guide/ui/screenshots/#march-2-2022","title":"March 2, 2022","text":""},{"location":"developer-guide/ui/screenshots/#february-28-2025","title":"February 28, 2025","text":""},{"location":"developer-guide/vision/caption-generation/","title":"Caption Generation","text":"<p>As an addition to its built-in AI capabilities, PhotoPrism lets you generate image captions through either a dedicated Vision Service or direct Ollama integration, as described in this guide.<sup>1</sup></p> <p>It allows you to choose from the available vision models and customize the prompts according to your needs.</p> <p>This guide only covers a direct Ollama API integration. If you are interested in AI and would like to run a dedicated Vision Service, we recommend reading the introduction to get started. Learn more \u203a</p> <p>The Ollama integration is under active development, so the configuration, commands, and other details may change or break unexpectedly. Please keep this in mind and notify us when something doesn't work as expected. Thank you for your help in keeping this documentation updated!</p>"},{"location":"developer-guide/vision/caption-generation/#ollama-setup-guide","title":"Ollama Setup Guide","text":"<p>If you only want to use Ollama vision models for caption generation, the easiest way is to follow these instructions to set up an Ollama service instance and connect it directly to PhotoPrism.</p>"},{"location":"developer-guide/vision/caption-generation/#step-1-install-ollama","title":"Step 1: Install Ollama","text":"<p>To run Ollama on the same server as PhotoPrism, add the <code>ollama</code> service to the <code>services</code> section of your <code>compose.yaml</code> (or <code>docker-compose.yml</code>) file, as shown in the example below.<sup>2</sup></p> <p>Alternatively, most of the <code>compose.yaml</code> configuration examples on our download server already have Ollama preconfigured, so you can start it with the following command (remove <code>profiles: [\"ollama\"]</code> from the <code>ollama</code> service to start it by default, without using <code>--profile ollama</code>):</p> <pre><code>docker compose --profile ollama up -d\n</code></pre> <p>compose.yaml</p> <pre><code>services:\n  photoprism:\n    ## The \":preview\" build gives early access to new features:\n    image: photoprism/photoprism:preview\n    ## Start ollama first:\n    depends_on:\n    - ollama \n    ...\n\n  ## Ollama AI Model Runner (optional)\n  ## Run \"ollama pull [name]:[version]\" to download a vision model\n  ## listed at &lt;https://ollama.com/search?c=vision&gt;, for example:\n  ## docker compose exec ollama ollama pull qwen2.5vl:3b\n  ollama:\n    image: ollama/ollama:latest\n    restart: unless-stopped\n    stop_grace_period: 15s\n    ## Insecurely exposes the Ollama service on port 11434\n    ## without authentication (for private networks only):\n    # ports:\n    #  - \"11434:11434\"\n    environment:\n      ## Ollama Configuration Options:\n      OLLAMA_HOST: \"0.0.0.0:11434\"\n      OLLAMA_MODELS: \"/root/.ollama\" # model storage path (see volumes section below)\n      OLLAMA_MAX_QUEUE: \"100\"        # maximum number of queued requests\n      OLLAMA_NUM_PARALLEL: \"1\"       # maximum number of parallel requests\n      OLLAMA_MAX_LOADED_MODELS: \"1\"  # maximum number of loaded models per GPU\n      OLLAMA_LOAD_TIMEOUT: \"5m\"      # maximum time for loading models (default \"5m\")\n      OLLAMA_KEEP_ALIVE: \"10m\"       # duration that models stay loaded in memory (default \"5m\")\n      OLLAMA_CONTEXT_LENGTH: \"4096\"  # maximum input context length\n      OLLAMA_MULTIUSER_CACHE: \"1\"    # optimize prompt caching for multi-user scenarios\n      # OLLAMA_DEBUG: \"1\"              # shows additional debug information\n      # OLLAMA_NOPRUNE: \"1\"            # disables pruning of model blobs at startup\n      # OLLAMA_NOHISTORY: \"1\"          # disables readline history\n      # OLLAMA_FLASH_ATTENTION: \"1\"    # enables the experimental flash attention feature\n      # OLLAMA_SCHED_SPREAD: \"1\"       # allows scheduling models across all GPUs.\n      # OLLAMA_GPU_OVERHEAD: \"0\"       # reserves a portion of VRAM per GPU (bytes)\n      # OLLAMA_INTEL_GPU: \"1\"          # enables experimental Intel GPU detection\n      ## NVIDIA GPU Hardware Acceleration (optional):\n      # NVIDIA_VISIBLE_DEVICES: \"all\"\n      # NVIDIA_DRIVER_CAPABILITIES: \"compute,utility\"\n    volumes:\n      - \"./ollama:/root/.ollama\"\n    ## NVIDIA GPU Hardware Acceleration (optional):\n    # deploy:\n    #  resources:\n    #    reservations:\n    #      devices:\n    #        - driver: \"nvidia\"\n    #          capabilities: [ gpu ]\n    #          count: \"all\"\n</code></pre> <p>Note that the NVIDIA Container Toolkit must be installed for GPU hardware acceleration to work. Experienced users may also run Ollama on a separate, more powerful server.</p> <p>Since neither Vision Service nor Ollama support authentication, both services should only be used within a secure, private network. They must not be exposed to the public internet.</p>"},{"location":"developer-guide/vision/caption-generation/#step-2-download-models","title":"Step 2: Download Models","text":"<p>Run the following command to start the Ollama service:</p> <pre><code>docker compose up -d\n</code></pre> <p>If Ollama does not start as expected when using one of our configuration examples, you may need to add the <code>--profile ollama</code> flag to the command, as explained in Step 1.</p> <p>You can then download any of the listed vision models that match your hardware capabilities and preferences, as you will need it for the next step. For example:</p> <pre><code>docker compose exec ollama ollama pull qwen2.5vl:3b\n</code></pre>"},{"location":"developer-guide/vision/caption-generation/#step-3-configure-photoprism","title":"Step 3: Configure PhotoPrism","text":"<p>Now, create a new <code>config/vision.yml</code> file or edit the existing file in the storage folder of your PhotoPrism instance, following the example below. Its absolute path from inside the container is <code>/photoprism/storage/config/vision.yml</code>:</p> <p>vision.yml</p> <pre><code>Models:\n- Type: labels\n  Default: true\n- Type: nsfw\n  Default: true\n- Type: face\n  Default: true\n- Type: caption\n  Resolution: 720\n  Name: \"qwen2.5vl:3b\"\n  Prompt: |\n    Write a journalistic caption that is informative\n    and briefly describes the most important visual\n    content in up to 3 sentences.\n  Service:\n    # Ollama API endpoint (adjust as needed):\n    Uri: \"http://ollama:11434/api/generate\"\n    FileScheme: base64\n    RequestFormat: ollama\n    ResponseFormat: ollama\nThresholds:\n  Confidence: 10\n</code></pre> <p>The config file must be named <code>vision.yml</code>, not <code>vision.yaml</code>, as otherwise it won't be found and will have no effect.</p>"},{"location":"developer-guide/vision/caption-generation/#model-defaults","title":"Model Defaults","text":"<p>When using a custom <code>vision.yml</code> config file, you can apply the default settings to one or more model types by setting the <code>Default</code> flag to <code>true</code>, as shown in the following example:</p> <p>vision.yml</p> <pre><code>Models:\n- Type: labels\n  Default: true\n- Type: nsfw\n  Default: true\n- Type: face\n  Default: true\n</code></pre> <p>This simplifies your configuration, allowing you to customize only specific model types.</p>"},{"location":"developer-guide/vision/caption-generation/#step-4-restart-photoprism","title":"Step 4: Restart PhotoPrism","text":"<p>Run the following commands to restart <code>photoprism</code> and apply the new settings:</p> <pre><code>docker compose stop photoprism\ndocker compose up -d\n</code></pre> <p>You should now be able to use the <code>photoprism vision</code> CLI commands when opening a terminal, e.g. <code>photoprism vision run -m caption</code> to generate captions.</p>"},{"location":"developer-guide/vision/caption-generation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer-guide/vision/caption-generation/#verifying-your-configuration","title":"Verifying Your Configuration","text":"<p>If you encounter issues, a good first step is to verify how PhotoPrism has loaded your <code>vision.yml</code> configuration. You can do this by running: </p> <pre><code>docker compose exec photoprism photoprism vision ls\n</code></pre> <p>This command outputs the settings for all supported and configured model types. Compare the results with your <code>vision.yml</code> file to confirm that your configuration has been loaded correctly and to identify any parsing errors or misconfigurations.</p>"},{"location":"developer-guide/vision/caption-generation/#gpu-performance-issues","title":"GPU Performance Issues","text":"<p>When using Ollama with GPU acceleration, you may experience performance degradation over time due to VRAM management issues. This typically manifests as processing times gradually increasing and the Ollama service appearing to \"crash\" while still responding to requests, but without GPU acceleration.</p> <p>The issue occurs because Ollama's VRAM allocation doesn't properly recover after processing multiple requests, leading to memory fragmentation and eventual GPU processing failures.</p> <p>The Ollama service does not automatically recover from these VRAM issues. To restore full GPU acceleration, manually restart the Ollama container:</p> <pre><code>docker compose down ollama\ndocker compose up -d ollama\n</code></pre> <p>This will clear the VRAM and restore normal GPU-accelerated processing performance.</p> <ol> <li> <p>Available to all users with the next stable version, see our release notes for details.\u00a0\u21a9</p> </li> <li> <p>Unrelated configuration details have been omitted for brevity.\u00a0\u21a9</p> </li> </ol>"},{"location":"developer-guide/vision/classification/","title":"Image Classification","text":"<p>Image classification is performed using a pre-trained model, NASNet Mobile 224, that we have chosen because of its size, performance and accuracy. To get a basic understanding of how this works, you can read Image Classification using Deep Neural Networks.</p> <p>In addition, we manually matched the model classification with the labels you see in our UI:</p> <pre><code>cat:\n  label: cat\n  threshold: 0.3\n  priority: 5\n  categories:\n    - animal\n\ntabby cat:\n  see: cat\n</code></pre> <p>This was necessary because we didn't find a taxonomy suitable for consumers (mainly just scientific ones) and needed a lot of control to fine tune terms and their probability thresholds. The raw results were not useful to a typical user. Indexing too many words, categories and alternatives also negatively affects performance and leads to noise. </p> <p>It took us several months of testing until we were happy with the results and there are still labels to improve.</p>"},{"location":"developer-guide/vision/classification/#updating-labels","title":"Updating labels","text":"<p>After editing or adding labels in rules.yml, you now have to run <code>make generate</code> in the main project directory to generate native Go source from this file.</p>"},{"location":"developer-guide/vision/classification/#pre-trained-models","title":"Pre-trained Models","text":"<p>See also: TensorFlow Hub</p> <p>Source: https://github.com/tensorflow/models/blob/master/research/slim/README.md</p> <p>Neural nets work best when they have many parameters, making them powerful function approximators. However, this  means they must be trained on very large datasets. Because training models from scratch can be a very computationally intensive process requiring days or even weeks, there are various pre-trained models available.  These CNNs have been trained on the ILSVRC-2012-CLS image classification dataset.</p> <p>Note that the VGG and ResNet V1 parameters have been converted from their original caffe formats (here and here), whereas the Inception and ResNet V2 parameters have been trained internally at Google. Also be aware that these accuracies were computed by evaluating using a single image crop. PhotoPrism uses three crops, except for square images.</p> Model TF-Slim File Checkpoint Top-1 Accuracy Top-5 Accuracy Inception V1 Code inception_v1_2016_08_28.tar.gz 69.8 89.6 Inception V2 Code inception_v2_2016_08_28.tar.gz 73.9 91.8 Inception V3 Code inception_v3_2016_08_28.tar.gz 78.0 93.9 Inception V4 Code inception_v4_2016_09_09.tar.gz 80.2 95.2 Inception-ResNet-v2 Code inception_resnet_v2_2016_08_30.tar.gz 80.4 95.3 ResNet V1 50 Code resnet_v1_50_2016_08_28.tar.gz 75.2 92.2 ResNet V1 101 Code resnet_v1_101_2016_08_28.tar.gz 76.4 92.9 ResNet V1 152 Code resnet_v1_152_2016_08_28.tar.gz 76.8 93.2 ResNet V2 50^ Code resnet_v2_50_2017_04_14.tar.gz 75.6 92.8 ResNet V2 101^ Code resnet_v2_101_2017_04_14.tar.gz 77.0 93.7 ResNet V2 152^ Code resnet_v2_152_2017_04_14.tar.gz 77.8 94.1 ResNet V2 200 Code TBA 79.9* 95.2* VGG 16 Code vgg_16_2016_08_28.tar.gz 71.5 89.8 VGG 19 Code vgg_19_2016_08_28.tar.gz 71.1 89.8 MobileNet_v1_1.0_224 Code mobilenet_v1_1.0_224.tgz 70.9 89.9 MobileNet_v1_0.50_160 Code mobilenet_v1_0.50_160.tgz 59.1 81.9 MobileNet_v1_0.25_128 Code mobilenet_v1_0.25_128.tgz 41.5 66.3 MobileNet_v2_1.4_224^* Code mobilenet_v2_1.4_224.tgz 74.9 92.5 MobileNet_v2_1.0_224^* Code mobilenet_v2_1.0_224.tgz 71.9 91.0 NASNet-A_Mobile_224# Code nasnet-a_mobile_04_10_2017.tar.gz 74.0 91.6 NASNet-A_Large_331# Code nasnet-a_large_04_10_2017.tar.gz 82.7 96.2 PNASNet-5_Large_331 Code pnasnet-5_large_2017_12_13.tar.gz 82.9 96.2 PNASNet-5_Mobile_224 Code pnasnet-5_mobile_2017_12_13.tar.gz 74.2 91.9 <p>^ ResNet V2 models use Inception pre-processing and input image size of 299 (use <code>--preprocessing_name inception --eval_image_size 299</code> when using <code>eval_image_classifier.py</code>). Performance numbers for ResNet V2 models are reported on the ImageNet validation set.</p> <p>(#) More information and details about the NASNet architectures are available at this README</p> <p>All 16 float MobileNet V1 models reported in the MobileNet Paper and all 16 quantized TensorFlow Lite compatible MobileNet V1 models can be found here.</p> <p>(^#) More details on MobileNetV2 models can be found here.</p> <p>(*): Results quoted from the paper.</p> <p>Here is an example of how to download the Inception V3 checkpoint:</p> <pre><code>$ CHECKPOINT_DIR=/tmp/checkpoints\n$ mkdir ${CHECKPOINT_DIR}\n$ wget http://download.tensorflow.org/models/inception_v3_2016_08_28.tar.gz\n$ tar -xvf inception_v3_2016_08_28.tar.gz\n$ mv inception_v3.ckpt ${CHECKPOINT_DIR}\n$ rm inception_v3_2016_08_28.tar.gz\n</code></pre>"},{"location":"developer-guide/vision/classification/#landmark-detection","title":"Landmark detection","text":"<p>DELF: DEep Local Features  - https://github.com/tensorflow/models/tree/master/research/delf - Tensorflow implementation</p> <p></p> <p>Source: https://gitcdn.xyz/cdn/Tony607/blog_statics/ce9c3391932e24655b78e27a54543f28f11f3af0/images/landmark/query.jpg</p>"},{"location":"developer-guide/vision/classification/#types-of-neural-networks","title":"Types of neural networks","text":"<p> Source: http://www.asimovinstitute.org/neural-network-zoo/</p>"},{"location":"developer-guide/vision/classification/#external-resources","title":"External Resources","text":"<ul> <li>https://ai.facebook.com/blog/roberta-an-optimized-method-for-pretraining-self-supervised-nlp-systems/ - An optimized method for pretraining self-supervised NLP systems</li> <li>zihangdai/xlnet - Generalized Autoregressive Pretraining for Language Understanding</li> <li>https://pjreddie.com/darknet/yolo/ - real time image detection</li> <li>https://pjreddie.com/darknet/imagenet/ - using use Darknet to classify images</li> <li>ZanLabs/go-yolo - Golang binding for YOLO/Darknet recognition framework</li> <li>https://itnext.io/implementing-yolo-v3-in-tensorflow-tf-slim-c3c55ff59dbe - Implementing YOLO v3 in Tensorflow (TF-Slim)</li> <li>chewxy/lingo - provides the data structures and algorithms required for natural language processing</li> <li>https://modelzoo.co/ - Discover open source deep learning code and pretrained models</li> <li>https://polarr.ai/ - Efficient and Immersive C.V. experiences on the edge</li> <li>gildasch/gildas-ai</li> <li>https://www.tensorflow.org/lite/guide/hosted_models</li> <li>https://github.com/tensorflow/models/tree/master/research/slim/nets/nasnet</li> <li>https://www.wikidata.org/wiki/Wikidata:Database_download</li> <li>ropensci/wikitaxa</li> <li>https://datahub.io/collections/yago - YAGO3 is a huge semantic knowledge base, derived from Wikipedia WordNet and GeoNames</li> <li>Google AI Blog: Improving Inception and Image Classification in TensorFlow</li> <li>CNN Architectures: LeNet, AlexNet, VGG, GoogLeNet, ResNet and more</li> <li>Gildas Chabot - AI image search with Go &amp; Tensorflow (slides)</li> </ul>"},{"location":"developer-guide/vision/cli/","title":"Computer Vision Commands","text":""},{"location":"developer-guide/vision/cli/#save-model-configuration","title":"Save Model Configuration","text":"<p>To write the model configuration to a <code>vision.yml</code> file you can run:</p> <pre><code>docker compose exec photoprism photoprism vision save\n</code></pre> <p>You can then configure the <code>vision.yml</code> file according to your specific needs.</p>"},{"location":"developer-guide/vision/cli/#view-model-configuration","title":"View Model Configuration","text":"<p>You can use the following terminal command, to inspect your current model configuration:</p> <pre><code>docker compose exec photoprism photoprism vision ls\n</code></pre>"},{"location":"developer-guide/vision/cli/#command-options","title":"Command Options","text":"<p>You can combine it with these flags to change the output format:</p> Command Flag Description <code>--md, -m</code> format as machine-readable Markdown <code>--csv, -c</code> export as semicolon separated values <code>--tsv, -t</code> export as tab separated values"},{"location":"developer-guide/vision/cli/#run-vision-models","title":"Run Vision Models","text":"<p>Once you have configured your preferred computer vision models and services in the <code>vision.yml</code> file, you can use the following command to run a model on a set of pictures, as specified by the search filter:</p> <pre><code>photoprism vision run [options] [filter]\n</code></pre>"},{"location":"developer-guide/vision/cli/#command-options_1","title":"Command Options","text":"Command Flag Description <code>--models MODELS</code>, <code>-m MODELS</code> computer vision MODELS to run, e.g. caption, labels, or nsfw (default: \"caption\") <code>--count value</code>, <code>-c value</code> maximum number of pictures to be processed (default: 100000) <code>--source TYPE</code>, <code>-s TYPE</code> custom data source TYPE, e.g. estimate, image, meta, or manual (default: \"image\") <code>--force</code>, <code>-f</code> force existing data to be updated if the source priority is equal to or higher than the current one (default: false) <p>To generate captions for all photos in your library, you can run:</p> <pre><code>docker compose exec photoprism photoprism vision run --models=caption\n</code></pre> <p>Note: Processing time will vary based on your library size and hardware performance and may take a considerable amount of time for large collections.</p> <p>If you have a model for labels configured in your <code>vision.yml</code> you can run the following to generate labels:</p> <pre><code>docker compose exec photoprism photoprism vision run --models=labels\n</code></pre> <p>To generate captions only for photos matching a specific search filter such as those in a particular album, use the following command: <pre><code>docker compose exec photoprism photoprism vision run --models=caption album:Holidays\n</code></pre></p> <p>To re-generate captions for photos that already have some, add the --force flag to your command:</p> <pre><code>docker compose exec photoprism photoprism vision run --models=caption --force\n</code></pre> <p>This is especially useful when testing different models or prompts. Note that the configured source must have a equal or higher priority than the source of the existing captions for them to be replaced.</p>"},{"location":"developer-guide/vision/face-recognition/","title":"Face Recognition","text":"<p>To recognize faces, PhotoPrism first extracts crops from your images using the Pigo face detection library. It is based on pixel intensity comparisons.</p> <p>These are then fed into TensorFlow to compute 512-dimensional vectors for characterization.</p> <p>In the final step, the DBSCAN algorithm attempts to cluster these so-called face embeddings so that they can be assigned to people with a few clicks.</p>"},{"location":"developer-guide/vision/face-recognition/#configuration","title":"Configuration","text":"<p>We recommend that only advanced users and developers change these parameters.</p> Environment CLI Flag Default Description PHOTOPRISM_FACE_SIZE --face-size 50 minimum size of faces in <code>PIXELS</code> (20-10000) PHOTOPRISM_FACE_SCORE --face-score 9.000000 minimum face <code>QUALITY</code> score (1-100) PHOTOPRISM_FACE_OVERLAP --face-overlap 42 face area overlap threshold in <code>PERCENT</code> (1-100) PHOTOPRISM_FACE_CLUSTER_SIZE --face-cluster-size 80 minimum size of automatically clustered faces in <code>PIXELS</code> (20-10000)\u2002members only PHOTOPRISM_FACE_CLUSTER_SCORE --face-cluster-score 15 minimum <code>QUALITY</code> score of automatically clustered faces (1-100)\u2002members only PHOTOPRISM_FACE_CLUSTER_CORE --face-cluster-core 4 <code>NUMBER</code> of faces forming a cluster core (1-100)\u2002members only PHOTOPRISM_FACE_CLUSTER_DIST --face-cluster-dist 0.640000 similarity <code>DISTANCE</code> of faces forming a cluster core (0.1-1.5)\u2002members only PHOTOPRISM_FACE_MATCH_DIST --face-match-dist 0.460000 similarity <code>OFFSET</code> for matching faces with existing clusters (0.1-1.5)\u2002members only <ul> <li>A reasonable range for the similarity distance between face embeddings is between 0.60 and 0.70, with a higher value being more aggressive and leading to larger clusters with more false positives.</li> <li>To cluster a smaller number of faces, you can reduce the kernel to 3 or 2 similar faces.</li> </ul>"},{"location":"developer-guide/vision/face-recognition/#external-resources","title":"External Resources","text":"<ul> <li>https://cheppers.com/deploying-distributed-face-recognition-application-kubernetes - Deploying a distributed face-recognition application with Kubernetes</li> <li>http://dlib.net/ - Machine learning library, good for face recognition</li> <li>Kagami/go-face - implements face recognition for Go using dlib</li> <li>https://hackernoon.com/face-recognition-with-go-676a555b8a7e - face recognition howto using Kagami/go-face</li> <li>esimov/pigo - Pigo is a face detection library implemented in Go</li> <li>https://gocv.io/ - GoCV gives access to the OpenCV 4 computer vision library</li> <li>davidsandberg/facenet - Face Recognition using Tensorflow (Python, not Go)</li> </ul>"},{"location":"developer-guide/vision/service/","title":"Using the Vision Service","text":"<p>With our dedicated Vision Service, you get access to additional models and configuration options for advanced computer vision tasks. For example, you can use it to generate custom captions and labels for your photos. The service runs in a separate container that acts as a proxy between the models and PhotoPrism\u00ae, extending its capabilities. It also allows Python developers to experiment with new ideas, try different models, and customize prompts.</p> <p>The service and its integrations are under active development, so the configuration, commands, and other details may change or break unexpectedly. Please keep this in mind and notify us when something doesn't work as expected. Thank you for your help in keeping this documentation updated!</p>"},{"location":"developer-guide/vision/service/#getting-started","title":"Getting Started","text":"<p>This guide explains how to set up the dedicated service as an AI model proxy to enhance PhotoPrism's capabilities. You can use a wide range of additional models with it, including lightweight, preconfigured models, as well as popular but more demanding large language models in combination with Ollama.</p> <p>While the upcoming version of PhotoPrism will also allow you to generate captions with Ollama directly, a key advantage of using the dedicated vision service is greater flexibility and access to an even broader range of models. This makes it ideal for advanced users and developers.</p> <p>Developers can proceed to the Build Setup guide, which explains how to set up a Vision Service development environment.</p> <p>Since neither Vision Service nor Ollama support authentication, both services should only be used within a secure, private network. They must not be exposed to the public internet.</p>"},{"location":"developer-guide/vision/service/#step-1-start-the-vision-service","title":"Step 1: Start the Vision Service","text":"<ol> <li>Create a new, empty folder on the server where you want to run the Vision service.</li> <li> <p>Inside this folder, create a <code>compose.yaml</code> file with the following content:</p> <p><code>compose.yaml</code> for Vision Service</p> <pre><code>services:\n  photoprism-vision:\n    image: photoprism/vision:latest\n    restart: unless-stopped\n    ports:\n      - \"5000:5000\"\n    environment:\n      # Set OLLAMA_ENABLED=true and configure the host if you want this service to use Ollama\n      - OLLAMA_ENABLED=false\n      - OLLAMA_HOST=http://&lt;ollama-ip&gt;:11434\n    volumes:\n      - \"./models:/app/models\"\n      - \"./venv:/app/venv\"\n</code></pre> </li> <li> <p>If you plan to use Ollama through this service, set <code>OLLAMA_ENABLED=true</code> and replace <code>&lt;ollama-ip&gt;</code> with the IP address of your Ollama machine.</p> </li> <li>Start the service: <code>docker compose up -d</code></li> </ol>"},{"location":"developer-guide/vision/service/#step-2-configure-photoprism","title":"Step 2: Configure PhotoPrism","text":"<p>Now, create a new <code>config/vision.yml</code> file or edit the existing file in the storage folder of your PhotoPrism instance, following the example below. Its absolute path from inside the container is <code>/photoprism/storage/config/vision.yml</code>:</p> Example 1: Using a pre-installed ModelExample 2: Using an Ollama Model <p>This example uses the pre-installed <code>kosmos-2</code> model for generating captions. It does not require Ollama.</p> <p>Available pre-installed Models</p> <p>The Vision service also provides additional pre-installed models, such as <code>vit-gpt2</code> and <code>blip</code> for image captioning, as well as <code>nsfw_image_detector</code> for NSFW content detection. You can enable these models by updating the <code>Name</code> field in your <code>vision.yml</code> configuration.</p> <p>vision.yml</p> <pre><code>Models:\n- Type: caption\n  Resolution: 720\n  Name: \"kosmos-2\"\n  Version: \"latest\"\n  Prompt: |\n    Write a journalistic caption that is informative and briefly describes the most important visual content in up to 3 sentences:\n    - Use explicit language to describe the scene if necessary for a proper understanding.\n    - Avoid text formatting, meta-language, and filler words.\n    - Do not start captions with boring phrases such as \"This image\", \"The image\", \"This picture\", \"The picture\", \"A picture of\", \"Here are\", or \"There is\".\n    - Instead, start describing the content by first identifying the subjects and any actions that might be performed.\n    - Try providing a casual description of what the subjects look like, including their gender and age.\n    - If the place seems special or familiar, provide a brief, interesting description without being vague.\n  Service:\n    # IMPORTANT: Replace this IP with the address of your Vision service machine.\n    Uri: \"http://&lt;vision-service-ip&gt;:5000/api/v1/vision/caption\"\n\nThresholds:\n  Confidence: 10\n</code></pre> <p>This example uses Ollama's <code>llava-phi3</code> model for generating captions, proxied through the Vision service.</p> <p>vision.yml</p> <pre><code>Models:\n- Type: caption\n  Resolution: 720\n  Name: \"llava-phi3\"\n  Version: \"latest\"\n  Prompt: |\n    Write a journalistic caption that is informative and briefly describes the most important visual content in up to 3 sentences:\n    - Use explicit language to describe the scene if necessary for a proper understanding.\n    - Avoid text formatting, meta-language, and filler words.\n    - Do not start captions with boring phrases such as \"This image\", \"The image\", \"This picture\", \"The picture\", \"A picture of\", \"Here are\", or \"There is\".\n    - Instead, start describing the content by first identifying the subjects and any actions that might be performed.\n    - Try providing a casual description of what the subjects look like, including their gender and age.\n    - If the place seems special or familiar, provide a brief, interesting description without being vague.\n  Service:\n    # IMPORTANT: Replace this IP with the address of your Vision service machine.\n    Uri: \"http://&lt;vision-service-ip&gt;:5000/api/v1/vision/caption\"\n\nThresholds:\n  Confidence: 10\n</code></pre> <p>The config file must be named <code>vision.yml</code>, not <code>vision.yaml</code>, as otherwise it won't be found and will have no effect.</p>"},{"location":"developer-guide/vision/service/#step-3-restart-photoprism","title":"Step 3: Restart PhotoPrism","text":"<p>Run the following commands to restart <code>photoprism</code> and apply the new settings:</p> <pre><code>docker compose stop photoprism\ndocker compose up -d\n</code></pre> <p>You should now be able to use the <code>photoprism vision</code> CLI commands when opening a terminal, e.g. <code>photoprism vision run -m caption</code> to generate captions.</p>"},{"location":"developer-guide/vision/service/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer-guide/vision/service/#gpu-performance-issues","title":"GPU Performance Issues","text":"<p>If you're using the Vision Service with Ollama enabled (<code>OLLAMA_ENABLED=true</code>), you may experience GPU VRAM management issues over time. The same VRAM degradation symptoms and solutions apply when Ollama is used through the Vision Service proxy.</p> <p>Detailed troubleshooting tips can be found in the Caption Generation documentation.</p> <p>Learn more \u203a</p>"},{"location":"developer-guide/vision/service/setup/","title":"Vision Service Developer Guide","text":"<p>With our dedicated Vision Service, you get access to additional models and configuration options for advanced computer vision tasks. For example, you can use it to generate custom captions and labels for your photos. The service runs in a separate container that acts as a proxy between the models and PhotoPrism\u00ae, extending its capabilities. It also allows Python developers to experiment with new ideas, try different models, and customize prompts.</p> <p>If you have an interest in AI and would like to run a dedicated Vision Service, we recommend reading the introduction and following the instructions there, as the following guide is intended for developers only. Learn more \u203a</p>"},{"location":"developer-guide/vision/service/setup/#overview","title":"Overview","text":"<p>PhotoPrism\u00ae can be extended with a powerful, external service for advanced computer vision tasks like generating descriptive captions and labels for your entire photo library. This service, PhotoPrism Vision, acts as a flexible bridge between your main PhotoPrism instance and various AI models.</p> <p>This guide provides a technical deep-dive for developers who want to understand, set up, and potentially extend the Vision Service.</p> <p>The Vision service is built with Python using the Flask web framework. It leverages popular machine learning libraries like PyTorch and Hugging Face Transformers for running local models, and can also integrate with external AI providers like Ollama.</p>"},{"location":"developer-guide/vision/service/setup/#architecture","title":"Architecture","text":"<p>The Vision service is designed to be a decoupled microservice. This architecture allows for flexibility and scalability, as the computationally intensive AI tasks can be offloaded to a separate, potentially more powerful, machine with a dedicated GPU.</p> <p>The data flow is as follows:</p> <ol> <li>PhotoPrism selects a photo that needs processing. It sends a request containing a thumbnail of the image and the desired model information to the Vision service's REST API.</li> <li>PhotoPrism Vision receives the request. Based on the <code>model</code> name in the request body, it routes the request to the appropriate internal processor:<ul> <li>Local Processor: If a pre-installed model (e.g., <code>kosmos-2</code>, <code>blip</code>, <code>vit-gpt2</code>, <code>nsfw_image_detector</code>) is requested, the service uses PyTorch and Transformers to load the model from the local <code>models</code> directory and process the image. This can be accelerated by a GPU if available on the Vision service machine.</li> <li>Ollama Processor: If the model name is not recognized as a local model, the service assumes it is an Ollama model. It forwards the image and a prompt to the configured <code>OLLAMA_HOST</code> API endpoint.</li> </ul> </li> <li>The AI Model (either local or on Ollama) analyzes the image and generates the result (a caption or a list of labels).</li> <li>PhotoPrism Vision formats the result into a standardized JSON response and sends it back to the main PhotoPrism instance.</li> <li>PhotoPrism receives the JSON response and saves the new metadata to its database.</li> </ol>"},{"location":"developer-guide/vision/service/setup/#build-setup","title":"Build Setup","text":"<p>This guide explains how to set up a local development environment to run the Vision service directly from source, allowing for easy code modification and debugging.</p> <ol> <li>Prerequisites: Ensure you have Python 3.12+ and Git installed on your system.</li> <li>Clone the Repository: First, clone the official <code>photoprism-vision</code> repository.     <pre><code>git clone https://github.com/photoprism/photoprism-vision.git\ncd photoprism-vision/service\n</code></pre></li> <li>Create and Activate Virtual Environment: It is highly recommended to use a virtual environment to manage dependencies.     <pre><code>python3.12 -m venv ./venv\nsource ./venv/bin/activate\n</code></pre></li> <li>Set Environment Variables: Configure the connection to your Ollama instance if you plan to use it. These variables are read by the application at startup.     <pre><code>export OLLAMA_ENABLED=\"true\"\nexport OLLAMA_HOST=\"http://&lt;ollama-host-ip&gt;:11434\"\n</code></pre></li> <li>Install Dependencies: <pre><code>pip install -r requirements.txt\n</code></pre></li> <li>Run the Flask Development Server: <code>bash     python -m flask --app app run --debug --host=0.0.0.0 --port=5000</code>    The <code>--debug</code> flag enables auto-reloading whenever you save a change in the code, and <code>--host=0.0.0.0</code> makes the service accessible from other machines on your network, such as your main PhotoPrism instance.</li> </ol> <p>The service and its integrations are under active development, so the configuration, commands, and other details may change or break unexpectedly. Please keep this in mind and notify us when something doesn't work as expected. Thank you for your help in keeping this documentation updated!</p>"},{"location":"developer-guide/vision/service/setup/#configuration","title":"Configuration","text":"<p>The interaction between PhotoPrism and the Vision service is controlled by a <code>vision.yml</code> file located in your main PhotoPrism <code>storage/config</code> directory.</p> <p>The configuration file must be named <code>vision.yml</code> with the <code>.yml</code> extension, not <code>.yaml</code>. Files with the <code>.yaml</code> extension will be ignored by PhotoPrism and could cause the Vision service to appear non-functional.</p> <p>The file consists of a list of <code>Models</code> and a <code>Thresholds</code> section.</p> <p><code>storage/config/vision.yml</code></p> <pre><code>Models:\n- Type: caption\n  Resolution: 720\n  Name: \"llava-phi3\"\n  Version: \"latest\"\n  Prompt: |\n    Write a journalistic caption that is informative and briefly describes the most important visual content in up to 3 sentences.\n  Service:\n    Uri: \"http://&lt;vision-service-ip&gt;:5000/api/v1/vision\"\n    FileScheme: base64\n    RequestFormat: vision\n    ResponseFormat: vision\n\n- Type: labels\n  Resolution: 720\n  Name: \"kosmos-2\"\n  Version: \"latest\"\n  Service:\n    Uri: \"http://&lt;vision-service-ip&gt;:5000/api/v1/vision\"\n    FileScheme: base64\n    RequestFormat: vision\n    ResponseFormat: vision\n\nThresholds:\n  Confidence: 50\n</code></pre> <ul> <li><code>Type</code>: The task to perform. Can be <code>caption</code> or <code>labels</code>.</li> <li><code>Resolution</code>: The longest edge of the thumbnail (in pixels) to be sent for analysis. Higher values may yield better results but increase processing time and network traffic.</li> <li><code>Name</code>: The name of the model to use. For Ollama models, this should be just the model name (e.g., <code>llava-phi3</code>). For pre-installed models, it's the model identifier (e.g., <code>kosmos-2</code>).</li> <li><code>Version</code>: The model version. For Ollama models, this is typically <code>latest</code>. For pre-installed models, it's also usually <code>latest</code>.</li> <li><code>Prompt</code>: (Optional) A custom prompt to send to the AI model. If omitted, a default prompt will be used.</li> <li><code>Service</code>: A block defining how to communicate with the service.<ul> <li><code>Uri</code>: The base API endpoint of the Vision service. PhotoPrism will append the appropriate path based on the model type, name, and version (e.g., <code>/caption/llava-phi3/latest</code>).</li> <li><code>FileScheme</code>: How the image data is sent. <code>base64</code> sends it as a Base64-encoded string within the JSON payload (recommended for the Vision service). <code>data</code> sends the raw thumbnail binary, but this requires additional handling in the current Vision service implementation.</li> <li><code>RequestFormat</code>: The JSON structure of the request. Use <code>vision</code> for the PhotoPrism Vision API format. The <code>ollama</code> format should only be used when connecting directly to Ollama, not through the Vision service.</li> <li><code>ResponseFormat</code>: The expected JSON structure of the response. Use <code>vision</code> for the PhotoPrism Vision API format.</li> </ul> </li> <li><code>Thresholds</code>:<ul> <li><code>Confidence</code>: A value from 0-100. Generated labels with a confidence score below this threshold will be discarded.</li> </ul> </li> </ul>"},{"location":"developer-guide/vision/service/setup/#api-endpoints","title":"API Endpoints","text":"<p>The PhotoPrism Vision service exposes a simple REST API.</p>"},{"location":"developer-guide/vision/service/setup/#main-endpoints","title":"Main Endpoints","text":"<ul> <li><code>POST /api/v1/vision/caption/&lt;model_name&gt;/&lt;model_version&gt;</code>: Generates a caption for an image using the specified model.</li> <li><code>POST /api/v1/vision/labels/&lt;model_name&gt;/&lt;model_version&gt;</code>: Generates labels for an image using the specified model.</li> <li><code>POST /api/v1/vision/nsfw</code>: Checks an image for not-safe-for-work content (using pre-installed models).</li> </ul> <p>URL Construction</p> <p>When PhotoPrism makes requests to the Vision service, it constructs the full URL by appending the task type, model name, and version to the base URI specified in <code>vision.yml</code>. For example, if the base URI is <code>http://&lt;vision-service-ip&gt;:5000/api/v1/vision</code> and you request a caption with model <code>llava-phi3</code> version <code>latest</code>, PhotoPrism will send the request to <code>http://&lt;vision-service-ip&gt;:5000/api/v1/vision/caption/llava-phi3/latest</code>.</p>"},{"location":"developer-guide/vision/service/setup/#request-body","title":"Request Body","text":"<p>The API accepts a JSON payload with the following fields:</p> <p>Request to <code>/api/v1/vision/caption</code></p> <pre><code>{\n    \"id\": \"optional-uuid-to-track-request\",\n    \"model\": \"llava-phi3\",\n    \"version\": \"latest\",\n    \"prompt\": \"Describe this image in a single sentence.\",\n    \"images\": [\n      \"data:image/jpeg;base64,/9j/4AAQSkZJRg...\"\n    ]\n}\n</code></pre>"},{"location":"developer-guide/vision/service/setup/#response-body","title":"Response Body","text":"<p>The service returns a standardized JSON response:</p> <p>Response</p> <pre><code>{\n    \"id\": \"optional-uuid-to-track-request\",\n    \"model\": {\n        \"name\": \"llava-phi3\",\n        \"version\": \"latest\"\n    },\n    \"result\": {\n        \"caption\": \"A colorful landscape with mountains and a clear blue sky.\"\n    }\n}\n</code></pre>"},{"location":"developer-guide/vision/service/setup/#code-structure","title":"Code Structure","text":"<p>For developers looking to contribute, the codebase is structured as follows:</p> <ul> <li><code>app.py</code>: The main Flask application. It handles routing, request parsing, and calls the appropriate processor.</li> <li><code>processor.py</code>: Defines the abstract <code>ImageProcessor</code> base class. Any new integration (local or remote) must implement this interface.</li> <li><code>local_processor.py</code>: Implements the processor for the pre-installed Hugging Face models (Kosmos-2, BLIP, etc.). It manages downloading, caching, and running these models using PyTorch.</li> <li><code>ollama_processor.py</code>: Implements the processor for the Ollama integration. It acts as a client, formatting requests and forwarding them to an Ollama instance.</li> <li><code>api.py</code>: Contains the Pydantic models used for request/response validation and serialization.</li> <li><code>utils.py</code>: Helper functions, for instance, for image loading and encoding.</li> </ul>"},{"location":"developer-guide/vision/service/setup/#dependencies","title":"Dependencies","text":""},{"location":"developer-guide/vision/service/setup/#flask","title":"Flask","text":"<p>Flask is the framework that is used for the API. It allows for API creation with Python, which is key for this application as it utilizes ML.</p>"},{"location":"developer-guide/vision/service/setup/#pytorch","title":"PyTorch","text":"<p>PyTorch is key for working with the ML models to generate the outputs. It also enables GPU processing, speeding up the image processing with the models. PyTorch primarily creates and handles tensors, which are crucial for the function of the models.</p>"},{"location":"developer-guide/vision/service/setup/#transformers","title":"Transformers","text":"<p>Transformers is used for downloading and loading the models. In addition to this it is used in the image processing with the models.</p>"},{"location":"developer-guide/vision/service/setup/#pillow","title":"Pillow","text":"<p>Pillow is used to take the supplied URL and convert it into the format needed to input into the models.</p>"},{"location":"developer-guide/vision/service/setup/#pydantic","title":"pydantic","text":"<p>pydantic is used for JSON schemas, serialization and deserialization of requests and responses.</p>"},{"location":"developer-guide/vision/service/setup/#ollama","title":"ollama","text":"<p>ollama is used as integration library that connects to any given ollama instance.</p>"},{"location":"developer-guide/vision/service/setup/#timm","title":"timm","text":"<p>timm is a tensorflow extension for timm models. Currently used for NSFW detection.</p>"},{"location":"developer-guide/vision/service/setup/#huggingface_hubhf_xet","title":"huggingface_hub[hf_xet]","text":"<p>xet Extension used for faster downloading of huggingface models.</p>"},{"location":"developer-guide/vision/service/setup/#troubleshooting-and-cli-commands","title":"Troubleshooting and CLI Commands","text":"<p>When developing or debugging the Vision service integration, you can use built-in CLI commands to inspect the configuration.</p>"},{"location":"developer-guide/vision/service/setup/#listing-loaded-models","title":"Listing Loaded Models","text":"<p>To verify how the main PhotoPrism instance has parsed the <code>vision.yml</code> file, you can use the <code>vision ls</code> command from within the PhotoPrism container. This is particularly useful for debugging configuration issues without needing to trigger a full indexing job.</p> <p>From within the development container (after running <code>make terminal</code>), use:</p> <pre><code>./photoprism vision ls\n</code></pre> <p>If you have a global <code>photoprism</code> binary, you can run:</p> <pre><code>photoprism vision ls\n</code></pre> <p>The command will output the settings for all supported and configured model types, which you can then compare with the expected settings in your <code>vision.yml</code>. This helps quickly identify typos, formatting issues, or incorrect values.</p>"},{"location":"getting-started/","title":"Setup","text":"<p>PhotoPrism can be installed on all operating systems supporting Docker, as well as FreeBSD, Raspberry Pi, and many NAS devices. It is also available in the cloud on PikaPods and DigitalOcean.</p> <p>We recommend running PhotoPrism with Docker Compose when hosting it on a private server. It is available for Mac, Linux, and Windows.</p> <p>Once the initial setup is complete, our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Our stable releases and preview builds are available as multi-arch Docker images for 64-bit AMD, Intel, and ARM processors. Experienced users can alternatively use the packages at dl.photoprism.app/pkg/linux/ to manually install PhotoPrism on compatible Linux distributions. For more installation methods, see our Getting Started FAQ.</p>"},{"location":"getting-started/#system-requirements","title":"System Requirements","text":"<p>You should host PhotoPrism on a server with at least 2 cores, 3 GB of physical memory,<sup>1</sup> and a 64-bit operating system. Beyond these minimum requirements, the amount of RAM should match the number of CPU cores. Indexing large photo and video collections also benefits greatly from local SSD storage, especially for the database and cache files.</p> <p>Also ensure that your server has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files. Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/#databases","title":"Databases","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+.<sup>2</sup> Note that SQLite is generally not a good choice for users who require scalability and high performance, and that support for MySQL 8 has been discontinued due to low demand and missing features.<sup>3</sup></p>"},{"location":"getting-started/#browsers","title":"Browsers","text":"<p>Built as a Progressive Web App (PWA), the web interface works with most modern browsers, and runs best on Chrome, Chromium, Safari, Firefox, and Edge. You can conveniently install it on the home screen of all major operating systems and mobile devices.</p> <p>Browsers must have WebGL support enabled in order to use the interactive world maps in Places.<sup>4</sup> Also note that not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</p>"},{"location":"getting-started/#https","title":"HTTPS","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy such as Traefik or Caddy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps like FolderSync may refuse to connect as well.</p>"},{"location":"getting-started/#firewall","title":"Firewall","text":"<p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow incoming requests as well as those to our Geocoding API and Docker if you have a firewall installed, and make sure that your Internet connection is working.</p> <p>Configure Firewall \u203a</p>"},{"location":"getting-started/#maps-places","title":"Maps &amp; Places","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.<sup>5</sup></p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p>"},{"location":"getting-started/#roadmap","title":"Roadmap","text":"<p>Our vision is to provide the most user- and privacy-friendly solution to keep your pictures organized and accessible. The project roadmap shows what tasks are in progress, what needs testing, and which features are going to be implemented next.</p> <p>Please note, however, that we have a zero-bug policy and do our best to help users when they need support or have questions. This comes at a price, as we can't give exact release dates for new features.</p>"},{"location":"getting-started/#getting-support","title":"Getting Support","text":"<p>If you need help installing our software at home, you are welcome to post your question in GitHub Discussions or ask in our Community Chat. Common problems can be quickly diagnosed and solved using our Troubleshooting Checklists. Silver, Gold, and Platinum members are also welcome to email us for technical support and advice.</p> <p>View Support Options \u203a Compare Memberships \u203a</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Contact us or a community member if you need help, it could be a configuration problem, or a misunderstanding in how the software works.</p> <ol> <li> <p>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory\u00a0\u21a9</p> </li> <li> <p>Our configuration examples are generally based on the current stable MariaDB version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version.\u00a0\u21a9</p> </li> <li> <p>Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.\u00a0\u21a9</p> </li> <li> <p>WebGL may not be fully supported by some versions of Firefox, especially on Android.\u00a0\u21a9</p> </li> <li> <p>Our Compliance FAQ provides answers to the most frequently asked questions about product compliance and scalability.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/config-options/","title":"Config Options","text":"<p>Note that changes to the config options listed below always require a restart to take effect.<sup>1</sup> Instead of using environment variables, you can alternatively use an \u21aa <code>options.yml</code> file to configure your instance.</p>"},{"location":"getting-started/config-options/#authentication","title":"Authentication","text":"Environment CLI Flag Default Description PHOTOPRISM_AUTH_MODE --auth-mode password authentication <code>MODE</code> (public<sup>2</sup>, password) PHOTOPRISM_ADMIN_USER, PHOTOPRISM_ADMIN_USERNAME --admin-user admin <code>USERNAME</code> of the superadmin account that is created on first startup PHOTOPRISM_ADMIN_PASSWORD --admin-password initial <code>PASSWORD</code> of the superadmin account (8-72 characters) PHOTOPRISM_PASSWORD_LENGTH --password-length 8 minimum password <code>LENGTH</code> in characters PHOTOPRISM_LOGIN_INFO --login-info custom login footer info <code>TEXT</code> plus PHOTOPRISM_OIDC_URI --oidc-uri issuer <code>URI</code> for single sign-on via OpenID Connect, e.g. https://accounts.google.com PHOTOPRISM_OIDC_CLIENT --oidc-client client <code>ID</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_SECRET --oidc-secret client <code>SECRET</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_SCOPES --oidc-scopes openid email profile address client authorization <code>SCOPES</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_PROVIDER --oidc-provider custom identity provider <code>NAME</code>, e.g. Google PHOTOPRISM_OIDC_ICON --oidc-icon custom identity provider icon <code>URI</code> PHOTOPRISM_OIDC_REDIRECT --oidc-redirect automatically redirect unauthenticated users to the configured identity provider PHOTOPRISM_OIDC_REGISTER --oidc-register allow new users to create an account when they sign in with OpenID Connect PHOTOPRISM_OIDC_USERNAME --oidc-username preferred_username preferred username <code>CLAIM</code> for new OpenID Connect users (preferred_username, name, nickname, email) PHOTOPRISM_OIDC_WEBDAV --oidc-webdav allow new OpenID Connect users to use WebDAV when they have a role that allows it PHOTOPRISM_DISABLE_OIDC --disable-oidc disable single sign-on via OpenID Connect, even if an identity provider has been configured PHOTOPRISM_SESSION_MAXAGE --session-maxage 1209600 session expiration time in <code>SECONDS</code>, doubled for accounts with 2FA (-1 to disable) PHOTOPRISM_SESSION_TIMEOUT --session-timeout 604800 session idle time in <code>SECONDS</code>, doubled for accounts with 2FA (-1 to disable) PHOTOPRISM_SESSION_CACHE --session-cache 900 session cache duration in <code>SECONDS</code> (60-3600)"},{"location":"getting-started/config-options/#logging","title":"Logging","text":"Environment CLI Flag Default Description PHOTOPRISM_LOG_LEVEL --log-level info log message verbosity <code>LEVEL</code> (trace, debug, info, warning, error) PHOTOPRISM_PROD --prod disable debug mode and log startup warnings and errors only PHOTOPRISM_DEBUG --debug enable debug mode for development and troubleshooting PHOTOPRISM_TRACE --trace enable trace mode to display all debug and trace logs"},{"location":"getting-started/config-options/#storage","title":"Storage","text":"Environment CLI Flag Default Description PHOTOPRISM_CONFIG_PATH --config-path config storage <code>PATH</code> or options.yml filename, values in this file override CLI flags and environment variables if present PHOTOPRISM_DEFAULTS_YAML --defaults-yaml /etc/photoprism/defaults.yml load default config values from <code>FILENAME</code> if it exists, does not override CLI flags or environment variables PHOTOPRISM_ORIGINALS_PATH --originals-path storage <code>PATH</code> of your original media files (photos and videos) PHOTOPRISM_ORIGINALS_LIMIT --originals-limit 1000 maximum size of media files in <code>MB</code> (1-100000; -1 to disable) PHOTOPRISM_RESOLUTION_LIMIT --resolution-limit 150 maximum resolution of media files in <code>MEGAPIXELS</code> (1-900; -1 to disable) PHOTOPRISM_USERS_PATH --users-path users relative <code>PATH</code> to create base and upload subdirectories for users PHOTOPRISM_STORAGE_PATH --storage-path writable storage <code>PATH</code> for sidecar, cache, and database files PHOTOPRISM_IMPORT_PATH --import-path base <code>PATH</code> from which files can be imported to originals\u2002optional PHOTOPRISM_IMPORT_DEST --import-dest relative originals <code>PATH</code> to which the files should be imported by default\u2002optional PHOTOPRISM_IMPORT_ALLOW --import-allow restrict imports to these file types (comma-separated list of <code>EXTENSIONS</code>; leave blank to allow all) PHOTOPRISM_UPLOAD_NSFW --upload-nsfw allow uploads that might be offensive (detecting unsafe content requires TensorFlow) PHOTOPRISM_UPLOAD_ALLOW --upload-allow restrict uploads to these file types (comma-separated list of <code>EXTENSIONS</code>; leave blank to allow all) PHOTOPRISM_UPLOAD_ARCHIVES --upload-archives allow upload of zip archives (will be extracted before import) PHOTOPRISM_UPLOAD_LIMIT --upload-limit 1000 maximum total size of uploaded files in <code>MB</code> (1-100000; -1 to disable) PHOTOPRISM_CACHE_PATH --cache-path custom cache <code>PATH</code> for sessions and thumbnail files\u2002optional PHOTOPRISM_TEMP_PATH --temp-path temporary file <code>PATH</code> optional PHOTOPRISM_ASSETS_PATH --assets-path assets <code>PATH</code> containing static resources like icons, models, and translations"},{"location":"getting-started/config-options/#sidecar-files","title":"Sidecar Files","text":"Environment CLI Flag Default Description PHOTOPRISM_SIDECAR_PATH --sidecar-path custom relative or absolute sidecar <code>PATH</code> optional PHOTOPRISM_SIDECAR_YAML --sidecar-yaml true create YAML sidecar files to back up picture metadata"},{"location":"getting-started/config-options/#usage","title":"Usage","text":"Environment CLI Flag Default Description PHOTOPRISM_USAGE_INFO --usage-info display usage information in the user interface PHOTOPRISM_FILES_QUOTA --files-quota 0 maximum total size of all indexed files in <code>GB</code> (0 for unlimited)"},{"location":"getting-started/config-options/#backup","title":"Backup","text":"Environment CLI Flag Default Description PHOTOPRISM_BACKUP_PATH --backup-path custom base <code>PATH</code> for creating and restoring backups\u2002optional PHOTOPRISM_BACKUP_SCHEDULE --backup-schedule daily backup <code>SCHEDULE</code> in cron format (e.g. \"0 12 * * *\" for daily at noon) or at a random time (daily, weekly) PHOTOPRISM_BACKUP_RETAIN --backup-retain 3 <code>NUMBER</code> of index backups to keep (-1 to keep all) PHOTOPRISM_BACKUP_DATABASE --backup-database true create regular backups based on the configured schedule PHOTOPRISM_BACKUP_ALBUMS --backup-albums true create YAML files to back up album metadata"},{"location":"getting-started/config-options/#indexing","title":"Indexing","text":"Environment CLI Flag Default Description PHOTOPRISM_INDEX_WORKERS, PHOTOPRISM_WORKERS --index-workers maximum <code>NUMBER</code> of indexing workers, default depends on the number of physical cores PHOTOPRISM_INDEX_SCHEDULE --index-schedule indexing <code>SCHEDULE</code> in cron format (e.g. \"@every 3h\" for every 3 hours; \"\" to disable) PHOTOPRISM_WAKEUP_INTERVAL --wakeup-interval 15m0s <code>TIME</code> between facial recognition, file sync, and metadata worker runs (1-86400s) PHOTOPRISM_AUTO_INDEX --auto-index 300 delay before automatically indexing files in <code>SECONDS</code> when uploading via WebDAV (-1 to disable) PHOTOPRISM_AUTO_IMPORT --auto-import -1 delay before automatically importing files in <code>SECONDS</code> when uploading via WebDAV (-1 to disable)"},{"location":"getting-started/config-options/#feature-flags","title":"Feature Flags","text":"Environment CLI Flag Default Description PHOTOPRISM_READONLY --read-only disable features that require write permission for the originals folder PHOTOPRISM_EXPERIMENTAL --experimental enable new features that may be incomplete or unstable PHOTOPRISM_DISABLE_SETTINGS --disable-settings disable the settings user interface and server API, e.g. in combination with public mode PHOTOPRISM_DISABLE_BACKUPS --disable-backups prevent database and album backups as well as YAML sidecar files from being created PHOTOPRISM_DISABLE_RESTART --disable-restart prevent admins from restarting the server through the user interface PHOTOPRISM_DISABLE_WEBDAV --disable-webdav prevent other apps from accessing PhotoPrism as a shared network drive PHOTOPRISM_DISABLE_PLACES --disable-places disable interactive world maps and reverse geocoding PHOTOPRISM_DISABLE_TENSORFLOW --disable-tensorflow disable features depending on TensorFlow, e.g. image classification and face recognition PHOTOPRISM_DISABLE_FACES --disable-faces disable face detection and recognition (requires TensorFlow) PHOTOPRISM_DISABLE_CLASSIFICATION --disable-classification disable image classification (requires TensorFlow) PHOTOPRISM_DISABLE_FFMPEG --disable-ffmpeg disable video transcoding and thumbnail extraction with FFmpeg PHOTOPRISM_DISABLE_EXIFTOOL --disable-exiftool disable metadata extraction with ExifTool (required for full Video, Live Photo, and XMP support) PHOTOPRISM_DISABLE_VIPS --disable-vips disable image processing and conversion with libvips PHOTOPRISM_DISABLE_SIPS --disable-sips disable file conversion using the sips command under macOS PHOTOPRISM_DISABLE_DARKTABLE --disable-darktable disable conversion of RAW images with Darktable PHOTOPRISM_DISABLE_RAWTHERAPEE --disable-rawtherapee disable conversion of RAW images with RawTherapee PHOTOPRISM_DISABLE_IMAGEMAGICK --disable-imagemagick disable conversion of image files with ImageMagick PHOTOPRISM_DISABLE_HEIFCONVERT --disable-heifconvert disable conversion of HEIC images with libheif PHOTOPRISM_DISABLE_RSVGCONVERT --disable-rsvgconvert disable conversion of SVG graphics with librsvg\u2002plus PHOTOPRISM_DISABLE_VECTORS --disable-vectors disable vector graphics support\u2002plus PHOTOPRISM_DISABLE_JPEGXL --disable-jpegxl disable JPEG XL file format support PHOTOPRISM_DISABLE_RAW --disable-raw disable indexing and conversion of RAW images PHOTOPRISM_RAW_PRESETS --raw-presets enables applying user presets when converting RAW images (reduces performance) PHOTOPRISM_EXIF_BRUTEFORCE --exif-bruteforce always perform a brute-force search if no Exif headers were found"},{"location":"getting-started/config-options/#customization","title":"Customization","text":"Environment CLI Flag Default Description PHOTOPRISM_DEFAULT_LOCALE --default-locale en default user interface language <code>CODE</code> PHOTOPRISM_DEFAULT_TIMEZONE --default-timezone Local default time zone <code>NAME</code>, e.g. for scheduling backups PHOTOPRISM_DEFAULT_THEME --default-theme default user interface theme <code>NAME</code> PHOTOPRISM_PLACES_LOCALE --places-locale local location details language <code>CODE</code>, e.g. en, de, or local PHOTOPRISM_APP_NAME --app-name progressive web app <code>NAME</code> when installed on a device PHOTOPRISM_APP_MODE --app-mode standalone progressive web app <code>MODE</code> (fullscreen, standalone, minimal-ui, browser) PHOTOPRISM_APP_ICON --app-icon home screen <code>ICON</code> (logo, app, crisp, mint, bold, square) PHOTOPRISM_APP_COLOR --app-color #000000 splash screen <code>COLOR</code> code PHOTOPRISM_LEGAL_INFO --legal-info legal information <code>TEXT</code>, displayed in the page footer PHOTOPRISM_LEGAL_URL --legal-url legal information <code>URL</code> PHOTOPRISM_WALLPAPER_URI --wallpaper-uri login screen background image <code>URI</code>"},{"location":"getting-started/config-options/#site-information","title":"Site Information","text":"Environment CLI Flag Default Description PHOTOPRISM_SITE_URL --site-url http://localhost:2342/ public site <code>URL</code> PHOTOPRISM_SITE_AUTHOR --site-author site <code>OWNER</code>, copyright, or artist PHOTOPRISM_SITE_TITLE --site-title site <code>TITLE</code> PHOTOPRISM_SITE_CAPTION --site-caption AI-Powered Photos App site <code>CAPTION</code> PHOTOPRISM_SITE_DESCRIPTION --site-description site <code>DESCRIPTION</code> optional PHOTOPRISM_SITE_FAVICON --site-favicon site favicon <code>FILENAME</code> optional PHOTOPRISM_SITE_PREVIEW --site-preview sharing preview image <code>URL</code> PHOTOPRISM_CDN_URL --cdn-url content delivery network <code>URL</code> PHOTOPRISM_CDN_VIDEO --cdn-video stream videos over the specified CDN PHOTOPRISM_CORS_ORIGIN --cors-origin origin <code>URL</code> from which browsers are allowed to perform cross-origin requests (leave blank to disable or use * to allow all) PHOTOPRISM_CORS_HEADERS --cors-headers Accept, Accept-Ranges, Content-Disposition, Content-Encoding, Content-Range, Location one or more <code>HEADERS</code> that browsers should see when performing a cross-origin request PHOTOPRISM_CORS_METHODS --cors-methods GET, HEAD, OPTIONS one or more <code>METHODS</code> that may be used when performing a cross-origin request"},{"location":"getting-started/config-options/#proxy-server","title":"Proxy Server","text":"Environment CLI Flag Default Description PHOTOPRISM_HTTPS_PROXY --https-proxy proxy server <code>URL</code> to be used for outgoing connections\u2002optional PHOTOPRISM_HTTPS_PROXY_INSECURE --https-proxy-insecure ignore invalid HTTPS certificates when using a proxy PHOTOPRISM_TRUSTED_PROXY --trusted-proxy \"172.16.0.0/12\" <code>CIDR</code> ranges or IPv4/v6 addresses from which reverse proxy headers can be trusted, separated by commas PHOTOPRISM_PROXY_PROTO_HEADER --proxy-proto-header \"X-Forwarded-Proto\" proxy protocol header <code>NAME</code> PHOTOPRISM_PROXY_PROTO_HTTPS --proxy-proto-https \"https\" forwarded HTTPS protocol <code>NAME</code>"},{"location":"getting-started/config-options/#web-server","title":"Web Server","text":"Environment CLI Flag Default Description PHOTOPRISM_DISABLE_TLS --disable-tls disable HTTPS/TLS even if the site URL starts with https:// and a certificate is available PHOTOPRISM_DEFAULT_TLS --default-tls default to a self-signed HTTPS/TLS certificate if no other certificate is available PHOTOPRISM_TLS_CERT --tls-cert public HTTPS certificate <code>FILENAME</code> (.crt), ignored for Unix domain sockets PHOTOPRISM_TLS_KEY --tls-key private HTTPS key <code>FILENAME</code> (.key), ignored for Unix domain sockets PHOTOPRISM_DISABLE_STS --disable-sts disable HTTP Strict-Transport-Security (STS) header PHOTOPRISM_STS_SECONDS --sts-seconds 31536000 <code>TIME</code> for the browser to remember that the site is to be accessed only via HTTPS (0 to disable)\u2002plus PHOTOPRISM_STS_SUBDOMAINS --sts-subdomains rule applies to all subdomains as well\u2002plus PHOTOPRISM_STS_PRELOAD --sts-preload submit to Google's HSTS preload service\u2002plus PHOTOPRISM_AUTH_LIMIT --auth-limit 60 maximum number of consecutive invalid access <code>TOKENS</code> from a single IP\u2002plus PHOTOPRISM_AUTH_INTERVAL --auth-interval 10s average <code>DURATION</code> between invalid access tokens from a single IP (0-86400s)\u2002plus PHOTOPRISM_LOGIN_LIMIT --login-limit 10 maximum number of consecutive failed <code>LOGINS</code> from a single IP\u2002plus PHOTOPRISM_LOGIN_INTERVAL --login-interval 1m0s average <code>DURATION</code> between failed logins from a single IP (0-86400s)\u2002plus PHOTOPRISM_IPS_LIMIT --ips-limit 3 maximum number of malicious request <code>ATTEMPTS</code> before a client IP is blocked (-1 to disable)\u2002plus PHOTOPRISM_IPS_INTERVAL --ips-interval 1h0m0s average <code>DURATION</code> between malicious request attempts from a single IP (0-86400s)\u2002plus PHOTOPRISM_HTTP_CSP --http-csp HTTP Content-Security-Policy (CSP) <code>HEADER</code> plus PHOTOPRISM_HTTP_CTO --http-cto nosniff HTTP X-Content-Type-Options <code>HEADER</code> plus PHOTOPRISM_HTTP_COOP --http-coop same-origin HTTP Cross-Origin-Opener-Policy (COOP) <code>HEADER</code> plus PHOTOPRISM_HTTP_REFERRER_POLICY --http-referrer-policy same-origin HTTP Referrer-Policy <code>HEADER</code> plus PHOTOPRISM_HTTP_FRAME_OPTIONS --http-frame-options DENY HTTP X-Frame-Options <code>HEADER</code> plus PHOTOPRISM_HTTP_XSS_PROTECTION --http-xss-protection 1; mode=block HTTP X-XSS-Protection <code>HEADER</code> plus PHOTOPRISM_HTTP_MODE --http-mode Web server <code>MODE</code> (debug, release, test) PHOTOPRISM_HTTP_COMPRESSION --http-compression Web server compression <code>METHOD</code> (gzip, none) PHOTOPRISM_HTTP_CACHE_PUBLIC --http-cache-public allow static content to be cached by a CDN or caching proxy PHOTOPRISM_HTTP_CACHE_MAXAGE --http-cache-maxage 2592000 time in <code>SECONDS</code> until cached content expires PHOTOPRISM_HTTP_VIDEO_MAXAGE --http-video-maxage 21600 time in <code>SECONDS</code> until cached videos expire PHOTOPRISM_HTTP_HOST --http-host 0.0.0.0 Web server <code>IP</code> address or Unix domain socket, e.g. unix:/var/run/photoprism.sock?force=true&amp;mode=660 PHOTOPRISM_HTTP_PORT --http-port 2342 Web server port <code>NUMBER</code>, ignored for Unix domain sockets PHOTOPRISM_HTTP_HOSTNAME --http-hostname serve requests for this <code>HOSTNAME</code> only\u2002plus"},{"location":"getting-started/config-options/#database-connection","title":"Database Connection","text":"Environment CLI Flag Default Description PHOTOPRISM_DATABASE_DRIVER --database-driver sqlite database <code>DRIVER</code> (sqlite, mysql) PHOTOPRISM_DATABASE_DSN --database-dsn database connection <code>DSN</code> (sqlite file, optional for mysql) PHOTOPRISM_DATABASE_NAME --database-name photoprism database schema <code>NAME</code> PHOTOPRISM_DATABASE_SERVER --database-server database <code>HOST</code> incl. port e.g. \"mariadb:3306\" (or socket path) PHOTOPRISM_DATABASE_USER --database-user photoprism database user <code>NAME</code> PHOTOPRISM_DATABASE_PASSWORD --database-password database user <code>PASSWORD</code> PHOTOPRISM_DATABASE_TIMEOUT --database-timeout 15 timeout in <code>SECONDS</code> for establishing a database connection (1-60) PHOTOPRISM_DATABASE_CONNS --database-conns 0 maximum <code>NUMBER</code> of open database connections PHOTOPRISM_DATABASE_CONNS_IDLE --database-conns-idle 0 maximum <code>NUMBER</code> of idle database connections"},{"location":"getting-started/config-options/#file-conversion","title":"File Conversion","text":"Environment CLI Flag Default Description PHOTOPRISM_FFMPEG_BIN --ffmpeg-bin ffmpeg FFmpeg <code>COMMAND</code> for video transcoding and thumbnail extraction PHOTOPRISM_FFMPEG_ENCODER --ffmpeg-encoder libx264 FFmpeg AVC video encoder <code>NAME</code> PHOTOPRISM_FFMPEG_SIZE --ffmpeg-size 4096 encoding resolution limit in <code>PIXELS</code> (720-7680) PHOTOPRISM_FFMPEG_QUALITY --ffmpeg-quality 50 encoding <code>QUALITY</code> (1-100, where 100 is almost lossless) PHOTOPRISM_FFMPEG_BITRATE --ffmpeg-bitrate 60 bitrate <code>LIMIT</code> in Mbps for forced transcoding of non-AVC videos (1-960; -1 to disable) PHOTOPRISM_FFMPEG_PRESET --ffmpeg-preset fast FFmpeg compression <code>PRESET</code> when using an encoder that supports it, e.g. fast, medium, or slow PHOTOPRISM_FFMPEG_DEVICE --ffmpeg-device FFmpeg device <code>PATH</code> when using a hardware encoder that supports it as parameter PHOTOPRISM_FFMPEG_MAP_VIDEO --ffmpeg-map-video <code>0:v:0</code> transcoding video stream <code>MAP</code> PHOTOPRISM_FFMPEG_MAP_AUDIO --ffmpeg-map-audio <code>0:a:0?</code> transcoding audio stream <code>MAP</code> PHOTOPRISM_EXIFTOOL_BIN --exiftool-bin exiftool ExifTool <code>COMMAND</code> for extracting metadata PHOTOPRISM_SIPS_BIN --sips-bin sips Sips <code>COMMAND</code> for media file conversion\u2002macOS only PHOTOPRISM_SIPS_EXCLUDE, PHOTOPRISM_SIPS_BLACKLIST --sips-exclude avif, avifs, thm file <code>EXTENSIONS</code> not to be used with Sips\u2002macOS only PHOTOPRISM_DARKTABLE_BIN --darktable-bin darktable-cli Darktable CLI <code>COMMAND</code> for RAW to JPEG conversion PHOTOPRISM_DARKTABLE_EXCLUDE, PHOTOPRISM_DARKTABLE_BLACKLIST --darktable-exclude thm file <code>EXTENSIONS</code> not to be used with Darktable PHOTOPRISM_DARKTABLE_CACHE_PATH --darktable-cache-path custom Darktable cache <code>PATH</code> PHOTOPRISM_DARKTABLE_CONFIG_PATH --darktable-config-path custom Darktable config <code>PATH</code> PHOTOPRISM_RAWTHERAPEE_BIN --rawtherapee-bin rawtherapee-cli RawTherapee CLI <code>COMMAND</code> for RAW to JPEG conversion PHOTOPRISM_RAWTHERAPEE_EXCLUDE, PHOTOPRISM_RAWTHERAPEE_BLACKLIST --rawtherapee-exclude dng, thm file <code>EXTENSIONS</code> not to be used with RawTherapee PHOTOPRISM_IMAGEMAGICK_BIN --imagemagick-bin convert ImageMagick CLI <code>COMMAND</code> for image file conversion PHOTOPRISM_IMAGEMAGICK_EXCLUDE, PHOTOPRISM_IMAGEMAGICK_BLACKLIST --imagemagick-exclude heif, heic, heics, avif, avifs, jxl, thm file <code>EXTENSIONS</code> not to be used with ImageMagick PHOTOPRISM_HEIFCONVERT_BIN --heifconvert-bin heif-dec libheif HEIC image conversion <code>COMMAND</code> PHOTOPRISM_RSVGCONVERT_BIN --rsvgconvert-bin rsvg-convert librsvg SVG graphics conversion <code>COMMAND</code> plus PHOTOPRISM_HEIFCONVERT_ORIENTATION --heifconvert-orientation keep Exif <code>ORIENTATION</code> of images generated with libheif (keep, reset)"},{"location":"getting-started/config-options/#security-tokens","title":"Security Tokens","text":"Environment CLI Flag Default Description PHOTOPRISM_DOWNLOAD_TOKEN --download-token <code>DEFAULT</code> download URL token for originals (leave blank for a random value) PHOTOPRISM_PREVIEW_TOKEN --preview-token <code>DEFAULT</code> thumbnail and video streaming URL token (leave blank for a random value)"},{"location":"getting-started/config-options/#preview-images","title":"Preview Images","text":"Environment CLI Flag Default Description PHOTOPRISM_THUMB_LIBRARY --thumb-library auto image processing <code>LIBRARY</code> to be used for generating thumbnails (auto, imaging, vips) PHOTOPRISM_THUMB_COLOR --thumb-color auto standard color <code>PROFILE</code> for thumbnails (auto, preserve, srgb, none) PHOTOPRISM_THUMB_FILTER --thumb-filter auto downscaling filter <code>NAME</code> (imaging best to worst: blackman, lanczos, cubic, linear, nearest) PHOTOPRISM_THUMB_SIZE --thumb-size 1920 maximum size of pre-generated thumbnails in <code>PIXELS</code> (720-7680) PHOTOPRISM_THUMB_SIZE_UNCACHED --thumb-size-uncached 5120 maximum size of thumbnails generated on demand in <code>PIXELS</code> (720-7680) PHOTOPRISM_THUMB_UNCACHED --thumb-uncached generate missing thumbnails on demand (high memory and cpu usage)"},{"location":"getting-started/config-options/#image-quality","title":"Image Quality","text":"Environment CLI Flag Default Description PHOTOPRISM_JPEG_QUALITY --jpeg-quality 83 higher values increase the image <code>QUALITY</code> and file size (25-100) PHOTOPRISM_JPEG_SIZE --jpeg-size 7680 maximum size of generated JPEG images in <code>PIXELS</code> (720-30000) PHOTOPRISM_PNG_SIZE --png-size 7680 maximum size of generated PNG images in <code>PIXELS</code> (720-30000)"},{"location":"getting-started/config-options/#computer-vision","title":"Computer Vision","text":"Environment CLI Flag Default Description PHOTOPRISM_VISION_YAML --vision-yaml computer vision model configuration <code>FILENAME</code> optional PHOTOPRISM_VISION_API --vision-api enable computer vision service API endpoints under /api/v1/vision (requires authorized access token) PHOTOPRISM_VISION_URI --vision-uri remote computer vision service <code>URI</code>, e.g. https://example.com/api/v1/vision (leave blank to disable) PHOTOPRISM_VISION_KEY --vision-key remote computer vision service access <code>TOKEN</code> optional PHOTOPRISM_DETECT_NSFW --detect-nsfw flag newly added pictures as private if they might be offensive (requires TensorFlow)"},{"location":"getting-started/config-options/#face-recognition","title":"Face Recognition","text":"<p>To recognize faces, PhotoPrism first extracts crops from your images using a library based on pixel intensity comparisons. These are then fed into TensorFlow to compute 512-dimensional vectors for characterization. In the final step, the DBSCAN algorithm attempts to cluster these so-called face embeddings, so they can be matched to persons with just a few clicks. A reasonable range for the similarity distance between face embeddings is between 0.60 and 0.70, with a higher value being more aggressive and leading to larger clusters with more false positives. To cluster a smaller number of faces, you can reduce the core to 3 or 2 similar faces. It is strongly recommended that you run the \"photoprism faces reset\" command in a terminal to remove existing clusters and mappings after changing any of the clustering parameters, as otherwise inconsistencies may result in unexpected behavior or errors. </p> <p>We recommend that only advanced users change these parameters:</p> Environment CLI Flag Default Description PHOTOPRISM_FACE_SIZE --face-size 50 minimum size of faces in <code>PIXELS</code> (20-10000) PHOTOPRISM_FACE_SCORE --face-score 9 minimum face <code>QUALITY</code> score (1-100) PHOTOPRISM_FACE_OVERLAP --face-overlap 42 face area overlap threshold in <code>PERCENT</code> (1-100) PHOTOPRISM_FACE_CLUSTER_SIZE --face-cluster-size 80 minimum size of automatically clustered faces in <code>PIXELS</code> (20-10000) PHOTOPRISM_FACE_CLUSTER_SCORE --face-cluster-score 15 minimum <code>QUALITY</code> score of automatically clustered faces (1-100) PHOTOPRISM_FACE_CLUSTER_CORE --face-cluster-core 4 <code>NUMBER</code> of faces forming a cluster core (1-100) PHOTOPRISM_FACE_CLUSTER_DIST --face-cluster-dist 0.64 similarity <code>DISTANCE</code> of faces forming a cluster core (0.1-1.5) PHOTOPRISM_FACE_MATCH_DIST --face-match-dist 0.46 similarity <code>OFFSET</code> for matching faces with existing clusters (0.1-1.5)"},{"location":"getting-started/config-options/#daemon-mode","title":"Daemon Mode","text":"<p>If you start the server as a daemon in the background, you can additionally specify a filename for the log and the process ID:</p> Environment CLI Flag Default Description PHOTOPRISM_PID_FILENAME --pid-filename process id <code>FILENAME</code> daemon-mode only PHOTOPRISM_LOG_FILENAME --log-filename server log <code>FILENAME</code> daemon-mode only"},{"location":"getting-started/config-options/#docker-image","title":"Docker Image","text":"<p>The following variables are used by our Docker images only and have no effect otherwise:</p> Environment Default Description PHOTOPRISM_UID 0 run as a non-root user after initialization (supported: 0, 33, 50-99, 500-600, 900-1250, and 2000-2100) PHOTOPRISM_GID 0 run with a specific group id after initialization, can optionally be used together with <code>PHOTOPRISM_UID</code> (supported: 0, 33, 44, 50-99, 105, 109, 115, 116, 500-600, 900-1250, and 2000-2100) PHOTOPRISM_UMASK 0002 file-creation mode (default: u=rwx,g=rwx,o=rx) PHOTOPRISM_INIT https tensorflow run/install on first startup (common options: update tensorflow https intel gpu davfs yt-dlp) PHOTOPRISM_DISABLE_CHOWN false disable updating storage permissions via chmod and chown on startup <p>Docker problems? Our troubleshooting guide helps you quickly diagnose and resolve them. \ud83d\udedf</p> <ol> <li> <p>If you are using Docker Compose, you can open a terminal, run <code>docker compose stop</code>, and then run <code>docker compose up -d</code> to restart all services.\u00a0\u21a9</p> </li> <li> <p>Enabling public mode is not recommended for instances installed on a server outside your home network, as this allows others to access your pictures without authentication.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/docker-compose/","title":"Setup Using Docker Compose","text":"<p>With Docker Compose, you use a YAML file to configure all application services so you can easily start them with a single command. Before you proceed, make sure you have Docker installed on your system. It is available for Mac, Linux, and Windows.</p> <p>Alternatively, Podman Compose is supported as a drop-in replacement for Docker Compose on Red Hat-compatible Linux distributions like RHEL, CentOS, Fedora, AlmaLinux, and Rocky Linux.</p>"},{"location":"getting-started/docker-compose/#step-1-configure","title":"Step 1: Configure","text":"LinuxPodmanRaspberry PiARMv7WindowsmacOS <p>Download our compose.yaml example (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/compose.yaml\n</code></pre> <p>Commands on Linux may have to be prefixed with <code>sudo</code> when not running as root. Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in the <code>volumes:</code>  section of your config file. Kernel security modules such as AppArmor and SELinux  have been reported to cause issues.</p> <p>We recommend that your server has at least 4 GB of swap configured and to avoid setting a hard memory limit, as this can lead to unexpected restarts when the indexer temporarily needs more memory to process large files. Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>Download our docker-compose.yml example (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/podman/docker-compose.yml\n</code></pre> <p>Alternatively, you can run these commands to install Podman and download the default configuration to <code>/opt/photoprism</code>:</p> <pre><code>mkdir -p /opt/photoprism\ncd /opt/photoprism\ncurl -sSf https://dl.photoprism.app/podman/install.sh | bash\n</code></pre> <p>Please keep in mind to replace the <code>docker</code> and <code>docker compose</code> commands with <code>podman</code> and <code>podman-compose</code> when following the examples in our documentation.</p> <p>We recommend that your server has at least 4 GB of swap configured and to avoid setting a hard memory limit, as this can lead to unexpected restarts when the indexer temporarily needs more memory to process large files. Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>Download our compose.yaml example for  the Raspberry Pi and other ARM64-based devices (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/arm64/compose.yaml\n</code></pre> <p>Mostly the same installation instructions as for regular Linux servers apply. Commands may have to be prefixed with <code>sudo</code> when not running as root.</p> <p>Please verify if your device meets the system requirements and has at least 4 GB of swap configured before you continue. Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>Download our compose.yaml example for  older ARMv7-based devices (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/armv7/compose.yaml\n</code></pre> <p>Mostly the same installation instructions as for regular Linux servers apply. Commands may have to be prefixed with <code>sudo</code> when not running as root.</p> <p>Please verify if your device meets the system requirements and has at least 4 GB of swap configured before you continue. Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>Download our compose.yaml example for Windows (right click and Save Link As...) to a folder of your choice, and change the configuration as needed:</p> <p>https://dl.photoprism.app/docker/windows/compose.yaml </p> <p>It is important to increase the Docker memory limit to 4 GB or more when using Hyper-V. The default of 2 GB can reduce indexing performance and cause unexpected restarts. Also make sure you configure at least 4 GB of swap space. Docker Desktop uses dynamic memory allocation with WSL 2, meaning you do not need to change any memory-related settings (depending on which version of Windows and Docker you are using).</p> <p>Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>Running the following commands will automatically download all required config files and start the server for you:</p> <pre><code>curl.exe -o install.bat https://dl.photoprism.app/docker/windows/install.bat\ninstall.bat\n</code></pre> <p>Before you run this, make sure you are in the directory where you want to install PhotoPrism and that Docker Desktop is installed and started on your PC.</p> <p>Download our compose.yaml example for macOS (right click and Save Link As...) to a folder of your choice, and change the configuration as needed:</p> <p>https://dl.photoprism.app/docker/macos/compose.yaml </p> <p>It is important to increase the Docker memory limit to 4 GB or more, as the default of 2 GB can reduce indexing performance and cause unexpected restarts.</p> <p>Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>When editing YAML files, please make sure that related values remain on the same indentation level and that lists start with a dash. If the value of an environment variable contains a literal <code>$</code> sign, for example in a password, it must be escaped with <code>$$</code> (a double dollar sign) so that e.g. <code>\"compo$e\"</code> becomes <code>\"compo$$e\"</code>.</p> <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible servers. There is no default in case no password was provided. A minimum length of 8 characters is required.</p>"},{"location":"getting-started/docker-compose/#database","title":"Database","text":"<p>Our example includes a pre-configured MariaDB database server. If you remove it and provide no other database server credentials, SQLite database files will be created in the storage folder. Local SSD storage is best for databases of any kind.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <p>You cannot change the database password with <code>MARIADB_PASSWORD</code> after MariaDB has been started for the first time. However, choosing a secure password is not essential if you do not share the database with other applications or expose it over a network. To enable automatic schema updates when upgrading to a new major version, please make sure that <code>MARIADB_AUTO_UPGRADE</code> is set to a non-empty value.</p>"},{"location":"getting-started/docker-compose/#volumes","title":"Volumes","text":"<p>You must explicitly specify the directories you want to mount from your host, since PhotoPrism can't see files in folders that have not been shared. This is an important security feature and allows for a flexible configuration without having to change any other variables.</p> <p>It is important that all folders are mounted to persistent volumes. We recommend changing the relative paths used in our examples to absolute paths and to avoid using named or anonymous volumes in order to prevent potential data loss when the container is recreated, e.g. after an update of the Docker image.</p>"},{"location":"getting-started/docker-compose/#photoprismoriginals","title":"/photoprism/originals","text":"<p>The originals folder contains your original photo and video files. <code>~/Pictures</code> will be mounted by default, where <code>~</code> is a shortcut for your home directory:</p> <pre><code>services:\n  photoprism:\n    volumes:\n      - \"~/Pictures:/photoprism/originals\"\n</code></pre> <p>We recommend that you change <code>~/Pictures</code> to the directory where your existing media files are, for example:</p> <pre><code>      - \"/mnt/photos:/photoprism/originals\"\n</code></pre> <p>Additional directories can be mounted as sub folders of <code>/photoprism/originals</code> (depending on overlay filesystem support):</p> <pre><code>    volumes:\n      - \"/mnt/photos:/photoprism/originals\"\n      - \"/mnt/videos:/photoprism/originals/videos\"\n</code></pre> <p>On Windows, prefix the host path with the drive letter and use <code>/</code> instead of <code>\\</code> as separator:</p> <pre><code>    volumes:\n      - \"D:/Example/Pictures:/photoprism/originals\"\n</code></pre> <p>When read-only mode is enabled, all features that require write permission to the originals folder are disabled, e.g. WebDAV, uploading and deleting files. To do this, set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in the <code>environment</code> section of your <code>compose.yaml</code> file.<sup>2</sup> You can additionally mount volumes with the <code>:ro</code> flag so that writes are also blocked by Docker.</p>"},{"location":"getting-started/docker-compose/#photoprismstorage","title":"/photoprism/storage","text":"<p>The storage folder is used to save config, cache, backup, thumbnail, and sidecar files. It must always be specified so that you do not lose these files after a restart or upgrade. If available, we recommend you put the storage folder on a local SSD drive for best performance. You can otherwise keep the default and store the files in a folder relative to the current directory:</p> <pre><code>services:\n  photoprism:\n    volumes:\n      - \"./storage:/photoprism/storage\"\n</code></pre> <p>Never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden. Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/docker-compose/#photoprismimport","title":"/photoprism/import","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates, for example:</p> <pre><code>services:\n  photoprism:\n    volumes:\n      - \"/mnt/media/usb:/photoprism/import\"\n</code></pre> <p>Imported files receive a canonical filename and will be organized by year and month. You should never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files.</p> <p>Even if you don't specify an import folder, adding files via Web Upload and WebDAV remains possible unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/docker-compose/#step-2-start-the-server","title":"Step 2: Start the server","text":"<p>Open a terminal and change to the folder in which your config file has been saved.<sup>1</sup> Run this command to start the application and database services in the background:</p> <pre><code>docker compose up -d\n</code></pre> <p>Note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p> <p>Now open the Web UI by navigating to http://localhost:2342/. You should see a login screen. Sign in with the user <code>admin</code> and the initial password configured via <code>PHOTOPRISM_ADMIN_PASSWORD</code>. You may change it on the account settings page. Enabling public mode will disable authentication.</p> <p>It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting.</p> <p>Should the server already be running, or you see no errors, you may have started it on a different host and/or port. There could also be an issue with your browser, ad blocker, or firewall settings.</p> <p>You cannot change the password with <code>PHOTOPRISM_ADMIN_PASSWORD</code> after the app has been started for the first time. To change the admin password, run the <code>docker compose exec photoprism photoprism passwd [username]</code> command in a terminal. You can also run <code>docker compose exec photoprism photoprism reset</code> to delete the existing index database and start from scratch.</p> <p>The server port and other config options can be changed in your <code>compose.yaml</code> file<sup>2</sup> at any time. Remember to restart the services for changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre>"},{"location":"getting-started/docker-compose/#step-3-index-your-library","title":"Step 3: Index Your Library","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Easy, isn't it?</p>"},{"location":"getting-started/docker-compose/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/docker-compose/#troubleshooting","title":"Troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in your <code>compose.yaml</code> file, depending on the CPU performance and number of cores</li> <li> Ensure that your server has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and resolve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/docker-compose/#command-line-interface","title":"Command-Line Interface","text":""},{"location":"getting-started/docker-compose/#introduction","title":"Introduction","text":"<p><code>photoprism help</code> lists all commands and config options available in the current version:</p> <pre><code>docker compose exec photoprism photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>docker compose exec photoprism photoprism backup --help\n</code></pre> <p>PhotoPrism's command-line interface is also well suited for job automation using a scheduler.</p> <p>When using Docker Compose, you can prefix the commands you want to run with <code>docker compose exec [service]</code> to execute them in the specified service container. If this fails with no container found, please make sure that the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where your config file is located.</p>"},{"location":"getting-started/docker-compose/#opening-a-terminal","title":"Opening a Terminal","text":"<p>To open a terminal session as the default user:</p> <pre><code>docker compose exec photoprism bash\n</code></pre> <p>Since the above will open the terminal as root by default, we recommend that you pass the <code>-u</code> flag to explicitly open a non-root session if PhotoPrism is running under a specific user account, for example:</p> <pre><code>docker compose exec -u 1000 photoprism bash\n</code></pre> <p>This avoids potential filesystem permission issues that can occur when a command creates new files or folders, e.g. to store thumbnails.</p>"},{"location":"getting-started/docker-compose/#changing-the-user-id","title":"Changing the User ID","text":"<p>Specifying a user with the <code>-u</code> flag is possible for all commands you run with Docker and Docker Compose. In the following examples, it is omitted for brevity. Note, however, that commands that you run without an explicit user ID might be executed as root. The currently supported user ID ranges are 0, 33, 50-99, 500-600, 900-1250, and 2000-2100.</p> <p>We recommend running the <code>photoprism</code> service as a non-root user by setting either the user service property or the <code>PHOTOPRISM_UID</code> environment variable in your config file. Don't forget to update file permissions and/or ownership with the <code>chown</code> command when you make changes.</p>"},{"location":"getting-started/docker-compose/#examples","title":"Examples","text":"Action Command Start Services <code>docker compose up -d</code> Stop Services <code>docker compose stop</code> Download Updates <code>docker compose pull</code> Uninstall <code>docker compose rm -s -v</code> Watch Logs <code>docker compose logs -f --tail=100</code> Display Config Values <code>docker compose exec photoprism photoprism show config</code> Show Migration Status <code>docker compose exec photoprism photoprism migrations ls</code> Repeat Failed Migrations <code>docker compose exec photoprism photoprism migrations run -f</code> Reset Database <code>docker compose exec photoprism photoprism reset --yes</code> Backup Database <code>docker compose exec photoprism photoprism backup -i -f</code> Restore Database <code>docker compose exec photoprism photoprism restore -i -f</code> Change Password <code>docker compose exec photoprism photoprism passwd [username]</code> Show User Management Commands <code>docker compose exec photoprism photoprism users help</code> Reset User Accounts <code>docker compose exec photoprism photoprism users reset --yes</code> Reset Sessions and Access Tokens <code>docker compose exec photoprism photoprism auth reset --yes</code> Show Face Recognition Commands <code>docker compose exec photoprism photoprism faces help</code> Index Faces <code>docker compose exec photoprism photoprism faces index</code> Reset People &amp; Faces <code>docker compose exec photoprism photoprism faces reset -f</code> Transcode Videos to AVC <code>docker compose exec photoprism photoprism convert</code> Regenerate Thumbnails <code>docker compose exec photoprism photoprism thumbs -f</code> Update Index <code>docker compose exec photoprism photoprism index --cleanup</code> Move to Originals <code>docker compose exec photoprism photoprism import [path]</code> Copy to Originals <code>docker compose exec photoprism photoprism cp [path]</code> <p>Note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p> <p>Complete Rescan</p> <p><code>docker compose exec photoprism photoprism index -f</code> rescans all originals, including already indexed and unchanged files. This may be necessary after major upgrades and after migrations of the database schema, especially if search results are missing or incorrect. Note you can also start a rescan from the user interface by navigating to Library &gt; Index, checking \"Complete Rescan\" and then clicking \"Start\". Manually entered information such as labels, people, titles or captions will not be modified when indexing, even if you perform a \"complete rescan\".</p> <ol> <li> <p>The default name for Docker Compose configuration files is <code>compose.yaml</code>. For simplicity, it does not need to be specified if you are running commands in the same directory. Config files for other applications and instances should be placed in separate folders.\u00a0\u21a9</p> </li> <li> <p>With the latest version of Docker Compose, the default config file name is <code>compose.yaml</code>, although the <code>docker compose</code> command still supports legacy <code>docker-compose.yml</code> files for backward compatibility.\u00a0\u21a9\u21a9</p> </li> </ol>"},{"location":"getting-started/docker/","title":"Running PhotoPrism with Docker","text":"<p>We recommend using Docker Compose because it is easier and provides more convenience for running multiple services than the pure Docker command-line interface. Before you proceed, make sure you have Docker installed on your system. It is available for Mac, Linux, and Windows.</p> <p>Alternatively, Podman is supported as a drop-in replacement for Docker on Red Hat-compatible Linux distributions like RHEL, CentOS, Fedora, AlmaLinux, and Rocky Linux.</p>"},{"location":"getting-started/docker/#step-1-start-the-server","title":"Step 1: Start the server","text":"LinuxPodman <p>Open a terminal and run this command to start the app after replacing <code>~/Pictures</code> with the folder containing your pictures:</p> <pre><code>docker run -d \\\n  --name photoprism \\\n  --security-opt seccomp=unconfined \\\n  --security-opt apparmor=unconfined \\\n  -p 2342:2342 \\\n  -e PHOTOPRISM_UPLOAD_NSFW=\"true\" \\\n  -e PHOTOPRISM_ADMIN_PASSWORD=\"insecure\" \\\n  -v /photoprism/storage \\\n  -v ~/Pictures:/photoprism/originals \\\n  photoprism/photoprism:latest\n</code></pre> <p>Open a terminal and run this command to start the app after replacing <code>~/Pictures</code> with the folder containing your pictures:</p> <pre><code>podman run -d \\\n  --name photoprism \\\n  --privileged \\\n  --security-opt seccomp=unconfined \\\n  --security-opt apparmor=unconfined \\\n  -p 2342:2342 \\\n  -e PHOTOPRISM_UPLOAD_NSFW=\"true\" \\\n  -e PHOTOPRISM_ADMIN_PASSWORD=\"insecure\" \\\n  -v /photoprism/storage \\\n  -v ~/Pictures:/photoprism/originals \\\n  photoprism/photoprism:latest\n</code></pre> <p>Please keep in mind to replace the <code>docker</code> command with <code>podman</code> when following the examples in our documentation.</p> <p>The server port and other config options can be changed as needed. If you provide no database server credentials, SQLite database files will be created in the storage folder. Note, however, that SQLite is not a good choice for users who require scalability and high performance. We therefore do not recommend using this example to set up a production environment without modifying it, e.g. to connect it to an existing MariaDB database instance.</p> <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible servers. There is no default in case no password was provided. A minimum length of 8 characters is required.</p> <p>Commands on Linux may have to be prefixed with <code>sudo</code> when not running as root. Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in volume mounts. Kernel security modules such as AppArmor and SELinux have been reported to cause issues.</p> <p>When the app has been started, open the Web UI by navigating to http://localhost:2342/. You should see a login screen. Sign in with the user <code>admin</code> and the password configured via <code>PHOTOPRISM_ADMIN_PASSWORD</code>. You may change it on the account settings page. Enabling public mode will disable authentication.</p> <p>It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting.</p> <p>Should the server already be running, or you see no errors, you may have started it on a different host and/or port. There could also be an issue with your browser, ad blocker, or firewall settings.</p> <p>You cannot change the password with <code>PHOTOPRISM_ADMIN_PASSWORD</code> after the app has been started for the first time. To change the admin password, run the <code>docker exec -ti photoprism photoprism passwd [username]</code> command in a terminal. You can also run <code>docker exec -ti photoprism photoprism reset</code> to delete the existing index database and start from scratch.</p>"},{"location":"getting-started/docker/#volumes","title":"Volumes","text":"<p>Since the app is running inside a container, you have to explicitly mount the host folders you want to use. PhotoPrism won't be able to see folders that have not been mounted. That's an important security feature.</p>"},{"location":"getting-started/docker/#photoprismoriginals","title":"/photoprism/originals","text":"<p>The originals folder contains your original photo and video files. They are mounted from <code>~/Pictures</code> in the example above, where <code>~</code> is a shortcut for your home directory.</p> <p>You may mount any folder accessible from the host instead, including network drives. Additional directories can be mounted as sub folders of <code>/photoprism/originals</code>:</p> <pre><code>-v ~/Example:/photoprism/originals/Example\n</code></pre> <p>When read-only mode is enabled, all features that require write permission to the originals folder are disabled, e.g. WebDAV, uploading and deleting files. To do this, add the <code>-e PHOTOPRISM_READONLY=\"true\"</code> command flag. You can additionally mount volumes with the <code>:ro</code> flag so that writes are also blocked by Docker.</p>"},{"location":"getting-started/docker/#photoprismstorage","title":"/photoprism/storage","text":"<p>SQLite, config, cache, backup, thumbnail and sidecar files are saved in the storage folder:</p> <ul> <li>a storage folder must always be mounted so that you do not lose these files after a restart or upgrade</li> <li>never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden</li> <li>we recommend placing the storage folder on a local SSD drive for best performance</li> <li>mounting symbolic links or using them inside the storage folder is currently not supported</li> </ul> <p>Using our example, an anonymous volume is created and mounted as storage folder. You can mount a specific host folder instead, just as with originals, which is better for production environments.</p> <p>Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/docker/#photoprismimport","title":"/photoprism/import","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates:</p> <ul> <li>imported files receive a canonical filename and will be organized by year and month</li> <li>never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files</li> </ul> <p>You can safely skip this. Adding files via Web Upload and WebDAV remains possible, unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/docker/#step-2-first-steps","title":"Step 2: First steps","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Easy, isn't it?</p>"},{"location":"getting-started/docker/#step-3-when-youre-done","title":"Step 3: When you're done...","text":"<p>You can stop PhotoPrism and start it again using the following commands:</p> <pre><code>docker stop photoprism\ndocker start photoprism\n</code></pre> <p>To remove the container completely:</p> <pre><code>docker rm -f photoprism\n</code></pre>"},{"location":"getting-started/docker/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/docker/#troubleshooting","title":"Troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value, depending on the CPU performance and number of cores</li> <li> Ensure that your server has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and resolve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/docker/#command-line-interface","title":"Command-Line Interface","text":""},{"location":"getting-started/docker/#introduction","title":"Introduction","text":"<p><code>photoprism help</code> lists all commands and config options available in the current version:</p> <pre><code>docker exec -ti photoprism photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>docker exec -ti photoprism photoprism backup --help\n</code></pre> <p>PhotoPrism's command-line interface is also well suited for job automation using a scheduler.</p> <p>When using Docker, you can prepend commands like <code>docker exec -ti [container] [command]</code> to run them in a container. Should this fail with no container found, make sure the container has been started and you have specified an existing container name or id.</p>"},{"location":"getting-started/docker/#opening-a-terminal","title":"Opening a Terminal","text":"<p>To open a terminal session, you can run the following (replace <code>$UID</code> with the user ID to be used or omit the <code>-u</code> flag altogether to open the terminal as root):</p> <pre><code>docker exec -ti -u $UID photoprism bash\n</code></pre> <p>Passing the <code>-ti</code> flag is important for interactive commands to work, for example if you need to confirm an action.</p>"},{"location":"getting-started/docker/#changing-the-user-id","title":"Changing the User ID","text":"<p>Specifying a user with the <code>-u</code> flag is possible for all commands you run with Docker. In the following examples, it is omitted for brevity. Note, however, that commands that you run without an explicit user ID might be executed as root. The currently supported user ID ranges are 0, 33, 50-99, 500-600, 900-1250, and 2000-2100.</p>"},{"location":"getting-started/docker/#examples","title":"Examples","text":"Action Command Start PhotoPrism <code>docker start photoprism</code> Stop PhotoPrism <code>docker stop photoprism</code> Download Update <code>docker pull photoprism/photoprism:latest</code> Uninstall <code>docker rm -f photoprism</code> View Logs <code>docker logs --tail=100 -f photoprism</code> Display Config Values <code>docker exec -ti photoprism photoprism show config</code> Show Migration Status <code>docker exec -ti photoprism photoprism migrations ls</code> Repeat Failed Migrations <code>docker exec -ti photoprism photoprism migrations run -f</code> Reset Database <code>docker exec -ti photoprism photoprism reset --yes</code> Backup Database <code>docker exec -ti photoprism photoprism backup -i -f</code> Restore Database <code>docker exec -ti photoprism photoprism restore -i -f</code> Change Password <code>docker exec -ti photoprism photoprism passwd [username]</code> Show User Management Commands <code>docker exec -ti photoprism photoprism users help</code> Reset User Accounts <code>docker exec -ti photoprism photoprism users reset --yes</code> Reset Sessions and Access Tokens <code>docker exec -ti photoprism photoprism auth reset --yes</code> Show Face Recognition Commands <code>docker exec -ti photoprism photoprism faces help</code> Index Faces <code>docker exec -ti photoprism photoprism faces index</code> Reset People &amp; Faces <code>docker exec -ti photoprism photoprism faces reset -f</code> Transcode Videos to AVC <code>docker exec -ti photoprism photoprism convert</code> Regenerate Thumbnails <code>docker exec -ti photoprism photoprism thumbs -f</code> Update Index <code>docker exec -ti photoprism photoprism index --cleanup</code> Move to Originals <code>docker exec -ti photoprism photoprism import [path]</code> Copy to Originals <code>docker exec -ti photoprism photoprism cp [path]</code> <p>You can alternatively use <code>podman</code> as a drop-in replacement for <code>docker</code> on Red Hat-compatible distributions.</p> <p>Complete Rescan</p> <p><code>docker exec -ti photoprism photoprism index -f</code> rescans all originals, including already indexed and unchanged files. This may be necessary after major upgrades and after migrations of the database schema, especially if search results are missing or incorrect. Note You can also start a rescan from the user interface by navigating to Library &gt; Index, checking \"Full Rescan\" and then clicking \"Start\". Manually entered information such as labels, people, titles or captions will not be modified when indexing, even if you perform a \"complete rescan\".</p>"},{"location":"getting-started/faq/","title":"Frequently Asked Questions","text":""},{"location":"getting-started/faq/#what-media-file-types-are-supported","title":"What media file types are supported?","text":"<p>PhotoPrism supports indexing, viewing, and converting most popular image, video and RAW formats, including JPEG, PNG, GIF, BMP, HEIF, HEIC, MP4, MOV, WebP, and WebM. TIFF is partially supported without extensions such as GeoTIFF.</p> <p>When indexing, a JPEG or PNG sidecar file is automatically created for videos and images in other formats, such as RAW or vector graphics. It is needed for thumbnail generation, image classification, and face detection. JPEG XL support is planned as soon as it is generally available and enough compatible tools exist.</p> <p>If installed, converting RAW files is possible with the following converters (our Docker image includes both):</p> <ul> <li>Darktable (supported cameras)</li> <li>RawTherapee (supported cameras)</li> </ul> <p>On a Mac, RAW files can also be converted with Sips (supported cameras). Our goal is to provide top-notch support for all RAW formats, regardless of camera make and model. Please let us know about any issues with a particular camera or file format.</p> <p>For maximum browser compatibility, video codecs and containers supported by FFmpeg can be transcoded to MPEG-4 AVC on demand, just as still images can be extracted for thumbnail creation.</p> <p>Make sure you have JSON sidecar files enabled if you have videos, live photos, and/or animated GIFs so that video-specific metadata such as codec, frames, and duration can be extracted, indexed, and searched.</p> <p>For a complete list of file formats and extensions, see our downloadable Feature Overview.</p> <p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have ExifTool enabled to extract metadata such as duration, resolution, and codec.</p>"},{"location":"getting-started/faq/#what-are-sidecar-files-and-where-do-i-find-them","title":"What are sidecar files and where do I find them?","text":"<p>A sidecar is a file that sits next to your main photo or video files and usually has the same name but a different extension:</p> <ul> <li><code>IMG_0123.mov</code></li> <li><code>IMG_0123.mov.jpg</code></li> <li><code>IMG_0123.json</code></li> </ul> <p>New sidecar files are saved in the storage folder by default, so the originals folder can be mounted read-only.</p> <p>Even if <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> is set to <code>\u201ctrue\u201d</code> or <code>PHOTOPRISM_SIDECAR_YAML</code> is set to <code>\u201cfalse\u201d</code>, the indexer will look for existing sidecar files and use them.</p>"},{"location":"getting-started/faq/#what-metadata-sidecar-file-types-are-supported","title":"What metadata sidecar file types are supported?","text":"<p>Currently, three types of file formats are supported:</p>"},{"location":"getting-started/faq/#json","title":"JSON","text":"<p>If not disabled via <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> or <code>--disable-exiftool</code>, ExifTool is used to automatically create a JSON sidecar for each media file. In this way, embedded XMP and video metadata can also be indexed. Native metadata extraction is limited to common Exif headers. Note that this causes small amount of overhead when indexing for the first time.</p> <p>JSON files can also be useful for debugging, as they contain the full metadata and can be processed with common  development tools and text editors.</p> <p>JSON files exported from Google Photos can be read as well. Support for more schemas may be added over time.</p>"},{"location":"getting-started/faq/#yaml","title":"YAML","text":"<p>Unless disabled by setting the <code>PHOTOPRISM_SIDECAR_YAML</code> option to <code>\"false\"</code> in your configuration, PhotoPrism automatically creates/updates human-friendly YAML sidecar files during indexing and after manual editing of fields such as title, date, or location. They serve as a backup in case the database (index) is lost, or when folders are synchronized with a remote instance.</p> <p>Like JSON, YAML files can be opened with common development tools and  text editors. However, changes are not synchronized with the original index, as this could overwrite existing data.</p>"},{"location":"getting-started/faq/#xmp","title":"XMP","text":"<p>XMP (Extensible Metadata Platform) is an XML-based metadata container format developed by Adobe. It provides many more fields (as part of embedded models like Dublin Core) than Exif. This also makes it difficult - if not  impossible - to provide full support. Reading title, copyright, artist, and caption from XMP sidecar files is  implemented as a proof-of-concept, contributions are welcome. Indexing of  embedded XMP is only possible via ExifTool, see above.</p>"},{"location":"getting-started/faq/#does-your-software-depend-on-any-external-services","title":"Does your software depend on any external services?","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p> <p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow incoming requests as well as those to our Geocoding API and Docker if you have a firewall installed, and make sure that your Internet connection is working:</p> <p></p>"},{"location":"getting-started/faq/#why-do-i-see-connection-errors-when-requesting-api-keys-at-startup","title":"Why do I see connection errors when requesting API keys at startup?","text":"<p>Retrieving location data with reverse geocoding and loading the interactive world maps we provide requires a connection to external services. Please make sure that requests to these API endpoints are allowed if you have a firewall installed, and that your internet connection is working.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#are-the-keys-for-using-interactive-world-maps-provided-free-of-charge","title":"Are the keys for using interactive world maps provided free of charge?","text":"<p>All users have access to a high-resolution vector map that we host on our own infrastructure, so no commercial API key is required. It is based on data published by OpenStreetMap (OSM).</p> <p>In addition, we automatically provide our members and business customers with an API key for MapTiler's commercial service, which includes satellite, outdoor and 3D maps. You can test these on our public demo.</p> <p>Learn more \u203a</p> <p>Although experienced users could alternatively register test accounts with a commercial provider to gain access to additional map styles instead of signing up for a membership, we believe this would not be fair. Keep in mind that we have a much larger user base than others who might encourage their users to do so, and that providers might then stop offering free test accounts, which is something we don't want to be responsible for.</p>"},{"location":"getting-started/faq/#why-dont-you-use-the-free-map-tile-service-provided-by-openstreetmap","title":"Why don't you use the free map tile service provided by OpenStreetMap?","text":"<p>Other free and open-source software sometimes uses the public maps that OpenStreetMap provides for development and testing. These are not intended for end-user applications like ours.</p> <p>Using their service also means that their usage and privacy policies apply, as your request data is stored and used to generate publicly available reports. This differs from our services, which ensure a high level of privacy and provide a better user experience with faster loading times.</p>"},{"location":"getting-started/faq/#how-can-i-activate-my-membership","title":"How can I activate my membership?","text":"<p>To connect a new instance to your membership account, you will need to log in with the super admin user that is automatically created during setup (see your <code>compose.yaml</code> or <code>docker-compose.yml</code> file or the app store documentation), and then follow the steps described in our activation guide.</p> <p>View Activation Guide \u203a</p>"},{"location":"getting-started/faq/#what-are-the-advantages-of-purchasing-a-commercial-license","title":"What are the advantages of purchasing a commercial license?","text":"<p>A key difference between the public license and a commercial license agreement is that you get access to additional support and configuration options, as well as the right to customize functionality to your needs without having to publicly disclose your changes. Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.</p> <p>Compare Team Editions \u203a</p>"},{"location":"getting-started/faq/#will-the-self-hosted-version-continue-to-be-supported","title":"Will the self-hosted version continue to be supported?","text":"<p>Absolutely! We are on a mission to protect your freedom and privacy. Self-hosting is the easiest way to stay in control and protect your privacy. It also provides the best experience for advanced users who often rely on a local toolchain to select, edit, and publish their pictures.</p> <p>At the same time, we know there's a huge demand and many practical uses for a cloud-hosted app that is easy to set up. We like to give our users the choice and therefore offer a fully managed service as a deployment option. Selected hosting partners ensure that your privacy is protected as much as technically possible, even in the cloud.</p>"},{"location":"getting-started/faq/#will-jpegs-be-updated-when-the-related-raw-or-xmp-files-change","title":"Will JPEGs be updated when the related RAW or XMP files change?","text":"<p>JPEGs are currently not regenerated when related RAW or XMP files change. RAW files are digital negatives by design. PhotoPrism therefore assumes that their image information is immutable.</p> <p>XMP files can affect the appearance, but most of the metadata they contain, such as title and caption, does not. Creating JPEGs from RAW files is a time-consuming task, and in most cases would cause a huge, unjustified amount of overhead. In addition, the rendering information in XMP files is not well standardized. For example, changes you make in Photoshop may not be compatible with Darktable.</p> <p>We recommend manually updating existing JPEG sidecar files as needed or creating additional JPEGs, so you can choose between different versions. New files and other metadata changes are detected and reflected in the index as usual when your library is scanned.</p>"},{"location":"getting-started/faq/#which-folder-will-be-indexed","title":"Which folder will be indexed?","text":"<p>This depends on your environment and configuration. While sub folders can be selected for indexing in the UI, changing the originals base folder requires a restart for security reasons.</p> <p>If you skip configuration and don't use one of our Docker images, PhotoPrism will attempt to find a photo library by searching a list of common folder names such as <code>/photoprism/originals</code> and <code>~/Pictures</code>. It also searches for other resources such as external applications, classification models, and frontend assets.</p> <p>If you use our Docker Compose example without modifications, pictures will be mounted from <code>~/Pictures</code> where <code>~</code> is a shortcut for your home directory:</p> <ul> <li><code>\\user\\username</code> on Windows</li> <li><code>/Users/username</code> on macOS</li> <li>and <code>/root</code> or <code>/home/username</code> on Linux</li> </ul> <p>Since the app is running inside a container, you have to explicitly mount the host folders you want to use. PhotoPrism won't be able to see folders that have not been mounted. Multiple folders can be made accessible by mounting them as sub folders of <code>/photoprism/originals</code>, for example:</p> <pre><code>volumes:\n  - \"/home/username/Pictures:/photoprism/originals\"\n  - \"/example/friends:/photoprism/originals/friends\"\n  - \"/mnt/photos:/photoprism/originals/media\"\n</code></pre>"},{"location":"getting-started/faq/#can-i-use-fat32-and-exfat-formatted-drives","title":"Can I use FAT32 and ExFAT formatted drives?","text":"<p>Photos and videos can be mounted from FAT-formatted drives, such as an external SSD. Our tests have shown that PhotoPrism and MariaDB can also be started from there. However, at least on macOS, the logs may occasionally show directory access errors and you will be forced to restart if problems occur.</p>"},{"location":"getting-started/faq/#i-cant-find-a-download-link-to-install-your-software-on-windows","title":"I can't find a download link to install your software on Windows?","text":"<p>PhotoPrism depends on a number of other open source tools and applications, such as Darktable, RawTherapee, and FFmpeg. While you can install them directly on Windows, it's a lot of work and we don't have the capacity to test the respective Windows versions before each release.</p> <p>We therefore recommend to use Docker, so you can take advantage of our pre-built and QA-tested Docker image, which includes all the dependencies you need. It is a well-tested standard tool that also lets you run many other self-hosted apps without having to worry about the details or Windows-specific issues. To further simplify the setup for you, we offer a batch script that you can run in the directory where you want to install PhotoPrism:</p> <pre><code>curl.exe -o install.bat https://dl.photoprism.app/docker/windows/install.bat\ninstall.bat\n</code></pre> <p>This will automatically download all required config files and start the server for you. Before you run the script, make sure you have Docker Desktop installed on your Windows PC.</p>"},{"location":"getting-started/faq/#how-can-i-install-photoprism-without-docker","title":"How can I install PhotoPrism without Docker?","text":""},{"location":"getting-started/faq/#installation-packages","title":"Installation Packages","text":"<p>Experienced users can use the packages available at dl.photoprism.app/pkg/linux/ to install PhotoPrism on compatible Linux distributions, e.g. by running the following commands:</p> <pre><code>sudo mkdir -p /opt/photoprism\ncd /opt/photoprism\nwget -c https://dl.photoprism.app/pkg/linux/amd64.tar.gz -O - | sudo tar -xz\nsudo ln -sf /opt/photoprism/bin/photoprism /usr/local/bin/photoprism\nphotoprism --version\n</code></pre> <p>Note that these packages must be updated manually, do not come with a default configuration, and do not include the system dependencies required to make use of all the features. The minimum required glibc version is 2.35, so for example Ubuntu 22.04 and Debian Bookworm will work, but older Linux distributions may not be compatible.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#arch-linux-packages","title":"Arch Linux Packages","text":"<p>Thomas Eizinger maintains AUR packages for installation on Arch Linux. These are based on the pre-built installation packages we provide and have a systemd integration so that PhotoPrism can be started and restarted automatically.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#lxc-images","title":"LXC Images","text":"<p>There are currently no official LXC images available from us. However, you can use our installation packages together with the documentation we provide to set them up in a base image of your choice.</p> <p>Since Docker and LXC are pretty much the same technology, you can also convert our Docker image to the LXC format, e.g. with the following commands:</p> <pre><code>apt update\napt install lxc umoci skopeo\nlxc-create photoprism -t oci -- --url docker://photoprism/photoprism:latest\n</code></pre> <p>PhotoPrism can then be configured and started like any other LXC container:</p> <pre><code>lxc-start --name=photoprism -- /opt/photoprism/bin/photoprism start\n</code></pre> <p>Please note, though, that the network, storage and database configuration requires detailed knowledge of LXC. We therefore only recommend this approach if you can complete the setup without help from our documentation or support from our team.</p>"},{"location":"getting-started/faq/#bsd-ports","title":"BSD Ports","text":"<p>For FreeBSD and TrueNAS CORE (formerly FreeNAS) users, an unofficial port is available that builds PhotoPrism from source. It will also compile and install the required TensorFlow libraries for you.</p>"},{"location":"getting-started/faq/#building-from-source","title":"Building From Source","text":"<p>You can alternatively build and install PhotoPrism from the publicly available source code, which includes all the Community Edition features and most of the Essentials features (except additional user roles):</p> <pre><code>git clone https://github.com/photoprism/photoprism.git\ncd photoprism\nmake all install DESTDIR=/opt/photoprism\n</code></pre> <p>When choosing this installation method, missing build and system dependencies must be installed manually, as shown in our human-readable and versioned Dockerfiles. Since you often don't need to use the exact same versions, you can replace most packages with those available in your environment.</p> <p>Please be aware, though, that we do not have the resources to provide support and special dependencies, such as TensorFlow libraries, to private users who choose to build from source. If possible, we recommend using Docker Compose or the installation packages we provide, as they can save a lot of time creating and troubleshooting custom builds.</p> <p>PhotoPrism Plus</p> <p>If you are a Plus, Silver, Gold or Platinum member and would like to build from source, please let us know so we can give you access to our private extension repository and provide assistance.</p>"},{"location":"getting-started/faq/#what-are-the-benefits-of-using-docker","title":"What are the benefits of using Docker?","text":"<p>(1) Docker uses standard features of the Linux kernel. Containers are nothing new; Solaris Zones were released about 20 years ago and the chroot system call was introduced during development of Version 7 Unix in 1979. It is used ever since for hosting applications exposed to the public Internet. Modern Linux containers are an incremental improvement of this, based on standard functionality that is part of the kernel.</p> <p>(2) Docker saves time through simplified deployment and testing. A main advantage of Docker is that application images can be easily made available to users via Internet. It provides a common standard across most operating systems and devices, which saves our team a lot of time that we can then spend more effectively, for example, providing support and developing one of the many features that users are waiting for.</p> <p>(3) Dockerfiles are part of the source code repository. Human-readable and versioned Dockerfiles that are part of our public source code help avoid \"works for me\" moments and other unwelcome surprises by enabling us to have the exact same environment everywhere in development, staging, and production.</p> <p>(4) Running applications in containers is more secure. Last but not least, virtually all file format parsers have vulnerabilities that just haven't been discovered yet. This is a known risk that can affect you even if your computer is not directly connected to the Internet. Running apps in a container with limited host access is an easy way to improve security without compromising performance and usability.</p> <p>A virtual machine with a dedicated operating system environment provides even more security, but usually has side effects such as lower performance and more difficult handling. Using a VM, however, doesn't prevent you from running containerized apps to get the best of both worlds. This is essentially what happens when you install Docker on virtual cloud servers and operating systems other than Linux.</p>"},{"location":"getting-started/faq/#what-can-i-do-if-the-docker-container-fails-with-an-s6-overlay-error","title":"What can I do if the Docker container fails with an S6 overlay error?","text":"<p>A container startup error similar to the following indicates that you are using a custom service configuration that is incompatible with our Docker images:</p> <pre><code>/package/admin/s6-overlay/libexec/preinit:\nfatal: /run belongs to uid 0 instead of 100\nand we're lacking the privileges to fix it.\n</code></pre> <p>In particular, this can happen if you have specified an unsupported user or group ID through the optional <code>user</code> property in your <code>compose.yaml</code> file to run the service, and at the same time added <code>no-new-privileges</code> to the <code>security_opt</code> section.</p> <p>The supported ID ranges for running our container images are as follows:</p> <ul> <li>UID: 0, 33, 50-99, 500-600, 900-1250, and 2000-2100</li> <li>GID: 0, 33, 44, 50-99, 105, 109, 115, 116, 500-600, 900-1250, and 2000-2100</li> </ul> <p>Please also check if you have specified both a <code>user</code> service property and the corresponding <code>environment</code> variables to set the user and/or group ID under which the \"photoprism\" service should run, as this is neither required nor recommended:</p> <pre><code>services:\n  photoprism:\n    user: \"1000:1000\"\n    environment:\n      PHOTOPRISM_UID: 1000\n      PHOTOPRISM_GID: 1000\n</code></pre> <p>If you need maximum security and do not want to perform any additional startup actions that require root privileges, you can alternatively set the entrypoint and command for the \"photoprism\" service as follows:</p> <pre><code>services:\n  photoprism:\n    restart: unless-stopped\n    entrypoint: [\"/opt/photoprism/bin/photoprism\"]\n    command: [\"start\"]\n</code></pre> <p>The default entrypoint script can install additional distribution packages, fix file system permissions, and/or change the UID/GID for the \"photoprism\" service, as some NAS devices, for example, do not support this from their user interface. So, bypassing it as shown above will disable this functionality and is only recommended for advanced users who are familiar with running container services.</p> <p>Learn more \u203a</p> <p>If you are experiencing a similar problem with a custom configuration that we did not provide or recommend, please try changing it to see if that helps before asking our team or community members for support. \ud83d\udedf</p>"},{"location":"getting-started/faq/#why-does-your-docker-image-use-the-plus-license-instead-of-the-agpl","title":"Why does your Docker image use the Plus License instead of the AGPL?","text":"<p>Our Plus License is used for both the extensions we provide to our members and the standard Docker images available on Docker Hub. This allows us to bundle the extensions with the compiled application, while the Community Edition remains freely available under the terms of the GNU Affero General Public License (AGPL).</p> <p>If you don't plan to use any additional features, you can alternatively use the \"ce\" tag instead of \"latest\" to get a slightly smaller Docker image distributed under the AGPL. Note that system dependencies and other third-party components included in this image are still subject to additional terms and conditions.</p> <p>View Open Source FAQ \u203a View Plus License \u203a</p>"},{"location":"getting-started/faq/#should-i-use-sqlite-mariadb-or-mysql","title":"Should I use SQLite, MariaDB, or MySQL?","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Official support for MySQL 8 has been discontinued as Oracle seems to have stopped shipping new features and enhancements.</p> <p>If you only have few pictures, concurrent users, and CPU cores, SQLite may seem faster compared to full-featured database servers like MariaDB. This changes as the index grows and the number of concurrent accesses increases. While MariaDB is optimized for high concurrency, SQLite frequently locks its index so that other operations have to wait. In the worst case, this can lead to locking errors and timeouts during indexing - especially in combination with a slow disk or network storage.</p> <p>The main advantage of SQLite is that you don't need to run a separate database server. It is therefore well suited for testing and can also be sufficient for small libraries with a few thousand files. If you are looking for scalability and high performance, it is not a good choice.</p>"},{"location":"getting-started/faq/#is-database-corruption-a-common-problem-with-self-hosting","title":"Is database corruption a common problem with self-hosting?","text":"<p>The likelihood of database corruption is generally very low if you follow our documentation. Our team runs many instances/databases and has never had any issues over the years.</p> <p>However, if you run MariaDB or SQLite on a network drive or an external drive/stick that e.g. has been accidentally removed, it can happen. This is why our documentation explicitly warns about the danger of using unreliable storage for database files.</p> <p>Some users also configure a named or anonymous Docker volume for the database, or mount the wrong path so that their index is lost when they recreate the database container, e.g. after an update of the Docker image.</p>"},{"location":"getting-started/faq/#ive-configured-an-external-database-but-cant-connect","title":"I've configured an external database, but can't connect?","text":"<p>Most often this happens when new users configure <code>localhost</code> or <code>127.0.0.1</code> as database server host, since these always point back to the current container or computer. So it is not possible to access an external service with such a hostname or an IP address starting with 127. It works only if it is used directly in the container or on the computer where the database server is running. Instead, you must use a hostname or IP address that is accessible from other machines and containers.</p> <p>Resolve Connection Issues \u203a</p>"},{"location":"getting-started/faq/#how-can-i-determine-the-public-ip-address-of-my-home-network","title":"How can I determine the public IP address of my home network?","text":"<p>You can use one of the following services to view your public IP address, i.e. the IP address that the computers in your home network use to communicate with the Internet:</p> <ul> <li>https://api.ipify.org/</li> <li>https://canhazip.com/</li> </ul>"},{"location":"getting-started/faq/#why-is-my-configured-memory-limit-exceeded-when-indexing-even-though-photoprism-doesnt-actually-seem-to-use-that-much-memory","title":"Why is my configured memory limit exceeded when indexing, even though PhotoPrism doesn't actually seem to use that much memory?","text":"<p>When indexing a media library, many files are opened and processed very quickly, which is not a typical workload compared to other containerized applications and services. Various libraries and external applications simultaneously interact with each other in complex ways, so a few spikes are inevitable. Some memory is also used by the kernel for buffered I/O to improve performance, although the extent to which caching counts towards a limit may vary.</p> <p>We therefore recommend not to set a hard memory limit, unless you are familiar with memory management and understand the implications. Instead, you should reduce the number of indexing workers and limit file size and resolution if you are low on resources or want to limit memory usage for other reasons. Also make sure you have at least 4 GB of swap configured.</p> <p>View System Requirements \u203a Get Performance Tips \u203a</p>"},{"location":"getting-started/faq/#why-does-photoprism-always-consume-100-of-cpu-when-the-background-worker-is-running","title":"Why does PhotoPrism always consume 100% of CPU when the background worker is running?","text":"<p>Many users reporting poor performance and high CPU load have migrated from SQLite to MariaDB so that their database schema is not optimized for performance, for example, because indexes are missing or columns have the wrong data type. The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>In some instances, users have manually changed the contents of the database. It is also possible that the database is in an inconsistent state for other reasons, e.g. due to bugs in previous versions that have been fixed in the meantime. However, we are not currently aware of any such cases.</p> <p>Due to the amount of time required to review each report, we can only offer this to eligible members and business customers, and not to users who have chosen our free community edition.</p> <p>Get Performance Tips \u203a View Database Schema \u203a</p>"},{"location":"getting-started/faq/#can-you-improve-performance-when-using-older-or-otherwise-slow-hardware","title":"Can you improve performance when using older or otherwise slow hardware?","text":"<p>It is a known issue that the user interface and backend operations, especially face recognition, can be slow or even crash on older hardware due to a lack of resources. Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p> <p>In many cases, performance can be improved through optimizations. Since these can prove to be very time-consuming and cost-intensive in practice, users and developers must decide on a case-by-case basis whether this provides sufficient benefit in relation to the costs or whether the use of more powerful hardware is faster and cheaper overall.</p> <p>We kindly ask you not to open a problem report on GitHub Issues for poor performance on older hardware until a full cause and feasibility analysis has been performed. GitHub Discussions or any of our other public forums and communities are great places to start a discussion.</p> <p>That being said, one of the advantages of open-source software is that users can submit pull requests with performance and other enhancements they would like to see implemented. This will result in a much faster solution than waiting for a core team member to remotely analyze your problem and then provide a fix.</p>"},{"location":"getting-started/faq/#is-a-raspberry-pi-fast-enough","title":"Is a Raspberry Pi fast enough?","text":"<p>This mainly depends on your expectations and the number of files you have. Most users report that PhotoPrism runs smoothly on a Raspberry Pi 4 with 4 GB of RAM.</p> <p>Note, however, that initial indexing usually takes much longer than on a regular desktop computer and that the hardware has limited video transcoding capabilities, so video file format conversion is not well supported and software transcoding is generally slow. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/faq/#should-i-use-an-sd-card-or-a-usb-stick","title":"Should I use an SD card or a USB stick?","text":"<p>Due to their performance and because they can lose data over time, we do not recommend using conventional SD cards, USB sticks or external USB 2 hard disk drives to store your files, except for backups.</p> <p>External Solid-State Drives (SSD) connected via USB 3 are generally reliable and fast enough to keep your originals, database, and storage folders. This way you can, for example, do the indexing on one computer, eject the drive, and then connect it to another computer to browse your pictures.</p> <p>Note, though, that database files may not be binary compatible in some cases (e.g. if the version or computer architecture does not match) and could also get corrupted when you disconnect an external drive before all changes have been written to disk. We therefore recommend that you regularly create database backups, so you can easily restore your index if necessary.</p> <p>View Backup Guide \u203a</p>"},{"location":"getting-started/faq/#why-dont-you-display-animated-gifs-natively","title":"Why don't you display animated GIFs natively?","text":"<p>Support for animated GIFs was added in April 2022.</p>"},{"location":"getting-started/faq/#why-is-my-storage-folder-so-large-what-is-in-it","title":"Why is my storage folder so large? What is in it?","text":"<p>The storage folder contains sidecar, cache, and configuration files. It may also contain index database files if you are using SQLite. Most of the space there is taken up by your thumbnails: These are high-quality, scaled-down versions of your originals. Thumbnails are necessary because web browsers are bad at resizing large images to fit the screen. Using full-resolution originals for slideshows and in search results would also consume a lot of browser memory and significantly reduce indexing performance.</p> <p>We are working to implement storage optimizations whenever there is an opportunity. It is also possible to increase the JPEG compression and/or limit the resolution if you are happy with lower quality thumbnails.</p> <p>To free up as much space as possible, the most effective way is to delete all files in the <code>/cache/thumbnails</code> storage folder. It is located outside the originals folder by default, depending on your configuration. Then perform a full rescan of your library or run the command <code>photoprism thumbs -f</code> in a terminal if you have direct server access. This command can also be used to replace existing thumbnails, for example after changing the quality settings. Higher resolution thumbnails cannot be automatically removed at this time.</p> <p>If you have a fast CPU and enough memory, you can choose to render certain thumbnails only on demand. However, storage is usually so cheap that most users opt for better quality and performance instead.</p> <p>Actual storage requirements vary and depend, among other things, on file resolutions and formats (RAW, JPEG, video,...). For highly compressed, high-resolution videos in modern formats that cannot be displayed natively by browsers, the storage folder may even be larger than the originals, since videos transcoded to AVC are not as heavily compressed.</p> <p>Change Settings \u203a</p>"},{"location":"getting-started/faq/#can-i-skip-creating-thumbnails-completely","title":"Can I skip creating thumbnails completely?","text":"<p>The smallest configurable size is 720px for use by the indexer to perform color detection, image classification, as well as face detection and recognition. Recreating them every time they are needed is too demanding even for the most powerful servers. Unless you have just a few small pictures, this would make the app unusable.</p> <p>Reducing the Static Size Limit of thumbnails has a significant impact on face recognition and image classification results. Simply put, it means that the indexer can no longer see properly.</p>"},{"location":"getting-started/faq/#when-should-i-perform-a-complete-rescan","title":"When should I perform a complete rescan?","text":"<p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\". Manually entered information such as labels, people, titles or captions will not be modified when indexing, even if you perform a \"complete rescan\". Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/faq/#how-can-i-shorten-the-startup-time-after-a-restart-or-update","title":"How can I shorten the startup time after a restart or update?","text":"<p>To reduce startup time, do not set <code>PHOTOPRISM_INIT</code> to avoid running additional setup scripts, and set <code>PHOTOPRISM_DISABLE_CHOWN</code> to <code>\"true\"</code> to disable automatic permission updates.</p> <p>View Config Options \u203a</p> <p>If your instance doesn't start even after waiting for some time, our Troubleshooting Checklists help you quickly diagnose and solve the problem.</p>"},{"location":"getting-started/faq/#why-are-files-uploaded-via-webdav-not-indexedimported-immediately","title":"Why are files uploaded via WebDAV not indexed/imported immediately?","text":"<p><code>PHOTOPRISM_AUTO_INDEX</code> and <code>PHOTOPRISM_AUTO_IMPORT</code> let you specify how long PhotoPrism should wait before indexing or importing newly uploaded files. The default setting is 300 seconds, or 5 minutes. This is a safety mechanism for users with slow uploads to avoid incomplete file sets, for example when uploading pictures with sidecar files. You can therefore reduce the delay if you have a fast connection and usually do not upload stacks of related files such as RAW images with sidecar JPEG and XMP files.</p> <p>In some cases, it is also possible that the index is already being updated, so you will have to wait until the process is complete before indexing new files.</p>"},{"location":"getting-started/faq/#im-having-issues-understanding-the-difference-between-the-import-and-originals-folders","title":"I'm having issues understanding the difference between the import and originals folders?","text":"<p>You may optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates. Imported files receive a canonical filename and will be organized by year and month.</p> <p>Most users with existing photo libraries will want to index their originals folder directly without importing files, leaving the existing file and folder names unchanged. On the other hand importing is an efficient way to add files, since PhotoPrism doesn't have to search your originals folder to find new files.</p> <p>View First Steps \ud83d\udc63 \u203a</p>"},{"location":"getting-started/faq/#can-i-use-photoprism-to-sort-files-into-a-configurable-folder-structure","title":"Can I use PhotoPrism to sort files into a configurable folder structure?","text":"<p>You have complete freedom in how you name your files and folders. So if you don't like the unique names and folders used by the import feature, you can instead use external tools like ExifTool, PhockUp, or Photo Organizer to reorganize your files based on their metadata.</p> <p>In addition, starting with the next release, advanced users will be able to configure the import destination file path pattern through the <code>settings.yml</code> config file. However, this will not (yet) allow you to rename files that have already been imported, as this may cause conflicts with other tools or instances that may be accessing your files. Renaming existing files may also result in storage and/or transfer overhead with backup tools that do not recognize that files have been moved, i.e. they may create and/or transfer a new backup copy.</p> <p>Thad said, we will consider adding an integrated file renaming feature once we have had time to test possible implementations for usability, performance, and security.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#why-is-only-the-logo-displayed-when-i-open-the-app","title":"Why is only the logo displayed when I open the app?","text":"<p>This may happen when the server cannot be reached, for example, because a proxy is misconfigured, JavaScript is disabled in your browser, an ad blocker is blocking requests, or you are using an incompatible browser.</p> <p>We recommend going through the checklist provided and to verify that your browser meets the system requirements.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#why-is-photoprism-getting-stuck-in-a-restart-loop","title":"Why is PhotoPrism getting stuck in a restart loop?","text":"<p>This happens when Docker was configured to automatically restart services after failures.</p> <p>We recommend going through the checklist for fatal server errors and to verify that your computer meets the system requirements.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#can-i-install-photoprism-in-a-sub-directory-on-a-shared-domain","title":"Can I install PhotoPrism in a sub-directory on a shared domain?","text":"<p>Setting up PhotoPrism behind a reverse proxy in a sub-directory on a shared domain is possible in principle. This method is experimental, however, and not generally recommended because a number of detailed issues remain to be addressed and technical expertise is required.</p>"},{"location":"getting-started/faq/#i-could-not-find-a-documentation-of-config-parameters","title":"I could not find a documentation of config parameters?","text":"<p>We maintain a complete list of config options in Getting Started. When you run <code>photoprism help</code> in a terminal,  all commands and parameters available in your currently installed version  are listed:</p> <pre><code>docker compose exec photoprism photoprism help\n</code></pre> <p>Our Docker Compose examples are continuously  updated and inline documentation has been added to simplify installation.</p>"},{"location":"getting-started/faq/#what-exactly-does-the-read-only-mode","title":"What exactly does the read-only mode?","text":"<p>When read-only mode is enabled, all features that require write permission to the originals folder are disabled, e.g. WebDAV, uploading and deleting files. To do this, set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in the <code>environment</code> section of your <code>compose.yaml</code> file. You can additionally mount volumes with the <code>:ro</code> flag so that writes are also blocked by Docker.</p>"},{"location":"getting-started/faq/#in-which-cases-could-files-in-the-originals-folder-get-modified","title":"In which cases could files in the originals folder get modified?","text":"<p>PhotoPrism generally does not write to the originals folder, with the following exceptions: (1) You rotate an image in the user interface, so its Exif header must be updated. (2) You unstack files that were stacked based on their name, so they must be renamed. (3) You add files using the import functionality or the web upload. (4) You manually delete files in the user interface. (5) You have configured the originals folder as your sidecar folder. (6) You access the originals folder with a WebDAV client to manage your files without having read-only mode enabled.</p>"},{"location":"getting-started/faq/#how-can-i-uninstall-photoprism","title":"How can I uninstall PhotoPrism?","text":"<p>This depends on how you installed it. If you're running PhotoPrism with Docker Compose,  this command will stop and remove the Docker container:</p> <pre><code>docker compose rm -s -v\n</code></pre> <p>Please refer to the official Docker documentation  for further details.</p>"},{"location":"getting-started/faq/#how-can-i-mount-network-shares-with-docker","title":"How can I mount network shares with Docker?","text":"<p>Shared folders that have already been mounted on your host under a drive letter or path can be used with Docker containers like any other directory. In addition, certain types of network storage like NFS (Unix/Linux) and CIFS (Windows/Mac) can also be mounted directly with Docker Compose.</p> <p>For more information, see the Network Storage section of our Docker Troubleshooting Guide.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#why-does-changing-permissions-using-chmod-not-work-for-my-network-shares","title":"Why does changing permissions using chmod not work for my network shares?","text":"<p>This is a common issue with NFS shares. For security reasons, the permissions must be changed on the server for them to take effect, unless the server allows them to be changed remotely, which depends on the settings. Even then, in the worst case, the actual permissions on the server and the effective ones on the clients may be different.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#do-you-support-podman","title":"Do you support Podman?","text":"<p>Podman works just fine both in rootless and under root. Mind the SELinux which is enabled on  Red Hat compatible systems, you may hit permission error problems. </p> <p>More details on how to run PhotoPrism with Podman on CentOS in  this blog post,  it includes all the details including root and rootless modes, user mapping and SELinux.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#do-you-have-plans-to-add-support-for-ldap-or-active-directory","title":"Do you have plans to add support for LDAP or Active Directory?","text":"<p>PhotoPrism offers support for secure single sign-on via OpenID Connect (OIDC). With our Pro Edition, you can also configure an LDAP or Active Directory server to authenticate users.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#is-it-possible-to-set-a-default-role-for-new-openid-connect-users","title":"Is it possible to set a default role for new OpenID Connect users?","text":"<p>For security reasons, our Personal Editions currently default to the Guest role, which admins can then upgrade after checking the eligibility of newly registered<sup>1</sup> accounts.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#can-i-configure-a-custom-claim-as-the-preferred-oidc-username","title":"Can I configure a custom claim as the preferred OIDC username?","text":"<p>You can choose between <code>preferred_username</code>, <code>name</code>, <code>nickname</code> and verified<sup>2</sup> <code>email</code>, where <code>preferred_username</code> is the default. The other claims are used as fallback if no value is returned for the configured claim.</p> <p>Please note that it is currently not possible to use other standard or non-standard claims, as these may not be suitable for generating a username and no logic is implemented for doing so.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/faq/#who-can-i-contact-if-i-have-a-complaint-about-your-software","title":"Who can I contact if I have a complaint about your software?","text":"<p>Please read this documentation and determine the cause of your problem before opening invalid, duplicate and/or incomplete bug reports, starting a public \"shitstorm\" or insulting other community members in our forums and chat rooms. Not only is this annoying for everyone, but it also keeps our team from working on features and improvements that our users are waiting for.</p> <p>Learn more \u203a</p> <p>Professional Users</p> <p>The feature set and support options of our Community Edition are intended for personal use. Enterprise users are welcome to contact us for a commercial license and professional services.</p> <ol> <li> <p><code>PHOTOPRISM_OIDC_REGISTER</code> must be set to <code>\"true\"</code> to allow new users to create an account via OpenID Connect.\u00a0\u21a9</p> </li> <li> <p>The <code>email_verified</code> flag must be set by the OIDC Identity Provider so that the <code>email</code> address can be used to send notifications and/or confirm the identity of users. If we do not insist on verification, this could otherwise have a negative impact on trust and security.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/raspberry-pi/","title":"Running PhotoPrism on a Raspberry Pi","text":"<p>Our stable releases and preview builds are available as multi-arch Docker images for 64-bit AMD, Intel, and ARM processors.<sup>1</sup> As a Raspberry Pi owner, you therefore get the exact same functionality and can follow the same installation steps after going through a short list of system requirements and architecture specific notes.</p> <p>PhotoPrismPi</p> <p>The easiest way to run PhotoPrism on a Raspberry Pi<sup>2</sup> is with PhotoPrismPi. Simply flash the image to an SD card, plug it into the Pi and boot it. After a few minutes, our latest release will be ready to use!</p>"},{"location":"getting-started/raspberry-pi/#system-requirements","title":"System Requirements","text":"<ul> <li>For a good user experience, we recommend running PhotoPrism on a Raspberry Pi 4 or 5 with at least 4 GB RAM and a 64-bit operating system</li> <li>High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum</li> <li>Indexing performance will benefit greatly from using SSD storage, e.g. connected via USB 3</li> <li>Ensure that your device has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files</li> <li>Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum; RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory</li> <li>You should enable HTTPS or run your server behind a secure HTTPS reverse proxy like Traefik if it is connected to a shared network or the public Internet</li> <li>Depending on the Linux distribution, you may need to set the following security options in your compose.yaml:   <pre><code>photoprism:\n  security_opt:\n    - seccomp:unconfined\n    - apparmor:unconfined\n</code></pre></li> </ul>"},{"location":"getting-started/raspberry-pi/#architecture-specific-notes","title":"Architecture Specific Notes","text":""},{"location":"getting-started/raspberry-pi/#modern-arm64-based-devices","title":"Modern ARM64-based Devices","text":"Image Name Stable Release <code>photoprism/photoprism:latest</code> Development Preview <code>photoprism/photoprism:preview</code> MariaDB <code>arm64v8/mariadb:11</code> <p>Running 64-bit Docker images under Raspbian Linux requires a minimum of technical experience to perform the necessary configuration changes. This is because it is a 32-bit operating system with merely a 64-bit kernel to ensure compatibility with legacy software.  If you don't need compatibility with 32-bit apps, we recommend choosing a standard 64-bit Linux distribution instead as it will save you time and requires less experience:</p> <ul> <li>Raspberry Pi Debian</li> <li>Ubuntu for Raspberry Pi</li> <li>UbuntuDockerPi is a 64-bit Ubuntu Server with Docker pre-configured</li> </ul> <p>Other distributions that target the same use case as Raspbian, such as CoreELEC, will have similar issues and should therefore also be avoided to run modern server applications.</p>"},{"location":"getting-started/raspberry-pi/#raspberry-pi-os","title":"Raspberry Pi OS","text":"<p>To ensure compatibility with 64-bit Docker images, your Raspberry Pi must boot with the <code>arm_64bit=1</code> flag in its config.txt file. An \"exec format\" error will occur otherwise.</p> <p>Try explicitly pulling the ARM64 version if you've booted your device with the <code>arm_64bit=1</code> flag  and you see the \"no matching manifest\" error on Raspberry Pi OS (Raspbian):</p> <pre><code>docker pull --platform=arm64 photoprism/photoprism:latest\n</code></pre> <p>It may also help to set the <code>DOCKER_DEFAULT_PLATFORM</code> environment variable to <code>linux/arm64</code>.</p> <p>In case you see Docker errors related to \"cgroups\", try adding the following parameters to  <code>/boot/firmware/cmdline.txt</code> or <code>/boot/cmdline.txt</code> (file location depends on the OS in use):</p> <pre><code>cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1\n</code></pre>"},{"location":"getting-started/raspberry-pi/#older-armv7-based-devices","title":"Older ARMv7-based Devices","text":"<p>You may use the following 32-bit Docker images to run PhotoPrism and MariaDB on ARMv7-based devices (always use our ARM64 image if possible):</p> Image Name Stable Release <code>photoprism/photoprism:armv7</code> Development Preview <code>photoprism/photoprism:preview-armv7</code> MariaDB <code>yobasystems/alpine-mariadb:latest</code> <p>If your device meets the requirements, mostly the same installation instructions as for regular Linux servers apply. However, you should pay close attention to differences in path and environment variable names.</p> <p>Darktable is not included in the ARMv7 image because it is not 32-bit compatible. Always choose the regular 64-bit version if your device supports it.</p>"},{"location":"getting-started/raspberry-pi/#is-a-raspberry-pi-fast-enough","title":"Is a Raspberry Pi fast enough?","text":"<p>This mainly depends on your expectations and the number of files you have. Most users report that PhotoPrism runs smoothly on a Raspberry Pi 4 with 4 GB of RAM.</p> <p>Note, however, that initial indexing usually takes much longer than on a regular desktop computer and that the hardware has limited video transcoding capabilities, so video file format conversion is not well supported and software transcoding is generally slow. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/raspberry-pi/#getting-updates","title":"Getting Updates","text":"<p>Open a terminal and change to the folder where your <code>compose.yaml</code> file is located.<sup>3</sup> Now run the following commands to download the newest image from Docker Hub and restart your instance in the background:</p> <pre><code>docker compose pull\ndocker compose stop\ndocker compose up -d\n</code></pre> <p>Pulling a new version can take several minutes, depending on your internet connection speed.</p> <p>Advanced users can add this to a <code>Makefile</code> so that they only have to type a single command like <code>make update</code>. See Command-Line Interface  to learn more about terminal commands.</p> <p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. You can either manually upgrade as shown above, or set up a service like Watchtower to get automatic updates.</p>"},{"location":"getting-started/raspberry-pi/#config-examples","title":"Config Examples","text":"<p>We recommend that you compare your own <code>compose.yaml</code> with our latest examples from time to time, as they may include new config options or other enhancements relevant to you.</p>"},{"location":"getting-started/raspberry-pi/#mariadb-server","title":"MariaDB Server","text":"<p>Our config examples are generally based on the latest stable release to take advantage of performance enhancements. This does not mean older versions are no longer supported and you have to upgrade immediately.</p> <p>If MariaDB fails to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. See Troubleshooting MariaDB Problems for instructions on how to fix this.</p>"},{"location":"getting-started/raspberry-pi/#troubleshooting","title":"Troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in your <code>compose.yaml</code> file, depending on the performance of your device<sup>3</sup></li> <li> Ensure that your device has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and resolve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p> <ol> <li> <p>Experienced users can alternatively use the packages at dl.photoprism.app/pkg/linux/ to manually install PhotoPrism on compatible Linux distributions. For more installation methods, see our Getting Started FAQ.\u00a0\u21a9</p> </li> <li> <p>PhotoPrismPi is based on Ubuntu Server.\u00a0\u21a9</p> </li> <li> <p>The default Docker Compose config filename is <code>compose.yaml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.\u00a0\u21a9\u21a9</p> </li> </ol>"},{"location":"getting-started/updates/","title":"Getting Updates","text":""},{"location":"getting-started/updates/#docker-compose","title":"Docker Compose","text":"<p>Open a terminal and change to the folder where your <code>compose.yaml</code> file is located.<sup>1</sup> Now run the following commands to download the newest image from Docker Hub and restart your instance in the background:</p> <pre><code>docker compose pull\ndocker compose stop\ndocker compose up -d\n</code></pre> <p>Note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p> <p>Pulling a new version can take several minutes, depending on your internet connection speed.</p> <p>Advanced users can add this to a <code>Makefile</code> so that they only have to type a single command like <code>make update</code>. See Command-Line Interface to learn more about terminal commands.</p> <p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. You can either manually upgrade as shown above, or set up a service like Watchtower to get automatic updates.</p>"},{"location":"getting-started/updates/#config-examples","title":"Config Examples","text":"<p>We recommend that you compare your own <code>compose.yaml</code> with our latest examples from time to time, as they may include new config options or other enhancements relevant to you.</p>"},{"location":"getting-started/updates/#development-preview","title":"Development Preview","text":"<p>You can test upcoming features and enhancements by changing the <code>photoprism/photoprism</code> image tag from <code>:latest</code> to <code>:preview</code> and then running the following commands to download the newest image from Docker Hub and restart your instance in the background:</p> <pre><code>docker compose pull\ndocker compose stop\ndocker compose up -d\n</code></pre> <p>Note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p>"},{"location":"getting-started/updates/#watchtower","title":"Watchtower","text":"<p>Adding Watchtower as a service to your <code>compose.yaml</code> or <code>docker-compose.yml</code> will automatically keep images up-to-date:</p> <pre><code>services:\n  watchtower:\n    image: containrrr/watchtower\n    restart: unless-stopped\n    volumes:\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n</code></pre> <p>Users of our DigitalOcean 1-Click App have Watchtower pre-installed.</p> <p>Danger</p> <p>Keep in mind that automatic updates can interrupt indexing and import operations, and enable Watchtower only if this is acceptable to you.</p>"},{"location":"getting-started/updates/#portainer","title":"Portainer","text":"<p>You can change or update the image you are using by navigating to \"Stacks\", selecting your existing PhotoPrism stack, and clicking \"Editor\":</p> <p></p> <p>When you have changed the configuration to your needs or just want to get the latest image from Docker Hub, scroll down, click on \"Update the stack\", enable the \"re-pull and redeploy\" option, and then click on \"Update\":</p> <p></p>"},{"location":"getting-started/updates/#pure-docker","title":"Pure Docker","text":"<p>Open a terminal and run the following to download the newest image from Docker Hub:</p> <pre><code>docker pull photoprism/photoprism:latest\n</code></pre> <p>Then stop and recreate the <code>photoprism</code> service based on the new image, for example:</p> <pre><code>docker stop photoprism\ndocker rm photoprism\ndocker run -d \\\n      --name photoprism \\\n      --security-opt seccomp=unconfined \\\n      --security-opt apparmor=unconfined \\\n      -p 2342:2342 \\\n      -e PHOTOPRISM_UPLOAD_NSFW=\"true\" \\\n      -e PHOTOPRISM_ADMIN_PASSWORD=\"insecure\" \\\n      -v /photoprism/storage \\\n      -v ~/Pictures:/photoprism/originals \\\n      photoprism/photoprism:latest\n</code></pre> <p>Learn more \u203a</p> <p>In order to simplify configuration and updates, we recommend using Docker Compose instead of Docker.</p>"},{"location":"getting-started/updates/#openmediavault","title":"OpenMediaVault","text":"<p>To upgrade your instance, first connect to the server running OpenMediaVault via SSH or open a terminal from the web interface, then download the newest image from Docker Hub and restart the service:</p> <pre><code>sudo podman pull docker.io/photoprism/photoprism:latest\nsudo systemctl restart pod-photoprism.service\n</code></pre> <p>Learn more \u203a</p>"},{"location":"getting-started/updates/#complete-rescan","title":"Complete Rescan","text":"<p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\". Manually entered information such as labels, people, titles or captions will not be modified when indexing, even if you perform a \"complete rescan\".</p> <p>Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/updates/#face-recognition","title":"Face Recognition","text":"<p>Existing users may index faces without performing a complete rescan:</p> <pre><code>docker compose exec photoprism photoprism faces index\n</code></pre> <p>Remove existing people and faces for a clean start e.g. after upgrading from our  development preview:</p> <pre><code>docker compose exec photoprism photoprism faces reset -f\n</code></pre>"},{"location":"getting-started/updates/#mariadb-server","title":"MariaDB Server","text":"<p>Our configuration examples are generally based on the current stable version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately.</p> <p>We recommend using a version or subversion tag, such as <code>:11</code> or <code>:11.8</code>, instead of <code>:latest</code>, to specify the MariaDB service image in your <code>compose.yaml</code> file, as shown in this example:</p> <pre><code>services:\n  mariadb:\n    image: mariadb:11.8\n    ...\n</code></pre> <p>You can then manually upgrade to new major versions by changing the image tag, e.g. from <code>mariadb:11</code> to <code>mariadb:12</code>, once they are stable and we had time to test them. </p> <p>However, this requires periodically checking for new MariaDB images and adjusting your <code>compose.yaml</code> file accordingly, so you don't get stuck with an outdated version.</p> <p>Learn more \u203a</p> <p>If MariaDB fails to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. See Troubleshooting MariaDB Problems for instructions on how to fix this.</p>"},{"location":"getting-started/updates/#raspberry-pi","title":"Raspberry Pi","text":"<p>Our stable releases and preview builds are available as multi-arch Docker images for 64-bit AMD, Intel, and ARM processors. You therefore get the exact same functionality and can follow the same update instructions if your device meets the system requirements.</p> <p>Try explicitly pulling the ARM64 version if you've booted your device with the <code>arm_64bit=1</code> flag and you see the \"no matching manifest\" error on Raspberry Pi OS (Raspbian):</p> <pre><code>docker pull --platform=arm64 photoprism/photoprism:latest\n</code></pre> <p>If you don't use legacy software, we recommend choosing a standard 64-bit Linux distribution as it requires less experience. For ARMv7-based devices, 32-bit images are provided separately.</p> <p>Darktable is not included in the ARMv7 version because it is not 32-bit compatible.</p>"},{"location":"getting-started/updates/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/updates/#how-can-i-shorten-the-startup-time-after-a-restart-or-update","title":"How can I shorten the startup time after a restart or update?","text":"<p>To reduce startup time, do not set <code>PHOTOPRISM_INIT</code> to avoid running additional setup scripts, and set <code>PHOTOPRISM_DISABLE_CHOWN</code> to <code>\"true\"</code> to disable automatic permission updates.</p> <p>If your instance doesn't start even after waiting for some time, our Troubleshooting Checklists help you quickly diagnose and solve the problem.</p> <ol> <li> <p>With the latest version of Docker Compose, the default config file name is <code>compose.yaml</code>, although the <code>docker compose</code> command still supports legacy <code>docker-compose.yml</code> files for backward compatibility.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/using-a-cdn/","title":"Using a Content Delivery Network (CDN)","text":"<p>A Content Delivery Network is a distributed network of servers that can deliver static content to users around the world.</p>"},{"location":"getting-started/using-a-cdn/#when-to-use-a-cdn","title":"When to use a CDN?","text":"<p>Large Media Files: PhotoPrism stores photos and videos that can be very large. A CDN can help speed up the delivery of these files to users.</p> <p>Global Audience: If your PhotoPrism instance is accessed from different locations around the world, a CDN can help reduce latency and improve the overall user experience by delivering content from servers that are closer to your users.</p> <p>Many Users: If your PhotoPrism instance is getting a lot of traffic, a CDN can improve application performance by reducing the load on your server.</p> <p></p>"},{"location":"getting-started/using-a-cdn/#config-options","title":"Config Options","text":"<p>You can use the following config options to specify the URL of an external CDN and change the cache expiration time for thumbnails and other static content:</p> Environment CLI Flag Default Description PHOTOPRISM_CDN_URL --cdn-url content delivery network <code>URL</code> PHOTOPRISM_CDN_VIDEO --cdn-video false stream videos over the specified CDN PHOTOPRISM_HTTP_CSP --http-csp HTTP Content-Security-Policy (CSP) <code>HEADER</code> plus PHOTOPRISM_HTTP_CACHE_PUBLIC --http-cache-public true allow static content to be cached by a CDN or caching proxy PHOTOPRISM_HTTP_CACHE_MAXAGE --http-cache-maxage 2592000 time in <code>SECONDS</code> until cached content expires PHOTOPRISM_HTTP_VIDEO_MAXAGE --http-video-maxage 21600 time in <code>SECONDS</code> until cached videos expire"},{"location":"getting-started/using-a-cdn/#cdn-providers","title":"CDN Providers","text":""},{"location":"getting-started/using-a-cdn/#bunnynet","title":"bunny.net","text":"<p> If you don't have a CDN provider yet, we can recommend bunny.net. This EU-based company has a cute name, but is a reputable provider with excellent performance, a wide range of features, and more than 20,000 customers including big names like Hyundai. We also chose bunny.net for our website and public demo as they are fully compliant with the GDPR.<sup>1</sup></p> <p>Pricing starts at $0.005/GB and there is no minimum usage or monthly fee, so you only pay for what you actually need.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/using-a-cdn/#cloudflare","title":"Cloudflare","text":"<p>Cloudflare works similarly to a reverse proxy and allows you to make a private server publicly accessible over the Internet. This means that users accessing your instance through their service will only see a single URL as if they were connecting directly.</p> <p>You must therefore not configure a CDN URL for your site, as this may prevent the user interface from loading. Also note that their free tier does not include video streaming, so there may be problems with video playback if you are not a paying customer.</p> <ol> <li> <p>We receive a $20 credit when you sign up through our link, which helps us fund the project infrastructure.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/using-https/","title":"Using HTTPS","text":"<p>This guide shows you how to enable HTTPS/TLS, configure existing server certificates, and obtain new certificates as needed. If you have suggestions for improvement, please let us know by clicking  to send a pull request.</p>"},{"location":"getting-started/using-https/#why-use-encryption","title":"Why Use Encryption?","text":"<p>If you install PhotoPrism on a shared server so that it is not only accessible to the local host, always secure the connection using HTTPS. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file synchronization apps may also refuse to connect.</p> <p></p> <p>HTTPS connections use Transport Layer Security (TLS) for encryption. TLS is a network protocol that establishes an encrypted connection to an authenticated peer over an untrusted network.</p>"},{"location":"getting-started/using-https/#how-to-enable-https","title":"How To Enable HTTPS","text":"<p>You have the following options to enable HTTPS/TLS when using our latest stable release. Note that after adding or updating certificates, it is required to restart PhotoPrism for the changes to take effect.</p>"},{"location":"getting-started/using-https/#1-https-reverse-proxy","title":"1. HTTPS Reverse Proxy","text":"<p>To run your instance behind an HTTPS reverse proxy like Traefik, we recommend that you explicitly disable TLS in PhotoPrism by setting <code>PHOTOPRISM_DISABLE_TLS</code> to <code>\"true\"</code> in your <code>compose.yaml</code> or <code>docker-compose.yml</code> configuration:</p> <pre><code>services:\n  photoprism:\n    # ...\n    environment:\n      PHOTOPRISM_SITE_URL: \"https://www.example.com/\"\n      PHOTOPRISM_DISABLE_TLS: \"true\"\n</code></pre> <p>Especially if your server also has other web applications installed and/or a proxy with working HTTPS is already in place, this may be the best option.</p>"},{"location":"getting-started/using-https/#2-self-signed-certificate","title":"2. Self-Signed Certificate","text":"<pre><code>services:\n  photoprism:\n    # ...\n    environment:\n      PHOTOPRISM_SITE_URL: \"https://www.example.com/\"\n      PHOTOPRISM_DISABLE_TLS: \"false\"\n      PHOTOPRISM_DEFAULT_TLS: \"true\"\n      PHOTOPRISM_INIT: \"https\"\n</code></pre>"},{"location":"getting-started/using-https/#3-custom-certificate","title":"3. Custom Certificate","text":"<p>To use your own certificates, you can add a custom TLS certificate and private key to the <code>storage/config/certificates</code> folder with the filenames <code>www.example.com.crt</code> and <code>www.example.com.key</code>, replacing <code>www.example.com</code> with the actual server domain. For this, you can set the same config options as when using a self-signed certificate (see above).</p> <p>Alternatively, you can specify a custom TLS certificate (<code>*.crt</code>) and private key (<code>*.key</code>) filename within the <code>storage/config/certificates</code> folder using the <code>PHOTOPRISM_TLS_CERT</code> and <code>PHOTOPRISM_TLS_KEY</code> environment variables in your <code>compose.yaml</code> or <code>docker-compose.yml</code>, or use the corresponding command flags:</p> <pre><code>services:\n  photoprism:\n    # ...\n    environment:\n      PHOTOPRISM_SITE_URL: \"https://www.example.com/\"\n      PHOTOPRISM_TLS_CERT: \"site.crt\"\n      PHOTOPRISM_TLS_KEY: \"site.key\"\n      PHOTOPRISM_DISABLE_TLS: \"false\"\n      PHOTOPRISM_DEFAULT_TLS: \"true\"\n      PHOTOPRISM_INIT: \"https\"\n</code></pre> <p>We recommend that you keep the <code>PHOTOPRISM_DEFAULT_TLS</code> option enabled so that you can always connect securely over HTTPS even if there is a problem with your custom certificates.</p>"},{"location":"getting-started/using-https/#obtaining-certificates","title":"Obtaining Certificates","text":"<p>Valid server certificates can be obtained either from a commercial Certificate Authority (CA) like ZeroSSL or free of charge from Let's Encrypt:</p>"},{"location":"getting-started/using-https/#lets-encrypt","title":"Let\u2019s Encrypt","text":"<p> Let's Encrypt is an automatic certificate authority that provides you with free HTTPS/TLS certificates. Many web servers and reverse proxies such as Traefik and Caddy have integrated support for obtaining single-domain certificates if your server is accessible on port 80 over the public Internet.</p> <p>The creation of certificates for servers that are not publicly reachable or that are valid for all subdomains (wildcard) is alternatively possible with the LEGO Let's Encrypt client. If you use Docker and DigitalOcean's free DNS service, the command to run will look as follows (replace the certificate path, access token, domain names, and email address with the appropriate values):</p> <pre><code>docker run --rm -v \"/path/to/certificates:/data/\" \\\n-e DO_AUTH_TOKEN=Your_Access_Token goacme/lego -a \\\n-d \"example.com\" -d \"*.example.com\" --email=\"you@example.com\" \\\n--dns=digitalocean --dns-timeout=180 --path=/data run \n</code></pre> <p>Note that this verification method only works if you use a supported DNS provider that LEGO can access through an API. Please refer to its documentation for details, as each provider requires different authentication credentials. If you are using DigitalOcean, you can create the required access token in your customer dashboard and replace <code>Your_Access_Token</code> with it.</p>"},{"location":"getting-started/using-https/#zerossl","title":"ZeroSSL","text":"<p> ZeroSSL is a widely trusted commercial certificate authority with more than 500,000 customers worldwide. Its headquarters are located in Vienna, Austria.</p> <p>Compared to Let's Encrypt, you can also create and revoke certificates through a user-friendly web interface, obtain certificates with a validity of more than 90 days, and choose between additional domain verification methods.<sup>1</sup></p> <p>Learn more \u203a</p>"},{"location":"getting-started/using-https/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/using-https/#enabling-trace-log-mode","title":"Enabling Trace Log Mode","text":"<p>A good way to troubleshoot configuration issues is to increase the log level. To enable trace log mode, set <code>PHOTOPRISM_LOG_LEVEL</code> to <code>\"trace\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--trace</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_LOG_LEVEL: \"trace\"\n      ...\n</code></pre> <p>Then restart all services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre>"},{"location":"getting-started/using-https/#viewing-docker-service-logs","title":"Viewing Docker Service Logs","text":"<p>You can run this command to check the server logs for warnings and errors, including the last 100 messages (omit <code>--tail=100</code> to see them all, and <code>-f</code> to output only the last logs without watching them):</p> <pre><code>docker compose logs -f --tail=100 \n</code></pre> <p>Learn more \u203a</p>"},{"location":"getting-started/using-https/#determining-your-public-ip-address","title":"Determining Your Public IP Address","text":"<p>If you have a domain name and want to set up a public host entry for your home network, you can use one of the following services to see your public IP address, i.e. the IP address that others outside your home network can use to reach you:</p> <ul> <li>https://api.ipify.org/</li> <li>https://canhazip.com/</li> </ul>"},{"location":"getting-started/using-https/#failed-to-find-any-pem-data-in-key-input","title":"Failed to Find Any PEM Data in Key Input","text":"<p>This error can indicate that your key file starts with an unexpected Byte Order Mark (BOM):</p> <ul> <li>https://www.google.com/search?q=failed+to+find+any+pem+data+tls+golang</li> <li>https://stackoverflow.com/questions/57596920/failed-to-find-any-pem-data-in-key</li> </ul> <p>While BOMs are not strictly forbidden, there is only one way to encode UTF-8, and so they are not needed and extremely rare. As a result, a lot of software has problems with them.</p> <p>You should be able to fix this by opening the file with a regular text or code editor (not Notepad) and then saving it again. Finally, restart all services for the changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre> <p>Our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p> <ol> <li> <p>We may receive a credit when you sign up through our link, which helps us fund the project infrastructure.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/advanced/backups/","title":"Advanced Backup Guide","text":"<p>At a minimum, a backup of PhotoPrism should include the files in your originals folder and a copy of the index database. We also recommend backing up the storage folder so that you don't need to recreate any thumbnail or sidecar files, and your backup includes the complete configuration.</p> <p>The easiest way to create a full backup is to first run the backup command to generate a database dump as described in our Backup Guide. Then back up your originals and storage folders using any standard file backup utility.</p>"},{"location":"getting-started/advanced/backups/#scheduled-backups","title":"Scheduled Backups","text":"<p>By default, PhotoPrism 240523-923ee0cf7 and newer versions automatically create daily database backups for you, with up to 3 copies being retained. The schedule, the type of backups, and the number of backups to be retained can be changed in the configuration.</p>"},{"location":"getting-started/advanced/backups/#backup-command","title":"Backup Command","text":"<p>You can run the following command in a terminal to manually create a new MariaDB or SQLite database backup:</p> <pre><code>photoprism backup -i [filename]\n</code></pre> <p>Or the following if you are using docker-compose:</p> <pre><code>docker compose exec -T photoprism photoprism backup -i - &gt; photoprism-db.sql\n</code></pre> <p>As seen above, you can use <code>-</code> as filename to write the backup to stdout. This is done to ensure the backup resides outside of the container environment.</p> <p>If you leave the filename empty, the backup will be written to the default backup folder configured via <code>PHOTOPRISM_BACKUP_PATH</code>.</p> <p>If you want, you can also export your cache and thumbnails, but it can also be re-generated after restore. It will save you from re-generating thumbnails from scratch however.</p> <p>Helpful information can be found on GitHub as well.</p>"},{"location":"getting-started/advanced/backups/#restore-command","title":"Restore Command","text":"<p>See our regular Backup Guide to learn how to restore backups.</p>"},{"location":"getting-started/advanced/backups/#sqlite-backups","title":"SQLite Backups","text":"<p>If you are using a current version, you can create SQL dumps of SQLite with the <code>photoprism backup</code> command. Since the binary SQLite database files are located in the storage folder, they should also be automatically included in any backup.</p> <p>In order to create a dump directly with SQLite, you can alternatively run this command:</p> <pre><code>docker compose exec -T photoprism sqlite3 /photoprism/storage/index.db .dump &gt; photoprism-db.sql\n</code></pre> <p>With pure <code>docker</code>, you can run the following (or replace <code>docker</code> with <code>podman</code> on Red Hat-based Linux distributions):</p> <pre><code>docker exec -t PhotoPrism sqlite3 /photoprism/storage/index.db .dump &gt; photoprism-db.sql\n</code></pre> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/advanced/caching/","title":"Optimizing Cache Performance","text":"<p>While we believe this post may be helpful to advanced users, we have not yet reviewed it thoroughly. If you have suggestions for improvement, please let us know by clicking  to send a pull request.</p> <p>For advanced users only. This guide is maintained by the community and may contain inaccurate or incomplete advice. You can contribute by clicking  to send a pull request with your changes.</p> <p>Some users might want to place the thumbnail cache on a separate, faster file system while keeping the actual photo files on large, slow bulk storage. This should result in faster access to the thumbnails. </p> <p>To do this, we add a further volume (<code>-v</code>) parameter to the docker script so we use an external path (outside the container) for the cache files. You can get the internal path with <code>photoprism config</code>, or as a docker command in a running system (for Linux/BSD systems): </p> <pre><code>sudo docker exec photoprism photoprism config | grep cache-path\n</code></pre> <p>This should return a line such as:</p> <pre><code>cache-path            /home/photoprism/.cache/photoprism\n</code></pre> <p>for the internal path. We now know to add a line like</p> <pre><code>  -v &lt;MYCACHE_FOLDER&gt;:/home/photoprism/.cache/photoprism \\\n</code></pre> <p>to the docker invocation, with your actual path to the cache folder replacing <code>&lt;MYCACHE_FOLDER&gt;</code>. </p> <p>As an example, let's assume a ZFS filesystem with two pools (\"volumes\" in classical terminology): A pool tank in a raidz2 (RAID6) configuration based on hard drives that holds the original pictures, and a pool dozer in a mirrored (RAID1) configuration based on SSD or NVMe drives to store the thumbnails. Our docker script could be:</p> <pre><code>docker run -d \\\n  --name photoprism \\\n  -p 2342:2342 \\\n  -v /tank/photos/:/home/photoprism/Pictures/Originals \\\n  -v /dozer/cache/:/home/photoprism/.cache/photoprism \\\n  photoprism/photoprism:latest\n</code></pre> <p>In a case like this, you will probably also want to optimize the datasets (\"file systems\") <code>tank/photos</code> and <code>dozer/cache</code> further. For instance, the original photo files will call for a larger recordsize than the smaller cache files.</p>"},{"location":"getting-started/advanced/databases/","title":"Advanced Database Setup","text":"<p>While we believe this contributed content may be helpful to advanced users, we have not yet thoroughly reviewed it. If you have suggestions for improvement, please let us know by clicking  to send a pull request.</p>"},{"location":"getting-started/advanced/databases/#compatibility","title":"Compatibility","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p> <p>Our configuration examples are generally based on the current stable version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version.</p>"},{"location":"getting-started/advanced/databases/#storage","title":"Storage","text":"<p>Local Solid-State Drives (SSDs) are best for databases of any kind. Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <p>Please do not use a named or anonymous Docker volume for storing MariaDB database files and check the mount path of the volume if you use a custom database image (it may not always be <code>/var/lib/mysql</code>), as both can lead to data loss when the database container is recreated, e.g. after an update of the Docker image.</p>"},{"location":"getting-started/advanced/databases/#configuration","title":"Configuration","text":"<p>When creating a new database, make sure to set the charset and collation as follows:</p> <pre><code>CREATE DATABASE photoprism\nCHARACTER SET = 'utf8mb4'\nCOLLATE = 'utf8mb4_unicode_ci';\n</code></pre> <p>Now create a user and grant privileges for this new database:</p> <pre><code>CREATE USER 'photoprism'@'%' IDENTIFIED BY 'insecure';\nGRANT ALL PRIVILEGES ON photoprism.* to 'photoprism'@'%';\nFLUSH PRIVILEGES;\n</code></pre> <p>Set the database environment variables for PhotoPrism and MariaDB as follows:</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_DATABASE_DRIVER: \"mysql\"\n      PHOTOPRISM_DATABASE_SERVER: \"mariadb:3306\"\n      PHOTOPRISM_DATABASE_NAME: \"photoprism\"\n      PHOTOPRISM_DATABASE_USER: \"photoprism\"\n      PHOTOPRISM_DATABASE_PASSWORD: \"insecure\"\n\n  mariadb:\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      MARIADB_DATABASE: \"photoprism\"\n      MARIADB_USER: \"photoprism\"\n      MARIADB_PASSWORD: \"insecure\"\n      MARIADB_ROOT_PASSWORD: \"insecure\"\n</code></pre> <p>Set strong passwords if the database is exposed to an external network. Never expose your database to the public Internet in this way, for example, if it is running on a cloud server.</p>"},{"location":"getting-started/advanced/databases/#schema-migrations","title":"Schema Migrations","text":"<p>An index schema migration is performed automatically every time PhotoPrism is (re)started. The following instructions may be helpful in special cases, such as when a temporary problem has prevented a successful migration:</p> <p>Run Migrations \u203a</p>"},{"location":"getting-started/advanced/databases/#change-database","title":"Change Database","text":"<p>Migrate from SQLite to MariaDB \u203a</p> <p>Migrate from MariaDB to SQLite \u203a</p> <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Due to the amount of time required to review each report, we can only offer this to eligible members and business customers, and not to users who have chosen our free community edition.</p> <p>Get Performance Tips \u203a View Database Schema \u203a </p>"},{"location":"getting-started/advanced/docker-security/","title":"Docker Security Guide","text":"<p>This documentation is intended for experienced users who want to enhance the security of their installation. If you have suggestions for improvement, please let us know by clicking  to send a pull request.</p>"},{"location":"getting-started/advanced/docker-security/#get-the-latest-security-updates","title":"Get the Latest Security Updates","text":"<p>Even though PhotoPrism is developed in Go and therefore does not use many of the C libraries installed in our Docker image, external file converters like Darktable and FFmpeg as well as other tools installed as dependencies might use them. They may also be directly affected by recently discovered vulnerabilities for which updates are available.</p> <p>To automatically install these updates when the container starts for the first time, you can add <code>PHOTOPRISM_INIT: \"update\"</code> to the <code>environment</code> section of the <code>photoprism</code> service in your <code>compose.yaml</code> or <code>docker-compose.yml</code>:</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_INIT: \"update\"\n      ...\n    volumes:\n      - ...\n</code></pre> <p>This can be combined with other init actions such as <code>https</code>, <code>gpu</code> and/or <code>tensorflow</code>, e.g. <code>PHOTOPRISM_INIT: \"update https gpu tensorflow\"</code>. For the changes to take effect, run the following to restart the services (<code>--force-recreate</code> will always recreate the containers to apply available updates, even if their configuration has not been changed):</p> <pre><code>docker compose stop\ndocker compose up -d --force-recreate\n</code></pre> <p>We also recommend making sure that the latest Docker version and security updates are automatically installed on your host operating system.</p> <p>Note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p>"},{"location":"getting-started/advanced/docker-security/#run-services-as-non-root-user","title":"Run Services as Non-Root User","text":"<p>It is recommended that you run the <code>photoprism</code> service as a non-root user by setting either the <code>user</code> service property or the <code>PHOTOPRISM_UID</code> and <code>PHOTOPRISM_GID</code> environment variable in your <code>compose.yaml</code> or <code>docker-compose.yml</code> file:</p> Environment Default Description PHOTOPRISM_UID 0 run as a non-root user after initialization (supported: 0, 33, 50-99, 500-600, 900-1250, and 2000-2100) PHOTOPRISM_GID 0 run with a specific group id after initialization, can optionally be used together with <code>PHOTOPRISM_UID</code> (supported: 0, 33, 44, 50-99, 105, 109, 115, 116, 500-600, 900-1250, and 2000-2100) <p>If you are using hardware video transcoding, it should depend on the owner of the video device which user and group you choose so that the service has permission to access it.</p> <p>Finally, remember to update the file permissions and/or owner with the <code>chmod</code> and <code>chown</code> commands when you make changes to the UID or GID, and restart the services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre>"},{"location":"getting-started/advanced/docker-security/#remove-passwords-from-the-environment","title":"Remove Passwords From the Environment","text":"<p>Passwords specified directly in a  <code>compose.yaml</code> file or otherwise passed to the container environment may pose a security risk. As an alternative, they can be set in an options.yml file located in the config storage folder:</p> <pre><code>AdminPassword: \"my super secret password\"\nDatabasePassword: \"my super secret password\"\n</code></pre> <p>Likewise, MariaDB can be configured to use Docker secret files. For details, see the Docker Compose Documentation.</p> <p>The following is an example of the changes to your <code>compose.yaml</code> or <code>docker-compose.yml</code> file. Note that this example includes only the additional lines required to pass secret files to the MariaDB container:</p> <pre><code>secrets:\n  # Secrets are single-line text files where the sole\n  # content is the secret. Paths in this example assume\n  # that secrets are kept in local \".secrets\" folder. \n  DB_ROOT_PWD:\n    file: .secrets/db_root_pwd.txt\n  DB_PWD:\n    file: .secrets/db_pwd.txt\n\nservices:\n  mariadb:\n    environment:\n      # Change the env variables to _FILE and point them to\n      # the file locations within the container.\n      MARIADB_PASSWORD_FILE: /run/secrets/DB_PWD\n      MARIADB_ROOT_PASSWORD_FILE: /run/secrets/DB_ROOT_PWD\n    secrets:\n      # Give the container access to the secrets to mount\n      # the files within the container.\n      - DB_ROOT_PWD\n      - DB_PWD\n</code></pre>"},{"location":"getting-started/advanced/docker-security/#rootless-docker","title":"Rootless Docker","text":"<p>In addition, you can run the Docker daemon as a non-root user in rootless mode. Configuring this is beyond the scope of this guide. For more information and instructions, see the Docker Security Documentation.</p>"},{"location":"getting-started/advanced/docker-volumes/","title":"Docker Volume Mounts","text":"<p>When using Docker, all application services run in isolated containers, so you must explicitly mount the host folders you want to use. Be aware that PhotoPrism and MariaDB cannot see folders that have not been mounted. This is an important security feature.</p> <p>It is important that the originals, storage, and database folders are located on persistent volumes. We recommend changing the relative paths used in our examples to absolute paths and to avoid using named or anonymous Docker volumes to prevent potential data loss when the container is recreated, e.g. after an update of the Docker image.</p>"},{"location":"getting-started/advanced/docker-volumes/#originals-folder","title":"Originals Folder","text":"<p>The originals folder contains your original photo and video files.</p> <p><code>~/Pictures</code> will be mounted by default, where <code>~</code> is a shortcut for your home directory:</p> <pre><code>volumes:\n  # \"/host/folder:/photoprism/folder\"  # example\n  - \"~/Pictures:/photoprism/originals\"\n</code></pre> <p>You can mount any folder accessible from the host, including network shares. Additional directories can also be mounted as sub folders of <code>/photoprism/originals</code> (depending on overlay file system support):</p> <pre><code>volumes:\n  - \"/home/username/Pictures:/photoprism/originals\"\n  - \"/example/friends:/photoprism/originals/friends\"\n  - \"/mnt/photos:/photoprism/originals/media\"\n</code></pre> <p>On Windows, prefix the host path with the drive letter and use <code>/</code> instead of <code>\\</code> as separator:</p> <pre><code>volumes:\n  - \"D:/Example/Pictures:/photoprism/originals\"\n</code></pre> <p>When read-only mode is enabled, all features that require write permission to the originals folder are disabled, e.g. WebDAV, uploading and deleting files. To do this, set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in the <code>environment</code> section of your <code>compose.yaml</code> file. You can additionally mount volumes with the <code>:ro</code> flag so that writes are also blocked by Docker.</p>"},{"location":"getting-started/advanced/docker-volumes/#storage-folder","title":"Storage Folder","text":"<p>SQLite, config, cache, backup, thumbnail and sidecar files are saved in the storage folder:</p> <ul> <li>a storage folder mount must always be configured in your <code>compose.yaml</code> or <code>docker-compose.yml</code> file so that you do not lose these files after a restart or upgrade</li> <li>never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden</li> <li>we recommend placing the storage folder on a local SSD drive for best performance</li> <li>mounting symbolic links or using them inside the storage folder is currently not supported</li> <li>avoid using a named or anonymous Docker volume for permanently storing files, as this can lead to data loss when the container is recreated, e.g. after an update of the Docker image</li> </ul> <p>Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/advanced/docker-volumes/#import-folder","title":"Import Folder","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates:</p> <ul> <li>imported files receive a canonical filename and will be organized by year and month</li> <li>never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files</li> </ul> <p>You can safely skip this. Adding files via Web Upload and WebDAV remains possible, unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/advanced/docker-volumes/#mariadb-database","title":"MariaDB Database","text":"<p>Our example includes a pre-configured MariaDB database server that stores it files in the <code>database</code> folder by default. If you remove it and provide no other database server credentials, SQLite database files will be created in the storage folder.</p> <p>Please do not use a named or anonymous Docker volume for storing MariaDB database files and check the mount path of the volume if you use a custom database image (it may not always be <code>/var/lib/mysql</code>), as both can lead to data loss when the database container is recreated, e.g. after an update of the Docker image.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files. We strongly recommend using SSD storage for databases only.</p>"},{"location":"getting-started/advanced/docker-volumes/#network-storage","title":"Network Storage","text":"<p>Shared folders that have already been mounted on your host under a drive letter or path can be used with Docker containers like any other directory. In addition, certain types of network storage like NFS (Unix/Linux) and CIFS (Windows/Mac) can also be mounted directly with Docker Compose.</p> <p>For more information, see the Network Storage section of our Docker Troubleshooting Guide.</p> <p>Configure Network Storage \u203a</p>"},{"location":"getting-started/advanced/kubernetes/","title":"Running PhotoPrism with Kubernetes","text":"<p>While we believe this contributed content may be helpful to advanced users, we have not yet thoroughly reviewed it. If you have suggestions for improvement, please let us know by clicking  to submit a change request.</p> <p>At a minimum, you can just define a Kubernetes <code>Service</code> and a <code>StatefulSet</code> and be up and running. For more real-world usage, you'll probably want to at least include persistent storage, and possibly some <code>Ingress</code> rules for exposing PhotoPrism outside your cluster.</p> <p>Before you proceed, please ensure that your server has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files. Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>For those familiar with Helm, a PhotoPrism Helm chart is available.</p> <p>Once you've got PhotoPrism deployed, you can <code>exec</code> into the running container and <code>photoprism import</code> your photos.</p> <p>Here's an example of a YAML file that creates the following Kubernetes objects:</p> <ul> <li><code>Namespace</code></li> <li><code>Service</code> exposing PhotoPrism on port 80</li> <li><code>StatefulSet</code> with persistent NFS volumes</li> <li><code>Secret</code> which stores the database DSN and admin password</li> <li><code>Ingress</code> rule for a Kubernetes ingress controller</li> <li>Annotations for a Kubernetes <code>Certificate Manager</code></li> </ul> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\n  name: photoprism\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: photoprism-secrets\n  namespace: photoprism\nstringData:\n  PHOTOPRISM_ADMIN_PASSWORD: &lt;your admin password here&gt;\n  PHOTOPRISM_DATABASE_DSN: username:password@tcp(db-server-address:3306)/dbname?charset=utf8mb4,utf8&amp;parseTime=true\n---\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: photoprism\n  namespace: photoprism\nspec:\n  selector:\n    matchLabels:\n      app: photoprism\n  serviceName: photoprism\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: photoprism\n    spec:\n      containers:\n      - name: photoprism\n        image: photoprism/photoprism:latest\n        env:\n        - name: PHOTOPRISM_DEBUG\n          value: \"true\"\n        - name: PHOTOPRISM_DATABASE_DRIVER\n          value: mysql\n        - name: PHOTOPRISM_HTTP_HOST\n          value: 0.0.0.0\n        - name: PHOTOPRISM_HTTP_PORT\n          value: \"2342\"\n        # Load database DSN &amp; admin password from secret\n        envFrom:\n        - secretRef:\n            name: photoprism-secrets\n            optional: false\n        ports:\n        - containerPort: 2342\n          name: http\n        volumeMounts:\n        - mountPath: /photoprism/originals\n          name: originals\n        - mountPath: /photoprism/import\n          name: import\n        - mountPath: /photoprism/storage\n          name: storage\n        readinessProbe:\n          httpGet:\n            path: /api/v1/status\n            port: http\n      volumes:\n      - name: originals\n        nfs:\n          path: /originals\n          # readOnly: true # Disables import and upload!\n          server: my.nas.host\n      - name: import\n        nfs:\n          path: /import\n          server: my.nas.host\n      - name: storage\n        nfs:\n          path: /storage\n          server: my.nas.host\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: photoprism\n  namespace: photoprism\nspec:\n  ports:\n  - name: http\n    port: 80\n    protocol: TCP\n    targetPort: http\n  selector:\n    app: photoprism\n  type: ClusterIP\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  annotations:\n    # For nginx ingress controller:\n    kubernetes.io/ingress.class: nginx\n    # Default is very low so most photo uploads will fail:\n    nginx.ingress.kubernetes.io/proxy-body-size: \"512M\"\n    # If using cert-manager:\n    cert-manager.io/cluster-issuer: letsencrypt-prod\n    kubernetes.io/tls-acme: \"true\"\n  name: photoprism\n  namespace: photoprism\nspec:\n  rules:\n  - host: photoprism.my.domain\n    http:\n      paths:\n      - backend:\n          service:\n            name: photoprism\n            port:\n              name: http\n        path: /\n        pathType: Prefix\n  tls:\n  - hosts:\n    - photoprism.my.domain\n    secretName: photoprism-cert\n</code></pre> <p>To run this locally, you can use minikube or a similar local cluster deployer.</p> <p>Once your cluster is up and running with your <code>kubectl</code> commands. Simply copy the above YAML markup to a file, make the necessary changes, and use the <code>kubectl</code> CLI command to deploy:</p> <pre><code>kubectl create -f photoprism.yaml\n</code></pre> <p>If you prefer to use helm, see p80n/photoprism-helm.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/","title":"Advanced NGINX Proxy Setup","text":"<p>While we believe this contributed content may be helpful to advanced users, we have not yet thoroughly reviewed it. If you have suggestions for improvement, please let us know by clicking  to submit a change request.</p> <p>Getting Support</p> <p>Since NGINX is notoriously difficult to configure, we are unable to provide technical support for NGINX-related issues such as failed uploads, connection errors, broken thumbnails, and video playback problems. If you cannot resolve these on your own, we recommend that you ask their community for advice or use Traefik instead, which is easier to configure and more convenient to handle overall.</p> <p>Using a reverse proxy in front of PhotoPrism has various benefits:</p> <ul> <li>Make use of HTTP/2</li> <li>Add encryption</li> <li>Perform traffic optimization</li> <li>Enhance security (NGINX may block dangerous request patterns the embedded Go-based HTTP server does not know about)</li> </ul> <p>If you consider exposing your PhotoPrism instance to the evil internet, you should at least secure it with a proper HTTPS encryption.</p> <p>This guide aims for a little more advanced setup, with good security in mind.</p> <p>Trough the entire guide we use <code>photoprism.example.com</code> as domain. You have to change all these occurrences with your own domain / DynDNS.</p> <p>Also, this was all tested on <code>ubuntu/20.04</code> - But the commands should work on a lot of other versions as well. If you use CentOS, SuSE, or any other distro, look up the commands for your package manager.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#setup","title":"Setup","text":""},{"location":"getting-started/advanced/nginx-proxy-setup/#domain-setup","title":"Domain setup","text":"<p>First, we need to decide what we want to use as domain / address. We will use a proper domain in this guide, but it will technically also work with just a static IP address. </p> <p>If you're lucky enough to have your own domain, just create a subdomain and use this for PhotoPrism.</p> <p>If you want to expose your instance hosted at home, just use a DynDNS  provider (just duckduckgo it, there a multiple ones that are free).</p> <p>Tip</p> <p>if you're new to DynDNS it might be good to know that most routers do support DynDNS.  Therefore only minimal setup is required. Just search for <code>your router name + DynDNS</code> ;)</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#install-nginx-on-your-machine","title":"Install NGINX on your machine","text":"<p>If not already done, install the webserver on your machine which you wish to use as proxy.  This also can be the same host that is running the docker container. <pre><code>apt-get update &amp;&amp; apt-get install -y nginx apache2-utils\n</code></pre></p> <p>Info</p> <p>We use <code>apache2-utils</code> later for the password generation of the optional extra security with http basic auth.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#acquire-a-certificate","title":"Acquire a certificate","text":""},{"location":"getting-started/advanced/nginx-proxy-setup/#install-cerbot","title":"Install cerbot","text":"<p>Luckily nowadays there is a free certificate authority called Let's Encrypt. You can just use  their <code>certbot</code> tool and acquire a new certificate in seconds.</p> <p>For Ubuntu / Debian the package is directly in the repository. Therefore, you can easily install it using this command: </p> <pre><code>apt-get update &amp;&amp; apt-get install -y certbot python3-certbot-nginx\n</code></pre>"},{"location":"getting-started/advanced/nginx-proxy-setup/#generate-the-certificate","title":"Generate the certificate","text":"<p>Now, just request a new certificate by using this command: </p> <pre><code>certbot -d photoprism.example.com\n</code></pre> <p>After that you should have a new certificate in: <code>/etc/letsencrypt/live/photoprism.example.com/</code></p> <p>Note</p> <p>In order for Let's Encrypt to work, the server has to be accessible from the internet on port 443</p> <p>Tip</p> <p>Please refer to Let's Encrypts documentation for automated certificate renewal. The certificates are valid for around 90 days.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#setup-nginx","title":"Setup NGINX","text":"<p>Now that we have our certificate its time to setup the NGINX itself. Since it is best practice to create a configuration file per application / domain, this is exactly what we gonna do.</p> <p>Create a new file <code>/etc/nginx/sites-available/photoprism.example.com</code> and put the following content in it. Keep in mind to change the domain (there a multiple entries!) <pre><code># PhotoPrism Nginx config with SSL HTTP/2 and reverse proxy\n# This file gives you an example on how to secure you PP instance with SSL\nserver {\n    listen       80;\n    listen [::]:80; # HTTP IPv6\n    # enforce https\n    return 301 https://$server_name$request_uri;\n}\nserver {\n\n    listen 443 ssl http2; # Listen on port 443 and enable ssl and HTTP/2\n    listen [::]:443 ssl http2; # Same for IPv6\n\n    # Put your domain name in here.\n    server_name  photoprism.example.com;\n\n    # - - - - - - - - - -\n    # SSL security\n    # - - - - - - - - - -\n    ssl_certificate          /etc/letsencrypt/live/photoprism.example.com/fullchain.pem;\n    ssl_certificate_key      /etc/letsencrypt/live/photoprism.example.com/privkey.pem;\n\n    # Since the PP API is also used on Android, we have to keep TLS1.2 in here for a while.\n    # A lot of the older Android devices do not support TLS1.3 yet :/\n    ssl_protocols            TLSv1.2 TLSv1.3;\n\n    # Use good and strong ciphers, disable weak and old ciphers\n    ssl_ciphers              HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS;\n\n    # Enable HSTS (https://developer.mozilla.org/en-US/docs/Security/HTTP_Strict_Transport_Security)\n    add_header Strict-Transport-Security \"max-age=172800; includeSubdomains\";\n\n    # This checks if the certificate has been invalidated by the certificate authority\n    # You can remove this section if you use self-singed certificates...\n    # Enable OCSP stapling (http://blog.mozilla.org/security/2013/07/29/ocsp-stapling-in-firefox)\n    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_trusted_certificate /etc/letsencrypt/live/photoprism.example.com/fullchain.pem;\n\n    # DNS Servers to use for OCSP lookups\n    resolver 8.8.8.8 1.1.1.1 9.9.9.9 valid=300s;\n    resolver_timeout 5s;\n\n    # - - - - - - - - -\n    # Reverse Proxy\n    # - - - - - - - - -\n    proxy_redirect           off;\n    proxy_set_header         X-Real-IP $remote_addr;                        # Let PP know the clients real IP\n    proxy_set_header         X-Forwarded-For $proxy_add_x_forwarded_for;    # Let PP know that a proxy did forward this request\n    proxy_set_header         Host $http_host;                               # Set Proxy host info\n\n    proxy_http_version 1.1;                                                 # Required for WebSocket connection\n    proxy_set_header Upgrade $http_upgrade;                                 # Allow protocol switch to websocket\n    proxy_set_header Connection \"upgrade\";                                  # Do protocol switch\n    proxy_set_header X-Forwarded-Proto $scheme;                             # Let PP know that this connection used HTTP or HTTPS\n\n    client_max_body_size 500M;                                              # Bump the max body size, you may want to upload huge stuff via the upload GUI\n    proxy_buffering off;                                                    # Do not hold back the request while the client sends data, give the stream directly to PP\n\n    location / {\n            # Optional; additional protection with Basic Auth.\n            # Note: This breaks WebDAV without additional configuration\n            #       You also have to create a .htpasswd file using the command:\n            #       \"htpasswd -c /etc/nginx/.pp_htpasswd my_secret_user\"\n            # - - -\n            # auth_basic           \"PhotoPrism Pre Auth\";\n            # auth_basic_user_file /etc/nginx/.pp_htpasswd;\n\n            # pipes the traffic to PhotoPrism\n            # Change this to your PhotoPrisms IP / DNS\n            proxy_pass http://docker.homenet:2342;\n    }\n}\n</code></pre></p> <p>Have a look at the individual comments in the configuration for a further description.</p> <p>Tip</p> <p>Don't forget to change the PhotoPrism IP / DNS on the bottom of the config... ;)</p> <p>Once you've changed everything you need, let's restart <code>nginx</code>:</p> <p><pre><code>sudo nginx -t\nsudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/\nsystemctl reload nginx\n</code></pre> Now, you should have access to PhotoPrism.</p> <p>Warning</p> <p>Make sure to setup proper firewalling on the machine that is running PhotoPrism. Have a look at ufw for simple firewall rules.</p>"},{"location":"getting-started/advanced/openid-connect/","title":"Single Sign-On via OpenID Connect","text":"<p>OpenID Connect (OIDC) allows users to log in and optionally register through an external identity provider instead of manually entering a username and password:</p> <p></p>"},{"location":"getting-started/advanced/openid-connect/#config-options","title":"Config Options","text":"Environment CLI Flag Default Description PHOTOPRISM_OIDC_URI --oidc-uri issuer <code>URI</code> for single sign-on via OpenID Connect, e.g. https://accounts.google.com PHOTOPRISM_OIDC_CLIENT --oidc-client client <code>ID</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_SECRET --oidc-secret client <code>SECRET</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_SCOPES --oidc-scopes openid email profile address client authorization <code>SCOPES</code> for single sign-on via OpenID Connect PHOTOPRISM_OIDC_PROVIDER --oidc-provider custom identity provider <code>NAME</code>, e.g. Google PHOTOPRISM_OIDC_ICON --oidc-icon custom identity provider icon <code>URI</code> PHOTOPRISM_OIDC_REDIRECT --oidc-redirect automatically redirect unauthenticated users to the configured identity provider PHOTOPRISM_OIDC_REGISTER --oidc-register allow new users to create an account when they sign in with OpenID Connect PHOTOPRISM_OIDC_USERNAME --oidc-username preferred_username preferred username <code>CLAIM</code> for new OpenID Connect users (preferred_username, name, nickname, email) PHOTOPRISM_OIDC_WEBDAV --oidc-webdav allow new OpenID Connect users to use WebDAV when they have a role that allows it PHOTOPRISM_DISABLE_OIDC --disable-oidc disable single sign-on via OpenID Connect, even if an identity provider has been configured <p>Your PhotoPrism instance and the OpenID Connect Identity Provider (IdP) must be accessible via HTTPS and have valid TLS certificates configured for it. Please also make sure that the hostname in the Redirect URL configured on the IdP matches the Site URL used by PhotoPrism. Single sign-on via OIDC can otherwise not be enabled.</p>"},{"location":"getting-started/advanced/openid-connect/#identity-providers","title":"Identity Providers","text":"<p>To allow users to log in via OIDC, you can either set up and use a self-hosted identity provider such as ZITADEL or Keycloak, or choose a public authentication service such as those provided by Google, Microsoft, GitHub, or Amazon.</p> <p>Single sign-on can then be configured automatically through your identity provider's <code>/.well-known/openid-configuration</code> service discovery endpoint, for example:</p> <ul> <li>https://accounts.google.com/.well-known/openid-configuration</li> </ul>"},{"location":"getting-started/advanced/openid-connect/#issuer-uri","title":"Issuer URI","text":"<p>The Issuer URI in your configuration must match the <code>issuer</code> value returned by the <code>/.well-known/openid-configuration</code> endpoint of your OpenID Connect Identity Provider (IdP), for example <code>https://accounts.google.com</code> if you use Google for authentication.</p> <p>You may not modify the URI in any way, e.g. by adding or omitting slashes at the end. If the values do not match, the validation will fail and users cannot be redirected to your provider's login page. For security reasons, only a generic error message is displayed in this case.</p>"},{"location":"getting-started/advanced/openid-connect/#redirect-url","title":"Redirect URL","text":"<p>The Redirect URL that must be specified when registering a new client with an Identity Provider is as follows, where <code>{hostname}</code> must be replaced by the hostname in the Site URL, e.g. configured via <code>PHOTOPRISM_SITE_URL</code>:</p> <pre><code>https://{hostname}/api/v1/oidc/redirect\n</code></pre> <p>Note that both the Site URL configured for your instance and the Redirect URL must start with <code>https://</code> and that their hostnames must match, as the use of secure connections is a strict requirement for OpenID Connect.</p>"},{"location":"getting-started/advanced/openid-connect/#preferred-username","title":"Preferred Username","text":"<p>When a new user signs in with OpenID Connect<sup>1</sup>, their preferred username may already be registered. In this case, a random 6-digit number is appended to resolve the conflict.</p> <p>The config option <code>PHOTOPRISM_OIDC_USERNAME</code> allows you to change the preferred username claim for new accounts from <code>preferred_username</code> to <code>name</code>, <code>nickname</code> or verified<sup>2</sup> <code>email</code>. The other claims are used as fallback if no value is returned for the configured claim. Names are changed to lowercase so that, for example, \"John Doe\" becomes \"john.doe\".</p> <p>Learn more \u203a</p>"},{"location":"getting-started/advanced/openid-connect/#existing-accounts","title":"Existing Accounts","text":"<p>Super admins can manually connect existing user accounts<sup>3</sup> under Settings &gt; Users by changing the authentication to OIDC and then setting the Subject ID to match the account identifier from the configured Identity Provider:</p> <p></p> <p>The Edit Account dialog may additionally contain a text field for the Issuer URL. It does not need to be entered manually as it is set automatically after the first login.</p> <p>Alternatively, you can run the following command in a terminal to allow authentication via OIDC and set a Subject ID to connect existing accounts:</p> <pre><code>photoprism users mod --auth=oidc --auth-id=[sub] [username]\n</code></pre> <p>Learn more \u203a</p>"},{"location":"getting-started/advanced/openid-connect/#passwords","title":"Passwords","text":"<p>Changing the authentication of an account to OIDC does not remove a previously set password, so that it can still be used to log in (optionally also in combination with 2FA).</p> <p>If a local password has been set for an account, you can remove it by running the following command in a terminal:</p> <pre><code>photoprism passwd --rm [username]\n</code></pre> <p>Super admins can alternatively set the account password to a long random value through the Admin Web UI or CLI to effectively prevent local authentication.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/advanced/openid-connect/#deleting-accounts","title":"Deleting Accounts","text":"<p>Deleted accounts remain linked to the Subject ID, so logging in via OIDC is no longer possible and no new account can be registered for the same Subject ID either.</p> <p>If you wish to change the connected user account or create a new account instead, you must therefore change the authentication of the old account e.g. to None before deleting it:</p> <pre><code>photoprism users mod --auth=none [username]\n</code></pre> <p>To restore a previously deleted account, admins can follow the same steps as for creating a new account with the same username through the Admin Web UI or the <code>photoprism users add</code> command. You will then be asked if you want to restore the account.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/advanced/openid-connect/#frequently-asked-questions","title":"Frequently Asked Questions","text":""},{"location":"getting-started/advanced/openid-connect/#is-it-possible-to-set-a-default-role-for-new-oidc-users","title":"Is it possible to set a default role for new OIDC users?","text":"<p>For security reasons, our Personal Editions currently default to the Guest role, which admins can then upgrade after checking the eligibility of newly registered accounts. If you run our Pro Edition in a trusted corporate network with appropriate security measures - including for the OIDC provider - it can be configured to give new accounts a higher authorization level by default.</p> <p>Please note in this context that using an external Identity Provider for authorization, and not just for authentication, can easily lead to security issues such as the following, for which we do not want to get a CVE assigned nor do we want to be responsible for any private pictures of our users getting leaked as a result:</p> <ul> <li>https://www.microsoft.com/en-us/security/blog/2024/07/29/ransomware-operators-exploit-esxi-hypervisor-vulnerability-for-mass-encryption/</li> <li>https://support.broadcom.com/web/ecx/support-content-notification/-/external/content/SecurityAdvisories/0/24505</li> </ul>"},{"location":"getting-started/advanced/openid-connect/#can-i-configure-a-custom-claim-for-the-preferred-username","title":"Can I configure a custom claim for the preferred username?","text":"<p>You can choose between <code>preferred_username</code>, <code>name</code>, <code>nickname</code> and verified<sup>2</sup> <code>email</code>, where <code>preferred_username</code> is the default. The other claims are used as fallback if no value is returned for the configured claim.</p> <p>Please note that it is currently not possible to use other standard or non-standard claims, as these may not be suitable for generating a username and no logic is implemented for doing so.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/advanced/openid-connect/#what-if-my-provider-does-not-return-any-claims-for-generating-a-username","title":"What if my provider does not return any claims for generating a username?","text":"<p>Certified OIDC Identity Providers, as well as public service providers such as Google, should support (at least) a subset of the standard claims that PhotoPrism can use to generate a username for newly registered accounts. These are <code>preferred_username</code>, <code>name</code>, <code>nickname</code> and verified<sup>2</sup> <code>email</code>, where <code>preferred_username</code> is the default.</p> <p>If only an unverified <code>email</code> address<sup>2</sup> or none of these claims are returned, we recommend that you report this to the vendor of the Identity Provider you are using, as this is also likely to cause problems with other software. In a future release, we may offer additional config options to work around this issue, e.g. by generating a random username. However, this is currently not possible.</p> <p>Learn more \u203a</p> <ol> <li> <p><code>PHOTOPRISM_OIDC_REGISTER</code> must be set to <code>\"true\"</code> to allow new users to create an account via OpenID Connect.\u00a0\u21a9</p> </li> <li> <p>The <code>email_verified</code> flag must be set by the OIDC Identity Provider so that the <code>email</code> address can be used to send notifications and/or confirm the identity of users. If we do not insist on verification, this could otherwise have a negative impact on trust and security.\u00a0\u21a9\u21a9\u21a9\u21a9</p> </li> <li> <p>Admins are unable to change the authentication method of their own user account through the Admin Web UI, so they cannot accidentally lock themselves out e.g. by setting it to None.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/advanced/scalability/","title":"Deployment in High-Availability Environments and Horizontal Scaling in the Cloud","text":"<p>Since we strive to make effective use of our resources, and most users run PhotoPrism on NAS devices at home or on small cloud server instances, our public documentation and development activities generally focus on these usage scenarios.</p> <p>So while our freely available Community Edition works well even with millions of files if your server meets the requirements (vertical scaling), it is important to note that the architecture and feature set would look different in some aspects \u2013 with other trade-offs \u2013 had the focus been on high availability and horizontal scaling in the cloud instead. For example, you might then split the backend into independently scalable microservices and not use a regular file system as storage for indexing.</p> <p>As an enterprise customer with specific scalability or availability requirements, you are welcome to contact us for a free consultation to determine the feasibility and implementation options.</p>"},{"location":"getting-started/advanced/transcoding/","title":"Video Transcoding","text":""},{"location":"getting-started/advanced/transcoding/#avc-encoders","title":"AVC Encoders","text":"<p>The encoder used by FFmpeg can be configured with <code>PHOTOPRISM_FFMPEG_ENCODER</code> in your <code>compose.yaml</code> or <code>docker-compose.yml</code> config file:</p> Encoder Value Software H.264 <code>software</code> Apple Video Toolbox <code>apple</code> Intel Quick Sync <code>intel</code> NVIDIA H.264 <code>nvidia</code> Raspberry Pi / Video4Linux <code>raspberry</code> Video Acceleration API <code>vaapi</code> <p>It defaults to <code>software</code> if no value is set or hardware transcoding fails. Please refer to the FFmpeg documentation for a full list of encoders and their implementation status. We welcome contributions to support additional encoders.</p> <p>For video transcoding to work, FFmpeg must be enabled and installed. When using our Docker images, it is already pre-installed. In addition, the service must have permission to use the related video devices. This depends on your hardware and operating system, so we can only give you examples that may need to be changed to work for you.</p>"},{"location":"getting-started/advanced/transcoding/#size-limit","title":"Size Limit","text":"<p>The <code>PHOTOPRISM_FFMPEG_SIZE</code> config option allows to limit the resolution of transcoded videos. It accepts the following standard sizes, while other values are automatically adjusted to the next supported size:</p> Size Usage 720 SD TV, Mobile 1280 HD TV, SXGA 1920 Full HD 2048 DCI 2K, Tablets 2560 Quad HD 3840 4K Ultra HD 4096 DCI 4K, Retina 4K 7680 8K Ultra HD 2 <p>When transcoding videos, the original aspect ratio is maintained and smaller videos will not be upscaled.</p> <p>Note that MPEG-4 AVC videos are not re-encoded if they exceed the configured resolution limit.</p>"},{"location":"getting-started/advanced/transcoding/#bitrate-limit","title":"Bitrate Limit","text":"<p>You can limit the bitrate of the AVC encoder with the config option <code>PHOTOPRISM_FFMPEG_BITRATE</code>. Keep in mind that this is a \"soft limit\", so the actual bitrate varies and depends on the encoder used as well as the specific FFmpeg parameters, which in turn depend on the encoder. It may also depend on the operating system and the GPU drivers.</p> <p>If the bitrate is significantly exceeded in your environment and you want improvements to be implemented, we recommend that you take a look at the FFmpeg documentation and the parameters in our source code so you can tell us which parameters should be changed to make it work for you.</p> <p>Note that MPEG-4 AVC videos are not re-encoded if they exceed the configured bitrate limit. To reduce the size of AVC videos, you can manually replace the original files with a smaller version or wait for a future release that offers this functionality.</p> <p>Already transcoded video files are not automatically re-transcoded when the limit is changed. To do this, you must manually remove the <code>*.avc</code> files in the <code>sidecar</code> storage folder and run the <code>photoprism convert</code> command in a terminal.</p>"},{"location":"getting-started/advanced/transcoding/#software-transcoding","title":"Software Transcoding","text":"<p>Unless you have a lot of high-resolution videos in your library, we recommend keeping the default settings to use the standard software codec for video transcoding. It has a high quality and does not require any special permissions or additional drivers.</p> <p>Since FFmpeg 7 has significant performance optimizations compared to version 6.1.1 that ships with Ubuntu 24.04, users of our Docker image can choose to install the latest FFmpeg build available at johnvansickle.com/ffmpeg by adding <code>PHOTOPRISM_INIT: \"ffmpeg\"</code> to the environment section of their <code>compose.yaml</code> or <code>docker-compose.yml</code> file:</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_INIT: \"ffmpeg\"\n</code></pre> <p>Note that this version cannot be used with hardware transcoding and that it may support a different set of file formats.</p>"},{"location":"getting-started/advanced/transcoding/#gpu-drivers","title":"GPU Drivers","text":"<p>Depending on your hardware, it may be necessary to install additional packages for FFmpeg to use the AVC encoding device. </p> <p>One way to do this automatically is to set <code>PHOTOPRISM_INIT</code> to <code>\"gpu tensorflow\"</code> when using our Docker images. Note that this is experimental and not required for most encoders.</p> <p>See the related installation script on GitHub for details. We welcome contributions to support additional devices or update package names if needed.</p> <p>Most users can either skip <code>PHOTOPRISM_INIT</code> completely or just use <code>PHOTOPRISM_INIT: \"tensorflow\"</code> to install a special version of TensorFlow that improves indexing performance if the server CPU supports AVX, which is independent of video transcoding and the type of GPU.</p>"},{"location":"getting-started/advanced/transcoding/#intel-quick-sync","title":"Intel Quick Sync","text":"<p>To enable Intel Quick Sync hardware video transcoding, add the <code>intel</code> target to <code>PHOTOPRISM_INIT</code>, choose the <code>intel</code> encoder, and share the <code>/dev/dri</code> devices with the <code>photoprism</code> service:</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_FFMPEG_ENCODER: \"intel\"\n      PHOTOPRISM_INIT: \"intel\"\n      ...\n    devices:\n      - \"/dev/dri:/dev/dri\"\n    volumes:\n      - ...\n</code></pre> <p>In addition, you can choose to run the <code>photoprism</code> service as a non-root user by setting either the <code>user</code> service property or the <code>PHOTOPRISM_UID</code> and <code>PHOTOPRISM_GID</code> environment variables in your <code>compose.yaml</code> or <code>docker-compose.yml</code> file:</p> Environment Default Description PHOTOPRISM_UID 0 run as a non-root user after initialization (supported: 0, 33, 50-99, 500-600, 900-1250, and 2000-2100) PHOTOPRISM_GID 0 run with a specific group id after initialization, can optionally be used together with <code>PHOTOPRISM_UID</code> (supported: 0, 33, 44, 50-99, 105, 109, 115, 116, 500-600, 900-1250, and 2000-2100) <p>Which user and group you choose should depend on the owner of the <code>/dev/dri</code> video device so that the service has permission to access it.</p> <p>Finally, remember to update the file permissions and/or owner with the <code>chmod</code> and <code>chown</code> commands when you make changes to the UID or GID, and restart the services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre> <p>Older Intel hardware may not support certain video codecs and resolutions. In this case, it is not possible to use hardware transcoding for these videos. We may later add a configuration option that allows you to downscale videos.</p>"},{"location":"getting-started/advanced/transcoding/#nvidia-container-toolkit","title":"NVIDIA Container Toolkit","text":"<p>For hardware transcoding with an NVIDIA graphics card, the NVIDIA Container Toolkit must be installed on the host computer first. Instructions can be found in their installation guide.</p> <p>Once the toolkit is installed, choose the <code>nvidia</code> encoder and add a <code>deploy</code> section to the <code>photoprism</code> service:</p> <pre><code>services:\n  photoprism:    \n    environment:\n      PHOTOPRISM_FFMPEG_ENCODER: \"nvidia\"\n      PHOTOPRISM_INIT: \"tensorflow-gpu\"\n      NVIDIA_VISIBLE_DEVICES: \"all\"\n      NVIDIA_DRIVER_CAPABILITIES: \"all\"\n      ...\n    volumes:\n      - ...\n    deploy:\n      resources:\n        reservations:\n          devices:\n            - driver: \"nvidia\"\n              capabilities: [gpu]\n              count: 1\n    ...\n</code></pre> <p>Now restart the services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre> <p>Should PhotoPrism fail to start after this due to unsupported instructions, your CPU may not have the capabilities to use the GPU-optimized version of TensorFlow. In this case, you will need to change <code>PHOTOPRISM_INIT: \"tensorflow-gpu\"</code> to <code>PHOTOPRISM_INIT: \"tensorflow\"</code> in your configuration and then recreate the service containers, so that a CPU-only version is installed:</p> <pre><code>docker compose stop\ndocker compose up -d --force-recreate\n</code></pre> <p>The GPU-optimized version of TensorFlow that <code>PHOTOPRISM_INIT</code> installs is the same as the one you get at tensorflow.org/install/lang_c, so you can refer to their website/documentation for more information, e.g. which GPUs/drivers are supported. Using a GPU-optimized version of TensorFlow is optional and has no impact on video transcoding capabilities or performance.</p> <p>We also provide a ready-to-use <code>compose.yaml</code> example for your convenience. Note that older hardware may not support certain video codecs and resolutions.</p>"},{"location":"getting-started/advanced/transcoding/#raspberry-pi","title":"Raspberry Pi","text":"<p>Experimental hardware-accelerated transcoding on a Raspberry Pi (and compatible devices) can be enabled by choosing the <code>raspberry</code> encoder:</p> <pre><code>PHOTOPRISM_FFMPEG_ENCODER: \"raspberry\"\n</code></pre> <p>The Docker container must also have access to one or more video devices.  For the <code>raspberry</code> encoder, for example, you add:</p> <pre><code>devices:\n - \"/dev/video11:/dev/video11\"\n</code></pre> <p>Additional advanced configuration options are available to improve stability if needed:</p> <pre><code>PHOTOPRISM_FFMPEG_BUFFERS: \"64\" # FFmpeg capture buffers (default: 32)\n</code></pre> <p>Now restart the services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre> <p>Some server configurations, especially Raspberry Pi's, may experience memory allocation issues when using hardware acceleration. Carefully monitor your server's logs and increase the available GPU and/or CMA memory allocations if necessary. Note that the Raspberry Pi hardware currently only supports video resolutions up to 2160p.</p>"},{"location":"getting-started/advanced/transcoding/#other-hardware","title":"Other Hardware","text":"<p>If you want to use other hardware for transcoding, choose the appropriate AVC encoder and share the required devices with the <code>photoprism</code> service, as shown in the examples above. Then restart the services for the changes to take effect.</p> <p>Which devices need to be shared and whether additional drivers are required depends on your specific hardware. For more information, see the FFmpeg documentation.</p>"},{"location":"getting-started/advanced/transcoding/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/advanced/transcoding/#enabling-trace-log-mode","title":"Enabling Trace Log Mode","text":"<p>A good way to troubleshoot configuration issues is to increase the log level. To enable trace log mode, set <code>PHOTOPRISM_LOG_LEVEL</code> to <code>\"trace\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--trace</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_LOG_LEVEL: \"trace\"\n      ...\n</code></pre> <p>Then restart all services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre>"},{"location":"getting-started/advanced/transcoding/#viewing-docker-service-logs","title":"Viewing Docker Service Logs","text":"<p>You can run this command to check the server logs for warnings and errors, including the last 100 messages (omit <code>--tail=100</code> to see them all, and <code>-f</code> to output only the last logs without watching them):</p> <pre><code>docker compose logs -f --tail=100 \n</code></pre> <p>Learn more \u203a</p> <p>If FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have ExifTool enabled to extract metadata such as duration, resolution, and codec. Note that your hardware may not support certain video codecs and resolutions. In this case, the software encoder is used automatically.</p> <p>Our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/advanced/migrations/","title":"Performing Index Migrations","text":"<p>When using Docker Compose, you can prepend commands like <code>docker compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where your <code>compose.yaml</code> file is located.</p>"},{"location":"getting-started/advanced/migrations/#show-migration-status","title":"Show Migration Status","text":"<p>Run the <code>photoprism migrations ls</code> command in a terminal to see a list of all migrations and their current status:</p> <pre><code>$ photoprism migrations ls\n\n|-----------------|---------|---------------------|---------------------|--------|\n|       ID        | Dialect |     Started At      |     Finished At     | Status |\n|-----------------|---------|---------------------|---------------------|--------|\n| 20211121-094727 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20211124-120008 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-030000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-040000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-050000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-060000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-061000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-070000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-071000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-080000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-081000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-083000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-090000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-091000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-093000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220421-200000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000001 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000002 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000003 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n|-----------------|---------|---------------------|---------------------|--------|\n</code></pre>"},{"location":"getting-started/advanced/migrations/#run-specific-migrations","title":"Run Specific Migrations","text":"<p>To explicitly re-run specific migrations, you can pass them as arguments to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run 20220521-000003\n\nINFO[2022-07-12T11:45:29Z] migrate: 20220521-000003 successful [12.967654ms] \nINFO[2022-07-12T11:45:29Z] migration completed in 40.89123ms            \nINFO[2022-07-12T11:45:29Z] closed database connection \n</code></pre>"},{"location":"getting-started/advanced/migrations/#retry-failed-migrations","title":"Retry Failed Migrations","text":"<p>To automatically retry previously failed migrations, pass the <code>-f</code> flag to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run -f\n</code></pre>"},{"location":"getting-started/advanced/migrations/mariadb-to-sqlite/","title":"Migrating from MariaDB to SQLite","text":"<p>While we believe this contributed content may be helpful to advanced users, we have not yet thoroughly reviewed it. If you have suggestions for improvement, please let us know by clicking  to submit a change request.</p> <ul> <li>Install techouse/mysql-to-sqlite3 on your host.</li> <li>Stop Photoprism: <code>docker compose stop photoprism</code></li> <li>Add the port to the MariaDB service</li> <li>On the host now run <code>sudo mysql2sqlite -f &lt;PATH_TO_STORAGE_MOUNT&gt;/storage/index.db -d photoprism -u root --mysql-password 'insecure'</code></li> <li>Shutdown your current stack fully: <code>docker compose down</code></li> <li>Edit your <code>compose.yaml</code> or <code>docker-compose.yml</code>:</li> <li>Remove the MariaDB service.</li> <li>Change in the Photoprism settings to use the sqlite driver and remove the other database settings</li> <li>Start your stack again with <code>docker compose up -d</code></li> <li>If this worked you may want to delete the old mountpoint for the MariaDB database.</li> </ul> <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated, so their database schema is no longer optimized for performance, for example, because indexes are missing or columns have the wrong data type.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p>"},{"location":"getting-started/advanced/migrations/sqlite-to-mariadb/","title":"Migrating from SQLite to MariaDB","text":"<p>While we believe this contributed content may be helpful to advanced users, we have not yet thoroughly reviewed it. If you have suggestions for improvement, please let us know by clicking  to submit a change request.</p> <ul> <li>Install techouse/sqlite3-to-mysql on your host. (openSUSE: <code>zypper in python-sqlite3-to-mysql</code>)</li> <li>Shutdown your current stack: <code>docker compose down</code></li> <li>Add the current snippet of the MariaDB to your Sqlite Photoprism docker compose with the addition of the extra <code>ports</code>   section where you expose port 3306 to the Host. In my case this looked like attachment 1.</li> <li>Start the stack again: <code>docker compose up -d</code></li> <li>Stop Photoprism: <code>docker compose stop photoprism</code></li> <li>On the host now run <code>sudo sqlite3mysql -f &lt;PATH_TO_STORAGE_MOUNT&gt;/storage/index.db -d photoprism -u root -p</code> and enter the MariaDB password when prompted (default is <code>insecure</code>).</li> <li>Shutdown your current stack again: <code>docker compose down</code></li> <li>Edit your <code>compose.yaml</code> or <code>docker-compose.yml</code> so it uses the MariaDB database you added before. Don't forget to remove the <code>ports</code>   section of the MariaDB Container.</li> <li>Start your stack again with <code>docker compose up -d</code></li> <li>If this worked you may want to delete the file <code>index.db</code> in the <code>storage</code> mount since it contains out of date   information.</li> </ul> <p>Attachment 1:</p> <pre><code>services:\n  mariadb:\n    restart: unless-stopped\n    image: mariadb:11\n    ports:\n      - 3306:3306 # Expose Port 3306 \n    security_opt:\n      - seccomp:unconfined\n      - apparmor:unconfined\n    command: --innodb-buffer-pool-size=1G &gt;\n      --transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4\n      --collation-server=utf8mb4_unicode_ci --max-connections=512\n      --innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120\n    volumes:\n      - \"./database:/var/lib/mysql\" # DO NOT REMOVE\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      MARIADB_DATABASE: \"photoprism\"\n      MARIADB_USER: \"photoprism\"\n      MARIADB_PASSWORD: \"insecure\"\n      MARIADB_ROOT_PASSWORD: \"insecure\"\n</code></pre> <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexing are resolved.</p> <p>View Database Schema \u203a </p>"},{"location":"getting-started/cloud/digitalocean/","title":"Using our DigitalOcean 1-Click App","text":"<p>PhotoPrism can be deployed at DigitalOcean with just a few clicks. If you have no DigitalOcean account yet, you may use this sign-up link to receive a $100, 60-day account credit:</p> <p> Sign up at DigitalOcean </p>"},{"location":"getting-started/cloud/digitalocean/#install-photoprism","title":"Install PhotoPrism","text":"<ul> <li>Sign Up or Log In at DigitalOcean</li> <li>Open the PhotoPrism listing in the marketplace</li> <li>Click Create PhotoPrism Droplet</li> </ul>"},{"location":"getting-started/cloud/digitalocean/#configure-your-droplet","title":"Configure Your Droplet","text":""},{"location":"getting-started/cloud/digitalocean/#choose-an-image","title":"Choose an Image","text":"<p>The PhotoPrism image will be pre-selected</p> <p></p>"},{"location":"getting-started/cloud/digitalocean/#choose-a-plan","title":"Choose a Plan","text":"<p>We recommend hosting PhotoPrism on a server with at least 2 cores and 3 GB of physical memory. Indexing and searching can be slow on smaller Droplets, depending on how many and what types of files you upload.</p> <p>While PhotoPrism has been reported to work on Droplets with less memory, we take no responsibility for instability or performance problems. RAW image conversion and TensorFlow are disabled on Droplets with 1 GB or less memory.</p> <p></p>"},{"location":"getting-started/cloud/digitalocean/#choose-a-datacenter-region","title":"Choose a Datacenter Region","text":""},{"location":"getting-started/cloud/digitalocean/#choose-an-authentication-mode","title":"Choose an Authentication Mode","text":""},{"location":"getting-started/cloud/digitalocean/#finalize-your-droplet","title":"Finalize Your Droplet","text":"<p>Finalize your droplet and click Create Droplet </p> <p></p> <p>Your droplet is now being created.</p>"},{"location":"getting-started/cloud/digitalocean/#admin-password","title":"Admin Password","text":"<ul> <li>Click More</li> </ul> <ul> <li>Click Access console</li> </ul> <ul> <li>Launch the console as root</li> </ul> <ul> <li>Within the console type <code>cat /root/.initial-password.txt</code> and click enter</li> <li>Copy your initial password</li> </ul>"},{"location":"getting-started/cloud/digitalocean/#open-photoprism","title":"Open PhotoPrism","text":"<ul> <li>Click Get started</li> </ul> <ul> <li>Click Quick access</li> </ul> <p>Info</p> <p>In case you have no domain and let's encrypt set up you will see the notice \"Your connection is not private\".  Click Advanced and click Open page.</p> <ul> <li>Use username \"admin\" and your initial password to sign in</li> <li>You may change your password using the Web UI</li> </ul>"},{"location":"getting-started/cloud/digitalocean/#first-steps","title":"First Steps","text":"<ol> <li>Configure library and advanced settings according to your needs.</li> <li>Choose whether you want to index your originals so that the existing file and folder names are preserved, or import them so that they are automatically organized by year and month.</li> <li>To add new pictures, you can either copy them to the import or originals folder e.g. using WebDAV, or upload them with a browser, which will import them automatically after upload.</li> <li>Start indexing or importing</li> <li>Finally, set up automatic syncing from your mobile phone and install the Progressive Web App (PWA) on your desktop, tablet, and phone home screens as needed.</li> </ol>"},{"location":"getting-started/cloud/pikapods/","title":"PikaPods Open Source App Hosting","text":"<p>Trusted Partner</p> <p>PikaPods has partnered with us to offer you this officially supported, cloud-hosted solution.<sup>1</sup> Your personal app instance is ready to use in just a few steps and includes member features like premium themes and high-resolution world maps - at no additional cost! New customers also receive a $5 welcome credit.</p>"},{"location":"getting-started/cloud/pikapods/#setup","title":"Setup","text":"<p>This step-by-step guide explains how to set up a new PhotoPrism instance at PikaPods.</p>"},{"location":"getting-started/cloud/pikapods/#1-create-account","title":"1. Create Account","text":"<p>Sign up at www.pikapods.com/register with your contact details. You will then receive a confirmation email with an activation link that you must click to continue.</p> <p>Before proceeding, we recommend that you enter your credit card information first to avoid usage restrictions.</p>"},{"location":"getting-started/cloud/pikapods/#2-start-photoprism","title":"2. Start PhotoPrism","text":"<p>If it isn't already selected, go to Available Apps and select PhotoPrism, then click Run Your Own:</p> <p></p> <p>Continue by entering a Pod Name and selecting a Region:</p> <p></p> <p>Click ENV VARS to specify the initial password for the \"admin\" user account:</p> <p></p> <p>In RESOURCES, you can configure the storage space available for photos and videos, as well as the compute resources PhotoPrism can use, such as for indexing and face recognition.</p> <p>PhotoPrism currently requires at least 2 CPUs and 8 GB of memory. We are working to lower these minimum requirements.</p> <p>The approximate price per month is shown at the bottom:</p> <p></p> <p>Finally, click Add Pod to complete the setup and start your instance.</p>"},{"location":"getting-started/cloud/pikapods/#3-add-your-files","title":"3. Add Your Files","text":"<p>PhotoPrism is now fully set up and ready to use. To log in, click Open Pod, enter the username \"admin\" and the password you have specified:</p> <p></p> <p>If you want to change your password, you can do so in Settings &gt; Account. Our First Steps \ud83d\udc63 tutorial will guide you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <ol> <li> <p>A share of the revenue helps fund the development of PhotoPrism \u21a9</p> </li> </ol>"},{"location":"getting-started/config-files/","title":"<code>options.yml</code>","text":"<p>As an alternative to configuring your instance with environment variables, it may be more convenient to use an <code>options.yml</code> file located in your config path, for example if PhotoPrism was installed through an app store or with the installation packages we provide.</p> <p>You can specify a custom config path by adding the <code>ConfigPath</code> option to a \u21aa <code>defaults.yml</code> file in the <code>/etc/photoprism</code> directory (requires root privileges). It is also possible to use the command flag <code>--config-path</code> or the environment variable <code>PHOTOPRISM_CONFIG_PATH</code> for this. By default, it is a subdirectory of the storage path.</p> <p>If you use a third-party integration or package, you should find the exact location of the configuration files in the corresponding documentation.</p> <p>Note that changes to the <code>options.yml</code> file require a restart to take effect and that config values changed through the web interface will also be saved to this file. We therefore recommend that you only edit it manually while your instance is stopped.</p>"},{"location":"getting-started/config-files/#file-format","title":"File Format","text":"<p>You can use any text editor to create or modify YAML config files. When specifying values, make sure that their data type matches the documentation, e.g. bool values must be either <code>true</code> or <code>false</code> (without quotes, unlike in <code>compose.yaml</code> files) and int values must be whole numbers, as shown in this example:</p> <pre><code>Debug: false\nAdminUser: \"admin\"\nAdminPassword: \"insecure\"\nDatabaseUser: \"photoprism\"\nDatabasePassword: \"insecure\"\nDatabaseName: \"photoprism\"\nDatabaseDriver: \"mysql\"\nDatabaseServer: \"localhost:3306\"\nHttpPort: 2342\nSiteCaption: \"AI-Powered Photos App\"\nSiteDescription: \"\"\nSiteAuthor: \"\"\nSiteUrl: \"http://localhost:2342/\"\n</code></pre> <p>To avoid ambiguity, it is recommended to enclose text strings in <code>\"</code> (double quotes), especially if they contain spaces, a colon, or other special characters.</p> <p>File and directory paths may be specified using <code>~</code> as a placeholder for the home directory of the current user, e.g. <code>~/Pictures</code>. Relative paths can also be specified via <code>./pathname</code>. If no explicit originals, import and/or assets path has been configured, a list of default directory paths will be searched and the first existing directory will be used for the respective path.</p>"},{"location":"getting-started/config-files/#global-defaults","title":"Global Defaults","text":"<p>Global configuration defaults, including the storage paths to be used, can optionally be specified in a \u21aa <code>defaults.yml</code> file.</p>"},{"location":"getting-started/config-files/#current-values","title":"Current Values","text":"<p>Run <code>photoprism --help</code> in a terminal to get an overview of the command flags and environment variables available for configuration. Their current values can be displayed with the <code>photoprism config</code> command.</p> <p>Below are the corresponding names of the config options that you can use in the <code>options.yml</code> and <code>defaults.yml</code> files, grouped by purpose.</p>"},{"location":"getting-started/config-files/#config-options","title":"Config Options","text":""},{"location":"getting-started/config-files/#authentication","title":"Authentication","text":"Name Type CLI Flag AuthMode string --auth-mode Public bool --public AdminUser string --admin-user AdminPassword string --admin-password PasswordLength int --password-length OIDCUri string --oidc-uri OIDCClient string --oidc-client OIDCSecret string --oidc-secret OIDCScopes string --oidc-scopes OIDCProvider string --oidc-provider OIDCIcon string --oidc-icon OIDCRedirect bool --oidc-redirect OIDCRegister bool --oidc-register OIDCUsername string --oidc-username OIDCWebDAV bool --oidc-webdav DisableOIDC bool --disable-oidc SessionMaxAge int64 --session-maxage SessionTimeout int64 --session-timeout SessionCache int64 --session-cache"},{"location":"getting-started/config-files/#logging","title":"Logging","text":"Name Type CLI Flag LogLevel string --log-level Prod bool --prod Debug bool --debug Trace bool --trace"},{"location":"getting-started/config-files/#storage","title":"Storage","text":"Name Type CLI Flag ConfigPath string --config-path OriginalsPath string --originals-path OriginalsLimit int --originals-limit ResolutionLimit int --resolution-limit UsersPath string --users-path StoragePath string --storage-path ImportPath string --import-path ImportDest string --import-dest ImportAllow string --import-allow UploadNSFW bool --upload-nsfw UploadAllow string --upload-allow UploadArchives bool --upload-archives UploadLimit int --upload-limit CachePath string --cache-path TempPath string --temp-path AssetsPath string --assets-path"},{"location":"getting-started/config-files/#sidecar-files","title":"Sidecar Files","text":"Name Type CLI Flag SidecarPath string --sidecar-path SidecarYaml bool --sidecar-yaml"},{"location":"getting-started/config-files/#usage","title":"Usage","text":"Name Type CLI Flag UsageInfo bool --usage-info FilesQuota uint64 --files-quota"},{"location":"getting-started/config-files/#backup","title":"Backup","text":"Name Type CLI Flag BackupPath string --backup-path BackupSchedule string --backup-schedule BackupRetain int --backup-retain BackupDatabase bool --backup-database BackupAlbums bool --backup-albums"},{"location":"getting-started/config-files/#indexing","title":"Indexing","text":"Name Type CLI Flag IndexWorkers int --index-workers IndexSchedule string --index-schedule WakeupInterval time.Duration --wakeup-interval AutoIndex int --auto-index AutoImport int --auto-import"},{"location":"getting-started/config-files/#feature-flags","title":"Feature Flags","text":"Name Type CLI Flag ReadOnly bool --read-only Experimental bool --experimental DisableSettings bool --disable-settings DisableBackups bool --disable-backups DisableRestart bool --disable-restart DisableWebDAV bool --disable-webdav DisablePlaces bool --disable-places DisableTensorFlow bool --disable-tensorflow DisableFaces bool --disable-faces DisableClassification bool --disable-classification DisableFFmpeg bool --disable-ffmpeg DisableExifTool bool --disable-exiftool DisableVips bool --disable-vips DisableSips bool --disable-sips DisableDarktable bool --disable-darktable DisableRawTherapee bool --disable-rawtherapee DisableImageMagick bool --disable-imagemagick DisableHeifConvert bool --disable-heifconvert DisableVectors bool --disable-vectors DisableJpegXL bool --disable-jpegxl DisableRaw bool --disable-raw RawPresets bool --raw-presets ExifBruteForce bool --exif-bruteforce"},{"location":"getting-started/config-files/#customization","title":"Customization","text":"Name Type CLI Flag DefaultLocale string --default-locale DefaultTimezone string --default-timezone DefaultTheme string --default-theme PlacesLocale string --places-locale AppName string --app-name AppMode string --app-mode AppIcon string --app-icon AppColor string --app-color LegalInfo string --legal-info LegalUrl string --legal-url WallpaperUri string --wallpaper-uri"},{"location":"getting-started/config-files/#site-information","title":"Site Information","text":"Name Type CLI Flag SiteUrl string --site-url SiteAuthor string --site-author SiteTitle string --site-title SiteCaption string --site-caption SiteDescription string --site-description SiteFavicon string --site-favicon SitePreview string --site-preview CdnUrl string --cdn-url CdnVideo bool --cdn-video CORSOrigin string --cors-origin CORSHeaders string --cors-headers CORSMethods string --cors-methods"},{"location":"getting-started/config-files/#proxy-server","title":"Proxy Server","text":"Name Type CLI Flag HttpsProxy string --https-proxy HttpsProxyInsecure bool --https-proxy-insecure TrustedProxies []string --trusted-proxy ProxyProtoHeaders []string --proxy-proto-header ProxyProtoHttps []string --proxy-proto-https"},{"location":"getting-started/config-files/#web-server","title":"Web Server","text":"Name Type CLI Flag DisableTLS bool --disable-tls DefaultTLS bool --default-tls TLSEmail string --tls-email TLSCert string --tls-cert TLSKey string --tls-key HttpMode string --http-mode HttpCompression string --http-compression HttpCachePublic bool --http-cache-public HttpCacheMaxAge int --http-cache-maxage HttpVideoMaxAge int --http-video-maxage HttpHost string --http-host HttpPort int --http-port"},{"location":"getting-started/config-files/#database-connection","title":"Database Connection","text":"Name Type CLI Flag DatabaseDriver string --database-driver DatabaseDsn string --database-dsn DatabaseName string --database-name DatabaseServer string --database-server DatabaseUser string --database-user DatabasePassword string --database-password DatabaseTimeout int --database-timeout DatabaseConns int --database-conns DatabaseConnsIdle int --database-conns-idle"},{"location":"getting-started/config-files/#file-conversion","title":"File Conversion","text":"Name Type CLI Flag FFmpegBin string --ffmpeg-bin FFmpegEncoder string --ffmpeg-encoder FFmpegSize int --ffmpeg-size FFmpegQuality int --ffmpeg-quality FFmpegBitrate int --ffmpeg-bitrate FFmpegPreset string --ffmpeg-preset FFmpegDevice string --ffmpeg-device FFmpegMapVideo string --ffmpeg-map-video FFmpegMapAudio string --ffmpeg-map-audio ExifToolBin string --exiftool-bin SipsBin string --sips-bin SipsExclude string --sips-exclude DarktableBin string --darktable-bin DarktableCachePath string --darktable-cache-path DarktableConfigPath string --darktable-config-path DarktableExclude string --darktable-exclude RawTherapeeBin string --rawtherapee-bin RawTherapeeExclude string --rawtherapee-exclude ImageMagickBin string --imagemagick-bin ImageMagickExclude string --imagemagick-exclude HeifConvertBin string --heifconvert-bin HeifConvertOrientation string --heifconvert-orientation RsvgConvertBin string --rsvgconvert-bin"},{"location":"getting-started/config-files/#security-tokens","title":"Security Tokens","text":"Name Type CLI Flag DownloadToken string --download-token PreviewToken string --preview-token"},{"location":"getting-started/config-files/#preview-images","title":"Preview Images","text":"Name Type CLI Flag ThumbLibrary string --thumb-library ThumbColor string --thumb-color ThumbFilter string --thumb-filter ThumbSize int --thumb-size ThumbSizeUncached int --thumb-size-uncached ThumbUncached bool --thumb-uncached"},{"location":"getting-started/config-files/#image-quality","title":"Image Quality","text":"Name Type CLI Flag JpegQuality int --jpeg-quality JpegSize int --jpeg-size PngSize int --png-size"},{"location":"getting-started/config-files/#computer-vision","title":"Computer Vision","text":"Name Type CLI Flag VisionYaml string --vision-yaml VisionApi bool --vision-api VisionUri string --vision-uri VisionKey string --vision-key DetectNSFW bool --detect-nsfw"},{"location":"getting-started/config-files/#daemon-mode","title":"Daemon Mode","text":"<p>If you start the server as a daemon in the background, you can additionally specify a filename for the log and the process ID:</p> Name Type CLI Flag PIDFilename string --pid-filename LogFilename string --log-filename DetachServer bool --detach-server"},{"location":"getting-started/config-files/defaults/","title":"<code>defaults.yml</code>","text":"<p>Global config defaults, including the config and storage paths to be used, can be defined with a <code>defaults.yml</code> file in the <code>/etc/photoprism</code> directory (requires root privileges). It is possible to use the environment variable <code>PHOTOPRISM_DEFAULTS_YAML</code> or the command flag <code>--defaults-yaml</code> to load the defaults from another file instead.</p> <p>Keep in mind that any changes to the config options, either through the UI, config files, or by setting environment variables, always require a restart to take effect.</p> <p>A <code>defaults.yml</code> file affects all users and should only contain options for which you want to set a global default.</p>"},{"location":"getting-started/config-files/defaults/#file-format","title":"File Format","text":"<p>You can use any text editor to create or modify YAML config files. When specifying values, make sure that their data type matches the documentation, e.g. bool values must be either <code>true</code> or <code>false</code> (without quotes, unlike in <code>compose.yaml</code> files) and int values must be whole numbers, as shown in this example:</p> <pre><code>ConfigPath: \"~/.config/photoprism\"\nStoragePath: \"~/.photoprism\"\nOriginalsPath: \"~/Pictures\"\nImportPath: \"/media\"\nAdminUser: \"admin\"\nAdminPassword: \"insecure\"\nAuthMode: \"password\"\nDatabaseDriver: \"sqlite\"\nHttpHost: \"127.0.0.1\"\nHttpPort: 2342\nHttpCompression: \"gzip\"\nDisableTLS: false\nDefaultTLS: true\nExperimental: false\nDisableWebDAV: false\nDisableSettings: false\nDisableTensorFlow: false\nDisableFaces: false\nDisableClassification: false\nDisableVectors: false\nDisableRaw: false\nRawPresets: false\nJpegQuality: 85\nDetectNSFW: false\nUploadNSFW: true\n</code></pre> <p>To avoid ambiguity, it is recommended to enclose text strings in <code>\"</code> (double quotes), especially if they contain spaces, a colon, or other special characters.</p> <p>File and directory paths may be specified using <code>~</code> as a placeholder for the home directory of the current user, e.g. <code>~/Pictures</code>. Relative paths can also be specified via <code>./pathname</code>. If no explicit originals, import and/or assets path has been configured, a list of default directory paths will be searched and the first existing directory will be used for the respective path.</p>"},{"location":"getting-started/config-files/defaults/#supported-options","title":"Supported Options","text":"<p>\u21aa see <code>options.yml</code></p>"},{"location":"getting-started/config-files/defaults/#overriding-defaults","title":"Overriding Defaults","text":"<p>Defaults can be overridden by values in an <code>options.yml</code> file as well as by command flags and environment variables.</p> <p>To override values with an <code>options.yml</code> file, you can specify its path (without the file name) by adding the <code>ConfigPath</code> option to your <code>defaults.yml</code>. Alternatively, you can use the command flag <code>--config-path</code> or the environment variable <code>PHOTOPRISM_CONFIG_PATH</code>. By default, it is located in the config subdirectory of the storage path.</p> <p>The values in an <code>options.yml</code> file are not global by default and can be used to customize individual instances. In both files you can set any of the supported options.</p>"},{"location":"getting-started/config-files/settings/","title":"<code>settings.yml</code>","text":"<p>User interface, download, and indexing preferences are stored in a <code>settings.yml</code> file, located in the config path. If it does not exist yet, it will be created automatically.</p> <p>Experienced users may edit this file directly to change certain settings, as not all of them can be changed through the user interface.</p> <p>Note that changes to the <code>settings.yml</code> file require a restart to take effect and that settings changed through the web interface will also be saved to this file. We therefore recommend that you only edit it manually while your instance is stopped.</p>"},{"location":"getting-started/config-files/settings/#file-format","title":"File Format","text":"<p>You can use any text editor to create or modify YAML config files. However, it is important that related values, e.g. key-value pairs, start at the same indentation level and that spaces are used for indentation, for example:</p> <pre><code>Index:\n  Path: /\n  Convert: true\n  Rescan: false\n  SkipArchived: false\n</code></pre> <p>To avoid ambiguity, it is recommended to enclose text strings in <code>\"</code> (double quotes), especially if they contain spaces, a colon, or other special characters.</p>"},{"location":"getting-started/config-files/settings/#global-defaults","title":"Global Defaults","text":"<p>User settings can optionally be initialized from a <code>settings.yml</code> file located in the same folder as the \u21aa <code>defaults.yml</code> file, e.g. <code>/etc/photoprism</code>.</p>"},{"location":"getting-started/config-files/settings/#sections","title":"Sections","text":""},{"location":"getting-started/config-files/settings/#ui","title":"UI","text":"<p>The <code>UI</code> section allows you to change general user interface settings, such as which theme, language, time zone, and start page to use by default:</p> <pre><code>UI:\n  Scrollbar: true\n  Zoom: false\n  Theme: default\n  Language: en\n  TimeZone: UTC\n  StartPage: default\n</code></pre> <p>If you set <code>Scrollbar</code> to <code>false</code>, the browser scrollbar will be hidden regardless of which device you use and which page you are on. This is generally not recommended, but can be useful e.g. when taking screenshots.</p> <p>Setting <code>Zoom</code> to <code>true</code> allows you to enlarge the user interface with gestures on mobile devices, making the app feel more like a regular web page. This can be useful for visually impaired users so that they can magnify text and images when needed.</p> <p><code>Theme</code> and <code>Language</code> change the theme and language of the user interface and correspond to the settings dropdowns you find when navigating to Settings &gt; General.</p>"},{"location":"getting-started/config-files/settings/#search","title":"Search","text":"<p>In the <code>Search</code> section, you can turn off the list view and the display of titles and captions in search results:</p> <pre><code>Search:\n  BatchSize: -1\n  ListView: true\n  ShowTitles: true\n  ShowCaptions: true\n</code></pre> <p>The optional <code>BatchSize</code> setting allows you to configure how many search results are fetched from the backend with each request. We recommend that you do not change the default.</p>"},{"location":"getting-started/config-files/settings/#library","title":"Library","text":"<p>Since you can also change your indexing and import preferences under Settings &gt; Content and in the Library UI, it is not necessary to edit them directly in the <code>settings.yml</code> configuration file:</p>"},{"location":"getting-started/config-files/settings/#import","title":"Import","text":"<p>Defines the default settings for importing new files into your library:</p> <pre><code>Import:\n  Path: /\n  Move: false\n  Dest: 2006/01/20060102_150405_82F63B78.jpg\n</code></pre> <p>The date and time placeholders for <code>Dest</code>, the import destination file path pattern, are described in the time package documentation. Using a different 8-digit hex number such as <code>12345678</code> for the CRC32 checksum  and <code>.ext</code> instead of <code>.jpg</code> for the file extension will also work. Invalid and empty patterns are ignored and the default is used instead. Learn more \u203a</p>"},{"location":"getting-started/config-files/settings/#index","title":"Index","text":"<p>Defines the default settings for indexing files in your library:</p> <pre><code>Index:\n  Path: /\n  Convert: true\n  Rescan: false\n  SkipArchived: false\n</code></pre>"},{"location":"getting-started/config-files/settings/#stack","title":"Stack","text":"<p>These settings affect which files are indexed together as a stack when you index your library or import new files:</p> <pre><code>Stack:\n  UUID: true\n  Meta: true\n  Name: false\n</code></pre>"},{"location":"getting-started/config-files/settings/#download","title":"Download","text":"<p>The following settings allow you to configure file downloads through the user interface:</p> <pre><code>Download:\n  Name: file\n  Disabled: false\n  Originals: true\n  MediaRaw: false\n  MediaSidecar: false\n</code></pre> <p>The <code>Name</code> setting determines which file names are used when downloading pictures from search results or in the photo viewer. Currently, the following options are supported:</p> <ul> <li><code>file</code> uses the actual file name in the originals folder</li> <li><code>original</code> if the file was imported, the name before it was renamed is used</li> <li><code>share</code> uses a share-friendly file name based on the title and creation date</li> </ul> <p>In case <code>Originals</code> is set to <code>true</code>, only the files in the originals folder will be downloaded, but not any files that were automatically created in the sidecar folder. This is the recommended default.</p> <p>If you set <code>MediaRaw</code> to <code>true</code>, RAW image files are downloaded automatically, for example when you click the download button in the photo viewer.</p> <p>Setting <code>MediaSidecar</code> to <code>true</code> will also download sidecar files as used for XMP metadata. This is generally not recommended except for some professional workflows.</p>"},{"location":"getting-started/config-files/settings/#albums","title":"Albums","text":"<p>These settings allow you to change the default sort order for newly created albums, as well as configure or disallow downloads of entire albums:</p> <pre><code>Albums:\n  Download:\n    Name: share\n    Disabled: false\n    Originals: true\n    MediaRaw: false\n    MediaSidecar: false\n  Order:\n    Album: oldest\n    Folder: added\n    Moment: oldest\n    State: newest\n    Month: oldest\n</code></pre> <p>For more information on the download settings, see the Download section above. Supported album sort orders are added, oldest, newest, name, size, duration, and title.</p>"},{"location":"getting-started/nas/asustor/","title":"Running PhotoPrism on an Asustor NAS","text":"<p>Before setting up PhotoPrism on your NAS, we recommend that you check the Asustor product database for the CPU and memory configuration of your device.</p> <p>For a good user experience, it should be a 64-bit system with at least 2 cores and 3 GB of RAM. Indexing large photo and video collections also benefits greatly from using SSD storage, especially for the database and cache files.</p> <p>Third-party integrations may not provide direct access to config files or the command line, so you might not be able to use all features and config options. Also note that RAW image conversion and TensorFlow are disabled on devices with 1 GB or less memory, and that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/nas/asustor/#setup","title":"Setup","text":"<p>This step-by-step guide explains how to set up a new PhotoPrism instance through App Central, the built-in app store.</p>"},{"location":"getting-started/nas/asustor/#step-1-open-app-central","title":"Step 1: Open App Central","text":"<p>Log in to the user interface of your NAS. You can do this by navigating to https://asustor:7001 if you replace asustor with the actual IP address or hostname of your device and change the port depending on your configuration.</p> <p>Now open \"App Central\" on the home screen:</p> <p></p>"},{"location":"getting-started/nas/asustor/#step-2-install-photoprism","title":"Step 2: Install PhotoPrism","text":"<p>Type PhotoPrism in the search box in the upper right corner and press Enter to start the search. PhotoPrism should then be displayed so you can click \"Install\" to start the installation:</p> <p></p> <p>Next, you will be informed about dependencies like Docker that need to be installed, and you can decide whether you want your instance to be accessible from the Internet (if you have set this up for your NAS and your Internet router is compatible):</p> <p></p> <p>If you want to uninstall PhotoPrism later, you can also do that in App Central.</p>"},{"location":"getting-started/nas/asustor/#step-3-open-photoprism","title":"Step 3: Open PhotoPrism","text":"<p>Once the installation is complete, you will find PhotoPrism on your home screen, where you can open it in a new tab with one click:</p> <p></p> <p>You can also navigate to port 32770 on your device if you want to open PhotoPrism directly. When you see the login screen, enter the username \"admin\" and password \"admin321\" to sign in:</p> <p></p> <p>Remember to change your password after the first login. You can do this in Settings &gt; Account.</p>"},{"location":"getting-started/nas/asustor/#step-4-add-your-files","title":"Step 4: Add Your Files","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Depending on which strategy you choose, you can add your media files to the originals or import folder located in /volume1/Docker/PhotoPrism/data:</p> <p></p> <p>The storage folder, which contains configuration, cache and sidecar files, can also be found there.</p> <p>Note that the folders that PhotoPrism uses cannot be dynamically configured at the moment when using this app store version. However, we are working to make this possible.</p>"},{"location":"getting-started/nas/openmediavault/","title":"Running PhotoPrism on OpenMediaVault","text":"<p>Should you experience problems with the installation, we recommend that you ask the OpenMediaVault community for advice, as we cannot provide support for third-party software and services. Also note that third-party integrations may not provide direct access to config files or the command line, so you might not be able to use all features and config options.</p> <p>PhotoPrism can be conveniently installed using the OpenMediaVault plugin.</p> <p></p>"},{"location":"getting-started/nas/openmediavault/#getting-updates","title":"Getting Updates","text":"<p>To upgrade your instance, first connect to the server running OpenMediaVault via SSH or open a terminal from the web interface, then download the newest image from Docker Hub and restart the service:</p> <pre><code>sudo podman pull docker.io/photoprism/photoprism:latest\nsudo systemctl restart pod-photoprism.service\n</code></pre>"},{"location":"getting-started/nas/openmediavault/#opening-a-terminal","title":"Opening a Terminal","text":"<p>OpenMediaVault runs PhotoPrism as a containerized service with Podman, which means you can use the <code>podman</code> command to open a terminal session.</p> <p>To do this, first connect to the server running OpenMediaVault via SSH or open a terminal from the web interface and then check if PhotoPrism is running (and if so, under what name):</p> <pre><code>sudo podman ps\n</code></pre> <p>In the output, you should see PhotoPrism running under a name like <code>photoprism-app</code>, which you can specify to open a terminal session as follows:</p> <pre><code>sudo podman exec -ti photoprism-app /bin/bash\n</code></pre> <p>You should now be able to run terminal commands, such as those for managing users. Running <code>photoprism help</code> will list all commands and config options available in the current version:</p> <pre><code>photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>photoprism backup --help\n</code></pre> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/nas/qnap/","title":"Setting Up PhotoPrism on QNAP","text":"<p>Before setting up PhotoPrism on your NAS, we recommend that you check the QNAP product database for the CPU and memory configuration of your device.</p> <p>For a good user experience, it should be a 64-bit system with at least 2 cores and 3 GB of RAM. Indexing large photo and video collections also benefits greatly from using SSD storage, especially for the database and cache files.</p> <p>Should you experience problems with the installation, we recommend that you ask the QNAP community for advice, as we cannot provide support for third-party software and services. Also note that RAW image conversion and TensorFlow are disabled on devices with 1 GB or less memory, and that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>"},{"location":"getting-started/nas/qnap/#setup","title":"Setup","text":"<p>You can follow this tutorial to install PhotoPrism on QNAP:</p> <p>\u21aa https://safjan.com/install-photoprism-on-qnap-nas-using-docker-compose/</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/nas/synology/","title":"Running PhotoPrism on a Synology NAS","text":"<p>Before setting up PhotoPrism on your NAS, we recommend that you check the Synology Knowledge Base for the CPU and memory configuration of your device.</p> <p>For a good user experience, it should be a 64-bit system with at least 2 cores and 3 GB of RAM. Indexing large photo and video collections also benefits greatly from using SSD storage, especially for the database and cache files.</p> <p>Should you experience problems with the installation, we recommend that you ask the Synology community for advice, as we cannot provide support for third-party software and services. Also note that RAW image conversion and TensorFlow are disabled on devices with 1 GB or less memory, and that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>"},{"location":"getting-started/nas/synology/#will-my-device-be-fast-enough","title":"Will my device be fast enough?","text":"<p>This largely depends on your expectations and the number of files you have. Most users report that PhotoPrism runs well on their Synology NAS. However, you should keep in mind:</p> <ul> <li>initial indexing may take longer than on standard desktop computers</li> <li>the hardware has no video transcoding support and software transcoding is generally slow</li> </ul>"},{"location":"getting-started/nas/synology/#setup","title":"Setup","text":""},{"location":"getting-started/nas/synology/#setup-using-portainer","title":"Setup using Portainer","text":"<p>A step-by-step guide to install PhotoPrism with Portainer can be found here.</p>"},{"location":"getting-started/nas/synology/#setup-using-synology-container-manager","title":"Setup using Synology Container Manager","text":"<p>To install PhotoPrism with the Synology Container Manager, we recommend following this beginner-friendly tutorial on LinuxLinks.</p>"},{"location":"getting-started/nas/synology/#first-steps","title":"First Steps","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>"},{"location":"getting-started/nas/synology/#troubleshooting","title":"Troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in your <code>compose.yaml</code> file, depending on the performance of your device</li> <li> Make sure your device has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and resolve them.</p>"},{"location":"getting-started/nas/unraid/","title":"Setting Up PhotoPrism on Unraid","text":"<p>Should you experience problems with the installation, we recommend that you ask the Unraid community for advice, as we cannot provide support for third-party software and services. Also note that third-party integrations may not provide direct access to config files or the command line, so you might not be able to use all features and config options.</p> <p>SQLite is not a good choice for users who require scalability and high performance. If it is used in a configuration template, we recommend changing it to use MariaDB instead.</p> <p>We recommend you follow this tutorial provided by IBRACORP to install PhotoPrism on Unraid:</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/portainer/","title":"Portainer Setup Guide","text":"<p>Portainer can be used to manage Docker containers through a web interface. On many NAS devices, it either comes pre-installed or you can simply install it from the vendor's app store. If you are installing PhotoPrism on a regular home or cloud server, you may instead want to follow our Docker Compose Setup Guide, which only uses standard Docker tools and commands.</p>"},{"location":"getting-started/portainer/#step-1-create-stack","title":"Step 1: Create Stack","text":"<p>Navigate to \"Stacks\", click \"Add stack\" and paste the contents of our stack.yml config template (opens in a new tab) into the Web editor so that you can change the storage folder locations in the <code>volumes</code> sections as needed:</p> <p></p> <p>When using the Web editor, please make sure that related values remain on the same indentation level and that lists start with a dash as shown in our template.</p>"},{"location":"getting-started/portainer/#volumes","title":"Volumes","text":"<p>You need to explicitly specify the directories you want to use on your NAS device, since PhotoPrism can't see files in folders that have not been shared. This is an important security feature and allows for a flexible configuration without having to change any other variables.</p> <p>It is important that all folders specified in the \"volumes\" sections are located on a persistent volume on your device. We recommend changing the relative paths used in our example to absolute paths in order to avoid potential data loss, e.g. if the default application folder managed by Portainer changes or is reset after an update.</p> <p>The volume mount paths to configure depend on your NAS device and its settings. As on most operating systems, a dot followed by a slash <code>./</code> can be used to specify a path relative to the current directory. If you keep the defaults, all files will be located in the internal application folder that Portainer automatically creates when you add a new stack.</p>"},{"location":"getting-started/portainer/#database","title":"Database","text":"<p>Our stack template includes a pre-configured MariaDB database server that stores its data in the Portainer application folder by default:</p> <pre><code>services:\n  mariadb:\n    volumes:\n      - \"./database:/var/lib/mysql\"\n</code></pre> <p>If your NAS device has a mixed drive configuration with solid-state drives (SSDs) and traditional hard disks, we recommend that you change <code>./database</code> to an absolute path located on an SSD as this significantly improves performance, for example:</p> <pre><code>      - \"/mnt/ssd/database:/var/lib/mysql\"\n</code></pre> <p>Database files should never be located on an unreliable device such as a USB flash drive, SD card, or network folder.</p>"},{"location":"getting-started/portainer/#photoprismoriginals","title":"/photoprism/originals","text":"<p>The originals folder contains your original photo and video files:</p> <pre><code>services:\n  photoprism:\n    volumes:\n      - \"./originals:/photoprism/originals\"\n</code></pre> <p>We recommend that you change <code>./originals</code> to the directory on your NAS where your existing media files are, for example:</p> <pre><code>      - \"/mnt/photos:/photoprism/originals\"\n</code></pre> <p>Additional directories can be mounted as sub folders of <code>/photoprism/originals</code> (depending on overlay filesystem support):</p> <pre><code>    volumes:\n      - \"/mnt/photos:/photoprism/originals\"\n      - \"/mnt/videos:/photoprism/originals/videos\"\n</code></pre> <p>If you want to start with an empty library, you can mount any directory that has enough free space for your needs.</p>"},{"location":"getting-started/portainer/#photoprismstorage","title":"/photoprism/storage","text":"<p>The storage folder is used to save config, cache, backup, thumbnail, and sidecar files. It must always be specified so that you do not lose these files after a restart or upgrade. If available, we recommend that you put the storage folder on a local SSD drive for best performance. You can otherwise keep the default to store the files in the internal application folder:</p> <pre><code>services:\n  photoprism:\n    volumes:\n      - \"./storage:/photoprism/storage\"\n</code></pre> <p>Never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden. Should you later want to move your instance to another NAS, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/portainer/#photoprismimport","title":"/photoprism/import","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates, for example:</p> <pre><code>services:\n  photoprism:\n    volumes:\n      - \"/mnt/media/usb:/photoprism/import\"\n</code></pre> <p>Imported files receive a canonical filename and will be organized by year and month. You should never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files.</p> <p>Even if you don't specify an import folder, adding files via Web Upload and WebDAV remains possible unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/portainer/#step-2-finalize-setup","title":"Step 2: Finalize Setup","text":"<p>To complete the setup, download the stack.env file from our server (right click and Save Link As...), click \"Load variables from .env file\", upload it to Portainer, and then change the values according to your needs:</p> <p></p> <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible instances. There is no default in case no password was provided. A minimum length of 8 characters is required.</p> <p>You cannot change the database password with <code>MARIADB_PASSWORD</code> after MariaDB has been started for the first time. However, choosing a secure password is not essential if you do not share the database with other applications or expose it over a network. To enable automatic schema updates when upgrading to a new major version, please make sure that <code>MARIADB_AUTO_UPGRADE</code> is set to a non-empty value.</p> <p>When you're done, scroll down and click \"Deploy the stack\" without changing any of the other options:</p> <p></p> <p>After waiting a few moments, you should be able to log in as <code>admin</code> with the password specified in <code>PHOTOPRISM_ADMIN_PASSWORD</code> when you navigate to http://localhost:2342/.</p> <p>If you have modified the server hostname, port, or protocol in your configuration, the URL to use changes accordingly. </p>"},{"location":"getting-started/portainer/#step-3-index-your-library","title":"Step 3: Index Your Library","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>The config options and container image you want to use can be changed at any time by navigating to \"Stacks\", selecting your existing PhotoPrism stack, clicking \"Editor\", updating the configuration to your needs, and then clicking \"Update the stack\" to apply the changes.</p>"},{"location":"getting-started/portainer/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/portainer/#troubleshooting","title":"Troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value, depending on the CPU performance and number of cores</li> <li> Make sure your device has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and resolve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/portainer/#command-line-interface","title":"Command-Line Interface","text":""},{"location":"getting-started/portainer/#opening-a-terminal","title":"Opening a Terminal","text":"<p>Navigate to \"Stacks\", select the PhotoPrism stack and scroll down to the list of containers:</p> <p></p> <p>Now click the  button belonging to the photoprism-photoprism-1 container and accept the default settings to open a terminal:</p> <p></p> <p>Running <code>photoprism help</code> lists all commands and options available in the current version:</p> <pre><code>photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>photoprism backup --help\n</code></pre> <p>The command-line interface is also well suited for job automation using a scheduler.</p>"},{"location":"getting-started/portainer/#examples","title":"Examples","text":"Action Command Display Config Values <code>photoprism show config</code> Show Migration Status <code>photoprism migrations ls</code> Repeat Failed Migrations <code>photoprism migrations run -f</code> Reset Database <code>photoprism reset --yes</code> Backup Database <code>photoprism backup -i -f</code> Restore Database <code>photoprism restore -i -f</code> Change Password <code>photoprism passwd [username]</code> Show User Management Commands <code>photoprism users help</code> Reset Users <code>photoprism users reset --yes</code> Show Face Recognition Commands <code>photoprism faces help</code> Index Faces <code>photoprism faces index</code> Reset People &amp; Faces <code>photoprism faces reset -f</code> Transcode Videos to AVC <code>photoprism convert</code> Regenerate Thumbnails <code>photoprism thumbs -f</code> Update Index <code>photoprism index --cleanup</code> Move to Originals <code>photoprism import [path]</code> Copy to Originals <code>photoprism cp [path]</code>"},{"location":"getting-started/ports/freebsd/","title":"Running PhotoPrism On FreeBSD","text":"<p>Please note that third-party apps may not provide access to the <code>compose.yaml</code> or <code>docker-compose.yml</code> file or the command line, and therefore you may not be able to use all of PhotoPrism's features and config options.</p> <p>Should you experience problems with the installation, we recommend that you ask the FreeBSD community for advice, as we cannot provide support for third-party software and services. You can contribute by clicking  to send a pull request with your changes.</p> <p>For FreeBSD and TrueNAS CORE (formerly FreeNAS) users, an unofficial port is available that builds PhotoPrism from source. It will also compile and install the required TensorFlow libraries for you.</p> <p>1. Clone or download the port:</p> <pre><code>git clone https://github.com/huo-ju/photoprism-freebsd-port\n</code></pre> <p>2. Build TensorFlow and PhotoPrism from source, then install:</p> <pre><code>cd photoprism-freebsd-port\nmake config\nmake &amp;&amp; make install\n</code></pre> <p>When running the make config command, a CPU feature options dialog will be presented, and the default option is NONE.</p> <p>3. Add entries to rc.conf:</p> <pre><code>photoprism_enable=\"YES\"\nphotoprism_assetspath=\"/var/photoprism/assets\"\nphotoprism_storagepath=\"/var/photoprism/storage\"\n</code></pre> <p>You can add more command line parameters into photoprism_flags=\"\" in the rc.conf</p> <p><code>photoprism config</code> shows all config parameters. </p> <p>4. Start the service:</p> <pre><code>service photoprism start\n</code></pre> <p>Done!</p>"},{"location":"getting-started/ports/freebsd/#when-should-i-perform-a-complete-rescan","title":"When should I perform a complete rescan?","text":"<p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\".</p> <p>Manually entered information such as labels, people, titles or captions will not be modified when indexing, even if you perform a \"complete rescan\". Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/proxies/apache-2/","title":"Using Apache 2.4 as Reverse Proxy","text":"<p>Should you experience problems with Apache, we recommend that you ask the Apache community for advice, as we cannot provide support for third-party software and services.</p> <p>Example</p> <pre><code>ProxyPass /api/v1/ws ws://photoprism.lxd:2342/api/v1/ws\nProxyPassReverse /api/v1/ws ws://photoprism.lxd:2342/api/v1/ws\nProxyPass / http://photoprism:2342/\nProxyPassReverse / http://photoprism:2342/\nProxyRequests off\n</code></pre> <p>The official documentation explains in detail, how to configure Apache Web Server 2.4 to reverse proxy WebSockets.</p>"},{"location":"getting-started/proxies/apache-2/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted  by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to  connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/caddy-1/","title":"Using Caddy 1 as Reverse Proxy","text":"<p>Should you experience problems with Caddy, we recommend that you ask the Caddy community for advice, as we cannot provide support for third-party software and services.</p> <p>For PhotoPrism to work properly, you need to enable websockets and transparent proxying:</p> <p>Example</p> <pre><code>example.com {\n    proxy / photoprism:2342 {\n        websocket\n        transparent\n    }\n}\n</code></pre> <p>Please refer to the official documentation for further details.</p>"},{"location":"getting-started/proxies/caddy-1/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/caddy-2/","title":"Using Caddy 2 as Reverse Proxy","text":"<p>Should you experience problems with Caddy, we recommend that you ask the Caddy community for advice, as we cannot provide support for third-party software and services.</p> <p>WebSocket proxying automatically works in Caddy 2. There is no need to enable this as necessary for Caddy 1, Apache, and NGINX. In addition, Caddy 2 may automatically create  and update Let's Encrypt HTTPS certificates.</p> <p>Example</p> <pre><code>example.com {\n    reverse_proxy photoprism:2342\n}\n</code></pre> <p>Please refer to the official documentation for further details.</p>"},{"location":"getting-started/proxies/caddy-2/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/haproxy/","title":"Using HAPROXY as Reverse Proxy","text":"<p>Should you experience problems with Haproxy, we recommend that you ask the Haproxy community for advice, as we cannot provide support for third-party software and services.</p> <pre><code>defaults\n    #Defaults used in frontend and backends\n    #Defined here to avoid repitition\n    #Can be overwritten in frontends and/or backends\n    log global\n    option logasap\n    mode http\n    timeout connect 30000ms\n    timeout client 30000ms\n    timeout server 30000ms\n    timeout tunnel 120000ms\n    timeout queue 5000ms\n\n##########################################################\n\n#Frontend config\nfrontend fe-photoprism\n    #'photo' is the name of the subdomain\n    #TLS certs should be referenced here, maybe created by dehydrated, certbot, ...\n    bind *:443 ssl crt /etc/ssl/localcerts/wildcard.example.com.pem\n\n    #SNI-Detection\n    #Can be removed, if not needed\n    acl sni_photo hdr(host) -i photo.example.com\n    #Use Backend if domain (acl is set) detected\n    use_backend be-photoprism if sni_photo\n\n    #Every unflagged request goes here, may target to another backend as well\n    default_backend be-photoprism\n\n##########################################################\n\n#Backend config\n#be-photoprism is the name of the backend referenced in frontend\nbackend be-photoprism\n    retries 3\n    option forwardfor\n    no option httpclose\n\n    #Local PhotoPrism-Instance\n    server photo 127.0.0.1:2342\n</code></pre>"},{"location":"getting-started/proxies/haproxy/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/nginx/","title":"Using NGINX as Reverse Proxy","text":"<p>Getting Support</p> <p>Since NGINX is notoriously difficult to configure, we are unable to provide technical support for NGINX-related issues such as failed uploads, connection errors, broken thumbnails, and video playback problems. If you cannot resolve these on your own, we recommend that you ask their community for advice or use Traefik instead, which is easier to configure and more convenient to handle overall.</p> <p>This tutorial explains, how to configure NGINX WebSocket connections between your client and backend services.</p> <p>Example</p> <pre><code>http {\n  server {\n    listen 80 ssl;\n    listen [::]:80 ssl;\n    server_name example.com;\n    client_max_body_size 500M;\n\n    # With SSL via Let's Encrypt\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    location / {\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header Host $host;\n\n      proxy_pass http://photoprism:2342;\n\n      proxy_buffering off;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n\n      client_max_body_size 500M;\n    }\n  }\n}\n</code></pre> <p>At the very least you will need to adapt <code>server_name</code> and the <code>ssl_certificate</code>/<code>ssl_certificate_key</code> paths to match your setup. Please refer to their official documentation for further details.</p> <p>View \"Pitfalls and Common Mistakes\" \u203a</p>"},{"location":"getting-started/proxies/nginx/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/swag/","title":"Using SWAG as Reverse Proxy","text":"<p>Should you experience problems with Swag, we recommend that you ask the Swag community for advice, as we cannot provide support for third-party software and services.</p> <p>To simplify the setup of a reverse HTTPS proxy, Linuxserver.io developed SWAG.</p> <p>SWAG - Secure Web Application Gateway (formerly known as letsencrypt, no relation to Let's Encrypt\u2122) sets up a Nginx web server and reverse proxy with PHP support and a built-in certbot client that automates free SSL server certificate generation and renewal processes (Let's Encrypt and ZeroSSL). It also contains fail2ban for intrusion prevention.</p>"},{"location":"getting-started/proxies/swag/#setup","title":"Setup","text":""},{"location":"getting-started/proxies/swag/#step-1-get-a-domain","title":"Step 1: Get a domain","text":"<p>The first step is to grab a dynamic DNS if you don't have your own subdomain already. You can get this from for example DuckDNS.</p>"},{"location":"getting-started/proxies/swag/#step-2-set-up-swag","title":"Step 2: Set-up SWAG","text":"<p>Then you will need to set up SWAG, the variables of the docker compose are explained on the Github page of SWAG. This is an example of how to set it up using duckdns and docker-compose. </p> <p>compose.yaml</p> <pre><code>services:\n    swag:\n        image: ghcr.io/linuxserver/swag\n        container_name: swag\n        restart: unless-stopped\n        ports:\n            - 443:443\n        cap_add:\n            - NET_ADMIN\n        environment:\n            - PUID=1000\n            - PGID=1000\n            - TZ=Europe/Brussels\n            - URL=&lt;mydomain.duckdns&gt;\n            - SUBDOMAINS=wildcard\n            - VALIDATION=duckdns\n            - CERTPROVIDER= #optional\n            - DNSPLUGIN= #optional\n            - DUCKDNSTOKEN=&lt;duckdnstoken&gt; \n            - EMAIL=&lt;e-mail&gt; #optional\n            - ONLY_SUBDOMAINS=false #optional\n            - EXTRA_DOMAINS=&lt;extradomains&gt; #optional\n            - STAGING=false #optional\n        volumes:\n            - /etc/config/swag:/config\n</code></pre> <p>Don't forget to change the <code>mydomain.duckdns</code> into your personal domain and the <code>duckdnstoken</code> into your token and remove the brackets.</p>"},{"location":"getting-started/proxies/swag/#step-3-change-the-config-files","title":"Step 3: Change the config files","text":"<p>Navigate to the config folder of SWAG and head to <code>proxy-confs</code>. If you used the example above, you should navigate to: <code>/etc/config/swag/nginx/proxy-confs/ </code>. There are a lot of preconfigured files to use for different apps such as radarr,sonarr,overseerr,... </p> <p>To use the bundled configuration file, simply rename <code>photoprism.subdomain.conf.sample</code> in the proxy-confs folder to <code>photoprism.subdomain.conf</code>. Alternatively, you can create a new file <code>photoprism.subdomain.conf</code> in proxy-confs with the following configuration:</p> <p>photoprism.subdomain.conf</p> <pre><code>server {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n\n    server_name photoprism.*;\n\n    include /config/nginx/ssl.conf;\n\n    client_max_body_size 0;\n\n    location / {\n        include /config/nginx/proxy.conf;\n        resolver 127.0.0.11 valid=30s;\n        set $upstream_app photoprism;\n        set $upstream_port 2342;\n        set $upstream_proto http;\n        proxy_pass $upstream_proto://$upstream_app:$upstream_port;\n    }\n\n}   \n</code></pre>"},{"location":"getting-started/proxies/swag/#step-4-port-forward-port-443","title":"Step 4: Port-forward port 443","text":"<p>Since SWAG allows you to set up a secure connection, you will need to open port 443 on your router for encrypted traffic. This is way more secure than port 80 for http.</p>"},{"location":"getting-started/proxies/swag/#step-5-restart-swag","title":"Step 5: Restart SWAG","text":"<p>When you change anything in the config of Nginx, you will need to restart the container using <code>docker restart swag</code>. If everything went well, you can now access photoprism on the subdomain you configured: photoprism.mydomain.duckdns.org</p> <p>Attention</p> <p>PhotoPrism's container name will by default be prefixed with the directory name e.g. \"photoprism-photoprism-1\", so that it is not just \"photoprism\". To check this, run <code>docker ps</code> and see if it is \"photoprism\". If not, go to your <code>compose.yaml</code> file and add the following line to photoprism under <code>image</code>: <code>container_name: photoprism</code>. Then restart swag. Note, however, that you may not have two containers with the same name. If you are running multiple instances, you can change the container name in the swag config file in the proxy-confs directory.</p>"},{"location":"getting-started/proxies/swag/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/traefik/","title":"Using Traefik as Reverse Proxy","text":"<p>Best Choice</p> <ul> <li>No special settings required in combination with modern web applications</li> <li>WebSocket proxying automatically works</li> <li>Traefik can create and update Let's Encrypt HTTPS certificates for you</li> </ul> <p>To run PhotoPrism behind Traefik, create a <code>traefik.yaml</code> configuration and then add a <code>traefik</code> service to your <code>compose.yaml</code> or <code>docker-compose.yml</code> file, as shown in the following example:</p> <p>compose.yaml</p> <pre><code>services:\n  traefik:\n    image: traefik:v3.1\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - \"./traefik.yaml:/etc/traefik/traefik.yaml\"\n      - \"./traefik/data:/data\"\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n\n  photoprism:\n    image: photoprism/photoprism:latest\n    restart: unless-stopped\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.photoprism.rule=Host(`example.com`)\"\n      - \"traefik.http.routers.photoprism.tls=true\"\n      - \"traefik.http.routers.photoprism.tls.certresolver=myresolver\" \n    volumes:\n      - \"./originals:/photoprism/originals\"\n      - \"./storage:/photoprism/storage\"\n    environment:\n        PHOTOPRISM_SITE_URL: \"https://example.com/\"\n        PHOTOPRISM_DISABLE_TLS: \"true\"\n</code></pre> <p>traefik.yaml</p> <pre><code>log:\n  level: INFO\n\nglobal:\n  sendAnonymousUsage: false\n\nentryPoints:\n  web:\n    address: \":80\"\n    http:\n      redirections:\n        entryPoint:\n          to: websecure\n          scheme: https\n  websecure:\n    address: \":443\"\n    transport:\n      respondingTimeouts:\n        readTimeout: \"3h\"\n        writeTimeout: \"0s\"\n\nproviders:\n  docker:\n    exposedByDefault: false\n    watch: true\n\napi:\n  insecure: false\n  dashboard: false\n  debug: false\n\ncertificatesResolvers:\n  myresolver:\n    acme:\n      email: ssl-admin@example.com\n      storage: /data/certs.json\n      httpChallenge:\n        entryPoint: web\n</code></pre> <p>Note that you must disable HTTPS/TLS in PhotoPrism by setting <code>PHOTOPRISM_DISABLE_TLS</code> to <code>\"true\"</code> as Traefik handles HTTPS connections, and that all settings and config options not related to Traefik have been omitted for brevity.</p> <p>Further <code>traefik.yaml</code> examples and a detailed description of the Traefik configuration can be found in the corresponding documentation.</p>"},{"location":"getting-started/proxies/traefik/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/","title":"MicroSD Image for the Raspberry Pi","text":"<p> The easiest way to run PhotoPrism on a Raspberry Pi is with PhotoPrismPi.<sup>1</sup> Simply flash the image to an SD card and boot your device with it.</p> <p>We recommend using a fast MicroSD card with at least 64 GB so that you don't run out of storage space later on. These are usually sold with an adapter that fits into normal SD card slots.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#step-1-install-imager","title":"Step 1: Install Imager","text":"<p>With the Raspberry Pi Imager, installing the image we provide to a microSD card is quick and easy. The card is then ready to use with your Raspberry Pi.</p> <p>It is available for Ubuntu, Windows, and macOS, and can be downloaded for free at raspberrypi.com/software/.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#step-2-download-and-flash","title":"Step 2: Download and Flash","text":"<p>After installing Raspberry Pi Imager or another SD card flash tool, you can download the latest version of PhotoPrismPi from dl.photoprism.app/nas/raspberry-pi/latest.img.xz. </p> <p>Then, use the Imager to write the file to an inserted SD card:</p> <p></p> <p>Once you have selected the downloaded image under \"Operating System\" and your SD card storage device, click \"Next\" to begin flashing the image. Depending on the speed of your SD card, this may take a few minutes.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#step-3-boot-your-device","title":"Step 3: Boot Your Device","text":"<p>Insert the SD card into your Raspberry Pi and ensure that it is connected to a wired network. Then, turn it on. After a few minutes, the operating system will update and download the latest release to your device.<sup>2</sup></p> <p>You should then be able to access the web interface by navigating to <code>http://&lt;IP address&gt;:2342/</code> or https://photoprism-pi.local/!<sup>3</sup></p>"},{"location":"getting-started/raspberry-pi/microsd-image/#user-accounts","title":"User Accounts","text":"<p>When you first log in to PhotoPrism, the username for the initial super admin account is <code>admin</code> and the password is <code>photoprismpi</code>.</p> <p>You can also connect to the server via SSH on standard port 22 using the username <code>pi</code> and password <code>raspberry</code>.</p> <p>Danger</p> <p>Since they can be easily guessed, both passwords should be changed immediately. This is especially important if your device is connected to the Internet or any other shared network.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#storage-folders","title":"Storage Folders","text":"<p>Your pictures, uploads, sidecar files, and cache files are stored in subfolders of <code>/opt/photoprism</code>. You can also connect external drives via USB and access them as folders from <code>/mnt/a</code> to <code>/mnt/d</code> without further configuration.</p> <p>Should you want to make changes to the default settings, you can find your <code>compose.yaml</code> file in <code>/opt/photoprism</code>. After connecting via SSH with the credentials provided above, you can obtain root privileges by running <code>sudo -i</code>.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#reverse-proxy","title":"Reverse Proxy","text":"<p>Traefik  is installed as a reverse proxy and can be configured in <code>/opt/photoprism/compose.yml</code>, as well as through the config files located in <code>/opt/photoprism/traefik</code>.</p> <p>Note that browsers do not recognize the automatically generated default certificate as valid, so you will see a warning when connecting over HTTPS.</p> <ol> <li> <p>PhotoPrismPi is based on Ubuntu Server.\u00a0\u21a9</p> </li> <li> <p>Download and installation time depends on the speed of your Internet connection.\u00a0\u21a9</p> </li> <li> <p>If you can't connect, try using the existing hostname or IP address instead.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/troubleshooting/","title":"Troubleshooting Checklists","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/#connection-fails","title":"Connection Fails","text":"<p>If your browser cannot connect to the Web UI even after waiting a few minutes, run this command to watch the logs including the last 100 messages (omit <code>--tail=100</code> to see them all, and <code>-f</code> to output only the last logs without watching them):</p> <pre><code>docker compose logs -f --tail=100\n</code></pre> <p>Before reporting a bug:</p> <ul> <li> Check the logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, and killed:<ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", \"failed to create folder\", \"permission denied\", or \"wrong permissions\" indicate a filesystem permission problem</li> <li> It may help to add the <code>:z</code> mount flag to volumes when using SELinux (Red Hat/Fedora)</li> <li> Log messages that contain \"no route to host\" indicate a problem with the database or Docker network configuration (follow our examples)</li> </ul> </li> <li> Make sure you are using the correct protocol (default is <code>http</code>), port (default is <code>2342</code>), and host (default is <code>localhost</code>):<ul> <li> Check if the server port you try to use has been exposed and no firewall is blocking it</li> <li> Only use <code>localhost</code> or <code>127.0.0.1</code> if the server is running on the same computer (host)</li> <li> Avoid using IP addresses other than <code>127.0.0.1</code> directly, as they can change</li> <li> We recommend configuring a local hostname to access other hosts on your network</li> </ul> </li> <li> If you use a firewall, ensure that it is configured correctly and that outgoing connections to our geocoding API are allowed</li> <li> Note that HTTP security headers will prevent the app from loading in a frame (override them)</li> <li> Verify your computer meets the system requirements</li> <li> Go through the checklist for fatal server errors</li> </ul>"},{"location":"getting-started/troubleshooting/#mariadb","title":"MariaDB","text":"<p>Should MariaDB get stuck in a restart loop and PhotoPrism cannot connect to it, this indicates a memory, filesystem, or other permission issue:</p> <pre><code>mariadb: mysqld: ready for connections.\nmariadb: mysqld (initiated by: unknown): Normal shutdown\nphotoprism: dial tcp 172.18.0.2:3306: connect: no route to host\nmariadb: mysqld: Shutdown complete\n</code></pre> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/#firewall","title":"Firewall","text":"<p>Maps &amp; Places: As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. You therefore need allow requests to these API endpoints if you have a firewall installed and make sure your Internet connection is working.</p> <p>Learn more \u203a</p> <p>IPTables: On Linux, Docker manipulates the <code>iptables</code> rules to provide network isolation. This does have some implications for what you need to do if you want to have your own policies in addition to the rules Docker manages.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/#debug-mode","title":"Debug Mode","text":"<p>To enable debug mode, set <code>PHOTOPRISM_LOG_LEVEL</code> to <code>\"debug\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_LOG_LEVEL: \"debug\"\n</code></pre> <p>If you need even more detailed logs for debugging, you can enable trace log mode by setting <code>PHOTOPRISM_LOG_LEVEL</code> to <code>\u201ctrace\u201d</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--trace</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_LOG_LEVEL: \"trace\"\n</code></pre> <p>Then restart all services for the changes to take effect. It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting:</p> <pre><code>docker compose stop\ndocker compose up \n</code></pre> <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p> <p>The default Docker Compose config filename is <code>compose.yaml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.</p>"},{"location":"getting-started/troubleshooting/#docker-doesnt-work","title":"Docker Doesn't Work","text":"<p>Make sure you have Docker or Docker Desktop installed, started, and properly configured on your system. It is available for Mac, Linux, and Windows. On Red Hat-compatible Linux distributions like RHEL, CentOS, Fedora, AlmaLinux, and Rocky Linux, you can use Podman and Podman Compose as direct replacements for Docker and Docker Compose.</p> <p>\u21aa Getting Docker Up and Running</p>"},{"location":"getting-started/troubleshooting/#bad-performance","title":"Bad Performance","text":"<p>\u21aa Performance Tips</p> <p>\u21aa Solving Windows-Specific Issues</p>"},{"location":"getting-started/troubleshooting/#fatal-server-errors","title":"Fatal Server Errors","text":"<p>Fatal errors are often caused by one of the following conditions:</p> <ul> <li> Your (virtual) server disk is full (add storage)</li> <li> You have accidentally mounted the wrong folders (update config and restart)</li> <li> There is disk space left, but a usage or the inode limit has been reached (change it)</li> <li> You are using a filesystem or network drive with a file size limit (change settings or storage)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Symbolic links were mounted or used within a storage folder (replace with actual paths)</li> <li> The service configuration is not supported, so startup fails with an S6 overlay error</li> <li> The server is low on memory (add memory)</li> <li> You didn't configure at least 4 GB of swap space (add swap)</li> <li> RAW images and/or high-resolution panoramas require additional memory above the recommended minimum (add more swap or memory)</li> <li> The server CPU is overheating (improve cooling)</li> <li> The server has an outdated operating system that is not fully compatible (update)</li> <li> The server hardware is defective and causes random panics (test on another server)</li> <li> The database server is not running, incompatible, or misconfigured (start, upgrade, or fix it)</li> <li> You've upgraded the MariaDB server without running <code>mariadb-upgrade</code></li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder</li> <li> There are network problems caused by a bad configuration, firewall, or unstable connection</li> <li> Kernel security modules such as AppArmor and SELinux are blocking permissions</li> <li> Your Raspberry Pi has not been configured according to our recommendations</li> </ul> <p>We recommend checking your Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, and killed:</p> <ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", \"failed to create folder\", \"permission denied\", or \"wrong permissions\" indicate a filesystem permission problem </li> <li> Log messages that contain \"no route to host\" indicate a problem with the database or network configuration (follow our examples)</li> </ul> <p>Start a full rescan if necessary, for example, if it looks like thumbnails or pictures are missing.</p>"},{"location":"getting-started/troubleshooting/#app-not-loading","title":"App Not Loading","text":"<p>If the app doesn't load in your browser when you navigate to the server URL, you can check the browser console for helpful errors and warnings. Sometimes you just need to wait a moment, for example, if you are using a slow wireless connection or the server was started only a few seconds ago. In case this does not help:</p> <ul> <li> You are using an incompatible browser (try another browser)</li> <li> JavaScript is disabled in your browser settings, so you only see the splash screen (enable it)</li> <li> JavaScript was disabled by a browser plugin (disable it or add an exception)</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> HTTP security headers prevent the app from loading in a frame (override them)</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> There is a problem with your network connection (test if other sites work)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul>"},{"location":"getting-started/troubleshooting/#cannot-log-in","title":"Cannot Log In","text":"<p>If password authentication is enabled and the user interface loads, but you cannot log in with what you assume is the correct password:</p> <ul> <li> There is a problem with the integrity, stability or connection of the database that you should be able to diagnose by watching the logs for errors and warnings</li> <li> You had too many failed login attempts, therefore another attempt from your computer is temporarily not possible</li> <li> Caps Lock is enabled on your keyboard, your computer has the wrong input locale set, or somebody else might have changed the password without telling you</li> <li> <code>PHOTOPRISM_ADMIN_PASSWORD</code> does not have a minimum length of 8 characters, so PhotoPrism has been started without a password since there is no default</li> <li> Your password contains one or more <code>$</code> signs that were not properly escaped in your <code>compose.yaml</code> or <code>docker-compose.yml</code> file (escape them and reset your database or manually set a new password)</li> <li> The password may be correct, but the username is wrong and does not match <code>PHOTOPRISM_ADMIN_USER</code></li> <li> There is a problem with the schema or data in the <code>auth_sessions</code> database table that can be resolved by running the <code>photoprism auth reset --yes</code> command in a terminal to reset it to a clean state and force a re-login of all users (this will also delete all client access tokens and app passwords users may have created)</li> <li> You upgraded from an early test or preview build and might need to run the <code>photoprism users reset --yes</code> command in a terminal after the upgrade, see Known Issues for details (this resets the <code>auth_users</code> table to a clean state and requires accounts to be recreated)</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> <li> Remember that the initial admin username and password cannot be changed after PhotoPrism has been started for the first time</li> </ul> <p>We also recommend checking your Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, and killed:</p> <ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", \"failed to create folder\", \"permission denied\", or \"wrong permissions\" indicate a filesystem permission problem </li> <li> Log messages that contain \"no route to host\" indicate a problem with the database or network configuration (follow our examples)</li> </ul> <p>To see which user accounts exist on your instance, open a terminal and run <code>photoprism users ls</code>. A new password can be set with <code>photoprism passwd [username]</code>. You can then try to log in again. Upgrade to the latest release, restart the server, and check the logs for errors and warnings if it still doesn't work.</p>"},{"location":"getting-started/troubleshooting/#no-webdav-access","title":"No WebDAV Access","text":"<p>If you followed our step-by-step guide and still have trouble connecting via WebDAV:</p> <ul> <li> WebDAV has been disabled for all users in the advanced settings</li> <li> WebDAV is unavailable because your instance is running in public mode (disable it)</li> <li> You are trying to connect to an invalid path, try <code>/originals/</code> without omitting the <code>/</code> at the end, and read our notes on installing PhotoPrism in a subdirectory on a shared domain </li> <li> Your user account role is not permitted to use WebDAV (try as User or Admin)</li> <li> WebDAV access has not been enabled for your user account (enable it)</li> <li> You are experiencing a general authentication problem, see Cannot Log In</li> <li> Your WebDAV client requires a secure connection (connect via HTTPS)</li> <li> Your instance or reverse proxy uses an invalid HTTPS/TLS certificate</li> <li> As a Windows user, you may need to change the basic authentication level</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> You are connected to the wrong server, VPN, or a DNS record has not been updated yet</li> <li> An upload path has been assigned to your user account, limiting write access to that specific path only (check user settings or remove the upload path restriction)<ul> <li> If an upload path is set, you need to synchronize with <code>.../originals/upload-path/</code> when using WebDAV to add files to the originals folder</li> <li> When using WebDAV to sync to the import folder, you need to manually create a folder with the same name as the upload path in the import folder (if an upload path is configured)</li> </ul> </li> </ul>"},{"location":"getting-started/troubleshooting/#missing-pictures","title":"Missing Pictures","text":"<p>If you have indexed your library and some images or videos are missing, first check Library &gt; Errors for errors and warnings. In case the application logs do not contain anything helpful:</p> <ul> <li> The files exceed the size limit in megabyte or the resolution limit in megapixels</li> <li> The files have bad filesystem permissions or the wrong owner, so they cannot be opened</li> <li> The pictures are in Review due to low quality or incomplete metadata</li> <li> You are browsing the Calendar view, which only shows pictures that have a valid creation date and time specified in their metadata or as part of their filename</li> <li> The file type is generally unsupported</li> <li> The file type is generally supported, but a specific feature or codec is not</li> <li> The indexer has skipped the files because they are exact duplicates</li> <li> The indexer has skipped the files because they have an incorrect extension that does not match their actual format, e.g. JPEG images with a <code>.heic</code> extension</li> <li> The files are ignored based on pattern in a <code>.ppignore</code> file</li> <li> They are in Library &gt; Hidden because thumbnails could not be created:<ul> <li> Preview Images are disabled under Settings &gt; Content (enable them)</li> <li> FFmpeg and/or RAW converters are disabled under Settings &gt; Advanced</li> <li> The file is broken, e.g. because of short Huffman data (try to fix it)</li> <li> Your storage folder is full, or a quota/inode limit has been reached (increase it)</li> <li> Your storage folder is not writable or mounted read-only (change permissions)</li> </ul> </li> <li> Multiple files were stacked based on their metadata or file names</li> <li> The private or archived status was restored from a backup</li> <li> The NSFW filter is enabled, so they were marked as private</li> <li> You are not signed in as admin, so you cannot see everything</li> <li> You try to index a shared drive on a remote server, but the server is offline</li> <li> Somebody has deleted files without telling you</li> <li> Your server does not have at least 4 GB of swap or a hard memory limit is configured, which may cause unexpected restarts when the indexer temporarily needs more memory to process large files<ul> <li> Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum</li> </ul> </li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>Depending on the cause of the problem, you may need to perform a full rescan once the issue is resolved.</p>"},{"location":"getting-started/troubleshooting/#zip-archives","title":"Zip Archives","text":"<p>When you have tried to download multiple pictures or albums and found that some files are missing in the resulting zip archive or you got the error message \"No files available for download\":</p> <ul> <li> Your index may be out of sync with the file system (reindex your library and wait until the operation has been completed)</li> <li> In order to include RAW, XMP and/or generated sidecar files, your download preferences may need to be changed under Settings &gt; General</li> <li> If this didn't help, you may need to perform a complete rescan of your library, e.g. after upgrading to a new release or restoring your index from a backup</li> </ul> <p>Also make sure that there is enough free disk space available, since the server creates a temporary zip file when multiple pictures are selected for download. Complete albums are compressed while downloading without needing temporary storage.</p>"},{"location":"getting-started/troubleshooting/#file-downloads","title":"File Downloads","text":"<p>Follow the steps to resolve zip download issues if you are having problems downloading selected pictures, individual files, or stacks of files that belong to a single photo.</p> <p>If this didn't help, the problems might be caused by your browser settings, e.g. insufficient permissions to download multiple files, browser plugins, a firewall, VPN, CDN or proxy that you use together with PhotoPrism.</p>"},{"location":"getting-started/troubleshooting/#wrong-search-results","title":"Wrong Search Results","text":"<p>If search results are incorrect, for example, in the wrong order or not filtered properly:</p> <ul> <li> Indexing is still in progress and has not been completed yet</li> <li> You need to re-index your pictures, for example after updating PhotoPrism</li> <li> Previously failed migrations must be re-run to update the index schema</li> <li> The database server is incompatible or needs to be updated</li> </ul> <p>It may be a bug if you cannot find any other reasons, such as a local configuration problem or a misunderstanding in how the software works. Please note that reports must be reproducible in order for us to provide a solution.</p>"},{"location":"getting-started/troubleshooting/#broken-thumbnails","title":"Broken Thumbnails","text":"<p>If some pictures have broken or missing thumbnails, first check Library &gt; Errors for errors and warnings. In case the application logs do not contain anything helpful:</p> <ul> <li> The issue can be resolved by reloading the page or clearing the browser cache</li> <li> You browse non-JPEG files under Library &gt; Originals which have an icon but no preview</li> <li> Preview Images are disabled under Settings &gt; Content (enable them)</li> <li> Dynamic Previews are disabled under Settings &gt; Advanced or your server is not powerful enough</li> <li> The sizes in Settings &gt; Advanced have been changed so the request can't be fulfilled</li> <li> FFmpeg and/or RAW converters are disabled under Settings &gt; Advanced (enable them)</li> <li> Your storage folder is full, or a quota/inode limit has been reached (increase it)</li> <li> Your storage folder is not writable or mounted read-only (change permissions)</li> <li> Your cache storage folder is not accessible, has been renamed, or was not mounted on a permanent volume, so the cached thumbnails have been lost after a restart (run the <code>photoprism thumbs</code> command in a terminal to regenerate them after fixing this)</li> <li> Originals or thumbnail files were deleted manually, for example to free up disk space</li> <li> Files cannot be opened, e.g. because the file system permissions have been changed</li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder</li> <li> Some thumbnails could not be created because you didn't configure at least 4 GB of swap</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> Your proxy, router, or firewall has a request rate limit, so some requests fail</li> <li> There are other network problems caused by a firewall, router, or unstable connection</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>We also recommend checking your Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, and killed:</p> <ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", \"failed to create folder\", \"permission denied\", or \"wrong permissions\" indicate a filesystem permission problem</li> </ul> <p>Depending on the cause of the problem, you may need to perform a full rescan once the issue is resolved.</p>"},{"location":"getting-started/troubleshooting/#videos-dont-play","title":"Videos Don't Play","text":"<p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have ExifTool enabled to extract metadata such as duration, resolution, and codec.</p> <p>If videos do not play and/or you only see a white/black area when you open a video:</p> <ul> <li> You are using an incompatible browser, e.g. without AVC support (try another browser)</li> <li> AVC support or related JavaScript features have been disabled in your browser (check the settings and try another browser)</li> <li> It is a large non-AVC video that needs to be transcoded first (wait or run <code>photoprism convert</code> to pre-transcode videos)</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> Your (virtual) server disk is full, or a quota/inode limit has been reached (increase it)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder (check if the files are accessible)</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> There are other network problems caused by a proxy, firewall, or unstable connection (try a direct connection)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>We recommend that you check your Docker Logs and the browser console for messages related to HTTP requests, permissions, security, FFmpeg, videos, and file conversion.</p> <p>Please note:</p> <ol> <li>Not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</li> <li>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</li> <li>MPEG-4 AVC videos are not re-encoded if they exceed the configured bitrate limit. To reduce the size of AVC videos, you can manually replace the original files with a smaller version or wait for a future release that offers this functionality.</li> </ol> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/browsers/","title":"Diagnosing Frontend Issues","text":"<p>Problems with the user interface can be caused by a bug or an incompatible browser:</p> <ul> <li>some features may not be supported by non-standard browsers, as well as nightly, unofficial, or outdated versions</li> <li>not all video and audio formats can be played with every browser, device, and operating system</li> <li>for example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera</li> </ul> <p>If the user interface doesn't load at all, our App Not Loading checklist helps you identify and resolve the cause.</p>"},{"location":"getting-started/troubleshooting/browsers/#try-another-browser","title":"Try Another Browser","text":"<p>To test if you have a general problem that is not browser-specific, open the Web UI in other browsers:</p> <ul> <li>if you are using Firefox Nightly, try the stable version and Chrome or Chromium</li> <li>if you have browser plugins installed, try disabling them to see if this makes a difference</li> <li>when the problem disappears, you know that the issue is browser-dependent or caused by a plugin</li> <li>otherwise, the issue may not be specific to the browser version</li> <li>make a note in which browsers the problem occurs, as this will be helpful when submitting a support request</li> </ul> <p>The user interface works with most modern browsers, and runs best on Chrome, Chromium, Safari, Firefox, and Edge. Opera and Samsung Internet have been reported to be compatible as well. Due to limited resources, we can not test every release with all browser types and versions.</p>"},{"location":"getting-started/troubleshooting/browsers/#getting-error-details","title":"Getting Error Details","text":"<p>If possible, please also include the error type, error message, and URL of the affected resource when submitting a support request. For this purpose, check the browser console for warnings and errors as described below. It is perfectly fine to take screenshots instead of writing down the details.</p> <p>In case you don't see any log messages, try reloading the page, as the problem may occur while the page is loading.</p> Chrome, Chromium, and EdgeFirefoxSafariMobile Safari <ul> <li>press \u2318+Option+J (Mac) or Ctrl+Shift+J (Windows, Linux, Chrome OS) to go directly to the Developer Tools</li> <li>or, navigate to More tools &gt; Developer tools in the browser menu and open the Console tab</li> </ul> <ul> <li>press \u2318+Option+K (Mac) or Ctrl+Shift+K (Windows) to go directly to the Firefox Web Console panel</li> <li>or, navigate to Web Development &gt; Web Console in the menu and open the Console panel</li> </ul> <p>Before you can access the console in Safari on MacOS, you first need to enable the Develop menu:</p> <ol> <li>Choose Safari Menu &gt; Preferences and select the Advanced Tab</li> <li>Select \"Show Develop menu in menu bar\"</li> </ol> <p>Once the Develop menu is enabled:</p> <ul> <li>press Option+\u2318+C to go directly to the Javascript Console</li> <li>or, navigate to Develop &gt; Show Javascript Console in the browser menu</li> </ul> <p>Browser logs on Apple mobile devices running iOS or iPadOS can be viewed when you connect them to a Mac. Before you can connect your device to a Mac, you must allow your device to be inspected:</p> <ol> <li>Open the Settings app</li> <li>Go to Safari</li> <li>Scroll down to Advanced</li> <li>Enable the Web Inspector toggle</li> </ol> <p>If you now connect the device to your Mac with a cable, websites opened in Safari on iOS and iPadOS will appear in a submenu for the connected device in the Develop menu of the Safari desktop browser. Note that when prompted, you may need to confirm that you trust the Mac you are connecting your device to.</p> <p>Web pages (and other content) are separated by app, making it easier for you to find the web page you are looking for. Once you have found and selected the site you want to inspect, a Web Inspector window will open. See Apple's Developer Guide for additional help and information. </p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/docker/","title":"Getting Docker Up and Running","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/docker/#installation","title":"Installation","text":"<p>If you cannot use the <code>docker</code> and <code>docker compose</code> (or <code>docker-compose</code>) commands, make sure Docker is running on the host you are connected to and your current user has permission to use it. The following instructions explain how to install Docker:</p> <ul> <li>Ubuntu, Mint, Debian, and Arch Linux</li> <li>Microsoft Windows</li> <li>Apple macOS</li> </ul> <p>Alternatively, Podman is supported as a drop-in replacement for Docker on Red Hat-compatible Linux distributions like RHEL, CentOS, Fedora, AlmaLinux, and Rocky Linux.</p>"},{"location":"getting-started/troubleshooting/docker/#ubuntu-linux","title":"Ubuntu Linux","text":"<p>If you are using Ubuntu Linux, you can run this script to install the latest Docker version, including the Compose Plugin, on your server in one step:</p> <pre><code>bash &lt;(curl -s https://setup.photoprism.app/ubuntu/install-docker.sh)\n</code></pre>"},{"location":"getting-started/troubleshooting/docker/#docker-compose","title":"Docker Compose","text":"<p>The examples in our guides now use the new <code>docker compose</code> command by default. However, if your Docker version does not yet support the Compose Plugin, you can still use the standalone <code>docker-compose</code> command.</p> <p>On some Linux distributions, you may need to install an additional package. To do so, you can use a graphical software package manager or run the following command in a terminal to install the Compose Plugin for Docker on Ubuntu and Debian:</p> <pre><code>sudo apt update\nsudo apt install docker-compose-plugin\n</code></pre> <p>If that does not work, this will install the legacy <code>docker-compose</code> command:</p> <pre><code>sudo apt update\nsudo apt install docker-compose\n</code></pre> <p>Running the following commands will add a <code>docker-compose</code> alias for the new Compose plugin so that older scripts don't break:</p> <pre><code>echo 'docker compose \"$@\"' | sudo tee /bin/docker-compose\nsudo chmod +x /bin/docker-compose\n</code></pre> <p>With the latest version of Docker Compose, the default config file name is <code>compose.yaml</code>, although the <code>docker compose</code> command still supports legacy <code>docker-compose.yml</code> files for backward compatibility.</p>"},{"location":"getting-started/troubleshooting/docker/#podman-compose","title":"Podman Compose","text":"<p>On Red Hat-compatible Linux distributions like RHEL, CentOS, Fedora, AlmaLinux, and Rocky Linux, you can use Podman and Podman Compose as direct replacements for Docker and Docker Compose. The following installs the <code>podman</code> and <code>podman-compose</code> commands if they are not already installed:</p> <pre><code>sudo dnf update -y\nsudo dnf install epel-release -y\nsudo dnf install netavark aardvark-dns podman podman-docker podman-compose -y\nsudo systemctl start podman\nsudo systemctl enable podman\npodman --version\n</code></pre> <p>We also provide a setup script that conveniently installs Podman and downloads the default configuration to a directory of your choice:</p> <pre><code>mkdir -p /opt/photoprism\ncd /opt/photoprism\ncurl -sSf https://dl.photoprism.app/podman/install.sh | bash\n</code></pre> <p>Please keep in mind to replace the <code>docker</code> and <code>docker compose</code> commands with <code>podman</code> and <code>podman-compose</code> when following the examples in our documentation.</p>"},{"location":"getting-started/troubleshooting/docker/#using-docker","title":"Using Docker","text":""},{"location":"getting-started/troubleshooting/docker/#cannot-connect","title":"Cannot Connect","text":"<p>If you see the error message \"Cannot connect to the Docker daemon\", it means that Docker is not installed or not running yet. Before you try anything else, it may help to simply restart your computer.</p> <p>On many Linux distributions, this command will start the Docker daemon manually if needed:</p> <pre><code>sudo systemctl start docker.service\n</code></pre> <p>On other operating systems, start Docker Desktop and enable the \"Start Docker Desktop when you log in\" option in its settings.</p>"},{"location":"getting-started/troubleshooting/docker/#connection-aborted","title":"Connection Aborted","text":"<p>If you see the error message \"Connection aborted\" or \"Connection denied\", it usually means that your current user does not have permission to use Docker.</p> <p>On Linux, this command grants permission by adding a user to the <code>docker</code> group (relogin for changes to take effect):</p> <pre><code>sudo usermod -aG docker [username]\n</code></pre> <p>Alternatively, you can prefix the <code>docker</code> and <code>docker-compose</code> commands with <code>sudo</code> when not running as root, for example:</p> <pre><code>sudo docker compose stop\nsudo docker compose up -d\n</code></pre> <p>Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in the <code>volumes:</code> section of your <code>compose.yaml</code> or <code>docker-compose.yml</code>.</p>"},{"location":"getting-started/troubleshooting/docker/#s6-overlay-error","title":"S6 Overlay Error","text":"<p>A container startup error similar to the following indicates that you are using a custom service configuration that is incompatible with our Docker images:</p> <pre><code>/package/admin/s6-overlay/libexec/preinit:\nfatal: /run belongs to uid 0 instead of 100\nand we're lacking the privileges to fix it.\n</code></pre> <p>In particular, this can happen if you have specified an unsupported user or group ID through the optional <code>user</code> property in your <code>compose.yaml</code> file to run the service, and at the same time added <code>no-new-privileges</code> to the <code>security_opt</code> section.</p> <p>The supported ID ranges for running our container images are as follows:</p> <ul> <li>UID: 0, 33, 50-99, 500-600, 900-1250, and 2000-2100</li> <li>GID: 0, 33, 44, 50-99, 105, 109, 115, 116, 500-600, 900-1250, and 2000-2100</li> </ul> <p>Please also check if you have specified both a <code>user</code> service property and the corresponding <code>environment</code> variables to set the user and/or group ID under which the \"photoprism\" service should run, as this is neither required nor recommended:</p> <pre><code>services:\n  photoprism:\n    user: \"1000:1000\"\n    environment:\n      PHOTOPRISM_UID: 1000\n      PHOTOPRISM_GID: 1000\n</code></pre> <p>If you need maximum security and do not want to perform any additional startup actions that require root privileges, you can alternatively set the entrypoint and command for the \"photoprism\" service as follows:</p> <pre><code>services:\n  photoprism:\n    restart: unless-stopped\n    entrypoint: [\"/opt/photoprism/bin/photoprism\"]\n    command: [\"start\"]\n</code></pre> <p>The default entrypoint script can install additional distribution packages, fix file system permissions, and/or change the UID/GID for the \"photoprism\" service, as some NAS devices, for example, do not support this from their user interface. So, bypassing it as shown above will disable this functionality and is only recommended for advanced users who are familiar with running container services.</p> <p>Learn more \u203a</p> <p>If you are experiencing a similar problem with a custom configuration that we did not provide or recommend, please try changing it to see if that helps before asking our team or community members for support. \ud83d\udedf</p>"},{"location":"getting-started/troubleshooting/docker/#iptables-firewall","title":"IPTables Firewall","text":"<p>On Linux, Docker manipulates the <code>iptables</code> rules to provide network isolation. This does have some implications for what you need to do if you want to have your own policies in addition to the rules Docker manages.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/docker/#wrong-mtu-size","title":"Wrong MTU Size","text":"<p>If you use Docker on your server or on a virtual machine, technical limitations of the local network or your internet provider can sometimes make it impossible to reach external services such as the Reverse Geocoding API that we operate for our users. In particular, the network cards of virtual machines often do not have the standard Maximum Transmission Unit (MTU) of 1500, but a smaller size like 1492 or 1454.</p> <p>In this case, you must configure the virtual network cards of your Docker containers so that they have an MTU size that is less than or equal to that of the outgoing network, for example by adding the following to your <code>compose.yaml</code> (or <code>docker-compose.yml</code>) config files:</p> <pre><code>networks:\n  default:\n    driver: bridge\n    driver_opts:\n      com.docker.network.driver.mtu: 1450\n</code></pre> <p>Learn more \u203a</p> <p>All network configuration changes require a restart of the affected services and/or the Docker daemon to take effect.</p>"},{"location":"getting-started/troubleshooting/docker/#viewing-logs","title":"Viewing Logs","text":"<p>You can run this command to watch the Docker service logs, including the last 100 messages (omit <code>--tail=100</code> to see them all, and <code>-f</code> to output only the last logs without watching them):</p> <pre><code>docker compose logs -f --tail=100 \n</code></pre> <p>A good way to troubleshoot configuration issues is to increase the log level. To enable trace log mode, set <code>PHOTOPRISM_LOG_LEVEL</code> to <code>\"trace\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--trace</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_LOG_LEVEL: \"trace\"\n      ...\n</code></pre> <p>Now restart all services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre> <p>It can also be helpful to keep Docker running in the foreground while debugging, so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when (re)starting:</p> <pre><code>docker compose stop\ndocker compose up\n</code></pre> <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p> <p>The default Docker Compose config filename is <code>compose.yaml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.</p>"},{"location":"getting-started/troubleshooting/docker/#adding-swap","title":"Adding Swap","text":"<p>Note that indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory above the recommended minimum. We recommend not to set a hard memory limit, unless you are familiar with memory management and understand the implications.</p>"},{"location":"getting-started/troubleshooting/docker/#linux","title":"Linux","text":"<p>Open a terminal and run this command to check if your server has swap configured.</p> <pre><code>swapon --show\n</code></pre> <p>Example output:</p> <pre><code>NAME      TYPE SIZE USED PRIO\n/swapfile file  64G  88M   -2\n</code></pre> <p>This means you have 64 GB of swap and don't need to add more. Learn how much you need.</p> <p>Otherwise, run these commands to permanently add 4 GB of swap (or more depending on how much physical memory you have):</p> <pre><code>sudo -i\nfallocate -l 4G /swapfile\nchmod 600 /swapfile\nmkswap /swapfile\nswapon /swapfile\necho '/swapfile none swap sw 0 0' | tee -a /etc/fstab\n</code></pre> <p>You can skip <code>sudo -i</code> if you are already logged in as root.</p>"},{"location":"getting-started/troubleshooting/docker/#raspbian","title":"Raspbian","text":"<p>Open a terminal on your Raspberry Pi and run the following command to verify if it has swap configured:</p> <pre><code>swapon --show\n</code></pre> <p>Example output:</p> <pre><code>NAME      TYPE SIZE USED PRIO\n/swapfile file  100M  0B   -2\n</code></pre> <p>If no swap has been configured or the command only shows 100 MB, open <code>/etc/dphys-swapfile</code> with a text editor, search for <code>CONF_SWAPSIZE=100</code> and increase the value to <code>2048</code> if your device has 4 GB of physical memory, and <code>4096</code> otherwise:</p> <pre><code>sudo nano /etc/dphys-swapfile\n</code></pre> <p>Then restart for the changes to take effect:</p> <pre><code>sudo reboot\n</code></pre> <p>In addition, you can reduce memory usage and improve stability by setting <code>PHOTOPRISM_WORKERS</code> to <code>1</code> in your <code>compose.yaml</code> or <code>docker-compose.yml</code> file to limit the number of indexing workers.</p>"},{"location":"getting-started/troubleshooting/docker/#windows","title":"Windows","text":"<p>It is important to increase the Docker memory limit to 4 GB or more when using Hyper-V. The default of 2 GB can reduce indexing performance and cause unexpected restarts. Also make sure you configure at least 4 GB of swap space. Docker Desktop uses dynamic memory allocation with WSL 2, meaning you do not need to change any memory-related settings (depending on which version of Windows and Docker you are using).</p>"},{"location":"getting-started/troubleshooting/docker/#macos","title":"macOS","text":"<p>It is important to increase the Docker memory limit to 4 GB or more, as the default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p>"},{"location":"getting-started/troubleshooting/docker/#kernel-security","title":"Kernel Security","text":"<p>We recommend disabling Linux kernel security modules like SELinux (Red Hat/Fedora) on private servers, especially if you have no experience configuring them.</p> <p>If you have working configuration rules for a particular Linux distribution, feel free to share the instructions with the community so that less experienced users can harden their installation without running into problems.</p>"},{"location":"getting-started/troubleshooting/docker/#file-permissions","title":"File Permissions","text":"<p>Errors such as \"read-only file system\", \"error creating path\", \"failed to create folder\", \"permission denied\", or \"wrong permissions\" indicate a filesystem permission problem:</p> <ul> <li> Use a file manager, or the commands <code>ls -alh</code>, <code>chmod</code>, and <code>chown</code> on Unix-like operating systems, to check and change filesystem permissions so all files and folders are accessible</li> <li> The app and database storage folders must be writable as well: Verify that the services have write permissions and that you have not mounted the folders read-only on your host or via Docker using the <code>:ro</code> flag</li> <li> If you have configured specific user and group IDs for a service, make sure they match</li> <li> If symbolic links are mounted or used within storage folders, replace them with actual paths</li> <li> It may help to add the <code>:z</code> mount flag to volumes when using SELinux (Red Hat/Fedora)</li> <li> When mounting folders that only root has access to, you may have to prefix the <code>docker</code> and <code>docker-compose</code> commands with <code>sudo</code> on Linux if you are not already logged in as root</li> </ul> <p>An easy way to test for missing permissions is to (temporarily) remove restrictions and make the entire folder accessible to everyone:</p> <p><pre><code>sudo chmod -R a+rwX [folder]\n</code></pre> Start a full rescan once all issues have been resolved, especially if it looks like thumbnails or pictures are missing.</p> <p>Be very careful when changing permissions in shared hosting environments. If you are using PhotoPrism on corporate or university servers, we recommend that you ask your IT help desk for advice.</p>"},{"location":"getting-started/troubleshooting/docker/#overlay-volumes","title":"Overlay Volumes","text":"<p>Depending on overlay file system support, it is possible to mount additional host folders as sub folders of <code>/photoprism/originals</code> (or other storage folders), for example:</p> <pre><code>volumes:\n  - \"/home/username/Pictures:/photoprism/originals\"\n  - \"/example/friends:/photoprism/originals/friends\"\n  - \"/mnt/photos:/photoprism/originals/media\"\n</code></pre> <p>For this to work, you should have the <code>cgroupfs-mount</code> package installed, as shown in the installation script we provide. You may otherwise find that files added to the mounted folders are not visible on the host, and data loss may occur.</p> <p>We recommend that you start with a simple configuration without overlay volume mounts or path placeholders like <code>~</code>, and only move on to a more complex setup once this works.</p>"},{"location":"getting-started/troubleshooting/docker/#disk-space","title":"Disk Space","text":"<p>In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (get a new one or use a different disk) or a disk usage limit is configured, for example in the Docker, Kubernetes, or Virtual Machine configuration (remove or increase it):</p> <ul> <li>on Linux and other Unix-like operating systems, the available disk space can be viewed by running <code>df -h</code> in a terminal</li> <li>if you are using Kubernetes, Docker Desktop, Hyper-V, or a Virtual Machine, they have their own settings to adjust the size of storage, RAM, and swap</li> <li>for details, refer to the corresponding documentation</li> </ul> <p>Start a full rescan if necessary, for example, if it looks like thumbnails or pictures are missing.</p>"},{"location":"getting-started/troubleshooting/docker/#network-storage","title":"Network Storage","text":"<p>Shared folders that have already been mounted on your host under a drive letter or path can be used with Docker containers like any other directory. As shown below, certain types of network storage can alternatively be mounted directly with Docker Compose.</p> <p>Please note that the required system dependencies must be installed on your computer in order to mount NFS (Unix/Linux) and/or CIFS shares (Windows/Mac), e.g. the <code>nfs-client</code> and <code>cifs-utils</code> packages on Ubuntu Linux. Also make sure that your Docker version and operating system are up-to-date, and that the latest Subsystem for Linux (WSL) is installed if you have a Windows PC.</p> <p>Never store database files, e.g. used by MariaDB or SQLite, on an unreliable device like a USB stick, SD card or network drive as this leads to poor performance and can also result in data loss.</p>"},{"location":"getting-started/troubleshooting/docker/#unix-nfs","title":"Unix / NFS","text":"<p>Follow this <code>compose.yaml</code> example to mount Network File System (NFS) shares e.g. from Unix servers or NAS devices:</p> <pre><code>services:\n  photoprism:\n    # ...\n    volumes:\n      # Map named volume \"originals\"\n      # to \"/photoprism/originals\":\n      - \"originals:/photoprism/originals\"     \n  mariadb:\n    # ...\n\n# Specify named volumes:\nvolumes:\n  originals:\n    driver_opts:\n      type: nfs\n      # Authentication and other mounting options:\n      o: \"addr=1.2.3.4,username=user,password=secret,soft,rw,nfsvers=4.1\"\n      # Mount this path:\n      device: \":/mnt/example\"\n</code></pre> <p><code>device</code> should contain the path to the share on the NFS server, note the <code>:</code> at the beginning. In the above example, the share can be mounted as the named volume <code>originals</code>. You can also choose another name as long as it is consistent.</p> <p>Driver-specific options can be set after the server address in <code>o</code>, see the nfs manual page. Here are some examples of commonly used options:</p> <ul> <li><code>nfsvers=3</code>, <code>nfsvers=4</code>, or <code>nfsvers=4.1</code> to specify the NFS version</li> <li><code>nolock</code> (optional): Remote applications on the NFS server are not affected by lock files inside the Docker container (only other processes inside the container are affected by locks)</li> <li><code>timeo=n</code> (optional, default 600): The NFS client waits <code>n</code> tenths of a second before retrying an NFS request</li> <li><code>soft</code> (optional): The NFS client aborts an NFS request after <code>retrans=n</code> unsuccessful retries, otherwise it retries indefinitely</li> <li><code>retrans=n</code> (optional, default 2): Sets the number of retries for NFS requests, only relevant when using <code>soft</code></li> </ul> <p>When you are done, please restart all services for the changes to take effect.</p> <p>Because some operating environments and file systems do not enforce character set encodings, NFS v4.1 supports the <code>fs_charset_cap</code> attribute, which indicates the UTF-8 capabilities to the client.</p>"},{"location":"getting-started/troubleshooting/docker/#smb-cifs","title":"SMB / CIFS","text":"<p>Follow this <code>compose.yaml</code> example to mount CIFS network shares, e.g. from Windows, NAS devices or Linux servers with Samba:</p> <pre><code>services:\n  photoprism:\n    # ...\n    volumes:\n      # Map named volume \"originals\"\n      # to \"/photoprism/originals\":\n      - \"originals:/photoprism/originals\"     \n  mariadb:\n    # ...\n\n# Specify named volumes:\nvolumes:\n  originals:\n    driver_opts:\n      type: cifs\n      o: \"iocharset=utf8,username=user,password=secret,rw\"\n      device: \"//host/folder\"\n</code></pre> <p>Then restart all services for the changes to take effect. Note that related values must start at the same indentation level in YAML and that tabs are not allowed for indentation. We recommend using 2 spaces, but any number will do as long as it is consistent.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/firewall/","title":"Configuring Your Firewall","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/firewall/#incoming-requests","title":"Incoming Requests","text":"<p>Unless you have changed the default configuration, PhotoPrism is reachable via port 2342 on all network devices. If you are using a firewall, please ensure that this port can be accessed from other computers on your network, or that your instance can be accessed through a reverse proxy:</p> <p></p>"},{"location":"getting-started/troubleshooting/firewall/#outgoing-connections","title":"Outgoing Connections","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p> <p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow requests to the following hosts if you have a firewall installed, and make sure that your Internet connection is working:</p> <ul> <li> dl.photoprism.app</li> <li> my.photoprism.app</li> <li> cdn.photoprism.app</li> <li> maps.photoprism.app</li> <li> places.photoprism.app</li> <li> places.photoprism.xyz</li> </ul> <p>In addition, the following API endpoints should be allowed so that public Docker images can be pulled from Docker Hub:</p> <ul> <li> auth.docker.io</li> <li> registry-1.docker.io</li> <li> index.docker.io</li> <li> dseasb33srnrn.cloudfront.net</li> <li> production.cloudflare.docker.com</li> </ul>"},{"location":"getting-started/troubleshooting/firewall/#iptables-and-docker","title":"IPTables and Docker","text":"<p>On Linux, Docker manipulates the <code>iptables</code> rules to provide network isolation. This does have some implications for what you need to do if you want to have your own policies in addition to the rules Docker manages.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/firewall/#docker-mtu-size","title":"Docker MTU Size","text":"<p>If you use Docker on your server or on a virtual machine, technical limitations of the local network or your internet provider can also make it impossible to reach external services. In particular, the network cards of virtual machines often do not have the standard Maximum Transmission Unit (MTU) of 1500, but a smaller size like 1492 or 1454.</p> <p>In this case, you must configure the virtual network cards of your Docker containers so that they have an MTU size that is less than or equal to that of the outgoing network, for example by adding the following to your <code>compose.yaml</code> (or <code>docker-compose.yml</code>) config files:</p> <pre><code>networks:\n  default:\n    driver: bridge\n    driver_opts:\n      com.docker.network.driver.mtu: 1450\n</code></pre> <p>Learn more \u203a</p> <p>All network configuration changes require a restart of the affected services and/or the Docker daemon to take effect.</p>"},{"location":"getting-started/troubleshooting/logs/","title":"Collecting Debug Information","text":"Web AppBrowserDocker Logs <p>Make sure Logs is enabled under Settings &gt; General so you can see log messages in the Web UI.</p> <p>Live Logs</p> <p>The continuously updated live logs in Library &gt; Logs are especially useful for diagnosing indexing and import issues, but also display other types of logs (depending on the log level):</p> <ol> <li>Navigate to Library</li> <li>Open the Logs tab</li> </ol> <p>Only a limited number of messages are visible in the Web App to reduce memory usage. You can see all messages in the Docker Logs. This may be more convenient if you are looking for information on a specific file or want to attach your full logs to a support request.</p> <p>Errors and Warnings</p> <ol> <li>Expand the main navigation</li> <li>Open the Library sub navigation</li> <li>Navigate to Library &gt; Errors</li> </ol> <p></p> <p>If you have a frontend issue, it is often helpful to check the browser console for errors and warnings. A console is available in all modern browsers and can be activated via keyboard shortcuts or the browser menu.</p> <p>Problems with the user interface can be caused by a bug or an incompatible browser: Some features may not be supported by non-standard browsers, as well as nightly, unofficial, or outdated versions.</p> <p>In case you don't see any log messages, try reloading the page, as the problem may occur while the page is loading.</p> <p>Chrome, Chromium, and Edge</p> <ul> <li>press \u2318+Option+J (Mac) or Ctrl+Shift+J (Windows, Linux, Chrome OS) to go directly to the Developer Tools</li> <li>or, navigate to More tools &gt; Developer tools in the browser menu and open the Console tab</li> </ul> <p>Firefox</p> <ul> <li>press \u2318+Option+K (Mac) or Ctrl+Shift+K (Windows) to go directly to the Firefox Web Console panel</li> <li>or, navigate to Web Development &gt; Web Console in the menu and open the Console panel</li> </ul> <p>Safari</p> <p>Before you can access the console in Safari on MacOS, you first need to enable the Develop menu:</p> <ol> <li>Choose Safari Menu &gt; Preferences and select the Advanced Tab</li> <li>Select \"Show Develop menu in menu bar\"</li> </ol> <p>Once the Develop menu is enabled:</p> <ul> <li>press Option+\u2318+C to go directly to the Javascript Console</li> <li>or, navigate to Develop &gt; Show Javascript Console in the browser menu</li> </ul> <p>Mobile Safari</p> <p>Browser logs on Apple mobile devices running iOS or iPadOS can be viewed when you connect them to a Mac. Before you can connect your device to a Mac, you must allow your device to be inspected:</p> <ol> <li>Open the Settings app</li> <li>Go to Safari</li> <li>Scroll down to Advanced</li> <li>Enable the Web Inspector toggle</li> </ol> <p>If you now connect the device to your Mac with a cable, websites opened in Safari on iOS and iPadOS will appear in a submenu for the connected device in the Develop menu of the Safari desktop browser. Note that when prompted, you may need to confirm that you trust the Mac you are connecting your device to.</p> <p>Web pages (and other content) are separated by app, making it easier for you to find the web page you are looking for. Once you have found and selected the site you want to inspect, a Web Inspector window will open. See Apple's Developer Guide for additional help and information. </p> <p>You can run this command to watch the Docker service logs, including the last 100 messages (omit <code>--tail=100</code> to see them all, and <code>-f</code> to output only the last logs without watching them):</p> <pre><code>docker compose logs -f --tail=100 \n</code></pre> <p>A good way to troubleshoot configuration issues is to increase the log level. To enable trace log mode, set <code>PHOTOPRISM_LOG_LEVEL</code> to <code>\"trace\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--trace</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\n  photoprism:\n    environment:\n      PHOTOPRISM_LOG_LEVEL: \"trace\"\n      ...\n</code></pre> <p>Now restart all services for your changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre> <p>It can also be helpful to keep Docker running in the foreground while debugging, so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when (re)starting:</p> <pre><code>docker compose stop\ndocker compose up\n</code></pre> <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p> <p>The default Docker Compose config filename is <code>compose.yaml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/mariadb/","title":"Troubleshooting MariaDB Problems","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/mariadb/#compatibility","title":"Compatibility","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p> <p>Our configuration examples are generally based on the current stable version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately.</p> <p>We recommend using a version or subversion tag, such as <code>:11</code> or <code>:11.8</code>, instead of <code>:latest</code>, to specify the MariaDB service image in your <code>compose.yaml</code> file, as shown in this example:</p> <pre><code>services:\n  mariadb:\n    image: mariadb:11.8\n    ...\n</code></pre> <p>You can then manually upgrade to new major versions by changing the image tag, e.g. from <code>mariadb:11</code> to <code>mariadb:12</code>, once they are stable and we had time to test them. </p> <p>However, this requires periodically checking for new MariaDB images and adjusting your <code>compose.yaml</code> file accordingly, so you don't get stuck with an outdated version.</p>"},{"location":"getting-started/troubleshooting/mariadb/#cannot-connect","title":"Cannot Connect","text":"<p>First, verify that you are using the correct port (default is <code>3306</code>) and host:</p> <ul> <li>in the internal Docker network, the default hostname is <code>mariadb</code> (same as the service)</li> <li>avoid changing the default network configuration, unless you are experienced with this</li> <li>avoid using IP addresses other than <code>127.0.0.1</code> (localhost) directly, as they can change</li> <li>only use <code>localhost</code> or <code>127.0.0.1</code> if the database port has been exposed as described below and you are on the same computer (host)</li> <li>we recommend configuring a local hostname to access other hosts on your network</li> </ul> <p>To connect to MariaDB from your host or home network, you need to expose port <code>3306</code> in your <code>compose.yaml</code> or <code>docker-compose.yml</code> and restart the service for changes to take effect:</p> <pre><code>services:\n  mariadb:\n    ports:\n      - \"3306:3306\"\n</code></pre> <p>Set strong passwords if the database is exposed to an external network. Never expose your database to the public Internet in this way, for example, if it is running on a cloud server.</p> <p>If this doesn't help, check the Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, exec format error, no matching manifest, and killed:</p> <ul> <li> Make sure that the database storage folder is readable and writable: Errors such as \"read-only file system\", \"error creating path\", \"failed to create folder\", \"permission denied\", or \"wrong permissions\" indicate a filesystem permission problem</li> <li> If symbolic links are mounted or used within the storage folder, replace them with the actual paths and verify that they are accessible</li> <li> If the MariaDB service has been \"killed\" or otherwise automatically terminated, this can point to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs also show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Log messages that contain \"no route to host\" may also indicate a general network configuration problem (follow our examples)</li> <li> You have to resort to alternative Docker images to run MariaDB on ARMv7-based devices and those with a 32-bit operating system</li> <li> You may find a solution in the official MariaDB Docker Image FAQ</li> </ul>"},{"location":"getting-started/troubleshooting/mariadb/#custom-dsn","title":"Custom DSN","text":"<p>You may encounter errors similar to this when starting your instance or restoring a backup if you have manually configured a MariaDB Data Source Name (DSN), without adding the necessary parameters such as <code>parseTime=true</code> to the <code>PHOTOPRISM_DATABASE_DSN</code> environment variable or the <code>--database-dsn</code> command flag:</p> <pre><code>sql: Scan error on column index 5 unsupported Scan,\nstoring driver.Value type []uint8 into type *time.Time\n</code></pre> <p>To avoid this issue, we recommend using the following configuration options to specify the MariaDB database name, server, user, and password:</p> <ul> <li><code>PHOTOPRISM_DATABASE_NAME</code></li> <li><code>PHOTOPRISM_DATABASE_SERVER</code></li> <li><code>PHOTOPRISM_DATABASE_USER</code></li> <li><code>PHOTOPRISM_DATABASE_PASSWORD</code></li> </ul> <p>This will automatically generate a compatible Data Source Name (DSN) for connecting to your MariaDB database server.</p> <p>Since the connection parameters may change in future versions, manually setting the DSN is not recommended unless it is for testing purposes or to meet specific requirements. If you need to set it manually, the following parameters should be included at the end:</p> <pre><code>?charset=utf8mb4,utf8&amp;collation=utf8mb4_unicode_ci&amp;parseTime=true&amp;timeout=60s\n</code></pre> <p>Note that it is not possible to set a custom DSN for MariaDB when a database server is configured at the same time, as the database server setting takes precedence.</p> <p>When using SQLite, the DSN configuration option allows you to specify the database filename and custom parameters. Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/mariadb/#wrong-password","title":"Wrong Password","text":"<p>If the password you are using was specified in a <code>compose.yaml</code> or <code>docker-compose.yml</code> file and contains one or more <code>$</code> characters, these must be escaped with <code>$$</code> (a double dollar sign) so that, for example, <code>\"compo$e\"</code> becomes <code>\"compo$$e\"</code>:</p> <pre><code>services:\n  mariadb:\n    environment:\n      # sets password to \"compo$e\"\n      MARIADB_PASSWORD: \"compo$$e\"\n</code></pre> <p>Also note that you cannot change the database password with <code>MARIADB_PASSWORD</code> after MariaDB has been started for the first time.</p> <p>In this case, you can either delete the database storage folder and restart the database service or follow the instructions under Lost Root Password.</p>"},{"location":"getting-started/troubleshooting/mariadb/#bad-performance","title":"Bad Performance","text":"<p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Get Performance Tips \u203a View Database Schema \u203a</p>"},{"location":"getting-started/troubleshooting/mariadb/#version-upgrade","title":"Version Upgrade","text":"<p>Should MariaDB fail to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. With older versions, it could only be updated manually. However, newer MariaDB Docker images support automatic upgrades on startup, so you don't have to worry about that anymore.</p> <p>When upgrading from MariaDB 10.x to v11.0 or later, you must replace <code>command: mysqld</code> with <code>command:</code> (followed by a space and the command flags) in your <code>compose.yaml</code> file since the database server may otherwise fail to start.</p>"},{"location":"getting-started/troubleshooting/mariadb/#manual-update","title":"Manual Update","text":"<p>To manually upgrade the internal database schema, run this command in a terminal:</p> <pre><code>docker compose exec mariadb mariadb-upgrade -uroot -p\n</code></pre> <p>Enter the MariaDB \"root\" password specified in your <code>compose.yaml</code> or <code>docker-compose.yml</code> when prompted.</p> <p>Alternatively, you can downgrade to the previous version, create a database backup using the <code>photoprism backup</code> command, start a new database instance based on the latest version, and then restore your index with the <code>photoprism restore</code> command.</p>"},{"location":"getting-started/troubleshooting/mariadb/#auto-upgrade","title":"Auto Upgrade","text":"<p>To enable automatic schema updates, set <code>MARIADB_AUTO_UPGRADE</code> to a non-empty value in your <code>compose.yaml</code> or <code>docker-compose.yml</code> as shown in our config example:</p> <pre><code>services:\n  mariadb:\n    image: mariadb:11\n    ...\n    environment:\n      MARIADB_AUTO_UPGRADE: \"1\"\n      MARIADB_INITDB_SKIP_TZINFO: \"1\"\n      ...\n</code></pre> <p>Before starting MariaDB in production mode, the database image entrypoint script now runs <code>mariadb-upgrade</code> to update the internal management schema as needed. For example, when you pull a new major release and restart the service.</p> <p>We recommend periodically checking for new MariaDB images and updating your <code>compose.yaml</code> file as needed so that you don't get stuck with an outdated version.</p> <p>Learn more \u203a</p> <p>Since PhotoPrism does not require time zone support, you can also add <code>MARIADB_INITDB_SKIP_TZINFO</code> to your config as shown above. However, this is only a recommendation and optional.</p>"},{"location":"getting-started/troubleshooting/mariadb/#incompatible-schema","title":"Incompatible Schema","text":"<p>If your database does not seem to be compatible with the currently installed version of PhotoPrism, for example because search results are missing or incorrect, first make sure you are using a supported database and that its internal management schema is up-to-date. How to do that is explained in the previous section.</p> <p>Once you have verified that neither is a problem, you can run the following command in a terminal to check the status of previous database schema migrations:</p> <pre><code>docker compose exec photoprism photoprism migrations ls\n</code></pre> <p>Omit the <code>docker compose exec photoprism</code> prefix if you are using an interactive terminal session or are running PhotoPrism directly on your computer without Docker.</p>"},{"location":"getting-started/troubleshooting/mariadb/#re-run-migrations","title":"Re-Run Migrations","text":"<p>Should the status of any migration not be OK, you can re-run failed migrations using this command in a terminal:</p> <pre><code>docker compose exec photoprism photoprism migrations run -f\n</code></pre> <p>The <code>-f</code> flag instructs the <code>photoprism migrations run</code> subcommand to re-run previously failed migrations. Use <code>--help</code> to see the command help.</p> <p>Additional migration command examples can be found in the Developer Guide.</p>"},{"location":"getting-started/troubleshooting/mariadb/#complete-rescan","title":"Complete Rescan","text":"<p>We recommend that you re-index your pictures after a schema migration, especially if problems persist. You can either start a rescan from the user interface by navigating to Library &gt; Index, checking \"Complete Rescan\", and then clicking \"Start\", or by running this command in a terminal:</p> <pre><code>docker compose exec photoprism photoprism index -f\n</code></pre> <p>Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/troubleshooting/mariadb/#server-migration","title":"Server Migration","text":"<p>If you want to move your MariaDB database to another server or virtual machine:</p> <ul> <li>Read the Creating Backups chapter in our User Guide for general information on how to back up and restore your data</li> <li>We recommend that you create a full backup of all files before starting the server migration or making any other major changes</li> <li>Ideally, the MariaDB versions of both servers should match and the existing database files should not be corrupted, e.g. due to an unclean shutdown</li> <li>If your servers are not running on the latest stable release, we recommend that you update both for the migration so that they are feature and binary compatible</li> </ul> <p>To create a database backup:</p> <ul> <li> In case the MariaDB version and system architecture match, you can shut down your existing PhotoPrism instance and the database server, and then copy the entire database storage folder without changing any file or folder permissions</li> <li> Alternatively, you can use the built-in <code>photoprism backup -i -f</code> CLI command, or backup the database with a manually created SQL dump (backup file)</li> </ul> <p>On the new server:</p> <ul> <li> If you copied the entire database storage folder, start the MariaDB server and make sure PhotoPrism can access the new database by updating its configuration or your network settings if necessary</li> <li> To restore the database from a backup dump (either manually or using the <code>photoprism restore -i -f</code> CLI command), the MariaDB server must be running and PhotoPrism must be restarted after the backup has been restored</li> <li> Be sure to never expose your database to the public Internet, and use strong passwords if the database is exposed to an external network</li> </ul>"},{"location":"getting-started/troubleshooting/mariadb/#server-crashes","title":"Server Crashes","text":"<p>If the server crashes unexpectedly or your database files get corrupted frequently, it is usually because they are stored on an unreliable device such as a USB flash drive, an SD card, or a shared network folder mounted via NFS or CIFS. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <ul> <li> Never use the same database files with more than one server instance</li> <li> To share a database over a network, run the database server directly on the remote server instead of sharing database files</li> <li> To repair your tables after you have moved the files to a local disk, you can start MariaDB with <code>--innodb-force-recovery=1</code> (otherwise the same procedure as for recovering a lost password, see above)</li> <li> Make sure you are using the latest Docker version and read the release notes for the database server version you are using</li> </ul>"},{"location":"getting-started/troubleshooting/mariadb/#invalid-table-errors","title":"Invalid Table Errors","text":"<p>If you are using macOS and see errors like <code>Invalid (old?) table or database name '._column_stats'</code>, it may be because you are running MariaDB on a file system like ExFAT that does not support extended attributes. In this case, macOS automatically creates these files and MariaDB then reports them as invalid tables (which is technically correct). To remove extended attribute files, you can run the following in a terminal:</p> <pre><code>find . -type f -name '._*' -delete\n</code></pre> <p>Unless you open the storage folder again in macOS Finder, the errors should then be gone after restarting the database.</p>"},{"location":"getting-started/troubleshooting/mariadb/#corrupted-files","title":"Corrupted Files","text":"<p>Most database table and/or index corruptions are hardware-related. Corrupted page writes can be caused by power failures or bad memory. The problem can also be caused by using network attached storage (NAS) and placing InnoDB databases on it.</p> <p>\u21aa Server Crashes</p>"},{"location":"getting-started/troubleshooting/mariadb/#lost-root-password","title":"Lost Root Password","text":"<p>In case you forgot the MariaDB \"root\" password and the one specified in your configuration does not work, you can start the server with the <code>--skip-grant-tables</code> flag added to the <code>mysqld</code> command in your <code>compose.yaml</code> or <code>docker-compose.yml</code>. This will temporarily give full access to all users after a restart:</p> <pre><code>services:\n  mariadb:\n    command: --skip-grant-tables\n</code></pre> <p>Restart the <code>mariadb</code> service for changes to take effect:</p> <pre><code>docker compose stop mariadb\ndocker compose up -d mariadb\n</code></pre> <p>Now open a database console:</p> <pre><code>docker compose exec mariadb mysql -uroot\n</code></pre> <p>Enter the following commands to change the password for \"root\":</p> <pre><code>FLUSH PRIVILEGES;\nALTER USER 'root'@'%' IDENTIFIED BY 'new_password';\nALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';\nexit\n</code></pre> <p>When you are done, remove the <code>--skip-grant-tables</code> flag again to restore the original command and restart the <code>mariadb</code> service as described above.</p>"},{"location":"getting-started/troubleshooting/mariadb/#unicode-support","title":"Unicode Support","text":"<p>If the logs show \"incorrect string value\" database errors and you are running a custom MariaDB or MySQL server that is not based on our default configuration:</p> <ul> <li> Full Unicode support must be enabled, e.g. using the <code>mysqld</code> command parameters <code>--character-set-server=utf8mb4</code> and <code>--collation-server=utf8mb4_unicode_ci</code></li> <li> Note that an existing database may use a different character set if you imported it from another server</li> <li> Before submitting a support request, verify the problem still occurs with a newly created database based on our example</li> </ul> <p>Run this command in a terminal to see the current values of the collation and character set variables (change the root password <code>insecure</code> and database name <code>photoprism</code> as specified in your <code>compose.yaml</code> or <code>docker-compose.yml</code>):</p> <pre><code>echo \"SHOW VARIABLES WHERE Variable_name LIKE 'character\\_set\\_%' OR Variable_name LIKE 'collation%';\" | \\\ndocker compose exec -T mariadb mysql -uroot -pinsecure photoprism\n</code></pre>"},{"location":"getting-started/troubleshooting/mariadb/#mysql-errors","title":"MySQL Errors","text":"<p>Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p>"},{"location":"getting-started/troubleshooting/metadata/","title":"Checking Image and Video Metadata","text":"<p>We recommend checking the file metadata with Exiftool if some of your pictures are displayed incorrectly (stretched, distorted)<sup>1</sup>, information seems to be missing (e.g. title or caption), or the wrong time and location are shown.</p> <p>To do this, run the following command within a Docker terminal session or on your host if you have Exiftool installed (<code>-n</code> displays the raw values without changes, <code>-j</code> will format the output as JSON, and <code>-g</code> optionally groups the output by metadata source):</p> <pre><code>exiftool -n -j [filename]\n</code></pre> <p>If the file specified with <code>[filename]</code> contains readable metadata, it will then be displayed to you as JSON-formatted values, for example:</p> <pre><code>[{\n  \"SourceFile\": \"example.jpg\",\n  \"ExifToolVersion\": 12.76,\n  \"FileSize\": 200108,\n  \"FileType\": \"JPEG\",\n  \"MIMEType\": \"image/jpeg\",\n  \"Make\": \"HUAWEI\",\n  \"Model\": \"ELE-L29\",\n  \"Orientation\": 1,\n  \"ExposureTime\": 0.02,\n  \"FNumber\": 1.8,\n  \"ISO\": 100,\n  \"DateTimeOriginal\": \"2020:10:17 17:48:24\",\n  \"CreateDate\": \"2020:10:17 17:48:24\",\n  \"ImageWidth\": 500,\n  \"ImageHeight\": 375,\n  \"Aperture\": 1.8,\n  \"ShutterSpeed\": 0.02,\n  \"SubSecCreateDate\": \"2020:10:17 17:48:24.950488\",\n  \"SubSecDateTimeOriginal\": \"2020:10:17 17:48:24.950488\",\n  \"SubSecModifyDate\": \"2020:10:17 17:48:24.950488\",\n  \"GPSAltitude\": 84.47,\n  \"GPSDateTime\": \"2020:10:17 15:48:23Z\",\n  \"GPSLatitude\": 33.8120962,\n  \"GPSLongitude\": -117.9215491\n}]\n</code></pre> <p>This allows you to check e.g. the values for Orientation and Rotation if you have problems with the image orientation.</p> <p>When you post the output on GitHub or in our Community Chat, please format it as follows for better readability:</p> <pre><code>```json\n[{\n  \"SourceFile\": \"example.jpg\",\n  \"ExifToolVersion\": 12.76,\n  ...\n}]\n```\n</code></pre> <p>Thank you very much!</p>"},{"location":"getting-started/troubleshooting/metadata/#exif-orientation","title":"Exif Orientation","text":"<p>The numbers used in Exif metadata to specify the image orientation are defined as follows: </p> <ol> <li>= 0 degrees: the correct orientation, no adjustment is required.</li> <li>= 0 degrees, mirrored: image has been flipped back-to-front.</li> <li>= 180 degrees: image is upside down.</li> <li>= 180 degrees, mirrored: image has been flipped back-to-front and is upside down.</li> <li>= 90 degrees: image has been flipped back-to-front and is on its side.</li> <li>= 90 degrees, mirrored: image is on its side.</li> <li>= 270 degrees: image has been flipped back-to-front and is on its far side.</li> <li>= 270 degrees, mirrored: image is on its far side.</li> </ol> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/metadata/#installing-exiftool","title":"Installing Exiftool","text":"<p>Running the following commands will install Exiftool on Debian or Ubuntu Linux if needed:</p> <pre><code>sudo apt update\nsudo apt install -y exiftool\n</code></pre> <p>See the Exiftool documentation for how to install it on other operating systems.</p> <ol> <li> <p>If images are displayed in low resolution or slightly distorted, this may also be due to a problem with the thumbnail cache folder or your quality settings.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/troubleshooting/performance/","title":"Performance Tips","text":""},{"location":"getting-started/troubleshooting/performance/#mariadb","title":"MariaDB","text":"<p>The InnoDB buffer pool serves as a cache for data and indexes. It is a key component for optimizing MariaDB performance. Its size should be as large as possible to keep frequently used data in memory and reduce disk I/O - typically the biggest bottleneck.</p> <p>By default, the buffer pool size is between 128 MB and 512 MB, depending on which configuration example you use. You can change it with the <code>--innodb-buffer-pool-size</code> command parameter in the <code>mariadb:</code> section of your config file. <code>M</code> stands for Megabyte, <code>G</code> for Gigabyte. Do not use spaces.</p> <p>If your server has plenty of physical memory, we recommend increasing the size to 1 or 2 GB:</p> <pre><code>services:\n  mariadb:\n    command: --innodb-buffer-pool-size=1G ...\n</code></pre> <p>As a rule of thumb, <code>Innodb_buffer_pool_pages_free</code> should never be less than 5% of the total pages. You can run the following SQL statement, for example using the <code>mariadb</code> command in a terminal, to display the number of free pages and other InnoDB-related status information:</p> <pre><code>SHOW GLOBAL STATUS LIKE 'Innodb_buffer%';\n</code></pre> <p>Advanced users may adjust additional parameters to further improve performance. Tools such as the mysqltuner.pl script can provide helpful recommendations for this.</p> <p>Windows and macOS</p> <p>If you are using Docker Desktop on Windows or macOS, remember to increase the total memory available for Docker services. Otherwise, they may run out of resources and cannot benefit from a larger cache size. In case PhotoPrism and MariaDB are running in a virtual machine, its memory size should be increased as well. Restart for changes to take effect.</p>"},{"location":"getting-started/troubleshooting/performance/#migration-from-sqlite","title":"Migration from SQLite","text":"<p>After migrating from SQLite, it is possible that columns do not have exactly the data type they should have or that indexes are missing. This can lead to poor performance. For example, MariaDB cannot process rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation . It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>View Database Schema \u203a</p>"},{"location":"getting-started/troubleshooting/performance/#windows","title":"Windows","text":"<p>Solve Windows-Specific Issues \u203a</p>"},{"location":"getting-started/troubleshooting/performance/#storage","title":"Storage","text":"<p>Local Solid-State Drives (SSDs) are best for databases of any kind:</p> <ul> <li>database performance extremely benefits from high throughput which HDDs can't provide</li> <li>SSDs have more predictable performance and can handle more concurrent requests</li> <li>due to the HDD seek time, HDDs only support 5% of the reads per second of SSDs</li> <li>the cost savings from using slow hard disks are minimal</li> </ul> <p>Switching to SSDs makes a big difference, especially for write operations and when the read cache is not big enough or can't be used.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p>"},{"location":"getting-started/troubleshooting/performance/#memory","title":"Memory","text":"<p>Indexing large photo and video collections benefits from plenty of memory for caching and processing large media files. Ideally, the amount of RAM should match the number of physical CPU cores. If not, reduce the number of workers as explained below.</p> <p>Also ensure that your server has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files. Indexing RAW images and high-resolution panoramas may require additional swap space and/or physical memory beyond the recommended minimum.</p> <p>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/troubleshooting/performance/#server-cpu","title":"Server CPU","text":"<p>Last but not least, performance can be limited by your server CPU. If you've tried everything else, then only moving your instance to a more powerful device or cloud server may help.</p> <p>Be aware that most NAS devices are optimized for minimal power consumption and low production costs. Although their hardware gets faster with each generation, benchmarks show that even 8-year-old standard desktop CPUs like the Intel Core i3-4130 are often many times faster:</p> <p></p>"},{"location":"getting-started/troubleshooting/performance/#legacy-hardware","title":"Legacy Hardware","text":"<p>It is a known issue that the user interface and backend operations, especially face recognition, can be slow or even crash on older hardware due to a lack of resources. Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p> <p>In many cases, performance can be improved through optimizations. Since these can prove to be very time-consuming and cost-intensive in practice, users and developers must decide on a case-by-case basis whether this provides sufficient benefit in relation to the costs or whether the use of more powerful hardware is faster and cheaper overall.</p> <p>We kindly ask you not to open a problem report on GitHub Issues for poor performance on older hardware until a full cause and feasibility analysis has been performed. GitHub Discussions or any of our other public forums and communities are great places to start a discussion.</p> <p>That being said, one of the advantages of open-source software is that users can submit pull requests with performance and other enhancements they would like to see implemented. This will result in a much faster solution than waiting for a core team member to remotely analyze your problem and then provide a fix.</p>"},{"location":"getting-started/troubleshooting/performance/#troubleshooting","title":"Troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in your <code>compose.yaml</code> file, depending on the CPU performance and number of cores</li> <li> Ensure that your server has at least 4 GB of swap configured and avoid setting a hard memory limit as this can cause unexpected restarts when the indexer temporarily needs more memory to process large files </li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and resolve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/raspberry-pi/","title":"Troubleshooting Raspberry Pi Problems","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/raspberry-pi/#hardware-watchdog-initiates-reboot","title":"Hardware Watchdog Initiates Reboot","text":"<p>A watchdog timer is an electronic timer that is used to detect and correct computer malfunctions. When activated, it can trigger a reboot when the computer is under heavy load, e.g. when indexing pictures. </p> <p>Should your Raspberry Pi fail to reset the timer before it expires, the WDT signal will reboot it. It is disabled by default in the firmware.</p> <p>Users can set up \"dtparam\" also known as Device Tree config files for Raspberry Pi's in <code>/boot/config.txt</code>, which will enable the kernel module.</p> <p>It is the responsibility of the user to set the parameters of the watchdog daemon correctly.</p> <p>A common parameter that users set is the average CPU load for 1, 5, or 15 minutes. The default value for the 1 minute span is 24</p> <pre><code>max-load-1 = 24\n</code></pre> <p>The average load is the sum of the queue length and the number of jobs currently running on the CPUs. You can use the following commands to view load average statistics:</p> <pre><code>uptime, procinfo, w, top\n</code></pre> <p>Raspberry Pi users who have the hardware watchdog enabled need to set a more appropriate value for the 1-minute span for the maximum load than the default value. As a workaround, you can log the average workload to a file:</p> <pre><code>#!/bin/bash\n\nwhile true; do\necho $(cat /proc/loadavg) &gt;&gt; test_file.log\nsleep 10\ndone\n</code></pre> <p>This will write a log with a timestamp every 10 seconds. Run the above script while performing intensive tasks that would normally trigger a reboot, such as tagging faces. With this information, you can now set a new value that is greater than the recorded maximum.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/troubleshooting/sqlite/","title":"Troubleshooting SQLite Problems","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/sqlite/#custom-dsn","title":"Custom DSN","text":"<p>When using SQLite, you can use the <code>PHOTOPRISM_DATABASE_DSN</code> configuration option to specify a custom database filename and additional parameters:</p> <ul> <li>https://pkg.go.dev/github.com/mattn/go-sqlite3#readme-connection-string</li> </ul> <p>Otherwise, the default Data Source Name (DSN) is <code>index.db?_busy_timeout=5000</code>, which instructs the SQLite database driver to store the database in <code>storage/index.db</code> and wait the specified amount of time when a table is locked.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/sqlite/#bad-performance","title":"Bad Performance","text":"<p>If you only have few pictures, concurrent users, and CPU cores, SQLite may seem faster compared to full-featured database servers like MariaDB. This changes as the index grows and the number of concurrent accesses increases. While MariaDB is optimized for high concurrency, SQLite frequently locks its index so that other operations have to wait. In the worst case, this can lead to locking errors and timeouts during indexing - especially in combination with a slow disk or network storage.</p> <p>The main advantage of SQLite is that you don't need to run a separate database server. It is therefore well suited for testing and can also be sufficient for small libraries with a few thousand files. If you are looking for scalability and high performance, it is not a good choice.</p> <p>Get MariaDB Performance Tips \u203a</p>"},{"location":"getting-started/troubleshooting/sqlite/#locking-errors","title":"Locking Errors","text":"<p>If you use traditional hard drives instead of SSDs, you will find that PhotoPrism frequently runs into locking issues with SQLite because your CPU is many times faster than the mechanical heads of your disks. To some extent, this may also happen with solid-state drives, but it is much more likely with slow storage.</p> <p>You may be able to optimize the behavior and reduce locking errors with SQLite parameters that you can set with the database DSN config option, but ultimately you should use an SSD if you want to keep SQLite or switch to MariaDB. Please note that our team cannot provide support otherwise.</p>"},{"location":"getting-started/troubleshooting/sqlite/#server-crashes","title":"Server Crashes","text":"<p>If the server crashes unexpectedly or your database files get corrupted frequently, it is usually because they are stored on an unreliable device such as a USB flash drive, an SD card, or a shared network folder mounted via NFS or CIFS. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <ul> <li> Never use the same database files with more than one server instance</li> <li> Use SSDs instead of traditional hard drives, never use network storage</li> <li> Consider using MariaDB instead of SQLite</li> </ul>"},{"location":"getting-started/troubleshooting/sqlite/#corrupted-files","title":"Corrupted Files","text":"<p>\u21aa Server Crashes</p>"},{"location":"getting-started/troubleshooting/sqlite/#migrating-to-mariadb","title":"Migrating to MariaDB","text":"<p>When migrating from SQLite to MariaDB, e.g. using scripts and instructions from the community, you should note that your database schema may no longer be optimized for performance and indexes may be missing. Also, MariaDB cannot handle rows with \"text\" columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation . It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Troubleshoot MariaDB Problems \u203a</p>"},{"location":"getting-started/troubleshooting/windows/","title":"Solving Windows-Specific Issues","text":""},{"location":"getting-started/troubleshooting/windows/#ntfs-file-system","title":"NTFS File System","text":"<p>If you experience poor performance when indexing large libraries stored on NTFS:</p> <ul> <li> The I/O bandwidth used to update the Last Access Time can be a significant percentage of the total I/O bandwidth on NTFS volumes with a large number of files or folders (disable updates).<sup>1</sup></li> <li> In folders with many files, file names may start to conflict after NTFS uses all of the 8.3 short file names that are similar to the long names. Repeated conflicts between new and existing short names cause NTFS to regenerate the short file name from 6 to 8 times (disable short file names and reduce the number of files per folder).<sup>2</sup> <sup>3</sup></li> <li> exFat can be faster than NTFS, especially on external SSD drives with a lot of small files.</li> <li> Windows 10 and 11 allow physical disks formatted with the Linux ext4 file system to be mounted directly in WSL 2, which may be an option for some use cases.<sup>4</sup></li> </ul>"},{"location":"getting-started/troubleshooting/windows/#connecting-via-webdav","title":"Connecting via WebDAV","text":"<p>If you followed our step-by-step guide and still have trouble connecting via WebDAV:</p> <ul> <li> You need to change the basic authentication level (see below)</li> <li> You do not have sufficient user rights (try as admin)</li> <li> You are experiencing a general authentication problem</li> <li> Your instance or reverse proxy uses an invalid HTTPS certificate</li> <li> You are trying to connect to the wrong network or server</li> </ul> <p>To change the basic authentication level in the Windows registry:</p> <ol> <li>Open the Windows Registry Editor.</li> <li>Locate the following registry directory: <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\WebClient\\Parameters</code></li> <li>Locate the value <code>BasicAuthLevel</code>.</li> <li>The value data box should be set to 2. If the value is not 2, right click it and then select Modify.</li> <li>Change the value to 2.</li> </ol>"},{"location":"getting-started/troubleshooting/windows/#webdav-file-size-limit","title":"WebDAV File Size Limit","text":"<p>When uploading or downloading large files (more than 50 MB) on Windows, this error may occur:</p> <pre><code>Error 0x800700DF: The file size exceeds the limit allowed and cannot be saved\n</code></pre> <p>To allow larger files, you must increase the size limit in the Windows registry:<sup>5</sup></p> <ol> <li>Open the Windows Registry Editor.</li> <li>Locate the following registry directory: <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\WebClient\\Parameters</code></li> <li>Locate the value <code>FileSizeLimitInBytes</code>.</li> <li>Set the value to 4294967295 (in Decimal). </li> <li>Restart your computer.</li> </ol> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p> <ol> <li> <p>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc781134(v=ws.10)?redirectedfrom=MSDN#last-access-time \u21a9</p> </li> <li> <p>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc781134(v=ws.10)?redirectedfrom=MSDN#how-ntfs-generates-short-file-names \u21a9</p> </li> <li> <p>https://stackoverflow.com/a/9600126 \u21a9</p> </li> <li> <p>https://www.bleepingcomputer.com/news/microsoft/windows-10-now-lets-you-mount-linux-ext4-filesystems-in-wsl-2/ \u21a9</p> </li> <li> <p>https://help.druva.com/en/articles/8513266-troubleshoot-legal-hold-issues-when-using-network-mapped-drives \u21a9</p> </li> </ol>"},{"location":"getting-started/vpn/tailscale/","title":"Tailscale VPN","text":"<p>Should you experience problems with Tailscale, we recommend that you ask the Tailscale community for advice, as we cannot provide support for third-party software and services.</p> <ol> <li> <p>Open the Tailscale website and Select Use Tailscale button. </p> </li> <li> <p>Sign up with an email address or using any of your other accounts and install Tailscale on all the relevant devices. Detailed and clear instructions are available to guide your through the process depending on the operating system.</p> <p></p> <p>For example below the instruction for Linux and Android</p> <p></p> </li> <li> <p>When the devices have Tailscale installed (and logged in via the same account) they all appear in the overview as in the printscreen below.</p> <p></p> </li> <li> <p>Each device gets an IP address allocated (100.xxx.xxx.xxx), which can be used to reach them via the VPN network. This IP address with addition of the port number where Photoprism is run on can be used to reach Photoprism outside the home network. </p> <p></p> </li> </ol>"},{"location":"getting-started/vpn/tailscale/#deny-incoming-vpn-traffic-from-cloud-server","title":"Deny incoming vpn traffic from cloud server","text":"<p>If you have a Photoprism instance running on a cloud server, you might want to be able to connect from your desktop computer to the cloud server and deny connections from the cloud server. Denying connections from the cloud server is useful if it is compromised.</p> <p>That can be achieved by setting up ACL's (Access Control Lists). Read about ACL's and tags in the tailscale documentation.</p> <p>This example shows how to:</p> <ul> <li>Create two tags \"lan\" and \"cloud\"</li> <li>Create an ACL that allows machines tagged \"lan\" to connect to every machine in the tailnet.</li> <li>Tags a desktop machine with \"lan\" and a cloud server with \"cloud\"</li> </ul> <p>As the cloud server is not specifically allowed to connect anywhere on the tailnet, it cannot connect to machines tagged \"lan\".</p> <p>Step 1</p> <p>Go to your tailscale acl admin console.</p> <p>Add the two tags and the acl as marked on the screenshot below:</p> <p></p> <p>Step 2</p> <p>Go to your tailscale machines admin console.</p> <p>Add the \"tag:lan\" and \"tag:cloud\" to your desktop and cloud machines as demonstrated:</p> <p>Open the ACL tags dialog window:</p> <p></p> <p>Add/remove tags as needed and click on \"Save\":</p> <p></p> <p>Step 3</p> <p>Verify the changes work as intended.</p> <ul> <li> <p>Connect to your cloud based PhotoPrism instance and make sure it works. You could try to do this:</p> <ul> <li>Create an album</li> <li>Tag some photos</li> <li>Add the tagged photos to the new album</li> </ul> </li> <li> <p>ssh into the cloud server from your desktop machine, that should work.</p> </li> <li> <p>From the cloud server, ping your desktop, ssh into it or something else. All of it should fail.</p> </li> </ul> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"license/agpl/","title":"GNU Affero General Public License","text":"<p>Version 3, 19 November 2007</p> <p>Copyright \u00a9 2007 Free Software Foundation, Inc.</p> <p>Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</p>"},{"location":"license/agpl/#preamble","title":"Preamble","text":"<p>The GNU Affero General Public License is a free, copyleft license for software and other kinds of works, specifically designed to ensure cooperation with the community in the case of network server software.</p> <p>The licenses for most software and other practical works are designed to take away your freedom to share and change the works.  By contrast, our General Public Licenses are intended to guarantee your freedom to share and change all versions of a program--to make sure it remains free software for all its users.</p> <p>When we speak of free software, we are referring to freedom, not price.  Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for them if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs, and that you know you can do these things.</p> <p>Developers that use our General Public Licenses protect your rights with two steps: (1) assert copyright on the software, and (2) offer you this License which gives you legal permission to copy, distribute and/or modify the software.</p> <p>A secondary benefit of defending all users' freedom is that improvements made in alternate versions of the program, if they receive widespread use, become available for other developers to incorporate.  Many developers of free software are heartened and encouraged by the resulting cooperation.  However, in the case of software used on network servers, this result may fail to come about. The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public.</p> <p>The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community.  It requires the operator of a network server to provide the source code of the modified version running there to the users of that server.  Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version.</p> <p>An older license, called the Affero General Public License and published by Affero, was designed to accomplish similar goals.  This is a different license, not a version of the Affero GPL, but Affero has released a new version of the Affero GPL which permits relicensing under this license.</p> <p>The precise terms and conditions for copying, distribution and modification follow.</p>"},{"location":"license/agpl/#terms-and-conditions","title":"TERMS AND CONDITIONS","text":""},{"location":"license/agpl/#0-definitions","title":"0. Definitions","text":"<p>\u201cThis License\u201d refers to version 3 of the GNU Affero General Public License.</p> <p>\u201cCopyright\u201d also means copyright-like laws that apply to other kinds of works, such as semiconductor masks.</p> <p>\u201cThe Program\u201d refers to any copyrightable work licensed under this License.  Each licensee is addressed as \u201cyou\u201d.  \u201cLicensees\u201d and \u201crecipients\u201d may be individuals or organizations.</p> <p>To \u201cmodify\u201d a work means to copy from or adapt all or part of the work in a fashion requiring copyright permission, other than the making of an exact copy.  The resulting work is called a \u201cmodified version\u201d of the earlier work or a work \u201cbased on\u201d the earlier work.</p> <p>A \u201ccovered work\u201d means either the unmodified Program or a work based on the Program.</p> <p>To \u201cpropagate\u201d a work means to do anything with it that, without permission, would make you directly or secondarily liable for infringement under applicable copyright law, except executing it on a computer or modifying a private copy.  Propagation includes copying, distribution (with or without modification), making available to the public, and in some countries other activities as well.</p> <p>To \u201cconvey\u201d a work means any kind of propagation that enables other parties to make or receive copies.  Mere interaction with a user through a computer network, with no transfer of a copy, is not conveying.</p> <p>An interactive user interface displays \u201cAppropriate Legal Notices\u201d to the extent that it includes a convenient and prominently visible feature that (1) displays an appropriate copyright notice, and (2) tells the user that there is no warranty for the work (except to the extent that warranties are provided), that licensees may convey the work under this License, and how to view a copy of this License.  If the interface presents a list of user commands or options, such as a menu, a prominent item in the list meets this criterion.</p>"},{"location":"license/agpl/#1-source-code","title":"1. Source Code","text":"<p>The \u201csource code\u201d for a work means the preferred form of the work for making modifications to it.  \u201cObject code\u201d means any non-source form of a work.</p> <p>A \u201cStandard Interface\u201d means an interface that either is an official standard defined by a recognized standards body, or, in the case of interfaces specified for a particular programming language, one that is widely used among developers working in that language.</p> <p>The \u201cSystem Libraries\u201d of an executable work include anything, other than the work as a whole, that (a) is included in the normal form of packaging a Major Component, but which is not part of that Major Component, and (b) serves only to enable use of the work with that Major Component, or to implement a Standard Interface for which an implementation is available to the public in source code form.  A \u201cMajor Component\u201d, in this context, means a major essential component (kernel, window system, and so on) of the specific operating system (if any) on which the executable work runs, or a compiler used to produce the work, or an object code interpreter used to run it.</p> <p>The \u201cCorresponding Source\u201d for a work in object code form means all the source code needed to generate, install, and (for an executable work) run the object code and to modify the work, including scripts to control those activities.  However, it does not include the work's System Libraries, or general-purpose tools or generally available free programs which are used unmodified in performing those activities but which are not part of the work.  For example, Corresponding Source includes interface definition files associated with source files for the work, and the source code for shared libraries and dynamically linked subprograms that the work is specifically designed to require, such as by intimate data communication or control flow between those subprograms and other parts of the work.</p> <p>The Corresponding Source need not include anything that users can regenerate automatically from other parts of the Corresponding Source.</p> <p>The Corresponding Source for a work in source code form is that same work.</p>"},{"location":"license/agpl/#2-basic-permissions","title":"2. Basic Permissions","text":"<p>All rights granted under this License are granted for the term of copyright on the Program, and are irrevocable provided the stated conditions are met.  This License explicitly affirms your unlimited permission to run the unmodified Program.  The output from running a covered work is covered by this License only if the output, given its content, constitutes a covered work.  This License acknowledges your rights of fair use or other equivalent, as provided by copyright law.</p> <p>You may make, run and propagate covered works that you do not convey, without conditions so long as your license otherwise remains in force.  You may convey covered works to others for the sole purpose of having them make modifications exclusively for you, or provide you with facilities for running those works, provided that you comply with the terms of this License in conveying all material for which you do not control copyright.  Those thus making or running the covered works for you must do so exclusively on your behalf, under your direction and control, on terms that prohibit them from making any copies of your copyrighted material outside their relationship with you.</p> <p>Conveying under any other circumstances is permitted solely under the conditions stated below.  Sublicensing is not allowed; section 10 makes it unnecessary.</p>"},{"location":"license/agpl/#3-protecting-users-legal-rights-from-anti-circumvention-law","title":"3. Protecting Users' Legal Rights From Anti-Circumvention Law","text":"<p>No covered work shall be deemed part of an effective technological measure under any applicable law fulfilling obligations under article 11 of the WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting or restricting circumvention of such measures.</p> <p>When you convey a covered work, you waive any legal power to forbid circumvention of technological measures to the extent such circumvention is effected by exercising rights under this License with respect to the covered work, and you disclaim any intention to limit operation or modification of the work as a means of enforcing, against the work's users, your or third parties' legal rights to forbid circumvention of technological measures.</p>"},{"location":"license/agpl/#4-conveying-verbatim-copies","title":"4. Conveying Verbatim Copies","text":"<p>You may convey verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice; keep intact all notices stating that this License and any non-permissive terms added in accord with section 7 apply to the code; keep intact all notices of the absence of any warranty; and give all recipients a copy of this License along with the Program.</p> <p>You may charge any price or no price for each copy that you convey, and you may offer support or warranty protection for a fee.</p>"},{"location":"license/agpl/#5-conveying-modified-source-versions","title":"5. Conveying Modified Source Versions","text":"<p>You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:</p> <ul> <li>a) The work must carry prominent notices stating that you modified it, and giving a relevant date.</li> <li>b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to \u201ckeep intact all notices\u201d.</li> <li>c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy.  This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged.  This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it.</li> <li>d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so.</li> </ul> <p>A compilation of a covered work with other separate and independent works, which are not by their nature extensions of the covered work, and which are not combined with it such as to form a larger program, in or on a volume of a storage or distribution medium, is called an \u201caggregate\u201d if the compilation and its resulting copyright are not used to limit the access or legal rights of the compilation's users beyond what the individual works permit.  Inclusion of a covered work in an aggregate does not cause this License to apply to the other parts of the aggregate.</p>"},{"location":"license/agpl/#6-conveying-non-source-forms","title":"6. Conveying Non-Source Forms","text":"<p>You may convey a covered work in object code form under the terms of sections 4 and 5, provided that you also convey the machine-readable Corresponding Source under the terms of this License, in one of these ways:</p> <ul> <li>a) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by the Corresponding Source fixed on a durable physical medium customarily used for software interchange.</li> <li>b) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by a written offer, valid for at least three years and valid for as long as you offer spare parts or customer support for that product model, to give anyone who possesses the object code either (1) a copy of the Corresponding Source for all the software in the product that is covered by this License, on a durable physical medium customarily used for software interchange, for a price no more than your reasonable cost of physically performing this conveying of source, or (2) access to copy the Corresponding Source from a network server at no charge.</li> <li>c) Convey individual copies of the object code with a copy of the written offer to provide the Corresponding Source.  This alternative is allowed only occasionally and noncommercially, and only if you received the object code with such an offer, in accord with subsection 6b.</li> <li>d) Convey the object code by offering access from a designated place (gratis or for a charge), and offer equivalent access to the Corresponding Source in the same way through the same place at no further charge.  You need not require recipients to copy the Corresponding Source along with the object code.  If the place to copy the object code is a network server, the Corresponding Source may be on a different server (operated by you or a third party) that supports equivalent copying facilities, provided you maintain clear directions next to the object code saying where to find the Corresponding Source.  Regardless of what server hosts the Corresponding Source, you remain obligated to ensure that it is available for as long as needed to satisfy these requirements.</li> <li>e) Convey the object code using peer-to-peer transmission, provided you inform other peers where the object code and Corresponding Source of the work are being offered to the general public at no charge under subsection 6d.</li> </ul> <p>A separable portion of the object code, whose source code is excluded from the Corresponding Source as a System Library, need not be included in conveying the object code work.</p> <p>A \u201cUser Product\u201d is either (1) a \u201cconsumer product\u201d, which means any tangible personal property which is normally used for personal, family, or household purposes, or (2) anything designed or sold for incorporation into a dwelling.  In determining whether a product is a consumer product, doubtful cases shall be resolved in favor of coverage.  For a particular product received by a particular user, \u201cnormally used\u201d refers to a typical or common use of that class of product, regardless of the status of the particular user or of the way in which the particular user actually uses, or expects or is expected to use, the product.  A product is a consumer product regardless of whether the product has substantial commercial, industrial or non-consumer uses, unless such uses represent the only significant mode of use of the product.</p> <p>\u201cInstallation Information\u201d for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source.  The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.</p> <p>If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information.  But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM).</p> <p>The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed.  Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network.</p> <p>Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying.</p>"},{"location":"license/agpl/#7-additional-terms","title":"7. Additional Terms","text":"<p>\u201cAdditional permissions\u201d are terms that supplement the terms of this License by making exceptions from one or more of its conditions. Additional permissions that are applicable to the entire Program shall be treated as though they were included in this License, to the extent that they are valid under applicable law.  If additional permissions apply only to part of the Program, that part may be used separately under those permissions, but the entire Program remains governed by this License without regard to the additional permissions.</p> <p>When you convey a copy of a covered work, you may at your option remove any additional permissions from that copy, or from any part of it.  (Additional permissions may be written to require their own removal in certain cases when you modify the work.)  You may place additional permissions on material, added by you to a covered work, for which you have or can give appropriate copyright permission.</p> <p>Notwithstanding any other provision of this License, for material you add to a covered work, you may (if authorized by the copyright holders of that material) supplement the terms of this License with terms:</p> <ul> <li>a) Disclaiming warranty or limiting liability differently from the terms of sections 15 and 16 of this License; or</li> <li>b) Requiring preservation of specified reasonable legal notices or author attributions in that material or in the Appropriate Legal Notices displayed by works containing it; or</li> <li>c) Prohibiting misrepresentation of the origin of that material, or requiring that modified versions of such material be marked in reasonable ways as different from the original version; or</li> <li>d) Limiting the use for publicity purposes of names of licensors or authors of the material; or</li> <li>e) Declining to grant rights under trademark law for use of some trade names, trademarks, or service marks; or</li> <li>f) Requiring indemnification of licensors and authors of that material by anyone who conveys the material (or modified versions of it) with contractual assumptions of liability to the recipient, for any liability that these contractual assumptions directly impose on those licensors and authors.</li> </ul> <p>All other non-permissive additional terms are considered \u201cfurther restrictions\u201d within the meaning of section 10.  If the Program as you received it, or any part of it, contains a notice stating that it is governed by this License along with a term that is a further restriction, you may remove that term.  If a license document contains a further restriction but permits relicensing or conveying under this License, you may add to a covered work material governed by the terms of that license document, provided that the further restriction does not survive such relicensing or conveying.</p> <p>If you add terms to a covered work in accord with this section, you must place, in the relevant source files, a statement of the additional terms that apply to those files, or a notice indicating where to find the applicable terms.</p> <p>Additional terms, permissive or non-permissive, may be stated in the form of a separately written license, or stated as exceptions; the above requirements apply either way.</p>"},{"location":"license/agpl/#8-termination","title":"8. Termination","text":"<p>You may not propagate or modify a covered work except as expressly provided under this License.  Any attempt otherwise to propagate or modify it is void, and will automatically terminate your rights under this License (including any patent licenses granted under the third paragraph of section 11).</p> <p>However, if you cease all violation of this License, then your license from a particular copyright holder is reinstated (a) provisionally, unless and until the copyright holder explicitly and finally terminates your license, and (b) permanently, if the copyright holder fails to notify you of the violation by some reasonable means prior to 60 days after the cessation.</p> <p>Moreover, your license from a particular copyright holder is reinstated permanently if the copyright holder notifies you of the violation by some reasonable means, this is the first time you have received notice of violation of this License (for any work) from that copyright holder, and you cure the violation prior to 30 days after your receipt of the notice.</p> <p>Termination of your rights under this section does not terminate the licenses of parties who have received copies or rights from you under this License.  If your rights have been terminated and not permanently reinstated, you do not qualify to receive new licenses for the same material under section 10.</p>"},{"location":"license/agpl/#9-acceptance-not-required-for-having-copies","title":"9. Acceptance Not Required for Having Copies","text":"<p>You are not required to accept this License in order to receive or run a copy of the Program.  Ancillary propagation of a covered work occurring solely as a consequence of using peer-to-peer transmission to receive a copy likewise does not require acceptance.  However, nothing other than this License grants you permission to propagate or modify any covered work.  These actions infringe copyright if you do not accept this License.  Therefore, by modifying or propagating a covered work, you indicate your acceptance of this License to do so.</p>"},{"location":"license/agpl/#10-automatic-licensing-of-downstream-recipients","title":"10. Automatic Licensing of Downstream Recipients","text":"<p>Each time you convey a covered work, the recipient automatically receives a license from the original licensors, to run, modify and propagate that work, subject to this License.  You are not responsible for enforcing compliance by third parties with this License.</p> <p>An \u201centity transaction\u201d is a transaction transferring control of an organization, or substantially all assets of one, or subdividing an organization, or merging organizations.  If propagation of a covered work results from an entity transaction, each party to that transaction who receives a copy of the work also receives whatever licenses to the work the party's predecessor in interest had or could give under the previous paragraph, plus a right to possession of the Corresponding Source of the work from the predecessor in interest, if the predecessor has it or can get it with reasonable efforts.</p> <p>You may not impose any further restrictions on the exercise of the rights granted or affirmed under this License.  For example, you may not impose a license fee, royalty, or other charge for exercise of rights granted under this License, and you may not initiate litigation (including a cross-claim or counterclaim in a lawsuit) alleging that any patent claim is infringed by making, using, selling, offering for sale, or importing the Program or any portion of it.</p>"},{"location":"license/agpl/#11-patents","title":"11. Patents","text":"<p>A \u201ccontributor\u201d is a copyright holder who authorizes use under this License of the Program or a work on which the Program is based.  The work thus licensed is called the contributor's \u201ccontributor version\u201d.</p> <p>A contributor's \u201cessential patent claims\u201d are all patent claims owned or controlled by the contributor, whether already acquired or hereafter acquired, that would be infringed by some manner, permitted by this License, of making, using, or selling its contributor version, but do not include claims that would be infringed only as a consequence of further modification of the contributor version.  For purposes of this definition, \u201ccontrol\u201d includes the right to grant patent sublicenses in a manner consistent with the requirements of this License.</p> <p>Each contributor grants you a non-exclusive, worldwide, royalty-free patent license under the contributor's essential patent claims, to make, use, sell, offer for sale, import and otherwise run, modify and propagate the contents of its contributor version.</p> <p>In the following three paragraphs, a \u201cpatent license\u201d is any express agreement or commitment, however denominated, not to enforce a patent (such as an express permission to practice a patent or covenant not to sue for patent infringement).  To \u201cgrant\u201d such a patent license to a party means to make such an agreement or commitment not to enforce a patent against the party.</p> <p>If you convey a covered work, knowingly relying on a patent license, and the Corresponding Source of the work is not available for anyone to copy, free of charge and under the terms of this License, through a publicly available network server or other readily accessible means, then you must either (1) cause the Corresponding Source to be so available, or (2) arrange to deprive yourself of the benefit of the patent license for this particular work, or (3) arrange, in a manner consistent with the requirements of this License, to extend the patent license to downstream recipients.  \u201cKnowingly relying\u201d means you have actual knowledge that, but for the patent license, your conveying the covered work in a country, or your recipient's use of the covered work in a country, would infringe one or more identifiable patents in that country that you have reason to believe are valid.</p> <p>If, pursuant to or in connection with a single transaction or arrangement, you convey, or propagate by procuring conveyance of, a covered work, and grant a patent license to some of the parties receiving the covered work authorizing them to use, propagate, modify or convey a specific copy of the covered work, then the patent license you grant is automatically extended to all recipients of the covered work and works based on it.</p> <p>A patent license is \u201cdiscriminatory\u201d if it does not include within the scope of its coverage, prohibits the exercise of, or is conditioned on the non-exercise of one or more of the rights that are specifically granted under this License.  You may not convey a covered work if you are a party to an arrangement with a third party that is in the business of distributing software, under which you make payment to the third party based on the extent of your activity of conveying the work, and under which the third party grants, to any of the parties who would receive the covered work from you, a discriminatory patent license (a) in connection with copies of the covered work conveyed by you (or copies made from those copies), or (b) primarily for and in connection with specific products or compilations that contain the covered work, unless you entered into that arrangement, or that patent license was granted, prior to 28 March 2007.</p> <p>Nothing in this License shall be construed as excluding or limiting any implied license or other defenses to infringement that may otherwise be available to you under applicable patent law.</p>"},{"location":"license/agpl/#12-no-surrender-of-others-freedom","title":"12. No Surrender of Others' Freedom","text":"<p>If conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License.  If you cannot convey a covered work so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not convey it at all.  For example, if you agree to terms that obligate you to collect a royalty for further conveying from those to whom you convey the Program, the only way you could satisfy both those terms and this License would be to refrain entirely from conveying the Program.</p>"},{"location":"license/agpl/#13-remote-network-interaction-use-with-the-gnu-general-public-license","title":"13. Remote Network Interaction; Use with the GNU General Public License","text":"<p>Notwithstanding any other provision of this License, if you modify the Program, your modified version must prominently offer all users interacting with it remotely through a computer network (if your version supports such interaction) an opportunity to receive the Corresponding Source of your version by providing access to the Corresponding Source from a network server at no charge, through some standard or customary means of facilitating copying of software.  This Corresponding Source shall include the Corresponding Source for any work covered by version 3 of the GNU General Public License that is incorporated pursuant to the following paragraph.</p> <p>Notwithstanding any other provision of this License, you have permission to link or combine any covered work with a work licensed under version 3 of the GNU General Public License into a single combined work, and to convey the resulting work.  The terms of this License will continue to apply to the part which is the covered work, but the work with which it is combined will remain governed by version 3 of the GNU General Public License.</p>"},{"location":"license/agpl/#14-revised-versions-of-this-license","title":"14. Revised Versions of this License","text":"<p>The Free Software Foundation may publish revised and/or new versions of the GNU Affero General Public License from time to time.  Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.</p> <p>Each version is given a distinguishing version number.  If the Program specifies that a certain numbered version of the GNU Affero General Public License \u201cor any later version\u201d applies to it, you have the option of following the terms and conditions either of that numbered version or of any later version published by the Free Software Foundation.  If the Program does not specify a version number of the GNU Affero General Public License, you may choose any version ever published by the Free Software Foundation.</p> <p>If the Program specifies that a proxy can decide which future versions of the GNU Affero General Public License can be used, that proxy's public statement of acceptance of a version permanently authorizes you to choose that version for the Program.</p> <p>Later license versions may give you additional or different permissions.  However, no additional obligations are imposed on any author or copyright holder as a result of your choosing to follow a later version.</p>"},{"location":"license/agpl/#15-disclaimer-of-warranty","title":"15. Disclaimer of Warranty","text":"<p>THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \u201cAS IS\u201d WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.</p>"},{"location":"license/agpl/#16-limitation-of-liability","title":"16. Limitation of Liability","text":"<p>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>"},{"location":"license/agpl/#17-interpretation-of-sections-15-and-16","title":"17. Interpretation of Sections 15 and 16","text":"<p>If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Program, unless a warranty or assumption of liability accompanies a copy of the Program in return for a fee.</p>"},{"location":"license/agpl/#additional-terms","title":"ADDITIONAL TERMS","text":""},{"location":"license/agpl/#18-photoprism-trademark-and-brand-assets","title":"18. PhotoPrism\u00ae Trademark and Brand Assets","text":"<p>(a) PhotoPrism\u2019s Brand Assets \u2014 including trademarks, logos, icons, fonts, corporate design, product and service names, and any other brand features and elements, whether registered or unregistered (\u201eBrand Assets\u201c) \u2014 are proprietary assets owned exclusively by PhotoPrism UG (\u201ePhotoPrism\u201c). We reserve the right to object to any use or misuse in any jurisdiction worldwide. Visit photoprism.app/trademark to learn more.</p> <p>(b) Contributors, licensees, business partners, and other third parties may never claim ownership of PhotoPrism's Brand Assets or brands confusingly similar to PhotoPrism's Brand Assets in any way, including, without limitation, as a trademark, service mark, company name or designation, domain name, social media profile/handle, or in any other manner.</p> <p>(c) You may not include the PhotoPrism trademark in the name of your app, product, or service, whether commercial or non-commercial in nature. This includes online services such as e-commerce, community, blog, information, advertising, and personal home pages, as well as apps, app stores, client apps, or third-party apps that interact with PhotoPrism.</p> <p>(d) In the event that any provision is found to be unenforceable by a court or other competent jurisdiction, the remaining portions hereof shall remain in full force and effect.</p> <p>END OF TERMS AND CONDITIONS</p>"},{"location":"license/apache/","title":"Apache License","text":"<p>Version 2.0, January 2004www.apache.org/licenses</p>"},{"location":"license/apache/#terms-and-conditions-for-use-reproduction-and-distribution","title":"Terms and Conditions for use, reproduction, and distribution","text":""},{"location":"license/apache/#1-definitions","title":"1. Definitions","text":"<p>\u201cLicense\u201d shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.</p> <p>\u201cLicensor\u201d shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.</p> <p>\u201cLegal Entity\u201d shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \u201ccontrol\u201d means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.</p> <p>\u201cYou\u201d (or \u201cYour\u201d) shall mean an individual or Legal Entity exercising permissions granted by this License.</p> <p>\u201cSource\u201d form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.</p> <p>\u201cObject\u201d form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.</p> <p>\u201cWork\u201d shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).</p> <p>\u201cDerivative Works\u201d shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.</p> <p>\u201cContribution\u201d shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \u201csubmitted\u201d means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \u201cNot a Contribution.\u201d</p> <p>\u201cContributor\u201d shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.</p>"},{"location":"license/apache/#2-grant-of-copyright-license","title":"2. Grant of Copyright License","text":"<p>Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.</p>"},{"location":"license/apache/#3-grant-of-patent-license","title":"3. Grant of Patent License","text":"<p>Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.</p>"},{"location":"license/apache/#4-redistribution","title":"4. Redistribution","text":"<p>You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:</p> <ul> <li>(a) You must give any other recipients of the Work or Derivative Works a copy of this License; and</li> <li>(b) You must cause any modified files to carry prominent notices stating that You changed the files; and</li> <li>(c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and</li> <li>(d) If the Work includes a \u201cNOTICE\u201d text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License.</li> </ul> <p>You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.</p>"},{"location":"license/apache/#5-submission-of-contributions","title":"5. Submission of Contributions","text":"<p>Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.</p>"},{"location":"license/apache/#6-trademarks","title":"6. Trademarks","text":"<p>This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.</p>"},{"location":"license/apache/#7-disclaimer-of-warranty","title":"7. Disclaimer of Warranty","text":"<p>Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \u201cAS IS\u201d BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.</p>"},{"location":"license/apache/#8-limitation-of-liability","title":"8. Limitation of Liability","text":"<p>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.</p>"},{"location":"license/apache/#9-accepting-warranty-or-additional-liability","title":"9. Accepting Warranty or Additional Liability","text":"<p>While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.</p> <p>END OF TERMS AND CONDITIONS</p>"},{"location":"license/apache/#appendix-how-to-apply-the-apache-license-to-your-work","title":"APPENDIX: How to apply the Apache License to your work","text":"<p>To apply the Apache License to your work, attach the following boilerplate notice, with the fields enclosed by brackets <code>[]</code> replaced with your own identifying information. (Don't include the brackets!) The text should be enclosed in the appropriate comment syntax for the file format. We also recommend that a file or class name and description of purpose be included on the same \u201cprinted page\u201d as the copyright notice for easier identification within third-party archives.</p> <pre><code>Copyright [yyyy] [name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n  https://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</code></pre> <p>Learn more \u203a</p>"},{"location":"license/docs/","title":"PhotoPrism\u00ae Documentation License","text":""},{"location":"license/docs/#creative-commons-attribution-noncommercial-sharealike-40-international-public-license","title":"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Public License","text":"<p>By exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Public License (\"Public License\"). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions.</p>"},{"location":"license/docs/#section-1-definitions","title":"Section 1 \u2013 Definitions.","text":"<p>a. Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image.</p> <p>b. Adapter's License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License.</p> <p>c. BY-NC-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses, approved by Creative Commons as essentially the equivalent of this Public License.</p> <p>d. Copyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights.</p> <p>e. Effective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements.</p> <p>f. Exceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material.</p> <p>g. License Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution, NonCommercial, and ShareAlike.</p> <p>h. Licensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License.</p> <p>i. Licensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license.</p> <p>h. Licensor means the individual(s) or entity(ies) granting rights under this Public License.</p> <p>i. NonCommercial means not primarily intended for or directed towards commercial advantage or monetary compensation. For purposes of this Public License, the exchange of the Licensed Material for other material subject to Copyright and Similar Rights by digital file-sharing or similar means is NonCommercial provided there is no payment of monetary compensation in connection with the exchange.</p> <p>j. Share means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them.</p> <p>k. Sui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world.</p> <p>l. You means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning.</p>"},{"location":"license/docs/#section-2-scope","title":"Section 2 \u2013 Scope.","text":"<p>a. License grant.</p> <ol> <li>Subject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to:</li> </ol> <p>A. reproduce and Share the Licensed Material, in whole or in part, for NonCommercial purposes only; and</p> <p>B. produce, reproduce, and Share Adapted Material for NonCommercial purposes only.</p> <ol> <li> <p>Exceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions.</p> </li> <li> <p>Term. The term of this Public License is specified in Section 6(a).</p> </li> <li> <p>Media and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material.</p> </li> <li> <p>Downstream recipients.</p> </li> </ol> <p>A. Offer from the Licensor \u2013 Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License.</p> <p>B. Additional offer from the Licensor \u2013 Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter\u2019s License You apply.</p> <p>C. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material.</p> <ol> <li>No endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i).</li> </ol> <p>b. Other rights.</p> <ol> <li> <p>Moral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise.</p> </li> <li> <p>Patent and trademark rights are not licensed under this Public License.</p> </li> <li> <p>To the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties, including when the Licensed Material is used other than for NonCommercial purposes.</p> </li> </ol>"},{"location":"license/docs/#section-3-license-conditions","title":"Section 3 \u2013 License Conditions.","text":"<p>Your exercise of the Licensed Rights is expressly made subject to the following conditions.</p> <p>a. Attribution.</p> <ol> <li>If You Share the Licensed Material (including in modified form), You must:</li> </ol> <p>A. retain the following if it is supplied by the Licensor with the Licensed Material:</p> <p>i. identification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated);</p> <p>ii. a copyright notice;</p> <p>iii. a notice that refers to this Public License;</p> <p>iv. a notice that refers to the disclaimer of warranties;</p> <p>v. a URI or hyperlink to the Licensed Material to the extent reasonably practicable;</p> <p>B. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and</p> <p>C. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License.</p> <ol> <li> <p>You may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information.</p> </li> <li> <p>If requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable.</p> </li> </ol> <p>b. ShareAlike.</p> <p>In addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply.</p> <ol> <li> <p>The Adapter\u2019s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-NC-SA Compatible License.</p> </li> <li> <p>You must include the text of, or the URI or hyperlink to, the Adapter's License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material.</p> </li> <li> <p>You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter's License You apply.</p> </li> </ol>"},{"location":"license/docs/#section-4-sui-generis-database-rights","title":"Section 4 \u2013 Sui Generis Database Rights.","text":"<p>Where the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material:</p> <p>a. for the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database for NonCommercial purposes only;</p> <p>b. if You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and</p> <p>c. You must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database.</p> <p>For the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights.</p>"},{"location":"license/docs/#section-5-disclaimer-of-warranties-and-limitation-of-liability","title":"Section 5 \u2013 Disclaimer of Warranties and Limitation of Liability.","text":"<p>a. Unless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You.</p> <p>b. To the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You.</p> <p>c. The disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.</p>"},{"location":"license/docs/#section-6-term-and-termination","title":"Section 6 \u2013 Term and Termination.","text":"<p>a. This Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically.</p> <p>b. Where Your right to use the Licensed Material has terminated under Section 6(a), it reinstates:</p> <ol> <li> <p>automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or</p> </li> <li> <p>automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or</p> </li> </ol> <p>For the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License.</p> <p>c. For the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License.</p> <p>d. Sections 1, 5, 6, 7, and 8 survive termination of this Public License.</p>"},{"location":"license/docs/#section-7-other-terms-and-conditions","title":"Section 7 \u2013 Other Terms and Conditions.","text":"<p>a. The Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed.</p> <p>b. Any arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License.</p>"},{"location":"license/docs/#section-8-interpretation","title":"Section 8 \u2013 Interpretation.","text":"<p>a. For the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License.</p> <p>b. To the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions.</p> <p>c. No term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor.</p> <p>d. Nothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority.</p>"},{"location":"user-guide/","title":"User Guide","text":"<p>Step-by-step installation instructions for our self-hosted community edition can be found in Getting Started. All you need is a Web browser and  Docker to run the server.</p> <p> It is available for Mac, Linux, and Windows. PhotoPrism also runs on PikaPods, DigitalOcean, Raspberry Pi, Portainer, FreeBSD, and many NAS devices.</p> <p>Once the initial setup is complete, our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>"},{"location":"user-guide/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project!</p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"user-guide/#getting-support","title":"Getting Support","text":"<p>If you need help installing our software at home, you are welcome to post your question in GitHub Discussions or ask in our Community Chat. Common problems can be quickly diagnosed and solved using our Troubleshooting Checklists. Silver, Gold, and Platinum members are also welcome to email us for technical support and advice.</p> <p>View Support Options \u203a</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Contact us or a community member if you need help, it could be a configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"user-guide/faq/","title":"Frequently Asked Questions","text":""},{"location":"user-guide/faq/#general","title":"General","text":"Does your software depend on any external services? <p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p> <p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow incoming requests as well as those to our Geocoding API and Docker if you have a firewall installed, and make sure that your Internet connection is working:</p> <p></p> <p>Learn more \u203a</p> Why are some features only available to members? <p>PhotoPrism is 100% self-funded and independent. Voluntary donations do not cover the cost of a team working full time to provide you with updates, documentation, and support. It is your decision whether you want to sign up to enjoy additional benefits.</p> <p>View Membership FAQ \u203a</p> What are the advantages of purchasing a commercial license? <p>A key difference between the public license and a commercial license agreement is that you get access to additional support and configuration options, as well as the right to customize functionality to your needs without having to publicly disclose your changes. Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.</p> <p>Compare Team Editions \u203a</p> When exactly will new features be released? <p>Our Project Roadmap shows what tasks are in progress and what features will be implemented next. You may give ideas you like a thumbs-up, so we know what's most popular.</p> <p>Be aware that we have a zero-bug policy and do our best to help users when they need support or have other questions. This comes at a price though, as we can't give exact release dates for new features. Our team receives many more requests than can be implemented, so we want to emphasize that we are in no way obligated to implement the features, enhancements, or other changes you request. We do, however, appreciate your feedback and carefully consider all requests.</p> <p>Since sustained funding is key to quickly releasing new features, we encourage all users to support our mission by signing up as a member or purchasing a commercial license.</p>"},{"location":"user-guide/faq/#membership","title":"Membership","text":"How can I activate my membership? <p>To connect a new instance to your membership account, you will need to log in with the super admin user that is automatically created during setup (see your <code>compose.yaml</code> or <code>docker-compose.yml</code> file or the app store documentation), and then follow the steps described in our activation guide.</p> <p>View Activation Guide \u203a</p> Are there alternatives to a recurring subscription? <p>Yes, our Plus members automatically receive a free Lifetime Essentials membership after 24 months. Likewise, Silver members receive a Lifetime Plus membership after 24 months, Gold members after 12 months, and Platinum members after only 6 months.</p> <p>If you would like to sign up for a Silver, Gold or Platinum membership, you can do so either directly on our website or on Patreon. In addition, we are working on a Plus Feature Pack that includes just the features without support, so we can offer it to you at a lower price.</p> <p>Note that as a lifetime member you will always receive updates and support for your personal use from us, unlike with so-called lifetime licenses, which may only be good until the next major version is released.</p> <p>View Membership FAQ \u203a</p> What happens if I cancel my membership? <p>If you are eligible for a Lifetime Essentials or Plus membership, you can continue to use these features even if you decide to stop supporting us. Otherwise, you can continue to use all the freely available features. In no case will you lose access to your pictures.</p> <p>Compare Features \u203a</p>"},{"location":"user-guide/faq/#user-interface","title":"User Interface","text":"Can I select multiple pictures at once? <p>Yes, this is possible. How it works depends on what kind of device you use.</p> <p>Desktop Browser</p> <p>Select the first picture by clicking  in the lower right corner.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, click them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a shift+click to select all pictures between the last selected picture and the one you shift+click</li> </ul> <p>Mobile Devices</p> <p>Select the first picture with a long touch.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, touch them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a long touch to select all pictures between the last selected picture and the one you long touch</li> </ul> Can I use trees for organizing my pictures and albums? <p>Except in Library &gt; Originals and for object classification in Labels, PhotoPrism does not support hierarchically organized content for a number of reasons:</p> <p>First, there are many tools (including Windows Explorer and Mac OS Finder) that already browse folders in such a way.</p> <p>A common UX challenge is dealing with namespaces. For example, the album \"Berlin\" may exist 5 times in different parts of a tree. To avoid ambiguities, simple input fields need to be replaced with a tree browser that shows the complete context. This is especially difficult on mobile screens.</p> <p>Personal albums can typically be browsed by time, with optional filters for more specific results. This is different in Enterprise asset management, where trees are required to manage responsibilities &amp; permissions. We might do a special release for professional users later.</p> <p>While you have complete freedom with organizing your original files and folders, we don't think trees should be an integral part of our user interface. Most users won't be able to sort their memories in a strictly hierarchical way and prefer to explore them in multiple dimensions instead.</p>"},{"location":"user-guide/faq/#maps-places","title":"Maps &amp; Places","text":"Why are some pictures positioned at unvisited locations on the map? <p>PhotoPrism can estimate the location of pictures taken without GPS information by extrapolating it from the location of other pictures taken on the same day. These estimates can be disabled in the settings if you don't want them.</p> Are the keys for using interactive world maps provided free of charge? <p>All users have access to a high-resolution vector map that we host on our own infrastructure, so no commercial API key is required. It is based on data published by OpenStreetMap (OSM).</p> <p>In addition, we automatically provide our members and business customers with an API key for MapTiler's commercial service, which includes satellite, outdoor and 3D maps. You can test these on our public demo.</p> <p>Learn more \u203a</p> Why don't you use the free map tile service provided by OpenStreetMap? <p>Other free and open-source software sometimes uses the public maps that OpenStreetMap provides for development and testing. These are not intended for end-user applications like ours.</p> <p>Using their service also means that their usage and privacy policies apply, as your request data is stored and used to generate publicly available reports. This differs from our services, which ensure a high level of privacy and provide a better user experience with faster loading times.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/faq/#media-library","title":"Media Library","text":"What media file types are supported? <p>PhotoPrism supports indexing, viewing, and converting most popular image, video and RAW formats, including JPEG, PNG, GIF, BMP, HEIF, HEIC, MP4, MOV, WebP, and WebM.  TIFF is partially supported without extensions like GeoTIFF.</p> <p>When indexing, a JPEG or PNG sidecar file is automatically created for videos and images in other formats, such as RAW or vector graphics. It is needed for thumbnail generation, image classification, and face detection. JPEG XL support is planned as soon as it is generally available and enough compatible tools exist.</p> <p>If installed, converting RAW files is possible with the following converters (our Docker image includes both):</p> <ul> <li>Darktable (supported cameras)</li> <li>RawTherapee (supported cameras)</li> </ul> <p>On a Mac, RAW files can also be converted with Sips (supported cameras). Our goal is to provide top-notch support for all RAW formats, regardless of camera make and model. Please let us know about any issues with a particular camera or file format.</p> <p>For maximum browser compatibility, video codecs and containers supported by FFmpeg can be transcoded to MPEG-4 AVC on demand, just as still images can be extracted for thumbnail creation.</p> <p>Make sure you have JSON sidecar files enabled if you have videos, live photos, and/or animated GIFs so that video-specific metadata such as codec, frames, and duration can be extracted, indexed, and searched.</p> <p>You find a complete list of file formats and extensions here.</p> What metadata sidecar file types are supported? <p>Currently, three types of file formats are supported:</p> Why are my video files not indexed? <p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have ExifTool enabled to extract metadata such as duration, resolution, and codec.</p> Some files seem hidden, where are they? <p>If the quality filter is enabled, you might find them in Search &gt; Review. Otherwise, their format may not be supported, they may be corrupted, or they may be stacked with other files if their name, exact date &amp; location, or unique image ID indicate they belong to the same photo. You may then unstack them if this happened by mistake e.g. because of bad metadata.</p> <p>View Troubleshooting Checklist \u203a</p> For what reasons can files be stacked? <ol> <li>Files that share the same file and folder name (except for the file extension) are always stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code></li> <li>Files with sequential names like <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code> can be stacked as well (optional)</li> <li>File metadata indicates that the pictures were taken at the same position within the same second (optional)</li> <li>File metadata includes the same Unique Image ID or XMP Instance ID (optional)</li> </ol> <p>You can change your preferences for 2 - 4 in the Stacks section under Settings &gt; Content.</p> <p>Note that it is not possible to disable stacking of files with the same name as this would break important functionality, most notably support for Apple Live Photos (which consist of a photo and a video file), any other multi-file/hybrid formats like RAW/JPEG, and indexing of metadata from XMP/JSON sidecar files.</p> Are files automatically unstacked when I change the settings? <p>When you change the stacks-related settings under Settings &gt; Content, files that are already stacked will not be unstacked automatically. This is because unstacking is a resource-intensive operation that requires each file to be re-indexed.</p> <p>The result also depends on the exact order in which you unstack the files, as non-media sidecar files, for example, remain bound to the remaining media file in a stack. We consider providing a command for this in a future release and appreciate any contributions in this regard.</p> <p>If you are new to PhotoPrism and want to re-index your library with different settings, you can run the <code>photoprism reset</code> command in a terminal to reset the index and start from scratch.</p> <p>Learn more \u203a</p> I already indexed some files. Why are Folders, Calendar and Moments still empty? <p>Folders, Calendar and Moments are populated at the end of the indexing process.</p> Why can't I see all of my pictures in the Calendar view? <p>The monthly albums in this view only include pictures that have a valid creation date and time specified in their metadata or as part of their filename. Files for which the creation date is estimated based on the file modification time will therefore not appear in these albums, even if they have been properly indexed.</p> <p>Learn more \u203a</p> Why does the count in Search not match the count of files in Originals? <p>Library &gt; Originals shows actual files, whereas Search counts unique photos and videos.</p> <p>Photos and videos may have more than one file, for example:</p> <ul> <li>A raw file + related jpg file + related xmp file = 3 files, 1 photo</li> <li>A mp4 file + related jpg file = 2 files, 1 video</li> </ul> <p>It is also possible that multiple .jpg files are stacked because they are related to each other.</p> When should I perform a complete rescan? <p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\". Manually entered information such as labels, people, titles or captions will not be modified when indexing, even if you perform a \"complete rescan\". Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p> Can I use the web interface to permanently delete files? <p>Yes, you can permanently delete files.</p> In which cases could files in the originals folder get modified? <p>PhotoPrism generally does not write to the originals folder, with the following exceptions: (1) You rotate an image in the user interface, so its Exif header must be updated. (2) You unstack files that were stacked based on their name, so they must be renamed. (3) You add files using the import functionality or the web upload. (4) You manually delete files in the user interface. (5) You have configured the originals folder as your sidecar folder. (6) You access the originals folder with a WebDAV client to manage your files without having read-only mode enabled.</p>"},{"location":"user-guide/faq/#json","title":"JSON","text":"<p>If not disabled via <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> or <code>--disable-exiftool</code>, ExifTool is used to automatically create a JSON sidecar for each media file. In this way, embedded XMP and video metadata can also be indexed. Native metadata extraction is limited to common Exif headers. Note that this causes small amount of overhead when indexing for the first time.</p> <p>JSON files can also be useful for debugging, as they contain the full metadata and can be processed with common development tools and text editors.</p> <p>Metadata JSON files exported from Google Photos can be read as well. Support for more schemas may be added over time.</p>"},{"location":"user-guide/faq/#yaml","title":"YAML","text":"<p>Unless disabled by setting the <code>PHOTOPRISM_SIDECAR_YAML</code> option to <code>\"false\"</code> in your configuration, PhotoPrism automatically creates/updates human-friendly YAML sidecar files during indexing and after manual editing of fields such as title, date, or location. They serve as a backup in case the database (index) is lost, or when folders are synchronized with a remote instance.</p> <p>Like JSON, YAML files can be opened with common development tools and text editors. However, changes are not synchronized with the original index, as this could overwrite existing data.</p>"},{"location":"user-guide/faq/#xmp","title":"XMP","text":"<p>XMP (Extensible Metadata Platform) is an XML-based metadata container format developed by Adobe. It provides many more fields (as part of embedded models like Dublin Core) than Exif. This also makes it difficult - if not impossible - to provide full support. Reading title, copyright, artist, and caption from XMP sidecar files is implemented as a proof-of-concept, contributions are welcome. Indexing of embedded XMP is only possible via ExifTool, see above.</p>"},{"location":"user-guide/faq/#raw-images","title":"RAW Images","text":"What is a RAW image file? <p>Professional and semi-professional photographers often keep their originals in a lossless RAW format, close to how they were taken with the physical sensor, rather than in a compressed image format like JPEG, especially if they shoot with a digital SLR camera. Newer mobile phones may also be able to capture images in RAW mode. Our goal is to provide top-notch support for all RAW images, regardless of camera make and model. A full list of file types and extensions can be found in our Knowledge Base.</p> <p>Since web browsers generally cannot display RAW image files directly, they must be converted. This is done during import or initial indexing. It can also be triggered manually in a terminal with the <code>photoprism convert</code> command.</p> Will JPEGs be updated when the related RAW or XMP files change? <p>JPEGs are currently not regenerated when related RAW or XMP files change. RAW files are digital negatives by design. PhotoPrism therefore assumes that their image information is immutable.</p> <p>XMP files can affect the appearance, but most of the metadata they contain, such as title and caption, does not. Creating JPEGs from RAW files is a time-consuming task, and in most cases would cause a huge, unjustified amount of overhead. In addition, the rendering information in XMP files is not well standardized. For example, changes you make in Photoshop may not be compatible with Darktable.</p> <p>We recommend manually updating existing JPEG sidecar files as needed or creating additional JPEGs, so you can choose between different versions. New files and other metadata changes are detected and reflected in the index as usual when your library is scanned.</p> Are edits preserved when converting a RAW image with an XMP sidecar file? <p>PhotoPrism currently supports Darktable and RawTherapee as RAW image converters. Darktable fully supports XMP sidecar files, RawTherapee might only partially. However, XMP is only a \"container\" format, so the fields (namespaces) used there to indicate how an image should be converted (as well as other metadata) differ between Lightroom/Photoshop, Darktable, and RawTherapee.</p> <p>In other words, just because an application generally supports XMP that doesn't mean it can use metadata created with another application or by another vendor like Adobe. If you think that's confusing, well, that's because it is. You have an open format, but you still suffer from vendor lock-in - probably not entirely unintentional on Adobe's part.</p> <p>From our experience, some basic edits done with Adobe tools - such as cropping - might be preserved when you convert the same RAW image with other software like Darktable. Advanced edits, such as lens or color corrections, will likely not be applied.</p>"},{"location":"user-guide/faq/#live-photos","title":"Live Photos","text":"Why can't I play Live Photos or find stacks when I search for specific images? <p>Our search API and user interface perform a file search. This is intentional since \"stacks\" can contain files of different types and properties, such as color.</p> <p>For example, there may be color and monochrome versions. Now, when you search for them or sort them by color, the user interface must display individual files. Otherwise, the results showing a color image/video when you filter by monochrome would make no sense.</p> <p>Likewise, if you search for <code>filename.mp4.*</code>, you will find only JPEGs without video, because the video file extension is <code>.mp4</code> without an extra dot at the end.</p> <p>We recommend using the <code>path:</code> and/or <code>name:</code> filters with wildcards if searching for individual files limits the search results too much. Most users will want to find all related files so that they can be displayed together, e.g. as live photos consisting of a video and an image.</p> <p>You can combine these filters with other filters such as <code>live</code> to ensure that the results include only pictures with a specific media type. Alternatively, you can use the <code>filename:</code> filter with a more permissive wildcard that excludes the file extension.</p>"},{"location":"user-guide/faq/#metadata","title":"Metadata","text":"Windows shows different metadata values. Could this be a bug in PhotoPrism? <p>We recommend that you use ExifTool to see all metadata fields and values, as Windows has limited functionality.</p> <p>It might then become clear why there are differences. For example, it could be that Windows does not support some fields and therefore ignores them, or that the data shown is actually from the file system and not from the files. Should you still believe to have found a bug, please provide us with sample files so that we can reproduce the issue.</p> Why is the date of pictures without metadata displayed as Unknown in the search results? <p>If there is no date information available in the metadata or the original file names, the file system modification time is used to sort pictures in search results and to create canonical file names for them during import. However, this is usually not the actual date a photo was taken (or a graphic was created by the original author), but only the time you downloaded or copied it. As a result, the date of pictures without a reliable creation date will be displayed as \"Unknown\" until you manually set a date in the edit dialog.</p> Why do some pictures have 08/12/2002 as date if they were not taken on that day? <p>This is usually caused by a bug in Android that caused photos to be created with an incorrect CreateDate. While the date can easily be changed in the edit dialog, this only updates the index without modifying your originals. To fix the date directly in your image or video files, please use other applications like Photoshop, or ExifTool, and re-index your library.</p> Why do some pictures have an odd date like 01/01/1980? <p>This may happen in case there was an issue with your camera's settings when the photo was taken. While the date can easily be changed in the edit dialog, this only updates the index without modifying your originals.</p> <p>To fix the date directly in your image or video files, please use other applications like Photoshop, or ExifTool, and re-index your library.</p> What's the difference between keywords and labels? <p>Keywords contain a list of search terms extracted from metadata, file names, and other sources like geodata. Pictures with matching keywords automatically show up in related Labels.</p> <p>Although related, keywords and labels serve different purposes:</p> <ul> <li> <p>Labels may have parent categories and are primarily used for classification, like \"animal\", \"cat\", or \"boat\". Duplicates and ambiguities should be avoided.</p> </li> <li> <p>Keywords are primarily used for searching. They may include similar terms and translations, like \"kitten\", \"kitty\", and \"cat\".</p> </li> </ul> How can I check the metadata of images and videos? <p>We recommend using Exiftool if some of your pictures are displayed incorrectly (stretched, distorted), information seems to be missing (e.g. title or caption), or the wrong time and location are shown.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/faq/#thumbnails","title":"Thumbnails","text":"Isn't it insecure that thumbnail image URLs work even if you are not logged in? <p>Like most commercial image hosting services, we've chosen to use a cookie-free thumbnail API to minimize request latency and avoid unnecessary network traffic. If you were to copy private session cookies and use them in a different browser window, you would have a similar problem, except that they also work for other API endpoints, not just a single image.</p> <p>Even if URLs were to become invalid every minute: Digital copies are as good as originals. Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back. Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p> <p>Visit docs.photoprism.app/developer-guide/media/thumbnails/ to learn more.</p>"},{"location":"user-guide/faq/#webdav","title":"WebDAV","text":"Why are files uploaded via WebDAV not indexed/imported immediately? <p><code>PHOTOPRISM_AUTO_INDEX</code> and <code>PHOTOPRISM_AUTO_IMPORT</code> let you specify how long PhotoPrism should wait before indexing or importing newly uploaded files. The default setting is 300 seconds, or 5 minutes. This is a safety mechanism for users with slow uploads to avoid incomplete file sets, for example when uploading pictures with sidecar files. You can therefore reduce the delay if you have a fast connection and usually do not upload stacks of related files such as RAW images with sidecar JPEG and XMP files.</p> <p>In some cases, it is also possible that the index is already being updated, so you will have to wait until the process is complete before indexing new files.</p> Why do I get an error when trying to add a remote server for syncing? <p>When adding a new remote server, PhotoPrism tests a number of common endpoints. Only when that fails, you'll see an error. There may be different reasons for this:</p> <ul> <li>you are using HTTPS with an invalid certificate (not signed, outdated, domain doesn't match,...)</li> <li>your server has permission issues, or an otherwise bad configuration. For example, Nextcloud blocks requests if the host doesn't match <code>trusted_domains</code> in its <code>config.php</code></li> <li>the IP is not reachable from your PhotoPrism instance due to network settings, or a firewall</li> <li>the internal hostname can not be resolved to an IP address</li> <li>it's the wrong host or port</li> <li>username or password are wrong</li> </ul> <p>Curl is an excellent tool for testing HTTP connections if you don't mind using a terminal:</p> <pre><code>curl -X PROPFIND -H \"Depth: 1\" -u user:pass https://example.org/webdav/\n</code></pre> <p>To avoid overlooking issues, it's best to run it from the same Docker container, virtual machine, or server environment where PhotoPrism is installed.</p> My file sync app fails with \"unable to parse TLS packet headers\" when trying to connect via WebDAV? <p>Because of security considerations, some backup tools and file sync apps like FolderSync removed support for non-SSL HTTP communication.</p> <p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted  by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to  connect as well.</p>"},{"location":"user-guide/first-steps/","title":"First Steps \ud83d\udc63","text":"<p>Once the initial setup is complete, there are only two more steps before you can start browsing your pictures:</p> <ol> <li>Configure your content and advanced settings according to your individual preferences.</li> <li>Choose whether you want to index your originals directly, leaving all file and folder names unchanged, or use the optional import feature, which automatically removes duplicates, gives files a unique name, and sorts them by year and month.</li> </ol> <p>If you want to use folders that already exist on your computer, make sure you configured them as originals respectively import folders during setup.</p> <p>To add new pictures, you can either copy them to the originals or import folder, for example using WebDAV, or upload them using a browser, which will automatically import them once uploaded.</p> <p>Then start indexing or importing, depending on which strategy you have chosen.</p> <p>Ensure there is enough disk space available for creating thumbnails and verify filesystem permissions before starting to index: Files in the originals folder must be readable, while the storage folder including all subdirectories must be readable and writeable.</p>"},{"location":"user-guide/first-steps/#while-indexing-is-in-progress","title":"While indexing is in progress...","text":"<p> Your photos and videos will successively become visible in search results and other parts of the user interface. Open the Logs tab in Library to watch the indexer working. The counts in the navigation are constantly updated, so you can follow the progress.</p> <p>In case some of your pictures are still missing after indexing has been completed, they might be in Review due to low quality or incomplete metadata. You can turn this and other features off in Settings, depending on your specific use case.</p> <p>Of course, you can continue using your favorite tools for processing RAW files, editing metadata, or importing new shots. Go to Library and click Start to update the index after files have been changed, added, or removed. This can also be automated by configuring a schedule for regular indexing using the <code>PHOTOPRISM_INDEX_SCHEDULE</code> config option</p> <p>While indexing, JPEG sidecar files may be created for originals in other formats such as RAW and HEIF. This is required for image classification, facial recognition, and for displaying them in a Web browser. Sidecar and thumbnail files will be added to the storage folder, so that your originals folder won't be modified.</p>"},{"location":"user-guide/first-steps/#setting-up-your-devices","title":"Setting up Your Devices","text":"<p>Finally, once indexing is complete and you're happy with the results, you can configure automatic syncing from your phone and install the Progressive Web App (PWA) on your desktop and mobile home screens as needed.</p>"},{"location":"user-guide/navigate/","title":"Navigating the User Interface","text":"<p>The user interface for browsing and searching your pictures is based on the following components. Screenshots in this documentation generally show pages in a medium-resolution desktop browser. All pages are fully responsive, so they may look different on mobile devices.</p> <p></p> <p></p>"},{"location":"user-guide/navigate/#1-main-navigation","title":"1. Main Navigation","text":"<p>Located on the left, minimized on mobile devices. Click on the links to switch between different pages like Photos, Albums, Places, or Settings.</p>"},{"location":"user-guide/navigate/#2-toolbar","title":"2. Toolbar","text":"<p>Located on the top. Find photos or videos by entering search terms like <code>cats</code> and filters like <code>label:cat</code>. A list with possible search filters can be found here.</p> <p>Keyboard Shortcut</p> <p>You can quickly focus the search field by pressing Ctrl + F.</p>"},{"location":"user-guide/navigate/#3-reload-button","title":"3. Reload Button","text":"<p> reloads search results without reloading the full page.</p> <p>Keyboard Shortcut</p> <p>You can quickly refresh the page by pressing Ctrl + R.</p>"},{"location":"user-guide/navigate/#4-view-button","title":"4. View Button","text":"<p>Choose your preferred view mode by clicking on it (cards: , mosaic: , or list: ).</p>"},{"location":"user-guide/navigate/#5-upload-button","title":"5. Upload Button","text":"<p> opens the upload dialog. Available on most pages, unless read-only mode is enabled or upload is disabled in Settings.</p> <p>Keyboard Shortcut</p> <p>You can quickly open the upload dialog by pressing Ctrl + U.</p>"},{"location":"user-guide/navigate/#6-expanded-toolbar","title":"6. Expanded Toolbar","text":"<p>The expanded toolbar contains additional options and search filters for country, year, month, camera, color, and category.</p> <p>Keyboard Shortcut</p> <p>You can open the expanded toolbar by pressing Shift + Ctrl + F.</p>"},{"location":"user-guide/navigate/#context-menu","title":"Context Menu","text":"<p>When photos or videos are selected, the context menu appears in the lower right corner.  The number displayed is the count of currently selected items. It also contains the following buttons:</p> <ul> <li> Archive photos</li> <li> Add photos to album</li> <li> Download photos</li> <li> Mark photos as private</li> <li> Open edit dialog</li> <li> Share photos</li> </ul> <p>To unselect all items, click the cross at the top:</p> <p></p>"},{"location":"user-guide/navigate/#selection-mode-and-multi-select","title":"Selection Mode and Multi-Select","text":""},{"location":"user-guide/navigate/#desktop-browser","title":"Desktop Browser","text":"<p>Select the first picture by clicking  in the lower right corner.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, click them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a shift+click to select all pictures between the last selected picture and the one you shift+click</li> </ul>"},{"location":"user-guide/navigate/#mobile-devices","title":"Mobile Devices","text":"<p>Select the first picture with a long touch.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, touch them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a long touch to select all pictures between the last selected picture and the one you long touch</li> </ul>"},{"location":"user-guide/pwa/","title":"Mobile App (PWA)","text":"<p>PhotoPrism currently does not include a native app that can be installed through an app store. However, there are many compatible apps, and you can conveniently install our Progressive Web App (PWA) on your desktop or home screen for an almost native app-like experience.</p>"},{"location":"user-guide/pwa/#installation-requirements","title":"Installation Requirements","text":"<p>The compatibility of our PWA has been tested with Apple Safari and Google Chrome, but other modern browsers like Firefox or Microsoft Edge may generally be compatible as well.</p> <p>When self-hosting PhotoPrism, please make sure the site URL is configured correctly. In addition, PWAs must be hosted on a dedicated domain with HTTPS in order to be installed. If that is not possible, you can still choose \"Create Shortcut...\", \"Add to Home Screen...\", or a similarly named action from the browser menu to make the app accessible from your home screen.</p>"},{"location":"user-guide/pwa/#step-by-step-instructions","title":"Step-by-Step Instructions","text":"Apple Safari (iOS)Google Chrome (Android) <ol> <li>Open PhotoPrism in Safari</li> <li> <p>Click </p> <p></p> </li> <li> <p>Click Add to Home Screen</p> <p></p> </li> <li> <p>Choose a name and click Add</p> <p></p> </li> </ol> <ol> <li>Open PhotoPrism in Chrome</li> <li> <p>Click  (of the Chrome, not website)</p> <p> </p> </li> <li> <p>Click Install app</p> <p></p> </li> <li> <p>Choose a name and click Add</p> <p></p> </li> </ol> <p>The PWA is now installed on the home screen of your device and can be launched from there.</p> <p></p>"},{"location":"user-guide/backups/","title":"Creating Backups","text":"<p>At a minimum, a backup of PhotoPrism should include the files in your originals folder and a copy of the index database. We also recommend backing up the storage folder so that you don't need to recreate any thumbnail or sidecar files, and your backup includes the complete configuration.</p> <p>The easiest way to create a full backup is to first run the backup command to generate a database dump as shown below. Then back up your originals and storage folders using any standard file backup utility.</p>"},{"location":"user-guide/backups/#scheduled-backups","title":"Scheduled Backups","text":"<p>By default, PhotoPrism 240523-923ee0cf7 and newer versions automatically create daily database backups for you, with up to 3 copies being retained. The schedule, the type of backups, and the number of backups to be retained can be changed in the configuration.</p> <p>We recommend that you manually create a full backup of all files, including your configuration and index database, before starting a server migration or making any other major changes.</p>"},{"location":"user-guide/backups/#backup-command","title":"Backup Command","text":"<p>If you are using Docker Compose, you can run the following command in a terminal to manually create a new MariaDB or SQLite database backup:</p> <pre><code>docker compose exec photoprism photoprism backup -i -f\n</code></pre> <p>By default, a backup is created in <code>storage/backup/mysql/[YYYY-MM-DD].sql</code>. Omit the <code>-f</code> flag if you do not want to overwrite existing files. A custom backup base folder can be configured with <code>PHOTOPRISM_BACKUP_PATH</code></p> <p>If you are using Podman on a Red Hat-compatible Linux distribution, exchange <code>docker compose</code> for <code>podman-compose</code>.</p> <p>Alternative ways to create SQL dumps from SQLite are shown in our advanced backup guide.</p>"},{"location":"user-guide/backups/#custom-file-names","title":"Custom file names","text":"<p>You can specify a custom filename as an argument to dump the database to a file of your choice (using the <code>-f</code> flag to overwrite existing files):</p> <pre><code>docker compose exec photoprism photoprism backup -i my_custom_dump.sql\n</code></pre> <p>The file name argument is interpreted as an absolute path, so the example above will create a file <code>/photoprism/my_custom_dump.sql</code> inside the container volume. For example, to store the file in the default backup directory:</p> <pre><code>docker compose exec photoprism photoprism backup -i /photoprism/storage/backup/mysql/my_custom_dump.sql\n</code></pre> <p>You can also use <code>-</code> as file name to write the SQL dump to stdout. </p> <p>Note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p>"},{"location":"user-guide/backups/#important-directories","title":"Important Directories","text":""},{"location":"user-guide/backups/#originals","title":"Originals","text":"<p>The originals folder contains your original photo and video files. You can back it up and restore it using any standard file backup program if you have not already set this up.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/#storage","title":"Storage","text":"<p>SQLite, config, cache, backup, thumbnail and sidecar files are saved in the storage folder. As with the originals folder, the exact path on your computer depends on your configuration.</p> <p>We recommend that you back up this folder as well so that you don't need to recreate the thumbnails and have a complete backup of your configuration. As for the originals folder, you can use any standard file backup utility to do this.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/#database","title":"Database","text":"<p>If you are using MariaDB or another dedicated database server instead of SQLite, they will store their data in a separate database folder whose location depends on your configuration, e.g. in the <code>mariadb</code> service section of your <code>compose.yaml</code> file.</p>"},{"location":"user-guide/backups/#mariadb-server-migration","title":"MariaDB Server Migration","text":"<p>For detailed information on how to move your MariaDB database to another server or virtual machine, please see the Server Migration section of our MariaDB Troubleshooting Guide.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/export/","title":"Metadata Exports","text":"<p>Control over your data doesn't end with the ability to create and restore a database backup. PhotoPrism additionally provides you with human-readable YAML files that allow you to view and restore the metadata of your albums and photos, even if you didn't create a regular database backup or have lost it.</p> <p>If backups have not been disabled in the Advanced Settings, metadata exports of all your albums and photos are automatically created in your storage folder. They will also be updated when changes are made.</p> <p>Be aware that the original data remains in your database. Any changes you make to the files therefore have no effect on it and will not become visible on the user interface, unless your database gets lost and the index is restored from the files.</p>"},{"location":"user-guide/backups/export/#album-backups","title":"Album Backups","text":"<p>Album backups are created for the following album types: album, folder, state, moment and month. You find those backups inside your <code>storage path</code> in <code>/albums</code>.</p>"},{"location":"user-guide/backups/export/#album-backups_1","title":"Album Backups","text":"<p>For each album the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Sort Order, Country, CreatedAt, UpdatedAt, Photos (UID + date the photo was added to the album)</li> </ul>"},{"location":"user-guide/backups/export/#folder-backups","title":"Folder Backups","text":"<p>For each folder the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort order, Country, Year, Month, Day, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#month-backups","title":"Month Backups","text":"<p>For each month the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, Year, Month, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#state-backups","title":"State Backups","text":"<p>For each state the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#moment-backups","title":"Moment Backups","text":"<p>For each moment the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, Year, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#photo-backups","title":"Photo Backups","text":"<p>PhotoPrism creates YAML backup files for each photo in your <code>sidecar path</code>.</p> <p>The following metadata is stored:</p> <ul> <li>TakenAt + Source, UID, Type, Title + Source, Caption + Source, OriginalName, TimeZone, PlaceSrc, Altitude,    Lat, Lng, Year, Month, Day, Iso, Exposure, FNumber, FocalLength, Quality, Favorite, Private, Keywords + Source,    Notes + Source, Subject + Source, Artist + Source, Copyright + Source, License + Source, CreatedAt, UpdatedAt, EditedAt, DeletedAt (Archived)</li> </ul> <p>Helpful information can be found on GitHub as well.</p>"},{"location":"user-guide/backups/external-storage/","title":"Using External Storage","text":"<p>Due to their performance and because they can lose data over time, we do not recommend using conventional SD cards, USB sticks or external USB 2 hard disk drives to store your files, except for backups.</p> <p>External Solid-State Drives (SSD) connected via USB 3 are generally reliable and fast enough to keep your originals, database, and storage folders. This way you can, for example, do the indexing on one computer, eject the drive, and then connect it to another computer to browse your pictures.</p> <p>Note, though, that database files may not be binary compatible in some cases (e.g. if the version or computer architecture does not match) and could also get corrupted when you disconnect an external drive before all changes have been written to disk. We therefore recommend that you regularly create database backups, so you can easily restore your index if necessary.</p>"},{"location":"user-guide/backups/folders/","title":"Directory Overview","text":"<p>The following is an overview of the most important files and folders used by PhotoPrism:</p>"},{"location":"user-guide/backups/folders/#originals","title":"Originals","text":"<p>Your original photo and video media files are stored in the originals folder. If read-only mode is disabled, new files can be added using the web upload dialog, the import functionality, or by mounting the folder via WebDAV. PhotoPrism will generally not move, rename, or otherwise modify the files in this folder unless a user requests it. The path can be changed using the environment variable <code>PHOTOPRISM_ORIGINALS_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#storage","title":"Storage","text":"<p>Unless you have a custom configuration, the storage folder is used to read and write config, cache, backup, thumbnail, and sidecar files. We recommend not to configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden. The path can be changed using the environment variable <code>PHOTOPRISM_STORAGE_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#cache","title":"Cache","text":"<p>This folder contains the subdirectories <code>json</code> and <code>thumbnails</code> for storing ExifTool JSON files and thumbnail images. The path can be changed using the environment variable <code>PHOTOPRISM_CACHE_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#json","title":"JSON","text":"<p>Unless you have disabled ExifTool in Settings &gt; Advanced, it may used to create JSON files with the metadata of a file in this directory e.g. when indexing or importing new files.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#thumbnails","title":"Thumbnails","text":"<p>PhotoPrism creates thumbnails in different sizes for each photo. Those are stored in the <code>thumbnails</code> directory. More information on thumbnails can be found here.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#sidecar","title":"Sidecar","text":"<p>The sidecar folder contains YAML backup files for each picture as well as e.g. automatically generated JPEG versions of RAW images. Both can be configured in Settings &gt; Advanced. The path can be changed using the environment variable <code>PHOTOPRISM_SIDECAR_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#config","title":"Config","text":"<p>The config folder contains configuration files and certificates. Its path can be changed using the environment variable <code>PHOTOPRISM_CONFIG_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#backup","title":"Backup","text":"<p>The backup folder contains database dumps as well as album backup files and is located in the storage folder by default. Its path can be changed using the environment variable <code>PHOTOPRISM_BACKUP_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#import","title":"Import","text":"<p>The import feature lets you transfer files from the import folder to the originals folder. Duplicates are automatically skipped, and the imported files are given unique file paths based on their content and metadata. The base path of the import directory can be changed using the environment variable <code>PHOTOPRISM_IMPORT_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#database","title":"Database","text":"<p>If you are using MariaDB or another dedicated database server instead of SQLite, they will store their data in a separate database folder whose location depends on your configuration, e.g. in the <code>mariadb</code> service section of your <code>compose.yaml</code> file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#temp","title":"Temp","text":"<p>Uploads, downloads, and other temporary files may be created in the temp folder. The path can be changed using the environment variable <code>PHOTOPRISM_TEMP_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/folders/#assets","title":"Assets","text":"<p>The assets folder contains static resources such as machine learning models, icons, and templates. It can be changed using the environment variable <code>PHOTOPRISM_ASSETS_PATH</code>, the corresponding CLI flag, or a YAML configuration file.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/backups/restore/","title":"Restoring Backups","text":"<p>To restore your instance, you must have the files in your originals folder and a copy of the index database. We also recommend having a backup of the storage folder so that you don't need to recreate any thumbnail or sidecar files, and your backup includes the complete configuration:</p> <ul> <li>if you have a backup copy of your storage and originals folders, the easiest way is to restore those folders first and then run the restore command in case you are using MariaDB</li> <li>otherwise, you additionally need to perform a complete rescan of your library to recreate missing sidecar and thumbnail files</li> <li>some of the metadata and your albums can also be recovered from YAML sidecar files even if you don't have a copy of the index database, unless you have disabled this feature</li> </ul>"},{"location":"user-guide/backups/restore/#restore-command","title":"Restore Command","text":"<p>To restore the index from an existing MariaDB dump, you can run the following command:</p> <pre><code>docker compose exec photoprism photoprism restore -i -f\n</code></pre> <p>If you are using Podman on a Red Hat-compatible Linux distribution:</p> <pre><code>podman-compose exec photoprism photoprism restore -i -f\n</code></pre> <p>This will automatically search the backup folder for the most recent index dump and restore it. A custom backup base folder can be configured with <code>PHOTOPRISM_BACKUP_PATH</code>.</p> <p>Omit the <code>-f</code> flag to prevent overwriting an existing index. As with the backup command, you can also specify a specific dump filename as an argument:</p> <pre><code>docker compose exec photoprism photoprism restore -i [filename]\n</code></pre> <p>When the database is restored, all user accounts and passwords are restored as well. If you have changed your password, you must thus use the old password to sign in.</p> <p>Note that our examples use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p>"},{"location":"user-guide/backups/restore/#mariadb-server-migration","title":"MariaDB Server Migration","text":"<p>For detailed information on how to move your MariaDB database to another server or virtual machine, please see the Server Migration section of our MariaDB Troubleshooting Guide.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/library/","title":"Indexing Your Library","text":"<p>Most users with an existing library will want to index their originals directly without using the optional import feature, leaving the file and folder names unchanged.</p> <p>When importing, files are first transferred from a temporary folder to the originals folder. In the process, duplicates are automatically skipped, and the imported files are given a unique file name and are sorted by year and month.</p> <p>Importing is also an efficient way to add files, since PhotoPrism does not need to search your originals folder to find new files.</p> <p>Hidden files and folders that start with a <code>.</code>, <code>@</code>, <code>_.</code>, or <code>__</code> like <code>__MACOSX</code> are automatically ignored. Other names to be ignored can be added to a <code>.ppignore</code> file in the originals or import folder it should affect. You can put it either in the main folder or in a subfolder to limit the scope.</p>"},{"location":"user-guide/library/#indexing-originals","title":"Indexing Originals","text":"<p>Use index if you want to index your photos and videos directly in the originals folder, leaving the file and folder names unchanged.</p> <p>Your folder structure in originals might look like this:</p> <p></p> <p>During indexing:</p> <ul> <li>files will not be renamed or moved</li> <li>your existing folder structure is preserved, so you can later choose to have your folders appear as albums</li> <li>metadata from your files is read to create captions, titles, and locations for your photos</li> <li>thumbnails and optionally JSON and/or YAML files containing metadata are created</li> </ul> <p>After indexing, the originals folder has not been changed in any way:</p> <p></p>"},{"location":"user-guide/library/#advantages","title":"Advantages","text":"<ul> <li>existing file and folder names remain unchanged.</li> <li>you can search your images by their current name and location</li> <li>indexing is usually faster because no files have to be copied or moved</li> </ul> <p>You can move media files between the different directories within your originals folder. The indexer detects this and updates the path automatically when running the next time.</p>"},{"location":"user-guide/library/#importing-files","title":"Importing Files","text":"<p>Importing is more efficient when adding files as you don't need to re-index all originals to find new photos and videos. Uploads will also be treated as import, you can't directly upload to originals (yet).</p> <p>Your initial folder structure in import might look like this:</p> <p></p> <p>During import:</p> <ul> <li>files are copied or moved from their source directory to the originals folder</li> <li>duplicates are automatically skipped, \"Move\" also deletes them in the source directory as if they were successfully moved</li> <li>imported files are given a unique file name and are sorted by year and month</li> <li>the original file name is indexed as a file property</li> <li>all imported files are indexed, the rest remains in the import folder</li> </ul> <p>After importing with \"Copy\" (default setting), your folders might look like this::</p> <p></p> <p>After importing with \"Move\" your folders might look like this:</p> <p></p>"},{"location":"user-guide/library/#advantages_1","title":"Advantages","text":"<ul> <li>unsupported files stay untouched in the import directory</li> <li>no duplicates in your originals directory</li> </ul> <p>The original file and folder names are used to extract keywords. For example, when you index a folder with the path \"Vacation/Africa\", all files from this folder will get the keywords \"vacation\" and \"africa\".</p>"},{"location":"user-guide/library/#conclusion","title":"Conclusion","text":"<p>In case your picture library is not well organized and/or you have many duplicates, you may consider importing your files as this will remove duplicates. Be aware that imported files are given a unique file name and are sorted by year and month.</p> <p>Provided you have a well-organized library with meaningful file and folder names, it is best to index your originals directly and leave the file and folder names unchanged.</p>"},{"location":"user-guide/library/duplicates/","title":"Duplicate Detection","text":"<p>Duplicate files are automatically detected and skipped while indexing your library, so that they only appear once in search results and albums. Their SHA1 checksums and sizes are used for comparison.</p> <p>Browsing and deleting duplicates through the web user interface is planned for a future release.</p>"},{"location":"user-guide/library/duplicates/#file-import","title":"File Import","text":"<p>When importing, files are first copied or moved from a temporary folder to the originals folder. In the process, duplicates are automatically skipped. \"Move\" also deletes them in the source directory as if they were successfully moved.</p>"},{"location":"user-guide/library/duplicates/#related-files","title":"Related Files","text":"<p>In addition to exact duplicates, there may be similar pictures and related sidecar files (with the same filename) in your library, for example:</p> <ul> <li>raw + jpg + xmp</li> <li>jpg + json</li> <li>original + edited version</li> <li>original + compressed version</li> <li>live and timelapse photos</li> </ul> <p>Depending on your library settings, such files may be automatically grouped into stacks:</p> <p>Learn more \u203a Library Settings \u203a</p>"},{"location":"user-guide/library/files/","title":"Browsing Files and Folders","text":"<p>The Originals section displays all files of your originals directory.</p> <p>Clicking on a folder opens it. Clicking on a file opens its edit dialog. </p> <p></p> <p></p> <p>The context menu allows you to perform the following actions:</p>"},{"location":"user-guide/library/files/#download-files","title":"Download Files","text":"<ol> <li>Select files</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/library/files/#create-an-album-from-files","title":"Create an Album from Files","text":"<ol> <li>Select files</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/library/import/","title":"Importing Files to Originals","text":"<p>Most users with an existing library will want to index their originals directly without using the optional import feature, leaving the file and folder names unchanged. Importing first copies or moves from their source directory to the originals folder, which is optional.</p>"},{"location":"user-guide/library/import/#manual-import","title":"Manual Import","text":"<ol> <li> <p>Add files to the import folder if not done already</p> </li> <li> <p>Go to Library using the main navigation, and open the Import tab</p> </li> <li> <p>Select a sub-folder or keep the default to import all files</p> </li> <li> <p>Select Move Files if you want imported files to be removed from the import folder</p> </li> <li> <p>Click on Import</p> </li> </ol> <p></p> <p>You may use WebDAV for adding files to the import folder. This is especially helpful if PhotoPrism is running on a remote server.</p> <p>Import is not possible in read-only mode because it requires write permissions to the folder of originals.</p>"},{"location":"user-guide/library/import/#when-should-move-files-be-selected","title":"When should \"Move Files\" be selected?","text":"<p>If you select this option, files that have been moved to the originals folder, or that already exist, will be automatically deleted from the import folder. This way you save disk space if you don't want to keep them as backup or for other reasons.</p>"},{"location":"user-guide/library/import/#automatic-import","title":"Automatic Import","text":"<p>Automatic imports are disabled by default, as a wrong configuration or unsupported usage can cause files or sets of files to be imported incompletely, e.g. if you are using a slow or unreliable Internet connection, which is of particular concern with large video or RAW files.</p> <p>If you enable automatic imports by setting the config option <code>PHOTOPRISM_AUTO_IMPORT</code> to a positive number indicating the safety delay in seconds, an import is automatically triggered after the safety delay when files are added to the import folder via WebDAV.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/library/import/#changing-the-import-file-path","title":"Changing the Import File Path","text":"<p>Starting with Release 250223-b79d21907, advanced users can customize the destination file path pattern used by the import feature through the <code>settings.yml</code> config file, as shown in this example:</p> <pre><code>Import:\n  Dest: 2006/01/20060102_150405_82F63B78.jpg\n</code></pre> <p>The date and time placeholders for the import destination file path pattern are described in the time package docs. Using a different 8 digit hex number such as <code>12345678</code> for the CRC32 checksum and <code>.ext</code> instead of <code>.jpg</code> for the file extension will work as well. Invalid and empty patterns are ignored and the default is used instead.</p> <p>Learn more \u203a</p> <p>Setting a custom import file path will not rename any files that have already been imported, since this might cause conflicts with other tools or instances that may be accessing your files. Renaming existing files may also result in storage and/or transfer overhead with backup tools that do not recognize that files have been moved, i.e. they may create and/or transfer a new backup copy. We will consider adding an integrated file renaming feature once we have had time to test possible implementations for usability, performance, and security.</p>"},{"location":"user-guide/library/import/#frequently-asked-questions","title":"Frequently Asked Questions","text":""},{"location":"user-guide/library/import/#can-i-use-photoprism-to-sort-files-into-a-configurable-folder-structure","title":"Can I use PhotoPrism to sort files into a configurable folder structure?","text":"<p>You have complete freedom in how you name your files and folders. So if you don't like the unique names and folders used by the import feature, you can instead use external tools like ExifTool, PhockUp, or Photo Organizer to reorganize your files based on their metadata.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/library/metadata/","title":"Metadata Support","text":"<p>Original media and sidecar files are scanned for Exif and XMP data, as well as proprietary metadata, including Google Photos JSON. For this, PhotoPrism has a built-in Exif parser, a simple XMP reader and can also use ExifTool to extract metadata in various formats such as Exif, XMP and IPTC:</p> <p>View Supported Tags \u203a</p> <p>The combined information is then normalized, merged, and enriched with additional information.</p> <p>Feel free to submit a feature or pull request for Exif or XMP metadata that is not  supported yet.</p>"},{"location":"user-guide/library/metadata/#external-changes","title":"External Changes","text":"<p>If you update one of these tags with external tools such as ExifTool or Digikam, PhotoPrism reads the changes the next time it indexes the file, provided the file's modification date has been updated.</p>"},{"location":"user-guide/library/metadata/#xmp-sidecar-files","title":"XMP Sidecar Files","text":"<p>When a field is populated with data from an XMP sidecar file, that data is the only source for the field. This means that keywords from XMP override other keywords from PhotoPrism, such as those derived from colors or folder names.</p>"},{"location":"user-guide/library/metadata/#cloud-migration","title":"Cloud Migration","text":"<p>PhotoPrism also reads metadata from Google Photos JSON and Apple XMP files:</p> <p>Migrate from Google Photos \u203a</p> <p>Migrate from Apple Photos \u203a</p>"},{"location":"user-guide/library/metadata/#enrichment","title":"Enrichment","text":"<p>In addition to reading metadata from your original and sidecar files, PhotoPrism enriches the metadata of your photos with additional information:</p> <ul> <li>dates or keywords from folder or filenames</li> <li>keywords derived from image classification, color detection and facial recognition</li> <li>GPS information from location estimates </li> <li>keywords derived from location details</li> </ul>"},{"location":"user-guide/library/metadata/#export","title":"Export","text":"<p>We want you to be able to access your metadata independently of PhotoPrism and its database. That's why the indexer additionally creates human-readable YAML sidecar files that you can open with a text editor or other tools if needed.</p> <p>Except for the image orientation, PhotoPrism does not yet offer the ability to write changed metadata back to the original files to avoid possible data loss and conflicts with third-party apps. See GitHub Discussions.</p>"},{"location":"user-guide/library/originals/","title":"Indexing Your Originals","text":"<p>When using PhotoPrism for the first time, please make sure that the directory containing your photo and video collection has been configured as originals folder, and that the library settings match your individual preferences.</p>"},{"location":"user-guide/library/originals/#manual-indexing","title":"Manual Indexing","text":"<ol> <li> <p>Go to Library using the main navigation</p> </li> <li> <p>Select a sub-folder or keep the default to index all files</p> </li> <li> <p>Select Complete Rescan to re-index all originals, including already indexed and unchanged files</p> </li> <li> <p>Press Start to start indexing</p> </li> </ol> <p></p> <p>You can use WebDAV-compatible apps, including Microsoft's Windows Explorer and Apple's Finder,  to add files to your originals folders from a remote computer or mobile device.</p> <p>NSFW</p> <p>An NSFW detector can be enabled to automatically mark images with potentially objectionable content as  private. Note that this feature is only partially reliable. </p> <p>Images that have already been indexed before the NSFW detector is activated will not be scanned by the detector.</p>"},{"location":"user-guide/library/originals/#when-should-complete-rescan-be-selected","title":"When should \"Complete Rescan\" be selected?","text":"<p>If you select this option, all files in the originals folder will be re-indexed, including already indexed and unchanged files.</p> <p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>Manually entered information such as labels, people, titles or captions will not be modified when indexing, even if you perform a \"complete rescan\".</p>"},{"location":"user-guide/library/originals/#cleanup-option","title":"Cleanup Option","text":"<p>Admins can optionally enable the cleanup option to delete unused thumbnails from the cache folder and remove orphaned index entries. If you do this from time to time, it can speed up indexing and reduce storage usage.</p>"},{"location":"user-guide/library/originals/#scheduled-and-automatic-indexing","title":"Scheduled and Automatic Indexing","text":"<p>PhotoPrism 240523-923ee0cf7 and newer versions can optionally perform scheduled rescans of your library. This feature can be enabled by setting a schedule in your configuration. If you are using an external scheduler, please be careful not to start several indexing processes at the same time, as this not only causes a high server load, but may also lead to unexpected indexing results.</p> <p>By default, a library rescan is also triggered automatically after a safety delay of 5 minutes when originals are added or modified via WebDAV. You can change the safety delay or disable this feature through the <code>PHOTOPRISM_AUTO_INDEX</code> config option.</p> <p>Be aware that automatic indexing may cause files or sets of files to be incompletely indexed if you are using a slow or unreliable internet connection, which is of particular concern with large video or RAW files.</p>"},{"location":"user-guide/library/originals/#ignoring-files-and-folders","title":"Ignoring Files and Folders","text":"<p>Hidden files and folders that start with a <code>.</code>, <code>@</code>, <code>_.</code>, or <code>__</code> like <code>__MACOSX</code> will be automatically ignored when indexing your library.</p> <p>Other file and folder names that should be ignored can be added to a <code>.ppignore</code> file in the originals or import folder, e.g.:</p> <pre><code># ignore a directory by its name\nfoo\n# ignore all folders starting with a #\n[#]*\n# ignore all files\n*.*\n# ignore all files with gif extension\n*.gif\n# ignore videos which name start with MVI\nMVI_*.MOV\n# or\nMVI_*.*\n</code></pre> <p>Ignore files can be placed either in the main directory or in a subfolder to limit their scope, as only matching files in the same directory and any subdirectories will be ignored. To match specific file extensions or other naming patterns, <code>*</code> can be used as a wildcard.</p> <p>Note that files and folders that have already been indexed cannot be retroactively removed from the index with a <code>.ppignore</code> file, i.e. they remain indexed and visible in the user interface, even if you later add their name or a matching name pattern.</p> <p>If you are a new user and files or folders have already been indexed, it is generally easiest to reset the database and start with a new index by running <code>photoprism reset</code> in a terminal.</p>"},{"location":"user-guide/library/upload/","title":"File Upload Using the Web UI","text":"<p>Keyboard Shortcut</p> <p>You can quickly open the upload dialog by pressing Ctrl + U from anywhere in the application.</p> From ToolbarFrom Library <ol> <li>Click  in the upper right corner</li> <li> <p>Click  in the menu that appears</p> <p></p> </li> <li> <p>In case you want to upload the files directly to an album select one</p> </li> <li> <p>Click Browse</p> <p></p> </li> <li> <p>Select files</p> </li> </ol> <ol> <li> <p>Go to Library using the main navigation, and open the Import tab</p> </li> <li> <p>Click Upload</p> <p></p> </li> <li> <p>In case you want to upload the files directly to an album select one</p> </li> <li> <p>Click Browse</p> <p></p> </li> <li> <p>Select files</p> </li> </ol>"},{"location":"user-guide/library/webdav/","title":"WebDAV File Upload","text":"<p>WebDAV-compatible apps and clients such as PhotoSync, Microsoft's Windows Explorer, and Apple's Finder can connect directly to PhotoPrism:</p> <p>Connect via WebDAV \u203a</p> <p>After files have been transferred, you can index or import them as usual. By default, indexing and importing start automatically after a safety delay when files have been uploaded using WebDAV.</p> <p>You can disable WebDAV in the advanced settings. Since it requires write permissions and authentication, the built-in WebDAV server is automatically disabled when running in read-only or public mode.</p> <p>You can also use WebDAV to download files from your library: Simply connect to  <code>http://server-ip:2342/originals/</code> (local server without HTTPS) or  <code>https://yourdomain/originals/</code> (public server with HTTPS enabled), and then copy the files to  a folder on your local device.</p>"},{"location":"user-guide/native-apps/","title":"Native Mobile Apps for iOS and Android","text":"<p>As an addition to our platform-independent Progressive Web App (PWA), the following native apps are being maintained by other companies and individual developers:</p> Name Platform Developer License Download Gallery for PhotoPrism Android Oleg Koretsky GPL 3.0 Google Play, F-Droid PhotoSync iOS, Android touchbyte GmbH Proprietary App Store, Google Play Stream iOS Yu Yang Proprietary App Store <p>View all \u203a</p>"},{"location":"user-guide/native-apps/#gallery-for-photoprism","title":"Gallery for PhotoPrism","text":"<p>With this Android app, you can easily browse the pictures in your library and share them with other apps. The app offers a timeline view, authentication, bookmarks, and many other useful features. It can also be installed on Android TV, so you can browse your library with a remote control. Learn more \u203a</p>"},{"location":"user-guide/native-apps/#photosync","title":"PhotoSync","text":"<p>PhotoSync lets you transfer photos and videos directly from your mobile phone. It backs up your pictures securely in the background or you can manually select files to upload into specific folders. Learn more \u203a</p>"},{"location":"user-guide/native-apps/#stream","title":"Stream","text":"<p>Stream is an iOS app that brings PhotoPrism and local photos together in one unified gallery. It features natural language search for easy photo discovery and supports batch operations for efficient management. Learn more \u203a Read FAQ \u203a</p>"},{"location":"user-guide/organize/albums/","title":"Albums","text":""},{"location":"user-guide/organize/albums/#create-new-album","title":"Create New Album","text":"<ol> <li>Go to Albums</li> <li> <p>In the upper right corner click </p> <p></p> </li> <li> <p>A new album with name \"Month Year\" is created</p> <p></p> </li> </ol>"},{"location":"user-guide/organize/albums/#edit-album-details","title":"Edit Album Details","text":"<p>Go to Albums and open the album edit dialog</p> From TitleContext MenuAlbum Toolbar <p>Click on the album title </p> <p>Select album, open context menu and click </p> <p></p> <p>Open album, click  and then click </p> <p></p> <p>Edit album details and click save</p> <p></p>"},{"location":"user-guide/organize/albums/#add-photos-to-album","title":"Add Photos to Album","text":"<ol> <li>Select photos and videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> <li> <p>Select album</p> <p></p> </li> <li> <p>Click Confirm</p> </li> </ol> <p>You can select many photos at once using shift.</p>"},{"location":"user-guide/organize/albums/#remove-photos-from-album","title":"Remove Photos from Album","text":"<ol> <li>Go to your album</li> <li>Select photos/videos you want to remove</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/organize/albums/#set-album-cover","title":"Set Album Cover","text":"<p>To set a cover image for an album:</p> <ol> <li>Open the album by clicking on it.</li> <li>Click on the photo you want to use as the cover.</li> <li>When the photo opens, click  in the upper right corner.</li> <li> <p>Select Set as Album Cover from the menu.</p> <p></p> </li> </ol> <p>This will set the selected photo as the cover image for the album.</p>"},{"location":"user-guide/organize/albums/#delete-album","title":"Delete Album","text":"Context MenuAlbum Toolbar <p>Select album, open context menu and click </p> <p></p> <p>Open album, click  and then click Delete Album</p> <p></p>"},{"location":"user-guide/organize/archive/","title":"Archive","text":"<p>You can move photos and videos you do not want to keep in your collection to Archive. Content that is archived is not deleted but it will not appear in any section apart from Archive.</p> <p>Keyboard Shortcut</p> <p>In the fullscreen viewer, you can quickly archive or restore photos by pressing Ctrl + A.</p>"},{"location":"user-guide/organize/archive/#archive-photos","title":"Archive Photos","text":"<ol> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/organize/archive/#restore-photos-from-archive","title":"Restore Photos from Archive","text":"<ol> <li>Go to Archive</li> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/organize/calendar/","title":"Calendar","text":"<p>The Calendar view allows you to browse your library by year and month:</p> <p></p> <p>Note that the monthly albums in this view only include pictures that have a valid creation date and time specified in their metadata or as part of their filename.</p> <p>Files for which the creation date is estimated based on the file modification time will therefore not appear in these albums, even if they have been properly indexed.</p> <p>You can use the context menu to perform the following actions:</p>"},{"location":"user-guide/organize/calendar/#download-months","title":"Download Months","text":"<ol> <li>Select month</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/calendar/#create-albums-from-months","title":"Create Albums from Months","text":"<ol> <li>Select month</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/calendar/#set-month-cover","title":"Set Month Cover","text":"<p>To set a cover image for a month:</p> <ol> <li>Open the month by clicking on it in the Calendar view.</li> <li>Click on the photo you want to use as the cover.</li> <li>When the photo opens, click  in the upper right corner.</li> <li> <p>Select Set as Album Cover from the menu.</p> <p></p> </li> </ol> <p>This will set the selected photo as the cover image for the month.</p>"},{"location":"user-guide/organize/delete/","title":"Removing Files Permanently","text":"<p>You can permanently delete photo and video files you do not want to keep from your filesystem. Photos and videos must be archived before they can be deleted permanently.</p> <p>Before you start, make sure the Delete feature is enabled in Settings.</p>"},{"location":"user-guide/organize/delete/#delete-selected-files","title":"Delete Selected Files","text":"<ol> <li>Select the photos and videos your want to delete</li> <li>Go to Archive</li> <li>Click context menu</li> <li>Click </li> <li>Confirm</li> </ol>"},{"location":"user-guide/organize/delete/#delete-all-archived-photos","title":"Delete All Archived Photos","text":"<ol> <li>Go to Archive</li> <li>Click </li> <li>Click Delete All</li> </ol>"},{"location":"user-guide/organize/download/","title":"Downloading Files","text":"Using Context MenuFrom Fullscreen ModeFrom Edit Dialog <ol> <li>Select photos</li> <li>Click on the context menu</li> <li> <p>Click . Photos will be downloaded in original size</p> <p></p> </li> </ol> <p>You can select many photos at once using shift.</p> <p>You can configure which files should be downloaded for each photo.</p> <ol> <li>Click on the photo</li> <li> <p>In fullscreen mode click </p> <p></p> </li> </ol> <p>You can configure which files should be downloaded for each photo.</p> <p>Keyboard Shortcut</p> <p>In the fullscreen viewer, you can quickly download files by pressing Ctrl + D.</p> <ol> <li>Open the photo's  edit dialog</li> <li>Open the Files Tab</li> <li>Click Download</li> </ol> <p></p>"},{"location":"user-guide/organize/edit/","title":"Viewing and Editing Picture Details","text":"<p>When you click on a title in the cards view or  in the full screen viewer, you can see all the information related to a picture and perform changes to it if you have permission to do so.</p> Cards ViewFull Screen ViewerContext Menu <ol> <li>Click on the title, date/time, or camera details of a picture</li> </ol> <p></p> <ol> <li>Click on  in the upper right corner</li> </ol> <p></p> <p>Keyboard Shortcut</p> <p>In the fullscreen viewer, you can quickly open the edit dialog by pressing Ctrl + E.</p> <ol> <li>Select one or multiple pictures</li> <li>Click on context menu</li> <li>Click </li> </ol> <p></p>"},{"location":"user-guide/organize/edit/#details","title":"Details","text":"<p>In the Details tab, you can view and edit general metadata such as title, date, location, camera, lens, caption, and copyright:</p> <p></p> <p>Much of this information is automatically recognized and updated while indexing. If you edit these fields, the changed values will be preserved and are not overwritten even when you reindex your library.</p> <p>To quickly set new coordinates, you can paste them into the Location field if they have the format 48.265684, 7.721380. Alternatively, you can click on the location marker icon next to this field to open the built-in location component and select a location visually.</p> <p>Clicking the Apply button saves the changes you have made, but does not close the dialog, while the Close button closes the dialog without saving additional changes.</p> <p>When performing a search, text in the Title, Caption, and Keywords fields can be found, while Notes are private and will be ignored.</p> <p>Location Selection</p> <p>PhotoPrism includes a location component that allows you to easily change the location coordinates of a picture by selecting its location on a map. Simply click on the  icon next to the Location field to open the interactive map interface. You can also search for locations by typing city or street names directly in the map component.</p> <p></p> <p>With this built-in functionality, the external geolocation browser plugin is no longer needed. We thank our community for their valuable contribution that inspired this feature!</p>"},{"location":"user-guide/organize/edit/#labels","title":"Labels","text":"<p>In the Labels tab, you can view, add and edit labels and see whether they have been recognized automatically or added manually.</p>"},{"location":"user-guide/organize/edit/#people","title":"People","text":"<p>Open the People tab to see whose face has been recognized in the picture and assign names to faces that have not yet been recognized.</p>"},{"location":"user-guide/organize/edit/#files","title":"Files","text":"<p>The Files tab shows you all the files that belong to a picture. If it is a RAW image, you might for example also see a JPEG version of it and an XMP sidecar file:</p> <p></p> <p>Click on  to see additional details such as file size, type, and codec: </p> <p></p> <p>If there is more than one JPEG or PNG file, a button in the file details will allow you to change the primary image displayed as a preview in albums and search results. You can also delete non-primary files or unstack files by clicking on the action buttons.</p>"},{"location":"user-guide/organize/folders/","title":"Folders","text":"<p>We automatically display all folders of your originals directory in the Folders section. In case you add new files to your originals directory your folders will be updated.</p> <p></p> <p>The context menu allows you to perform the following actions:</p>"},{"location":"user-guide/organize/folders/#download-folders","title":"Download Folders","text":"<ol> <li>Select folder</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/folders/#create-albums-from-folders","title":"Create Albums from Folders","text":"<ol> <li>Select folder</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/folders/#set-folder-cover","title":"Set Folder Cover","text":"<p>To set a cover image for a folder:</p> <ol> <li>Open the folder by clicking on it in the Folders section.</li> <li>Click on the photo you want to use as the cover.</li> <li>When the photo opens, click  in the upper right corner.</li> <li> <p>Select Set as Album Cover from the menu.</p> <p></p> </li> </ol> <p>This will set the selected photo as the cover image for the folder.</p>"},{"location":"user-guide/organize/keyboard-shortcuts/","title":"Keyboard Shortcuts","text":"<p>PhotoPrism offers a variety of keyboard shortcuts to help you navigate and use the app more efficiently. Below is a list of available shortcuts, grouped by context.</p> <p>On macOS, replace Ctrl with \u2318 (Command) key for most shortcuts.</p>"},{"location":"user-guide/organize/keyboard-shortcuts/#common-page-shortcuts","title":"Common Page Shortcuts","text":"Shortcut Action Ctrl + F Focus Search Ctrl + R Refresh Page Ctrl + U Open Upload Dialog Shift + Ctrl + F Open Expanded Toolbar Ctrl + F (on People, Labels, Library Errors pages) Focus Search Field"},{"location":"user-guide/organize/keyboard-shortcuts/#viewer-shortcuts","title":"Viewer Shortcuts","text":"Shortcut Action Ctrl + I Toggle Info Panel Ctrl + M Mute/Unmute Ctrl + S Play/Pause Slideshow Ctrl + A Archive/Restore Ctrl + D Download Ctrl + E Edit Ctrl + F Open Fullscreen Ctrl + L Like/Unlike <p>Keyboard shortcuts can help you work faster and keep your hands on the keyboard. Try them out to streamline your workflow! </p>"},{"location":"user-guide/organize/labels/","title":"Labels","text":"<p>PhotoPrism uses labels to classify images. Other tools use the term tags instead of labels. Labels are set automatically when adding new photos.  You can manually add new labels or edit/remove the ones that have been created by us.</p> <p>In Labels you find all labels of your photos and videos.  You can star labels by clicking . Starred labels will be listed first.</p> <p>PhotoPrism also attaches each generated label to a broader group (or category) of labels. For example, there is a general category 'vehicle' which will include labels such as 'cab', 'catamaran', 'lifeboat' and 'bullet train'. These broad label categories cannot be edited, but can be used in a search, in an identical way to all other labels.</p> <p>You may wish to see these broad label categories in addition to the usual labels in the Labels pages. Clicking the icon in the upper right-hand corner will switch between turning them on  ('Show More') and off  ('Show Less'). You can also include these label categories as part of a more complex search filter - the label categories from your photos will appear in the search filter bar as a drop-down selection under the option 'All Categories'.</p> <p></p>"},{"location":"user-guide/organize/labels/#view-all-photos-with-a-label","title":"View all Photos with a Label","text":"<ol> <li>Go to Labels</li> <li> <p>Click on the label you are interested in</p> <p> </p> </li> </ol> <p>Alternatively you can use the search field in Photos/Videos. You search for photos with a special label like this: <code>label:dog</code>.</p>"},{"location":"user-guide/organize/labels/#add-labels-to-photos","title":"Add Labels to Photos","text":"<ol> <li>Go to the photo edit dialog</li> <li>Go to Labels tab</li> <li>Click on the label field in the last row of the label table</li> <li>Enter a label name</li> <li> <p>Click  on the right side of this row</p> <p></p> </li> </ol>"},{"location":"user-guide/organize/labels/#removedelete-labels-from-photos","title":"Remove/Delete Labels from Photos","text":"<p>Labels that have been set automatically can be removed. Manually added labels can be deleted.</p> <ol> <li>Go to the photo edit dialog</li> <li>Go to Labels tab</li> <li> <p>Click the / button of the label you want to remove/delete</p> <p></p> </li> </ol> <p>Removed labels have a confidence of 0% and can be activated again at any time by clicking add.</p> <p></p> <p>You can hide Labels in Settings</p>"},{"location":"user-guide/organize/labels/#rename-labels","title":"Rename Labels","text":"<ol> <li>Go to Labels</li> <li>Click on the label name you want to rename     </li> <li>Change the name     </li> <li>Click save</li> </ol> <p>Be aware this change applies to all photos that have this label.</p>"},{"location":"user-guide/organize/labels/#delete-labels","title":"Delete Labels","text":"<p>You can permanently delete a label. No file will get a deleted label set during indexing.</p> <ol> <li>Go to Labels</li> <li>Select the label you want to delete</li> <li>Open the context menu</li> <li> <p>Click </p> <p></p> </li> <li> <p>Confirm</p> <p></p> </li> </ol> <p>In case you want a deleted label to appear again, you need to add it to one photo and then index all files again.</p>"},{"location":"user-guide/organize/moments/","title":"Moments","text":"<p>PhotoPrism creates moments out of your memories.  Moments get constantly updated in case you add new photos.</p> <p>Moments can be based on location and time e.g. Germany 2020 or on labels like Nature &amp; Landscape or Pets.</p> <p></p> <p>The context menu allows you to perform the following actions:</p>"},{"location":"user-guide/organize/moments/#remove-moments","title":"Remove Moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> <li>Confirm</li> </ol> <p>Only the moment will be deleted. Your files stay untouched.</p>"},{"location":"user-guide/organize/moments/#download-moments","title":"Download Moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/moments/#create-albums-from-moments","title":"Create Albums from Moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/moments/#set-moment-cover","title":"Set Moment Cover","text":"<p>To set a cover image for a moment:</p> <ol> <li>Open the moment by clicking on it.</li> <li>Click on the photo you want to use as the cover.</li> <li>When the photo opens, click  in the upper right corner.</li> <li> <p>Select Set as Album Cover from the menu.</p> <p></p> </li> </ol> <p>This will set the selected photo as the cover image for the moment.</p>"},{"location":"user-guide/organize/panoramas/","title":"Panoramas","text":"<p>PhotoPrism automatically marks photos with an aspect ratio of 2/1 or higher as panorama. You can view all your panorama images in the Panorama section.</p> <p></p>"},{"location":"user-guide/organize/panoramas/#edit-panorama-flags","title":"Edit Panorama Flags","text":"<ol> <li>Open the photo edit dialog</li> <li>Click </li> <li>Set or unset the panorama flag</li> </ol>"},{"location":"user-guide/organize/people/","title":"Face Recognition","text":"<p>Our latest version includes facial recognition that lets you find pictures of your family and friends. Be ready to discover long forgotten shots! New faces are detected as you scan your library. They are then grouped by similarity, so you can quickly match them to people.</p> <p>Recognition does not start until your library has been fully scanned. Searching and updating faces temporarily causes a high CPU load and may take a while, depending on your hardware and the number of images you have.</p> <p>Existing clusters are automatically optimized in the background, for example, when new faces are detected, you have reported a bad match, or new files are added to your library.</p>"},{"location":"user-guide/organize/people/#recognized-new-people","title":"Recognized &amp; New People","text":"<p>The people section shows you recognized people as well as new face clusters.</p> <p>To star a person click . Starred persons appear first.</p> <p> </p>"},{"location":"user-guide/organize/people/#why-doesnt-the-new-faces-page-show-all-faces","title":"Why doesn't the New Faces page show all faces?","text":"<p>The 'New Faces' page only shows automatically recognized face clusters, as there may be thousands of unknown faces in your library, including random movie actors or faces on shampoo bottles.</p> <p>You can use the <code>face:new</code> search filter to find images with unknown people. We recommend combining this filter with other filters like year or location when searching for specific people. The People tab in the photo edit dialog shows all faces, so you can name them or report a bad match by pressing the  button.</p>"},{"location":"user-guide/organize/people/#when-a-face-was-not-detected","title":"When a face was not detected...","text":"<p>There can be several reasons why a face was not detected:</p> <ul> <li>You may need to wait until indexing is complete, as face recognition will not begin until your library has been scanned</li> <li>Only the primary file in stacks will be searched for faces</li> <li>Faces can be smaller than the minimum size configured</li> <li>Our face detection did not scan the image thoroughly enough</li> <li>Reducing the resolution or quality of generated thumbnails negatively impacts face detection and recognition results, just like when you cannot see properly</li> <li>Contrast plays a major role, so a bright face with gray hair on a gray background may be less obvious to our face detection than it is to you</li> <li>In very rare cases, an actual face may be considered a false positive and thus be ignored</li> </ul> <p>Recognition compares the similarity of faces. The similarity threshold for a face is reduced when  you report a bad match.</p>"},{"location":"user-guide/organize/people/#assign-names-to-faces","title":"Assign Names to Faces","text":"From PeopleFrom Photo Edit dialog <ol> <li>Go to People</li> <li>Go to New</li> <li>Click on the input field</li> <li>Start typing a name</li> <li> <p>Press enter</p> <p></p> </li> </ol> <ol> <li>Open the photo edit dialog</li> <li>Go to the People tab</li> <li>Click on the input field</li> <li>Start typing a name</li> <li> <p>Press enter</p> <p></p> </li> </ol> <p>The person you just added will appear under Recognized</p>"},{"location":"user-guide/organize/people/#hiding-people","title":"Hiding People","text":"<p>You can hide a person in the Recognized section by clicking  in the upper right corner. Pictures of this person continue to be visible in search results and albums.</p> <p></p> <p>To see all people including hidden ones click .</p> <p></p> <p>Hidden people can be recovered by clicking </p> <p></p>"},{"location":"user-guide/organize/people/#hiding-faces","title":"Hiding Faces","text":"<p>You can hide face clusters from the New section, in the same way you hide people from the Recognized section.</p>"},{"location":"user-guide/organize/people/#view-all-photos-of-a-person","title":"View all Photos of a Person","text":"From PeopleFrom Search <ol> <li>Go to People</li> <li>Go to Recognized</li> <li> <p>Click on the person you want to view</p> <p></p> </li> </ol> <ol> <li>Go to Search</li> <li> <p>Search for person:\"john\"</p> <p></p> </li> </ol>"},{"location":"user-guide/organize/people/#rename-people","title":"Rename People","text":"<p>To rename all photos of a person:</p> <ol> <li>Go to People</li> <li>Go to Recognized</li> <li>Click on the persons name</li> <li>Type in a new name</li> <li>Click save</li> </ol> <p></p> <p></p>"},{"location":"user-guide/organize/people/#change-people-assignments","title":"Change People Assignments","text":"<p>You may report bad matches by pressing the  button underneath a face in the People tab. This will remove the name. You can either leave it blank or enter the name of a different person.</p> <p>When you reject a match, the corresponding face cluster will be updated in the background so that similar  issues can be resolved automatically.</p> <ol> <li>Open the photo edit dialog</li> <li>Go to the People tab</li> <li>Click </li> <li>Then enter a new name or leave it empty</li> </ol> <p></p>"},{"location":"user-guide/organize/people/#remove-faces","title":"Remove Faces","text":"<p>In case PhotoPrism detected something wrong as face (false positives), or in case you just don't want to keep a face on the people tab you're not interested in, you can remove it.</p> <ol> <li>Open the photo edit dialogue</li> <li>Go to the People tab</li> <li>Click </li> </ol> <p></p> <p>You might undo this action before a reload.</p> <p></p>"},{"location":"user-guide/organize/people/#download-all-photos-of-a-person","title":"Download all Photos of a Person","text":"<ol> <li>Go to People</li> <li>Select a person</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/people/#create-albums-from-people","title":"Create Albums from People","text":"<ol> <li>Go to People</li> <li>Select a person</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/people/#search","title":"Search","text":"<p>You can find photos with people on it using the following queries:</p> <ul> <li><code>people</code>, <code>faces</code> or <code>faces:true</code> will result in all photos with people </li> <li><code>faces:false</code> will show all photos without people</li> <li><code>faces:3</code> will show all photos with at least 3 people on it</li> <li><code>person:\"John Doe\"</code> or <code>subject:\"John Doe\"</code> will show all photos of the person with the exact name John Doe</li> <li><code>people:\"John\"</code> or <code>subjects:\"John\"</code> will show all photos of people with a name like John e.g. John Doe and John Smith</li> </ul> <p>The person/subject and people/subjects filters can be used with &amp; and | (see search for more details). Filters may be combined.</p> <p><code>person:\"John Doe&amp;Jane Doe\" faces:3</code> will show all photos with John and Jane Doe and one other person.</p> <p></p>"},{"location":"user-guide/organize/people/#known-issues","title":"Known Issues","text":"<p>For all known issues, see Getting Started &gt; Known Issues &gt; Face Recognition.</p>"},{"location":"user-guide/organize/people/#legacy-hardware","title":"Legacy Hardware","text":"<p>Face recognition can be slow (or even crash) on old devices due to insufficient resources.</p> <p>Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p>"},{"location":"user-guide/organize/people/#asian-faces-and-children","title":"Asian Faces and Children","text":"<p>It is a known issue that children and Asian-looking faces cannot be recognized reliably. Detection without automatic recognition should not be affected by that.</p> <p>This is because the model we use was trained with North American images, which unfortunately do not include many Asians. The absence of children in the training data comes from the fact that parents do not usually share such images under a public license (and may not have the right to do so).</p> <p>We will continue to improve our models over time as our resources allow.</p>"},{"location":"user-guide/organize/people/#background-worker","title":"Background Worker","text":"<p>Face recognition was developed and tested under the assumption that the background worker runs every 15 minutes, unless the backend is busy with other tasks like indexing. It has not been tested with much longer intervals and is not designed for that.</p> <p>PhotoPrism's background worker groups new faces by similarity, compares faces with clusters, and optimizes existing clusters as needed. Without these routine tasks, the number of faces to be processed becomes too large. The first and next time the worker runs, it can then cause a heavy server load until all the faces, face clusters, and related pictures have been updated. The longer you wait, the more CPU is required and the longer it takes.</p> <p>An important reason for the worker to run independently of actual changes in the main instance is that some users change the database content directly or run additional instances, for example for indexing. It is a problem that can be solved, but it takes time. If we were to ignore this and don't run the worker at all times, it could lead to many additional support requests, further reducing the amount of time we can spend on development. </p> <p>The handling of changes in multiple instances will be improved over time so that the worker can be run less frequently in future releases.</p> <p>Upcoming Features</p> <ul> <li>manual tagging of faces</li> <li>importing of XMP face tags</li> <li>excluding people when browsing your pictures</li> <li>automatic backup of tagged people in YAML files</li> </ul>"},{"location":"user-guide/organize/places/","title":"Places","text":"<p>Places displays all photos with GPS information on a world map.</p> <p>The Places feature requires a browser with WebGL support. Most modern browsers support WebGL, but some older browsers or browsers with hardware acceleration disabled may not be able to display the map properly.</p> <p></p> <p>You can  set a default map style in settings or choose between different styles by clicking .</p> <p>Clicking on a cluster, opens the cluster overlay. </p> <p></p> <p></p> <p>To open photos from this location in the search click . </p> <p>To clear the location filter click .</p> <p></p>"},{"location":"user-guide/organize/places/#search","title":"Search","text":"<p>When using the search only photos matching the search term are shown on the map. You can use most of our search filters on the map as well.</p> <p></p>"},{"location":"user-guide/organize/places/#enable-terrain-mode","title":"Enable Terrain Mode","text":"<p>Our \"Satellite\", \"Outdoor\" and \"Topography\" maps can also be viewed in 3D.</p> <p>To enable terrain mode click . To change the perspective, you can hold down the right mouse button and move it.</p> <p></p>"},{"location":"user-guide/organize/places/#3d-earth-view","title":"3D Earth View","text":"<p>PhotoPrism now offers an immersive 3D Earth view that provides a globe-like perspective of your photo locations. This feature allows you to visualize your photos in a more realistic, three-dimensional representation of the world.</p> <p>To enable the 3D Earth view:</p> <ol> <li>Click on  to toggle the 3D Earth view</li> </ol> <p>When in 3D Earth view, you can:</p> <ul> <li>Rotate the globe by clicking and dragging</li> <li>Zoom in and out using the scroll wheel or pinch gestures</li> <li>Tilt the view by holding the right mouse button and moving it</li> </ul> <p>The 3D Earth view works with all map styles and can be combined with terrain mode for an even more detailed visualization of your photo locations.</p> <p></p>"},{"location":"user-guide/organize/places/#open-photo-from-search-in-places","title":"Open Photo from Search in Places","text":"<p>To navigate directly from the cards results view to the location of a picture on the world map, click on its location.</p> <p> </p>"},{"location":"user-guide/organize/private/","title":"Hiding Private Photos","text":""},{"location":"user-guide/organize/private/#what-does-private-mean","title":"What does private mean?","text":"<p>Some of your photos might be private for personal reasons.  Our private functionality provides you with a solution to hide private photos or videos from some sections. This way you can let family and friends browse through your photos without risking that they see photos you do not want them to see.</p> <p>By default, photos marked as private will not appear in the following sections:</p> <ul> <li>Search</li> <li>Videos</li> <li>People</li> <li>Favorites</li> <li>Places</li> <li>Labels</li> <li>Autogenerated Albums (Moments, Calendar, Regions, Folders)</li> <li>Shared Albums</li> </ul> <p>Private photos will be displayed in the private section, in user generated albums and within the file browser.</p> <p>In case you want private content to appear everywhere you can configure that in Settings.</p>"},{"location":"user-guide/organize/private/#toggle-private-flag","title":"Toggle Private Flag","text":"<ol> <li>Go to Search</li> <li>Select photos/videos</li> <li>Click context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/review/","title":"Reviewing Non-Photographic and Low-Quality Images","text":"<p>When adding new photos a quality score from 1 to 5 is created automatically. Photos with a quality score lower than 3 do not appear in Search until you approve them (unless the quality filter was disabled in Settings)</p> <p>The quality score depends on the following:</p> <ul> <li>Known date and/or GPS coordinates</li> <li>At least 2 MP resolution if taken after 2012</li> <li>Photo not classified as info or screenshot</li> <li>Photo is favorite, was edited or approved</li> </ul> <p>In case you do not need the review mechanism you can turn it off in Settings</p>"},{"location":"user-guide/organize/review/#approve-photos","title":"Approve Photos","text":"Context MenuCards ViewEdit Dialog <ol> <li>Go to Review</li> <li>Select photos and open the context menu</li> <li> <p>Click </p> <p></p> </li> </ol> <ol> <li>Go to Review and make sure you are in cards view</li> <li> <p>Click </p> <p></p> </li> </ol> <ol> <li>Open the photo's  edit dialog</li> <li> <p>Click approve</p> <p></p> </li> </ol> <p>The quality score is constantly updated.  If you add date or location information to a photo or like it, the quality score increases automatically.  In case the new score is equal or greater than 3 the photo is approved automatically.</p>"},{"location":"user-guide/organize/rotate/","title":"Rotate Image","text":"<p>PhotoPrism allows you to rotate JPG and PNG images.</p> <ol> <li>Open the photo edit dialog</li> <li>Go to the Files tab</li> <li>Click on the orientation icon and choose the correct orientation</li> </ol> <p></p> <p></p> <p>The updated orientation is stored in the metadata of your original file. Therefore, it is not possible to rotate images in read-only mode at this time.</p>"},{"location":"user-guide/organize/scans/","title":"Scans","text":"<p>You can mark scanned photos as scans within the photo edit dialog.</p> <p>We aim to automatically mark scans in the future.</p>"},{"location":"user-guide/organize/scans/#set-scan-flags","title":"Set Scan Flags","text":"<ol> <li>Open the photo edit dialog</li> <li>Click </li> <li>Set or unset the scan flag</li> </ol>"},{"location":"user-guide/organize/stacks/","title":"Stacks","text":"<p>Stacks are groups of files that have the same origin but differ in quality, format, size, or color. Go to Settings &gt; Content to change the stacks-related settings for your library.</p> <p>To see all images with a group of related files, open Stacks in the expanded Search navigation:</p> <p></p> <p>Since videos and Live Photos are always stacked with a still image, they are not included in the search results when you navigate to Search &gt; Stacks.</p>"},{"location":"user-guide/organize/stacks/#for-what-reasons-can-files-be-stacked","title":"For what reasons can files be stacked?","text":"<ol> <li>Files that share the same file and folder name (except for the file extension) are always stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code></li> <li>Files with sequential names like <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code> can be stacked as well (optional)</li> <li>File metadata indicates that the pictures were taken at the same position within the same second (optional)</li> <li>File metadata includes the same Unique Image ID or XMP Instance ID (optional)</li> </ol> <p>You can change your preferences for 2 - 4 in the Stacks section under Settings &gt; Content.</p> <p>Note that it is not possible to disable stacking of files with the same name as this would break important functionality, most notably support for Apple Live Photos (which consist of a photo and a video file), any other multi-file/hybrid formats like RAW/JPEG, and indexing of metadata from XMP/JSON sidecar files.</p>"},{"location":"user-guide/organize/stacks/#are-files-automatically-unstacked-when-i-change-the-settings","title":"Are files automatically unstacked when I change the settings?","text":"<p>When you change the stacks-related settings under Settings &gt; Content, files that are already stacked will not be unstacked automatically. This is because unstacking is a resource-intensive operation that requires each file to be re-indexed.</p> <p>The result also depends on the exact order in which you unstack the files, as non-media sidecar files, for example, remain bound to the remaining media file in a stack. We consider providing a command for this in a future release and appreciate any contributions in this regard.</p> <p>If you are new to PhotoPrism and want to re-index your library with different settings, you can run the <code>photoprism reset</code> command in a terminal to reset the index and start from scratch. Learn more \u203a</p>"},{"location":"user-guide/organize/stacks/#which-sequential-naming-patterns-are-supported","title":"Which sequential naming patterns are supported?","text":"<p>If stacking by Sequential Name has been enabled, files with e.g. the following names would be stacked with the file <code>/2018/IMG_1234.jpg</code>:</p> <ul> <li><code>/2018/IMG_1234 (2).jpg</code> <code>/2018/IMG_1234 (3).jpg</code></li> <li><code>/2018/IMG_1234 copy.jpg</code> <code>/2018/IMG_1234 copy 1.jpg</code> <code>/2018/IMG_1234 copy 2.jpg</code></li> <li><code>/2018/IMG_1234 (-2.7)</code> <code>/2018/IMG_1234 (+3.3).jpg</code> <code>/2018/IMG_1234(-2.7).jpg</code> <code>/2018/IMG_1234(+3.3).jpg</code></li> </ul>"},{"location":"user-guide/organize/stacks/#browse-related-files","title":"Browse Related Files","text":"<ol> <li> <p>Click on </p> <p></p> </li> <li> <p>Use arrows to see all photos of the sequence</p> <p> </p> </li> </ol>"},{"location":"user-guide/organize/stacks/#change-primary-files","title":"Change Primary Files","text":"<p>The JPEG file marked as primary is used in our views. It is listed first in the files tab.</p> <p>To change the primary file:</p> <ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the file you want to set as primary</p> </li> <li> <p>Click primary</p> <p> </p> </li> </ol>"},{"location":"user-guide/organize/stacks/#unstack-files","title":"Unstack Files","text":"<ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the JPEG file that is not marked as primary</p> </li> <li> <p>Click unstack</p> </li> </ol> <p></p> <p>Now, both files appear in our views.</p> <p></p>"},{"location":"user-guide/organize/stacks/#delete-non-primary-files","title":"Delete Non-Primary Files","text":"<ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the JPEG file that is not marked as primary</p> </li> <li> <p>Click delete</p> </li> <li> <p>Confirm</p> </li> </ol> <p> </p>"},{"location":"user-guide/organize/video/","title":"Browsing and Playing Videos","text":"<p>Navigate to Videos to browse all your videos. Click on a video to play it.</p> <p>Please note that not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</p> <p></p> <p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have ExifTool enabled to extract metadata such as duration, resolution, and codec.</p>"},{"location":"user-guide/organize/video/#live-photos","title":"Live Photos","text":"<p>Short videos up to 3 seconds are categorized and displayed as Live Photos, regardless of your phone's make and model. You can recognize this by the  icon that appears in the upper left corner.</p> <p>Move the mouse cursor over the thumbnail to play the video without changing the view. You can limit a search to Live Photos by using the <code>type:live</code> filter or the keyword <code>live</code>.</p> <p></p>"},{"location":"user-guide/organize/video/#transcoding","title":"Transcoding","text":"<p>For maximum browser compatibility, PhotoPrism can transcode video codecs and containers supported by FFmpeg to MPEG-4 AVC, as well as extract still images for thumbnail creation:</p> <ul> <li>if FFmpeg is disabled or not installed, indexing and importing videos is not possible because still images cannot be created</li> <li>if ExifTool is disabled or not installed, indexing and importing videos is only partially possible because the video metadata cannot be extracted and thus the duration, resolution, and codec are unknown</li> <li>MPEG-4 AVC videos can be played natively by most modern browsers and are not re-encoded, even if they exceed the configured bitrate limit; to reduce the size of AVC videos, you can manually replace the original files with a smaller version or wait for a future release that offers this functionality</li> <li>OGV, VP8, VP9, AV1, WebM, and HEVC videos will be streamed directly if they are supported by your browser and do not exceed the configured bitrate limit</li> <li>other formats must always be transcoded</li> </ul> <p>If necessary, videos are transcoded on demand. This can cause unacceptable delays when large video files are played for the first time.</p> <p>In this case, you can run the following command in a terminal to pre-transcode all video files as needed:</p> <pre><code>docker compose exec photoprism photoprism convert\n</code></pre> <p>Our setup guide for advanced users explains how to configure hardware video transcoding.</p> <p>Make sure that there is enough disk space available on your server before transcoding all video files, as this may require a significant amount of extra storage.</p> <p>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</p>"},{"location":"user-guide/search/","title":"Browsing and Searching Your Library","text":"<p>PhotoPrism offers many views and search filters so you can explore your photo collection in multiple dimensions instead of just scrolling through it day by day.</p> <p>This helps you rediscover long-forgotten shots, find specific pictures, or quickly create albums based on search results.</p>"},{"location":"user-guide/search/#views-and-filters","title":"Views and Filters","text":"<p>Using the main navigation you can visit the different sections of your photo library:</p>"},{"location":"user-guide/search/#search","title":"Search","text":"<p>Shows all photos and videos that are not in review or archived or private.</p> <p>In case the review, private or archive functions are turned off - Search displays those photos and videos as well.</p> <p></p>"},{"location":"user-guide/search/#monochrome","title":"Monochrome","text":"<p>Shows all monochrome photos and videos.</p>"},{"location":"user-guide/search/#panoramas","title":"Panoramas","text":"<p>Shows all panorama photos.</p>"},{"location":"user-guide/search/#stacks","title":"Stacks","text":"<p>Shows all stacked photos.</p>"},{"location":"user-guide/search/#scans","title":"Scans","text":"<p>Shows all scans.</p>"},{"location":"user-guide/search/#review","title":"Review","text":"<p>Shows all photos that are in review.</p>"},{"location":"user-guide/search/#archive","title":"Archive","text":"<p>Shows archived photos.</p>"},{"location":"user-guide/search/#albums","title":"Albums","text":"<p>Shows albums you created.</p> <p></p>"},{"location":"user-guide/search/#unsorted","title":"Unsorted","text":"<p>Shows all photos that are not part of an album.</p> <p></p>"},{"location":"user-guide/search/#videos","title":"Videos","text":"<p>Shows videos that are not in review or archived or private.</p>"},{"location":"user-guide/search/#live-photos","title":"Live Photos","text":"<p>Shows all short videos up to 3 seconds. </p>"},{"location":"user-guide/search/#people","title":"People","text":"<p>Shows photos and videos grouped by people on it.</p>"},{"location":"user-guide/search/#favorites","title":"Favorites","text":"<p>Shows all photos and videos you liked.</p>"},{"location":"user-guide/search/#moments","title":"Moments","text":"<p>Discover albums we automatically create for you.</p> <p></p>"},{"location":"user-guide/search/#calendar","title":"Calendar","text":"<p>Organizes your photos due to time taken.</p> <p></p>"},{"location":"user-guide/search/#places","title":"Places","text":"<p>Displays all photos and videos with location information on a worldmap.</p> <p></p>"},{"location":"user-guide/search/#regions","title":"Regions","text":"<p>Shows your photos grouped by location.</p> <p></p>"},{"location":"user-guide/search/#labels","title":"Labels","text":"<p>Shows your photos and videos grouped by labels like cat, dog or beach.</p> <p></p>"},{"location":"user-guide/search/#folders","title":"Folders","text":"<p>Displays all folders of your originals directory.</p> <p></p>"},{"location":"user-guide/search/#private","title":"Private","text":"<p>Shows photos and videos marked as private.</p>"},{"location":"user-guide/search/#originals","title":"Originals","text":"<p>Hierarchical view of your originals directory.</p> <p></p> <p></p>"},{"location":"user-guide/search/filters/","title":"Using Search Filters","text":"<p>Powerful search filters let you easily find specific photos and videos, for example:</p> <ul> <li>Persons visible on a picture</li> <li>Objects that are displayed on a picture</li> <li>The main color of a picture</li> <li>The file or folder name of a picture</li> <li>Location where a picture has been taken</li> <li>Other metadata such as camera, lens, chroma...</li> </ul> <p>Just give it a try!</p> <p></p>"},{"location":"user-guide/search/filters/#introduction","title":"Introduction","text":"<p>The following filters can be set via dropdowns in the search toolbar:</p> <ul> <li>Country, Year, Month, Order, Camera, Color, Category.</li> </ul> <p>If you set multiple filters, only pictures that meet all filter criteria will be displayed in the search result. Filters can generally be combined unless they contradict each other.</p> <p></p> <p>In addition, these and many other filters can be entered into the toolbar search box as follows:</p> <pre><code>label:cat color:green type:live\n</code></pre> <p>A complete overview of the available search filters can be found below.</p> <p></p>"},{"location":"user-guide/search/filters/#and-search","title":"AND Search","text":"<p>To combine different filters use a space as separator:</p> <pre><code>mono:true review:false\n</code></pre> <p>The search result shows pictures that are monochrome and not in review.</p> <p>Additionally some filters can be combined with <code>&amp;</code> as follows:</p> <pre><code>keywords:buffalo&amp;water\n</code></pre> <p>or:</p> <pre><code>keywords:\"buffalo &amp; water\"\n</code></pre> <p>This query will show all photos that have the keywords water and buffalo.</p> <p>&amp; is supported by the following filters:</p> <ul> <li>albums, keywords, subject/person, subjects/people.</li> </ul> <p>The label filter does not support &amp;. You can use the keywords filter instead, as all labels are keywords as well.</p>"},{"location":"user-guide/search/filters/#or-search","title":"OR Search","text":"<p>An OR search is possible using <code>|</code>:</p> <pre><code>label:cat|dog\n</code></pre> <p>This will show all photos that have either the label cat or dog.</p> <p>The following filters work with |:</p> <ul> <li>albums, color, country, state, city, day, month, year, keywords, label, path, subject/person, subjects/people, title, type, name, filename, original, hash</li> </ul>"},{"location":"user-guide/search/filters/#wildcard","title":"Wildcard","text":"<p>The <code>*</code> character will act as a wildcard:</p> <pre><code>name:\"IMG_23*\"\n</code></pre> <p>This will show all photos which name start with <code>IMG_23</code>.</p> <pre><code>name:\"*_23*\"\n</code></pre> <p>This will show all photos which name contain <code>_23</code>, like <code>IMG_2356.MOV</code> , <code>2021_02_23.jpg</code>, etc.</p> <p>Wildcards can be combined with &amp; or |: <code>filename:\"*IMG123*|*_22F6FC19.jpg\"</code></p>"},{"location":"user-guide/search/filters/#filter-reference","title":"Filter Reference","text":"<p>This is a complete list of supported search filters with examples. Filters can generally be combined unless they contradict each other, e.g. results cannot be monochrome and have high color saturation at the same time.</p> Filter Type Examples Notes dist decimal dist:50 Maximum distance to position in km lat decimal lat:41.894043 Position latitude (-90.0 to 90.0 deg) lng decimal lng:-87.62448 Position longitude (-180.0 to 180.0 deg) chroma number chroma:70 Chroma (0-100) diff number diff:-1 diff:2 Differential Perceptual Hash (000000-FFFFFF) quality number quality:0 quality:3 Minimum quality score (1-7) album string album:berlin Album UID or name, supports * wildcards albums string albums:\"South Africa &amp; Birds\" Album names, combinable with &amp; or | alt string alt:300-500 Altitude (m) camera string camera:canon Camera make or model caption string caption:\"Lake*\" Searches text in captions separated by |, or specify false to find content without a caption category string category:airport Location category type city string city:\"Berlin\" City names, separated by | codec string codec:avc1 Media codec types separated by |, e.g. jpeg, avc1, or hvc1 color string color:\"red|blue\" Color name separated by |, e.g. purple, magenta, pink, red, orange, gold, yellow, lime, green, teal, cyan, blue, brown, white, grey, or black country string country:\"de|us\" Country codes, separated by | day string day:3|13 Days 1-31, separated by | description string description:\"Lake*\" Searches text in titles or captions separated by |, or specify false to find content without a title or caption f string f:2.8-4.5 Aperture (F-Number) face string face:PN6QO5INYTUSAATOFL43LL2ABAV5ACZG Find pictures with a specific face ID, you can also specify yes, no, new, or a face type faces string faces:yes faces:3 Minimum number of detected faces (yes means 1) favorite string favorite:true favorite:false Finds favorite content filename string filename:\"2021/07/12345.jpg\" File names including path and extension, separated by | folder string folder:\"*/2020\" Alias for the path filter geo string geo:yes Finds content with or without latitude and longitude hash string hash:2fd4e1c67a2d SHA1 file hashes, separated by | id string id:123e4567-e89b-... Finds content with the specified Image, Document or Instance IDs, separated by | iso string iso:200-400 ISO number (light sensitivity) keywords string keywords:\"sand&amp;water\" Keywords, combinable with &amp; and | label string label:cat|dog Label names, separated by | latlng string latlng:49.4,13.41,46.5,2.331 Position bounding box (Lat N, Lng E, Lat S, Lng W) lens string lens:ef24 Lens make or model mm string mm:28-35 Focal length (35mm equivalent) month string month:7|10 Months from 1-12, separated by | mp string mp:3-6 Resolution in Megapixels (MP) name string name:\"IMG_9831-112*\" File names without path and extension, separated by | near string near:pqbcf5j446s0futy Finds nearby pictures (UID) olc string olc:8FWCHX7W+ Open Location Code (OLC) original string original:\"IMG_9831-112*\" Original file names of imported files, separated by | path string path:2020/Holiday Path names separated by |, supports * wildcards people string people:\"Jane &amp; John\" Subject names, combinable with &amp; or | person string person:\"Jane Doe &amp; John Doe\" Subject names, will be matched exactly and can be combined using &amp; or | s2 string s2:4799e370ca54c8b9 Position, specified as S2 Cell ID scan string scan:true scan:false Finds scanned photos and documents state string state:\"Baden-W\u00fcrttemberg\" State or province names, separated by | subject string subject:\"Jane Doe &amp; John Doe\" Alias for person subjects string subjects:\"Jane &amp; John\" Alias for people title string title:\"Lake*\" Searches text in titles separated by |, or specify false to find content without a title type string type:image|raw|live Finds specific media types, such as image, raw, live, video, animated, audio, vector, or document, separated by | uid string uid:pqbcf5j446s0futy Finds content with the specified internal UIDs, separated by | year string year:1990|2003 Years, separated by | animated switch animated:yes Finds animated images only archived switch archived:yes Finds archived content audio switch audio:yes Finds audio content only document switch document:yes Finds PDF documents only error switch error:yes Finds content with errors hidden switch hidden:yes Finds hidden content (broken or unsupported) image switch image:yes Finds regular photos and images only landscape switch landscape:yes Finds landscape pictures only live switch live:yes Finds Motion and Live Photos only media switch media:yes Finds live, video, audio, and animated content only mono switch mono:yes Pictures with few or no colors panorama switch panorama:yes Finds panorama pictures only (aspect ratio 1.9:1 or more) photo switch photo:yes Finds regular photos and images, as well as RAW and Live Photos portrait switch portrait:yes Finds portrait pictures only primary switch primary:yes Finds primary JPEG or PNG files only private switch private:yes Finds private content public switch public:yes Excludes private content raw switch raw:yes Finds RAW images only review switch review:yes Finds content in review square switch square:yes Finds square pictures only (aspect ratio 1:1) stack switch stack:yes Finds content with more than one media file stackable switch stackable:yes Finds content that can be stacked with additional files unsorted switch unsorted:yes Finds content that is not in an album unstacked switch unstacked:yes Finds content with a file that has been removed vector switch vector:yes Finds vector graphics only video switch video:yes Finds video content only added timestamp added:\"2006-01-02T15:04:05Z\" Finds content added at or after this time after timestamp after:\"2022-01-30\" Finds content created on or after this date before timestamp before:\"2022-01-30\" Finds content created on or before this date edited timestamp edited:\"2006-01-02T15:04:05Z\" Finds content edited at or after this time taken timestamp taken:\"2022-01-30\" Finds content created on the specified date updated timestamp updated:\"2006-01-02T15:04:05Z\" Finds content updated at or after this time <p>Why can't I play live photos or find stacks when I search for specific images?</p> <p>Our search API and user interface perform a file search. This is intentional since \"stacks\" can contain files of different types and properties, such as color.</p> <p>For example, there may be color and monochrome versions. Now, when you search for them or sort them by color, the user interface must display individual files. Otherwise, the results showing a color image/video when you filter by monochrome would make no sense.</p> <p>Likewise, if you search for <code>filename.mp4.*</code>, you will find only JPEGs without video, because the video file extension is <code>.mp4</code> without an extra dot at the end.</p> <p>We recommend using the <code>path:</code> and/or <code>name:</code> filters with wildcards if searching for individual files limits the search results too much. Most users will want to find all related files so that they can be displayed together, e.g. as live photos consisting of a video and an image.</p> <p>You can combine these filters with other filters such as <code>live</code> to ensure that the results include only pictures with a specific media type. Alternatively, you can use the <code>filename:</code> filter with a more permissive wildcard that excludes the file extension.</p>"},{"location":"user-guide/search/views/","title":"Search Result Views","text":"<p>PhotoPrism offers you three different views to browse your photos and videos. In addition you can choose between multiple light and dark themes.</p> Cards ViewMosaic ViewList View <p>The cards view displays important metadata like title, time and location next to the photos</p> <p></p> <p>The mosaic view lets you enjoy your photos without distraction</p> <p></p> <p>The list view provides you photos and metadata in a  well-arranged list</p> <p></p> <p>To switch between views you can either use the filter in the filter bar or the view button (, , ) in the upper right corner.</p> <p>Additionally, you can open your photos/videos in fullscreen mode and start a slideshow ().</p> <p></p> <p>Keyboard Shortcuts in Fullscreen</p> <p>In fullscreen mode, you can use these keyboard shortcuts for quick actions:</p> <ul> <li>Ctrl + F : Toggle fullscreen mode</li> <li>Ctrl + S : Play/pause slideshow</li> <li>Ctrl + I : Toggle Info Panel    </li> <li>Ctrl + M : Mute/Unmute</li> <li>Ctrl + L : Like/Unlike</li> </ul>"},{"location":"user-guide/settings/account/","title":"Account Settings","text":"<p>For security reasons, changing account-related settings through the user interface requires password authentication, so these settings will not be available to you when public mode is enabled.</p> <p></p>"},{"location":"user-guide/settings/account/#change-password","title":"Change Password","text":"<ol> <li>Go to Settings</li> <li>Open Account tab</li> <li>Click Change Password</li> <li>Enter your current password</li> <li>Enter your new password twice</li> <li>Click Change</li> </ol>"},{"location":"user-guide/settings/account/#2-factor-authentication","title":"2-Factor Authentication","text":"<p>Two-factor authentication (2FA) can add an extra layer of security to your account in case someone gains access to your password. If enabled, you will need a randomly generated verification code in addition to your password to log in.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/settings/account/#apps-and-devices","title":"Apps and Devices","text":"<p>If 2FA is enabled for your account, other apps and services will no longer be able to use your password as they do not have access to the verification codes.</p> <p>You can therefore generate app-specific passwords for them by navigating to Settings &gt; Account and then clicking the Apps and Devices button. We also recommend using app-specific passwords in case 2FA is not enabled for your account.</p> <p>Example for generating an app password that you can use with WebDAV-compatible file synchronization apps like PhotoSync:</p> <p></p> <p>By selecting the WebDAV scope, you ensure that the app password cannot be used to log in through the regular user interface or for other actions. Apps will also not be able to change your password or manage user accounts, even if you grant them Full Access.</p>"},{"location":"user-guide/settings/account/#connect-via-webdav","title":"Connect via WebDAV","text":"<p>To open a dialog that shows you the URLs required to connect an app or computer via WebDAV:</p> <ol> <li>Go to Settings</li> <li>Open Account tab</li> <li>Click Connect via WebDAV</li> </ol> <p></p>"},{"location":"user-guide/settings/advanced/","title":"Advanced Settings","text":"<p>System config options such as the image quality can be changed  on the advanced settings page. You can also disable specific features and enable the debug or read-only mode.</p> <p>Since they are not safe to use without authentication, these settings are not available when running in public mode. Changing config options is still possible via configuration files and with command parameters.</p> <p>Changing advanced settings always requires a restart to take effect. Selecting a different thumbnail quality or size won't replace existing thumbnails. You can regenerate them using the  command-line interface.</p> <p></p> <p>All config options can be set in your <code>compose.yaml</code> or <code>docker-compose.yml</code> or via command-line parameters as well. Manually changed values are saved in a config file. It is stored in the <code>storage/config</code> folder by default.</p>"},{"location":"user-guide/settings/advanced/#global-options","title":"Global Options","text":""},{"location":"user-guide/settings/advanced/#debug-logs","title":"Debug Logs","text":"<p>When enabled, debug logs are shown in Library&gt;Logs. Requires restart.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DEBUG</code>.</p>"},{"location":"user-guide/settings/advanced/#experimental-features","title":"Experimental Features","text":"<p>When enabled, your instance will be updated with experimental features.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_EXPERIMENTAL</code>.</p>"},{"location":"user-guide/settings/advanced/#read-only-mode","title":"Read-only Mode","text":"<p>When enabled, importing, uploading and deleting files is not possible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_READONLY</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-backups","title":"Disable Backups","text":"<p>This option prevents the creation of database, album and YAML sidecar file backups.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_BACKUPS</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-webdav","title":"Disable WebDAV","text":"<p>This option prevents building WebDav connections. Requires restart for changes to be applied.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_WEBDAV</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-places","title":"Disable Places","text":"<p>When selected, geo-information (latitude, longitude) will still be read (and indexed) from your files metadata, however PhotoPrism will not use reverse lookup to determine place names using those coordinates as it normally would.</p> <p>The Places section will not be visible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_PLACES</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-exiftool","title":"Disable ExifTool","text":"<p>This option prevents the creation of <code>json</code> files with Exif data in <code>storage/sidecar</code>. Note that you must have ExifTool enabled to extract video metadata such as duration, resolution, and codec.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_EXIFTOOL</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-tensorflow","title":"Disable TensorFlow","text":"<p>When selected, image classification and facial recognition will be disabled as both rely on tensorflow.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_TENSORFLOW</code>.</p>"},{"location":"user-guide/settings/advanced/#backups","title":"Backups","text":""},{"location":"user-guide/settings/advanced/#database-backups","title":"Database Backups","text":"<p>When selected, database backups are created based on the configured schedule.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_BACKUP_DATABASE</code>. The schedule as well as the number of backups that will be retained can be configured with <code>PHOTOPRISM_BACKUP_SCHEDULE</code> and <code>PHOTOPRISM_BACKUP_RETAIN</code>.</p>"},{"location":"user-guide/settings/advanced/#album-backups","title":"Album Backups","text":"<p>When selected, YAML files that back up album metadata will be created based on the configured schedule.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_BACKUP_ALBUMS</code>. The backup schedule can be configured with <code>PHOTOPRISM_BACKUP_SCHEDULE</code>.</p>"},{"location":"user-guide/settings/advanced/#sidecar-files","title":"Sidecar Files","text":"<p>When selected, YAML files that back up picture metadata will be created.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_SIDECAR_YAML</code>.</p>"},{"location":"user-guide/settings/advanced/#preview-images","title":"Preview Images","text":"<p>This section controls how JPEG preview and thumbnail images are rendered. These are high-quality, scaled-down versions of your originals.</p> <p>Thumbnails are necessary because web browsers are bad at resizing large images to fit the screen. Using full-resolution originals for slideshows and in search results would also consume a lot of browser memory and significantly reduce indexing performance.</p>"},{"location":"user-guide/settings/advanced/#downscaling-filter","title":"Downscaling Filter","text":"<p>This lets you select the algorithm used to resize your original images when creating thumbnails. A detailed description of the available filters can be found in the section below.</p> <p>For a good trade-off between quality and performance, we recommend choosing the lanczos filter. It may be a little slower in creating thumbnails, but produces very high quality images. In comparison, the less sophisticated cubic filter may be 30% faster.</p> <p>The corresponding config option is <code>PHOTOPRISM_THUMB_FILTER</code>.</p> <p>This option is only available if the native <code>imaging</code> image processing library has been enabled by setting <code>PHOTOPRISM_THUMB_LIBRARY</code> to <code>\u201cimaging\u201d</code> in your <code>compose.yaml</code> or <code>docker-compose.yml</code> configuration file.</p>"},{"location":"user-guide/settings/advanced/#static-and-dynamic-size-limits","title":"Static and Dynamic Size Limits","text":"<p>Static Size Limit: During initial indexing or import (as thumbnails are generated), no thumbnails will be created above this size. The corresponding config option is <code>PHOTOPRISM_THUMB_SIZE</code>.</p> <p>Dynamic Size Limit: During dynamic (on-demand) thumbnail generation, no thumbnails will be created above this size. The corresponding config option is <code>PHOTOPRISM_THUMB_SIZE_UNCACHED</code>.</p> <p>Reducing the Static Size Limit of thumbnails has a significant impact on face recognition and image classification results. Simply put, it means that the indexer can no longer see properly.</p> <p>If the configured size limit is exceeded (for example, if users have a larger screen), a sufficiently large thumbnail can't be created, and the photo viewer may be forced to display the original image instead. Downscaling images in browsers typically results in poor quality, and they may also be displayed in the wrong orientation.</p> <p>The smallest configurable size is 720px for consumption by the indexer to perform color detection, face detection, and image classification. Recreating them every time they are needed is too demanding for even the most powerful servers. Unless you only have a few small images, it would render the app unusable.</p> <p>It is recommended that you set these limits high so that browsing pictures is as smooth as possible. However, if the amount of disk storage required is a serious problem, and you are willing to increase server load instead, it is possible to set the Static Size Limit to the minimum of 720px in combination with a higher Dynamic Size Limit. This allows the server to generate larger thumbnails on demand. It may also result in a noticeable delay when viewing pictures in full-screen mode.</p> <p>To view original images, enable Dynamic Previews, and configure Dynamic Size Limit and Static Size Limit to a small value like <code>720</code>. When viewing images exceeding that limit, the original files will be displayed.</p>"},{"location":"user-guide/settings/advanced/#which-thumbnails-will-be-generated","title":"Which thumbnails will be generated?","text":"<p>The smallest configurable static and dynamic size limit is 720px, so most sizes up to <code>fit_720</code> are always generated by default. Higher size limits generate thumbnails with more detail at higher resolutions - either statically (pre-generated while indexing) or on demand if the configuration permits.</p> <p>Optional thumbnail sizes cannot be pre-generated and are only rendered on request, for example when sharing an image on Instagram.</p> <p>The following overview shows the name, dimensions, and aspect ratio for each thumbnail size as well as a description of how it is used:</p> Name Width Height Aspect Ratio Available Usage colors 3 3 1:1 Always Color Detection tile_50 50 50 1:1 Always List View tile_100 100 100 1:1 Always Places View left_224 224 224 1:1 On-Demand AI right_224 224 224 1:1 On-Demand AI tile_224 224 224 1:1 Always AI, Mosaic View left_384 384 384 1:1 Optional AI right_384 384 384 1:1 Optional AI tile_384 384 384 1:1 Optional AI left_480 480 480 1:1 Optional AI right_480 480 480 1:1 Optional AI tile_480 480 480 1:1 Optional AI tile_500 500 500 1:1 Always Cards View fit_720 720 720 Preserved Always SD TV, Mobile tile_1080 1080 1080 1:1 Optional Instagram fit_1280 1280 1024 Preserved On-Demand HD TV, SXGA fit_1600 1600 900 Preserved Optional Social Media fit_1920 1920 1200 Preserved On-Demand Full HD fit_2048 2048 2048 Preserved Optional DCI 2K, Tablets fit_2560 2560 1600 Preserved On-Demand Quad HD fit_3840 3840 2400 Preserved Optional 4K Ultra HD fit_4096 4096 4096 Preserved On-Demand DCI 4K, Retina 4K fit_5120 5120 5120 Preserved On-Demand Retina 5K fit_7680 7680 4320 Preserved On-Demand 8K Ultra HD 2 <p>Generated thumbnail files are stored in the <code>storage/cache/thumbnails</code> folder, where the path and file name depend on the size and file hash, e.g. <code>storage/cache/thumbnails/1/a/3/1a30c1f...9_100x100_center.jpg</code>.</p>"},{"location":"user-guide/settings/advanced/#dynamic-previews","title":"Dynamic Previews","text":"<p>Enable generating thumbnails on-the-fly as they're required (either for viewing or analysing with TensorFlow). This saves disk space, but is more processor-intensive and so not recommended when hosting on less powerful devices (such as Raspberry Pi).</p> <p>The corresponding config toggle is <code>PHOTOPRISM_THUMB_UNCACHED</code>.</p>"},{"location":"user-guide/settings/advanced/#image-quality","title":"Image Quality","text":""},{"location":"user-guide/settings/advanced/#jpeg-quality","title":"JPEG Quality","text":"<p>Choose a value above 90 to display your images in the best possible quality. Note that higher values  require more space in the storage folder for less compressed thumbnail files, which may also take longer to create.</p> <p>Lower quality thumbnails, on the other hand, are smaller, load faster on slow Internet connections,  and require less space in the storage folder and in the browser cache.</p> <ul> <li>Quality levels of 90% or higher are generally considered high quality</li> <li>80% to 90% is considered medium quality</li> <li>70% to 80% is considered low quality, as you might see with highly compressed content on social media </li> </ul> <p>Anything below 70% is generally of very low quality.</p> <p>Example: If a quality of 95 results in a thumbnail file size of 500kB, then reducing the quality  to 80 reduces the file size to about 100kB.</p> <p>The corresponding config option is <code>PHOTOPRISM_JPEG_QUALITY</code>.</p> <p>The actual compression depends on how much information an image contains. Empty areas and skies, for example, are easier to compress. Images with a lot of details suffer the most. For this reason, reducing the quality of thumbnails also negatively impacts face recognition and image classification results. Simply put, this means that the indexer sees fewer details.</p>"},{"location":"user-guide/settings/advanced/#jpeg-size-limit","title":"JPEG Size Limit","text":"<p>This sets the maximum size of the JPEG files created when converting original RAW images.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_JPEG_SIZE</code>.</p> <p>RawTherapee and \"heif-convert\" cannot limit the resolution of JPEG files when converting files from other formats such as RAW, DNG, HEIC or AVIF.</p>"},{"location":"user-guide/settings/advanced/#png-size-limit","title":"PNG Size Limit","text":"<p>This sets the maximum size of the PNG files created when converting original images.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_PNG_SIZE</code>.</p>"},{"location":"user-guide/settings/advanced/#file-conversion","title":"File Conversion","text":"<p>Many photographers keep their originals in some sort of lossless RAW format instead of compressed JPEG, especially when shooting with a Digital SLR. Some mobile phones also support RAW or use HEIC/HEIF for a similar purpose. PhotoPrism aims at providing excellent support for all RAW formats, independent of camera brand and model. Please let us know when there is an issue with your specific device.</p> <p>Web browsers in general cannot display RAW image files. They need to be converted, which is what our import and convert commands do. You'll also find a checkbox for this step in our Web UI.</p> <p>In addition, PhotoPrism also supports TIFF, PNG, BMP and GIF files. Be aware that files in those formats often don't contain useful metadata and are typically used for screenshots, charts, graphs and icons only.</p> <p></p> <p>Generated sidecar files will be stored outside your originals folder by default, so that RAW to JPEG conversion also works in read-only mode.</p>"},{"location":"user-guide/settings/advanced/#disable-darktable","title":"Disable Darktable","text":"<p>If this feature is disabled, Darktable will not be used for RAW conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_DARKTABLE</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-rawtherapee","title":"Disable RawTherapee","text":"<p>If this feature is disabled, RawTherapee is not used for RAW conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_RAWTHERAPEE</code>.</p>"},{"location":"user-guide/settings/advanced/#use-presets","title":"Use Presets","text":"<p>Disables simultaneous conversion of RAW files to apply Darktable presets.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_RAW_PRESETS</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-imagemagick","title":"Disable ImageMagick","text":"<p>If this feature is disabled, ImageMagick is not used for conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_IMAGEMAGICK</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-ffmpeg","title":"Disable FFmpeg","text":"<p>If this feature is disabled, FFmpeg is not used to transcode videos or extract still images for thumbnail creation, and indexing or importing video files is not possible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_FFMPEG</code>.</p> <p>To prevent inexperienced users from accidentally disabling the creation of thumbnails for videos FFmpeg can only be disabled when Experimental Features are enabled.</p>"},{"location":"user-guide/settings/advanced/#disable-vectors","title":"Disable Vectors","text":"<p>Disables support for vector graphics.</p>"},{"location":"user-guide/settings/advanced/#downscaling-filters","title":"Downscaling Filters","text":""},{"location":"user-guide/settings/advanced/#linear","title":"Linear","text":"<p>Bilinear interpolation takes a weighted average of the four neighborhood pixels to calculate its final interpolated value. The result is a much smoother image than the original image. When all known pixel distances are equal, then the interpolated value is simply their sum divided by four. This technique performs interpolation in both directions, horizontal and vertical. This technique gives better result than nearest neighbor interpolation and take less computation time compared to bicubic interpolation.</p>"},{"location":"user-guide/settings/advanced/#cubic","title":"Cubic","text":"<p>Catmull-Rom is a local interpolating spline developed for computer graphics purposes. Its initial use was in design of curves and surfaces, and has recently been used in several applications. Catmull-Rom splines are a family of cubic interpolating splines formulated such that the tangent at each point is calculated using the previous and next point on the spline. The results are similar to ones produced by bicubic interpolation with regards to sharpness, but the Catmull-Rom reconstruction is clearly superior in smooth signal region.</p>"},{"location":"user-guide/settings/advanced/#lanczos","title":"Lanczos","text":"<p>The Lanczos interpolation function is a mathematical formula used to smoothly interpolate the value of a digital image between its samples. It maps each sample of the given image to a translated and scaled copy of the Lanczos kernel, which is a sinc function windowed by the central hump of a dilated sinc function. The sum of these translated and scaled kernels is then evaluated at the desired pixel. Lanczos interpolation has the best properties in terms of detail preservation and minimal generation of aliasing artifacts for geometric transformations not involving strong down sampling. However higher order Lanczos interpolation requires high computational time, which makes it unsuitable for most commercial software.</p>"},{"location":"user-guide/settings/advanced/#blackman","title":"Blackman","text":"<p>Blackman is a modification of Lanczos that has better control of ringing artifacts.</p>"},{"location":"user-guide/settings/advanced/#examples","title":"Examples","text":"<p>Original image:</p> <p></p> <p>The same image resized from 600x400px to 150x100px using different resampling filters. From faster (lower quality) to slower (higher quality):</p> Filter Resize result Nearest Neighbor Bilinear Sharp Bicubic Lanczos <p>Source: A Comparative Analysis of Image Interpolation Algorithms</p>"},{"location":"user-guide/settings/general/","title":"General Settings","text":"<p>In the General settings tab, you can configure basic user interface settings as well as the maps in Places:</p> <p></p>"},{"location":"user-guide/settings/general/#user-interface","title":"User Interface","text":"<p>You can change the theme and language of the User interface and define a start page and time zone.</p> <p>To make PhotoPrism suit your individual needs, the following sections and functionalities can be en- or disabled. Disabled sections do not appear in the main navigation.</p>"},{"location":"user-guide/settings/general/#people","title":"People","text":"<p>When disabled, the people section is hidden. To disable face detection while indexing, you may set <code>PHOTOPRISM_DISABLE_FACES</code> and/or <code>PHOTOPRISM_DISABLE_TENSORFLOW</code> to <code>\"true\"</code> in your config.</p>"},{"location":"user-guide/settings/general/#calendar","title":"Calendar","text":"<p>When disabled, there is no Calendar section.</p>"},{"location":"user-guide/settings/general/#moments","title":"Moments","text":"<p>When disabled, there is no Moments section.</p>"},{"location":"user-guide/settings/general/#labels","title":"Labels","text":"<p>When disabled, there is no Labels section and you cannot add or edit labels.</p>"},{"location":"user-guide/settings/general/#private","title":"Private","text":"<p>Excludes content marked as private from search results, shared albums, labels and places.</p>"},{"location":"user-guide/settings/general/#upload","title":"Upload","text":"<p>When disabled, uploading files via upload is not possible.  This might be useful when you grant others access to your PhotoPrism but do not want them to upload photos.</p>"},{"location":"user-guide/settings/general/#download","title":"Download","text":"<p>When disabled, no files can be downloaded using the PhotoPrism UI. Please note that it may still be possible to download files using the integrated browser functionalities.</p>"},{"location":"user-guide/settings/general/#import","title":"Import","text":"<p>When disabled, there is no possibility to import photos. You need to use index instead to add new photos.</p>"},{"location":"user-guide/settings/general/#share","title":"Share","text":"<p>When disabled, album sharing and upload to remote services like ownCloud is not possible.</p>"},{"location":"user-guide/settings/general/#edit","title":"Edit","text":"<p>When disabled, it is not possible to edit photo details.</p>"},{"location":"user-guide/settings/general/#archive","title":"Archive","text":"<p>When disabled, there is no Archive. Photos that have been archived beforehand will appear again in search results.</p>"},{"location":"user-guide/settings/general/#delete","title":"Delete","text":"<p>When disabled, permanent deletion of files from the archive is not possible.</p>"},{"location":"user-guide/settings/general/#services","title":"Services","text":"<p>Allow sharing pictures with apps and services.</p>"},{"location":"user-guide/settings/general/#library","title":"Library","text":"<p>When disabled, there is no Library section.</p>"},{"location":"user-guide/settings/general/#originals","title":"Originals","text":"<p>When disabled, there is no Originals section.</p>"},{"location":"user-guide/settings/general/#logs","title":"Logs","text":"<p>When disabled, server logs are not shown.</p>"},{"location":"user-guide/settings/general/#account","title":"Account","text":"<p>When disabled, there is no Account section.</p>"},{"location":"user-guide/settings/general/#places","title":"Places","text":"<p>When disabled, there is no Places section.</p>"},{"location":"user-guide/settings/general/#places_1","title":"Places","text":"<p>At the bottom of the General settings tab, you may choose your preferred map style and animation length for Places. PhotoPrism includes four high-resolution world maps to see where you've been, and for rediscovering long-forgotten shots.</p> <p>To enhance your photos with location data such as state, city and category, we've also launched our own geo-information service based on OpenStreetMap. A future release will additionally provide public events' data, so that albums of popular music festivals, or sports gatherings, can be created automatically.</p>"},{"location":"user-guide/settings/library/","title":"Content Settings","text":"<p>Some of these settings are only visible to users with Super Admin privileges.</p>"},{"location":"user-guide/settings/library/#index","title":"Index","text":""},{"location":"user-guide/settings/library/#quality-filter","title":"Quality Filter","text":"<p>Requires a review of non-photographic and low-quality images before they appear in search results.</p>"},{"location":"user-guide/settings/library/#estimate-locations","title":"Estimate Locations","text":"<p>Estimates the location of pictures taken without GPS information by extrapolating it from the location of other pictures taken on the same day. </p> <p>Be aware that, if you have pictures from unrelated events at different locations, the GPS coordinates of pictures from one event will be applied/extrapolated to pictures of the other event that lack coordinates (even if these are in different folders).</p> <p>Location estimation is not performed for non-photographic pictures or pictures without camera information.</p>"},{"location":"user-guide/settings/library/#generate-previews","title":"Generate Previews","text":"<p>Automatically creates JPEG or PNG preview images for other file types so they can be displayed in search results and in the full-screen viewer. </p> <p>Generate Previews should be enabled, otherwise PhotoPrism cannot index file types other than JPEG or PNG unless a preview sidecar file with the same filename prefix already exists. See Stacks to learn more about naming conventions of sidecar files.</p> <p>To prevent inexperienced users from accidentally disabling the creation of thumbnails Generate Previews can only be disabled when Experimental Features are enabled.</p>"},{"location":"user-guide/settings/library/#stacks","title":"Stacks","text":"<p>Stacks are groups of files that have the same origin but may differ in quality, format, size, or color. You can navigate to Search &gt; Stacks to find pictures with stacked media files.</p> <p>PhotoPrism offers you the following optional stacking methods, which you can choose to enable based on your personal preferences:</p> <ul> <li> Place &amp; Time stacks pictures taken at same GPS position and second</li> <li> Unique ID, matches the ImageUniqueID (Exif) or Instance ID (XMP)</li> <li> Sequential Name, for example <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code></li> </ul> <p>Files that share the same file and folder name (except for the file extension) are always stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code>.</p> <p>Note that it is not possible to disable stacking of files with the same name as this would break important functionality, most notably support for Apple Live Photos (which consist of a photo and a video file), any other multi-file/hybrid formats like RAW/JPEG, and indexing of metadata from XMP/JSON sidecar files.</p>"},{"location":"user-guide/settings/library/#are-files-automatically-unstacked-when-i-change-the-settings","title":"Are files automatically unstacked when I change the settings?","text":"<p>When you change these settings, files that are already stacked will not be unstacked automatically. This is because unstacking is a resource-intensive operation that requires each file to be re-indexed.</p> <p>The result also depends on the exact order in which you unstack the files, as non-media sidecar files, for example, remain bound to the remaining media file in a stack. We consider providing a command for this in a future release and appreciate any contributions in this regard.</p> <p>If you are new to PhotoPrism and want to re-index your library with different settings, you can run the <code>photoprism reset</code> command in a terminal to reset the index and start from scratch.</p>"},{"location":"user-guide/settings/library/#which-sequential-naming-patterns-are-supported","title":"Which sequential naming patterns are supported?","text":"<p>If stacking by Sequential Name has been enabled, files with e.g. the following names would be stacked with the file <code>/2018/IMG_1234.jpg</code>:</p> <ul> <li><code>/2018/IMG_1234 (2).jpg</code> <code>/2018/IMG_1234 (3).jpg</code></li> <li><code>/2018/IMG_1234 copy.jpg</code> <code>/2018/IMG_1234 copy 1.jpg</code> <code>/2018/IMG_1234 copy 2.jpg</code></li> <li><code>/2018/IMG_1234 (-2.7)</code> <code>/2018/IMG_1234 (+3.3).jpg</code> <code>/2018/IMG_1234(-2.7).jpg</code> <code>/2018/IMG_1234(+3.3).jpg</code></li> </ul>"},{"location":"user-guide/settings/library/#search","title":"Search","text":"<p>In this section, you can turn off the list view and the display of titles and captions in search results.</p>"},{"location":"user-guide/settings/library/#download","title":"Download","text":""},{"location":"user-guide/settings/library/#originals","title":"Originals","text":"<p>Only the files in the originals folder will be downloaded, but not any files that were automatically created in the sidecar folder. This is the recommended default.</p>"},{"location":"user-guide/settings/library/#raw","title":"RAW","text":"<p>Download RAW image files.</p>"},{"location":"user-guide/settings/library/#sidecar","title":"Sidecar","text":"<p>Download sidecar files as used for XMP metadata. This is generally not recommended except for some professional workflows.</p> <p>These settings do not affect ZIP archives when downloading full albums. To configure album downloads, advanced users can edit the <code>settings.yml</code> file in their config folder as described in our Getting Started Guide. Learn more \u203a</p>"},{"location":"user-guide/settings/sync/","title":"Services","text":"<p>You can connect your PhotoPrism instance to other services with WebDAV support, such as other PhotoPrism instances, Nextcloud or ownCloud.</p> <p>This might be useful if you want to share or synchronize files between multiple services.</p> <p>Since they are not safe to use without authentication, these settings are not available when running in public mode.</p> <p>PhotoPrism can also serve/share files via WebDAV to be browsed on macOS or Windows. See instructions.</p>"},{"location":"user-guide/settings/sync/#add-service","title":"Add Service","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click Connect </li> <li>Fill in your service url, username and password</li> <li>Click connect </li> <li>Now the other service is connected with PhotoPrism</li> </ol>"},{"location":"user-guide/settings/sync/#edit-connection-details","title":"Edit Connection Details","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click </li> <li>Edit account details and click Save</li> </ol>"},{"location":"user-guide/settings/sync/#edit-upload-settings","title":"Edit Upload Settings","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click into the upload cell of your service</li> </ol> <p> 4. Select the folder to which photos should be uploaded and click save</p> <p></p> <p>You can now share albums or files with this service.</p> <p>Due to problems with some Nextcloud settings it might be that uploading to Nextcloud results in 0 byte files. You find information on how to solve it here.</p>"},{"location":"user-guide/settings/sync/#edit-sync-settings","title":"Edit Sync Settings","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click into the sync cell of your service    </li> <li>Enable synchronization in the upper right corner</li> <li>Choose a folder from your service</li> <li>Choose a sync interval</li> <li>Select the options that are suitable for you and click Save</li> </ol>"},{"location":"user-guide/settings/sync/#remote-sync-options","title":"Remote Sync Options","text":"<ul> <li>Download remote files will download all files from the selected folder of the other service that do not yet exist in PhotoPrism</li> <li>Upload local files will upload all files (including private or archived ones) from PhotoPrism to your service that do not yet exist there</li> <li>Preserve filenames will keep filenames without renaming them</li> <li>Sync raw and video files will upload/download raw and video files alongside with JPEGS</li> </ul>"},{"location":"user-guide/share/","title":"Creating and Sharing Album Links","text":"<p>Secret links make it easy to share manually created albums as well as selected Moments, Months, Regions, or Folders with your loved ones. You can create multiple links for each album and optionally set an expiration date. While no registration is required to use the links, sharing albums with users who have an account is also possible this way.</p> <p>When you share an album, pictures marked as private will not be visible to others. They can view and download the non-private pictures, but they cannot modify them or their metadata.</p> <p></p> <p>When link visitors click on the location of a photo, they can view the photos of the shared album in the map view</p> <p></p> <p>Clicking  allows link visitors to end their session.</p> <p>Support for optional password protection of sharing links as well as other enhancements are planned.</p>"},{"location":"user-guide/share/#create-sharing-link","title":"Create Sharing Link","text":"Using Context MenuVia Toolbar <ol> <li>Go to Albums / Moments / Calendar / Regions / Folders</li> <li>Select the album you want to share</li> <li>Open the context menu</li> <li>Click </li> </ol> <ol> <li>Go to Albums / Moments / Calendar / Regions / Folders</li> <li>Open the album by clicking on it</li> <li>Click  in the toolbar</li> <li>Click  in the menu that appears</li> </ol> <p>Then</p> <ol> <li>Click  to open the link details</li> <li>Set a secret and expiry date</li> <li> <p>Click save</p> <p></p> </li> <li> <p>Copy the link by clicking on it</p> <p></p> </li> <li> <p>Share it with your friends</p> </li> </ol> <p>Share multiple albums with one link</p> <p>You can share multiple albums using the same link by using the same secret.</p> <p>You can create additional links with different secrets and expiry dates by clicking .</p>"},{"location":"user-guide/share/#delete-sharing-link","title":"Delete Sharing Link","text":"<ol> <li>Go to Albums</li> <li> <p>Click  on the album cover</p> <p></p> </li> <li> <p>Click </p> </li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/share/services-share/","title":"Uploading Files to Other Apps &amp; Services","text":"<p>In Settings &gt; Services, you can connect PhotoPrism to WebDAV-compatible services, such as other PhotoPrism instances or Nextcloud.</p>"},{"location":"user-guide/share/services-share/#share-files-with-other-apps","title":"Share Files with other Apps","text":"<ol> <li>Go to Search</li> <li>Select photos you want to upload</li> <li>Open the context menu</li> <li>Click  </li> <li>Select your account and click upload</li> </ol> <p>Due to problems with some Nextcloud settings it might be that uploading to Nextcloud results in 0 byte files. You find information on how to solve it here.</p>"},{"location":"user-guide/share/services-share/#share-albums-with-other-apps","title":"Share Albums with other Apps","text":"<ol> <li>Go to Albums / Moments / Calendar / Regions / Folders</li> <li>Select the album you want to share</li> <li>Open the context menu</li> <li>Click </li> <li>Click WebDAV Upload </li> <li>Select your account and click upload</li> </ol>"},{"location":"user-guide/sync/dropbox/","title":"Syncing with Dropbox","text":"<p>It's possible to use Dropbox to store your photos, while viewing and managing them through PhotoPrism.</p> <ol> <li>Set up a Dropbox account.</li> <li>Install the Dropbox desktop client.</li> <li>Sync your Dropbox to a local directory.</li> <li>If using Docker, configure your <code>compose.yaml</code> or <code>docker-compose.yml</code> with;     <pre><code>volumes:\n  - \"~/Dropbox/Photos:/photoprism/originals\"\n</code></pre></li> <li>Follow the PhotoPrism getting started guide as normal.</li> </ol>"},{"location":"user-guide/sync/dropbox/#auto-upload-from-mobile","title":"Auto-upload from Mobile","text":"<p>The Dropbox mobile apps also have a 'Camera Upload' feature which syncs photos to Dropbox, and then to any machine with Dropbox installed.</p> <p>To auto-import uploaded files into PhotoPrism;</p> <ol> <li>Install the Dropbox iOS or Android app.</li> <li>Enable 'Camera Uploads' in the Dropbox app's settings.</li> <li>Install the Dropbox desktop client on your server or a network-accessible machine</li> <li>Configure the <code>Camera Uploads</code> folder as your <code>import</code> directory for PhotoPrism.     In your <code>compose.yaml</code> or <code>docker-compose.yml</code> file, this is;     <pre><code>volumes:\n  - \"~/Dropbox/Camera Uploads:/photoprism/import\"\n</code></pre></li> <li>Optional: Enable 'delete on import' in PhotoPrism's settings to delete imported files from Dropbox. This saves Dropbox space, allowing you to remain within the 2 GB free tier.</li> </ol> <p>The Dropbox mobile app needs to be opened periodically or it tends to fail to identify and sync new photos.</p>"},{"location":"user-guide/sync/dropbox/#smart-selective-sync","title":"Smart / Selective Sync","text":"<p>A useful (although paid) feature is Dropbox Smart Sync (with optional auto-evict) which will download the files from Dropbox's servers only when you (or PhotoPrism) accesses them (such as during initial indexing, or when downloading an original file via the PhotoPrism interface).</p> <p>This can save space on your server by automically offloading the originals unless/until they're viewed.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/sync/mobile-devices/","title":"Syncing with Mobile Devices","text":"<p>You can use any app that supports the WebDAV protocol to synchronize photos and videos between your phone and PhotoPrism.</p> <p>Based on our own experience, we can highly recommend PhotoSync as it is one of the most feature-rich and sophisticated apps currently available for iOS and Android. Note that some transfer options, such as WebDAV or SMB, may require an upgrade after the free trial ends.</p> <p>An overview of mobile sync apps for iOS and Android can be found below.</p> <p>WebDAV access can be disabled under Settings &gt; Advanced. Since it requires write permissions and authentication, the built-in WebDAV server is automatically disabled when running in read-only or public mode.</p>"},{"location":"user-guide/sync/mobile-devices/#using-photosync","title":"Using PhotoSync","text":""},{"location":"user-guide/sync/mobile-devices/#set-photoprism-or-webdav-as-target","title":"Set PhotoPrism or WebDAV as Target","text":"<ol> <li>Open PhotoSync and click </li> <li>Click Configure</li> <li> <p>Select PhotoPrism as target</p> <p> </p> </li> <li> <p>Enter your settings</p> <p>Server: Your server url, e.g. \"example.com\".</p> <p>Port: Your port. If you are using HTTPS the port is 443.</p> <p>Login: Your username, e.g. \"admin\".</p> <p>Password: Your admin password.</p> <p>Directory: /import/ or /originals/ depending on your preferred ingestion method.</p> <p>Use SSL: Should be enabled.</p> <p>PikaPods users can find more information here. </p> <p></p> </li> <li> <p>Click Done</p> </li> <li> <p>You may adapt transfer details to match your preferences</p> <p> </p> </li> </ol>"},{"location":"user-guide/sync/mobile-devices/#set-up-automatic-sync","title":"Set Up Automatic Sync","text":"<ol> <li>Open PhotoSync and click </li> <li> <p>Click Autotransfer</p> <p></p> </li> <li> <p>Click Add new trigger and choose one or more trigger</p> <p></p> </li> <li> <p>Choose PhotoPrism as target</p> </li> <li> <p>Click Done</p> <p></p> </li> </ol> <p>Because PhotoSync uses WebDAV to send files, PhotoPrism automatically starts importing/indexing when it receives new files.</p>"},{"location":"user-guide/sync/mobile-devices/#sync-apps-for-ios-and-android","title":"Sync Apps for iOS and Android","text":"<p>As an alternative to PhotoSync, you can also use a wide range of other apps to synchronize your pictures with PhotoPrism, either directly via WebDAV or by sharing the  originals folder as an SMB network drive through your operating system or cloud provider:</p> Name Platform Synchronization Price Download PhotoSync Pro iOS, Android WebDAV, SMB \u20ac6.99 App Store, Google Play PhotoSync Premium iOS, Android WebDAV, SMB \u20ac24.99 App Store, Google Play EasySync Android WebDAV \u20ac2.99 Google Play, F-Droid Syncthing Fork Android Syncthing Free Google Play FolderSync Pro Android WebDAV, SMB \u20ac6.49 Google Play Owlfiles Pro iOS, Android WebDAV, SMB \u20ac59.99 App Store, Google Play <p>Note that this overview is provided for your convenience only and that we are unable to provide technical support for any of these apps. If you have problems, please contact the author or ask the community for help. You are welcome to suggest additional sync apps, so we can include them in this list.</p>"},{"location":"user-guide/sync/services-sync/","title":"Syncing with other WebDAV-compatible Apps and Services","text":"<p>Under Settings &gt; Services you can connect your PhotoPrism instance to other apps and services that can be accessed via WebDAV, e.g. other PhotoPrism instances, Nextcloud or ownCloud.</p> <p>When syncing, your files will be uploaded or downloaded to/from another service, which requires additional storage space. If you want PhotoPrism to index files from another local application, e.g. Nextcloud, we recommend mounting its file storage directory as originals folder instead of synchronizing the files via WebDAV. This prevents unnecessary copies of your files from being created.</p>"},{"location":"user-guide/sync/services-sync/#automatically-uploaddownload-files-tofrom-another-app","title":"Automatically Upload/Download Files to/from another App","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click into the sync cell of your service    </li> <li>Enable synchronization in the upper right corner</li> <li>Choose a folder from your service</li> <li>Choose a sync interval</li> <li>Select the options that are suitable for you and click Save</li> </ol>"},{"location":"user-guide/sync/services-sync/#remote-sync-options","title":"Remote Sync Options","text":"<ul> <li>Download remote files will download all files from the selected folder of the other service that do not yet exist in PhotoPrism</li> <li>Upload local files will upload all files (including private or archived ones) from PhotoPrism to your service that do not yet exist there</li> <li>Preserve filenames will keep filenames without renaming them</li> <li>Sync raw and video files will upload/download raw and video files alongside with JPEGS</li> </ul>"},{"location":"user-guide/sync/webdav/","title":"Connecting via WebDAV","text":"<p>WebDAV-compatible apps and clients such as PhotoSync, Microsoft's Windows Explorer, and Apple's Finder can connect directly to PhotoPrism.</p> <p>This mounts the originals and/or import folder as a network drive, allowing you to open, edit, and delete files from a remote device as if they were local.</p> <p>After files have been transferred, you can index or import them as usual. By default, indexing and importing start automatically after a safety delay when files have been uploaded using WebDAV.</p> <p>It is also possible to sync files with external WebDAV servers such as ownCloud or other PhotoPrism instances.</p> <p>You can disable WebDAV by navigating to Settings &gt; Advanced and selecting the corresponding option. As WebDAV access always requires authentication, the integrated server is automatically disabled if your instance is running in public mode.</p> <p>Do not use WebDAV without HTTPS outside your local, private network as your password would be transmitted, in clear text, over the Internet. Backup tools and file sync apps like FolderSync may refuse to connect as well.</p>"},{"location":"user-guide/sync/webdav/#server-url","title":"Server URL","text":"<p>If your instance is connected to the public Internet, the WebDAV URL of the originals folder has the following format, where <code>example.com</code> must be replaced with the actual hostname and <code>admin</code> with the actual username:</p> <pre><code>https://admin@example.com/originals/\n</code></pre> <p>For users running a local instance on the default port 2342 without HTTPS, the URL of the originals folder is as follows (the default username for new instances is <code>admin</code>, unless you have changed it in the configuration):</p> <pre><code>http://admin@localhost:2342/originals/\n</code></pre> <p>Please note that the slash at the end of the path must not be omitted and that the WebDAV URL in your client apps needs to be updated if the hostname or port of the server changes.</p> <p>You can view the originals folder URL by navigating to Settings &gt; Account and then clicking Connect via WebDAV. It is possible to connect to the import folder instead by replacing <code>/originals/</code> with <code>/import/</code> in the URL.</p>"},{"location":"user-guide/sync/webdav/#microsoft-windows","title":"Microsoft Windows","text":"<p>On Windows, you must instead enter a resource string in the following format to configure WebDAV access, where <code>example.com</code> must be replaced with the actual hostname of your instance:</p> <pre><code>\\\\example.com@SSL\\originals\\\n</code></pre> <p>If your server does not use the standard port 443 for HTTPS, Windows lets you specify a custom port such as 8443 directly after <code>@SSL</code>:</p> <pre><code>\\\\example.com@SSL@8443\\originals\\\n</code></pre> <p>For local installations running on the default port 2342 without HTTPS, enter the following resource in the connection dialog (you may need to update the registry settings for this):</p> <pre><code>\\\\localhost:2342\\originals\\\n</code></pre> <p>Please note that the slash at the end must not be omitted and that the WebDAV resource in Windows needs to be updated when the hostname or port of the server changes.</p> <p>You can view the originals folder resource by navigating to Settings &gt; Account and then clicking Connect via WebDAV. It is possible to connect to the import folder instead by replacing <code>\\originals\\</code> with <code>\\import\\</code>.</p>"},{"location":"user-guide/sync/webdav/#credentials","title":"Credentials","text":"<p>To access your instance via WebDAV, you can use your username in combination with your account password or an app password, e.g. if you have 2-Factor Authentication (2FA) enabled for your account or authenticate via OpenID Connect (OIDC) as using your account password is not possible in this case.</p> <p>If access is denied even though the login credentials are correct, please check whether the account has a role with WebDAV access and WebDAV is enabled for the specific account.</p> <p>Learn more \u203a</p>"},{"location":"user-guide/sync/webdav/#connect-to-a-webdav-server","title":"Connect to a WebDAV Server","text":"macOSWindows <ol> <li>In the Finder on your Mac, choose Go &gt; Connect to Server</li> <li>Enter the URL as shown above in the Server Address field</li> <li>Click Connect</li> </ol> <p>If you cannot connect to your instance via WebDAV using these instructions:</p> <ul> <li> You do not have sufficient user rights (try as admin)</li> <li> You are experiencing a general authentication problem</li> <li> Your instance or reverse proxy uses an invalid HTTPS certificate</li> <li> You are trying to connect to the wrong network or server</li> </ul> <ol> <li>Open Windows File Explorer</li> <li>Right click This PC</li> <li> <p>From the dropdown, select Map network drive...</p> <p></p> </li> <li> <p>Enter the drive letter and folder you want to map your WebDAV connection to</p> </li> <li>Check the boxes Reconnect at sign-in and Connect using different credentials</li> <li> <p>Click the Connect to a Web site that you can use to store your documents and pictures link</p> <p></p> </li> <li> <p>Click Next</p> <p></p> </li> <li> <p>Click Choose a custom network location and then click Next</p> <p> </p> </li> <li> <p>In the Internet or network address field, enter the URL as shown above and click Next</p> <p></p> </li> <li> <p>Enter your username and password and click Ok</p> <p></p> </li> <li> <p>Enter a name for the network location and click Next</p> <p></p> </li> <li> <p>Click Finish</p> <p></p> </li> </ol> <p>The originals folder appears as a mapped drive in Windows Explorer, and you can immediately add,  edit, or delete files and directories using the Windows File Explorer.</p> <p></p> <p>If you cannot connect to your instance via WebDAV using these instructions:</p> <ul> <li> You may need to change the basic authentication level in the registry</li> <li> You do not have sufficient user rights (try as admin)</li> <li> You are experiencing a general authentication problem</li> <li> Your instance or reverse proxy uses an invalid HTTPS certificate</li> <li> You are trying to connect to the wrong network or server</li> </ul>"},{"location":"user-guide/use-cases/apple/","title":"Migrate from Apple Photos","text":""},{"location":"user-guide/use-cases/apple/#transfer-files","title":"Transfer Files","text":"<ol> <li>Select the files or albums you want to export</li> <li>Click File &gt; Export &gt; Export Unmodified Original For Photos</li> <li>Select Export IPTC as XMP</li> <li>Click Export</li> <li>Move the exported files/folders to your originals or import diectory and start indexing or importing</li> </ol>"},{"location":"user-guide/use-cases/apple/#metadata","title":"Metadata","text":"<p>Apple saves the following information in its XMP files:</p> <ul> <li>Title</li> <li>Caption</li> <li>TakenAt Date</li> <li>Keywords (include people)</li> <li>GPS information</li> </ul> <p>The following metadata is read by PhotoPrism from the exported XMP files for each photo during indexing:</p> <ul> <li>Title</li> <li>Caption</li> <li>TakenAt Date</li> <li>Keywords</li> </ul> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/use-cases/flickr/","title":"Migrate from Flickr","text":""},{"location":"user-guide/use-cases/flickr/#transfer-files","title":"Transfer Files","text":"<ol> <li>Go to https://www.flickr.com/account</li> <li>Request your Flickr data</li> <li>Depending on the amount of photos it can take a few days for your data to be exported</li> <li>Download your data and add it to your originals directory (including json files)</li> <li>Start indexing</li> </ol> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/use-cases/google/","title":"Migrate from Google Photos","text":""},{"location":"user-guide/use-cases/google/#transfer-files","title":"Transfer Files","text":"<ol> <li>Go to Google Takeout</li> <li>Click <code>Deselect all</code> then check only <code>Google Photos</code>.</li> <li>Trigger the export of your Google Photos Data.</li> <li>Depending on the number of photos, it can take a few days for your data to be exported</li> <li>Download your data and extract all archives into to your originals or import folder<ul> <li>the folder should include the photos themselves, alongside json files for each of the photos</li> </ul> </li> <li>Start indexing or importing</li> </ol>"},{"location":"user-guide/use-cases/google/#metadata","title":"Metadata","text":"<p>The following metadata is read by PhotoPrism from each photo's JSON file</p> <ul> <li>Title</li> <li>Caption</li> <li>Geolocation Info (lat/long)</li> <li>Date/Time Taken</li> <li>Date/Time Created</li> <li>Date/Time Updated</li> </ul>"},{"location":"user-guide/use-cases/google/#transfer-albums","title":"Transfer Albums","text":"<p>Google Photos albums won't be automatically imported yet as we're trying to find a way to deal with  auto-generated albums users may not want to import.</p> <p>The community has created a bash script to import albums from a Google Takeout. For more information and support, see the project page on Github:</p> <p>inthreedee/photoprism-transfer-album</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/users/","title":"Managing User Accounts","text":"<p>PhotoPrism\u00ae Plus includes a web user interface for account and session management, in addition to the command-line interface available in all editions.</p> <p>You can add, edit and delete user accounts by navigating to Settings &gt; Users as an Admin:</p> <p></p>"},{"location":"user-guide/users/#adding-a-new-user","title":"Adding a New User","text":""},{"location":"user-guide/users/#editing-user-details","title":"Editing User Details","text":"<p>Only super admins can change the authentication provider of an account through the web interface, except for their own account, so that they do not accidentally lock themselves out e.g. by setting it to \"none\".</p>"},{"location":"user-guide/users/#changing-passwords","title":"Changing Passwords","text":"<p>Super admins can reset a user's password, while regular admins can change passwords only if they know the current password.</p> <p></p>"},{"location":"user-guide/users/#deleting-a-user","title":"Deleting a User","text":""},{"location":"user-guide/users/#managing-sessions","title":"Managing Sessions","text":"<p>You can view and delete active sessions by navigating to Settings &gt; Users &gt; Sessions as an Admin:</p> <p></p> <p>To view session details click . To delete a session click .</p>"},{"location":"user-guide/users/2fa/","title":"2-Factor Authentication","text":"<p>Two-factor authentication (2FA) can add an extra layer of security to your account in case someone gains access to your password. If enabled, you will need a randomly generated verification code in addition to your password to log in:</p> <p></p>"},{"location":"user-guide/users/2fa/#authenticator-apps","title":"Authenticator Apps","text":"<p>To enable 2FA for your account, you need a compatible authenticator app or device, for example:</p> <ul> <li>Google Authenticator</li> <li>Microsoft Authenticator</li> <li>2FA Authenticator (2FAS)</li> </ul> <p>It is best if you have the authenticator app installed on your phone, as this way you can easily set it up by scanning the displayed QR code with your camera and always have it with you.</p> <p>Hardware Devices</p> <p>While there are also dedicated hardware devices available as an alternative to authenticator apps, these are less common and we cannot give any recommendations.</p>"},{"location":"user-guide/users/2fa/#setup","title":"Setup","text":""},{"location":"user-guide/users/2fa/#step-1-verification-code","title":"Step 1: Verification Code","text":"<p>You can enable 2FA for your account by navigating to Settings &gt; Account and then clicking the 2-Factor Authentication button to open the setup dialog:</p> <p></p> <p>On the following page, scan the displayed QR code with your authenticator app (or use the setup key shown if you are using an app or device without camera) and then enter the generated verification code to proceed.</p>"},{"location":"user-guide/users/2fa/#step-2-recovery-code","title":"Step 2: Recovery Code","text":"<p>In the last step before 2FA is activated, you will be shown a recovery code that you can use to access your account when you cannot generate a valid verification code with your app or device:</p> <p></p> <p>To avoid being locked out of your account, please download, print or copy this recovery code and keep it in a safe place. It is a one-time use code that will disable 2FA for your account when you use it.</p>"},{"location":"user-guide/users/2fa/#step-3-app-passwords","title":"Step 3: App Passwords","text":"<p>If 2FA is enabled for your account, other apps and services will no longer be able to use your password as they do not have access to the verification codes.</p> <p>You can therefore generate app-specific passwords for them by navigating to Settings &gt; Account and then clicking the Apps and Devices button. We also recommend using app-specific passwords in case 2FA is not enabled for your account.</p> <p>Example for generating an app password that you can use with WebDAV-compatible file synchronization apps like PhotoSync:</p> <p></p> <p>By selecting the WebDAV scope, you ensure that the app password cannot be used to log in through the regular user interface or for other actions. Apps will also not be able to change your password or manage user accounts, even if you grant them Full Access.</p>"},{"location":"user-guide/users/2fa/#new-authenticator","title":"New Authenticator","text":"<p>To switch to a new authenticator app or device, first deactivate 2FA and then re-enable it.</p>"},{"location":"user-guide/users/2fa/#deactivating-2fa","title":"Deactivating 2FA","text":"<p>If 2FA has been enabled for your account, you can disable it by navigating to Settings &gt; Account, clicking the 2-Factor Authentication button and then entering your password for confirmation:</p> <p></p> <p>Should you lose access to your authenticator app or device, you can use your recovery code to regain access to your account. It is a one-time use code that disables 2FA for your account when you use it.</p> <p>Alternatively, if you don't remember your recovery code, you can ask an administrator to disable 2FA for you in the User Details dialog of the Admin Web UI or by running the following command in a terminal: <pre><code>photoprism users mod --disable-2fa [username]\n</code></pre></p>"},{"location":"user-guide/users/cli/","title":"User Management Commands","text":""},{"location":"user-guide/users/cli/#changing-a-password","title":"Changing a Password","text":"<p>Running the following in a terminal changes the password of an existing user without affecting other account settings, e.g. if you cannot remember the currently set password or if there was a problem configuring the initial admin account (replace <code>[username]</code> with the username of the account you want to update):</p> <pre><code>photoprism passwd [username]\n</code></pre> <p>Note that when you use Docker Compose and do not already have a terminal session open, you must prepend <code>docker compose exec photoprism</code> so that the command is executed within the <code>photoprism</code> container, for example:</p> <pre><code>docker compose exec photoprism photoprism passwd admin\n</code></pre> <p>This also applies to other terminal commands, including those listed below.</p> <p>The examples in our documentation use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> or alternatively <code>podman-compose</code> on Red Hat-compatible distributions.</p>"},{"location":"user-guide/users/cli/#removing-a-password","title":"Removing a Password","text":"<p>Changing the authentication of an existing account to a password-less provider like OIDC will not remove a previously set password, so it can still be used to log in (optionally also with 2FA).</p> <p>If a local password has been set for such an account that should no longer be used, you can remove it by running the following command in a terminal:</p> <pre><code>photoprism passwd --rm [username]\n</code></pre>"},{"location":"user-guide/users/cli/#managing-user-accounts","title":"Managing User Accounts","text":"<p>As an alternative to the web user interface, you can run the following commands in a terminal to perform tasks such as adding, viewing, editing and deleting user accounts:</p> CLI Command Description <code>photoprism users ls [search]</code> Searches existing user accounts <code>photoprism users legacy [search]</code> Searches legacy user accounts <code>photoprism users add [options] [username]</code> Adds a new user account <code>photoprism users show [username]</code> Displays user account information <code>photoprism users mod [options] [username]</code> Modifies an existing user account <code>photoprism users rm [username]</code> Removes a user account <code>photoprism users reset --yes</code> Removes all accounts and resets the database <p>Users who experience login problems after upgrading from development builds, or old releases prior to November 2022, can run the <code>photoprism users reset --yes</code> command to recreate the session and user management database tables so they are compatible with the current version. Note that any client access tokens and app passwords that users may have created will also be deleted and must be recreated.</p>"},{"location":"user-guide/users/cli/#command-options","title":"Command Options","text":"<p>The <code>users add</code> and <code>users mod</code> commands support these flags to set or change account properties:</p> Command Flag Description <code>--name NAME</code>, <code>-n NAME</code> full NAME for display in the interface <code>--email EMAIL</code>, <code>-m EMAIL</code> unique EMAIL address of the user <code>--password PASSWORD</code>, <code>-p PASSWORD</code> PASSWORD for local authentication (8-72 characters) <code>--role value</code>, <code>-r value</code> user account ROLE (admin, user, viewer or guest) (default: \"admin\") <code>--auth PROVIDER</code>, <code>-A PROVIDER</code> authentication PROVIDER (default, local, oidc or none) <code>--auth-id ID</code> authentication ID e.g. Subject ID or Distinguished Name (DN) <code>--superadmin</code>, <code>-s</code> make user super admin with full access <code>--no-login</code>, <code>-l</code> disable login on the web interface <code>--webdav</code>, <code>-w</code> allow to sync files via WebDAV <code>--upload-path value</code>, <code>-u value</code> upload files to this sub-folder <code>--disable-2fa</code> deactivate two-factor authentication"},{"location":"user-guide/users/cli/#creating-a-new-account","title":"Creating a New Account","text":"<p>The <code>photoprism users add</code> command creates a new user account or offers to restore a previously deleted account with the same username if it exists. For example, you can run the following to add a new admin account with the username \"bob\" and the password \"mysecret\":</p> <pre><code>docker compose exec photoprism photoprism users add -p mysecret -n \"Bob\" bob\n</code></pre> <p>If you do not specify an initial password with the <code>-p</code> flag, you will be prompted to enter a password for the new account. Further account properties can be set with the flags listed above.</p> <p>Some user account roles such as User and Viewer are currently only available with a membership to support development and maintenance.</p>"},{"location":"user-guide/users/cli/#viewing-account-details","title":"Viewing Account Details","text":"<p>To view the account properties of a specific user, use the <code>show</code> subcommand:</p> <pre><code>docker compose exec photoprism photoprism users show bob\n</code></pre>"},{"location":"user-guide/users/cli/#searching-user-accounts","title":"Searching User Accounts","text":"<p>To list all existing accounts, you can run the following:</p> <pre><code>docker compose exec photoprism photoprism users ls\n</code></pre> <p>With the <code>photoprism users ls</code> command, you can also find specific accounts based on a search term you provide:</p> <pre><code>docker compose exec photoprism photoprism users ls bob\n</code></pre> <p>To display a description and the available options for a command, use the <code>--help</code> flag:</p> <pre><code>docker compose exec photoprism photoprism users ls --help\n</code></pre>"},{"location":"user-guide/users/cli/#viewing-login-attempts","title":"Viewing Login Attempts","text":"<p>For security reasons, the authentication logs are not accessible from the web user interface. They can only be viewed in the application service logs or by running the following command in a terminal:</p> <pre><code>docker compose exec photoprism photoprism audit logins [username]\n</code></pre>"},{"location":"user-guide/users/cli/#command-options_1","title":"Command Options","text":"<p>You can combine it with these flags to change the output format and the maximum number of search results:</p> Command Flag Description <code>--md, -m</code> format as machine-readable Markdown <code>--csv, -c</code> export as semicolon separated values <code>--tsv, -t</code> export as tab separated values <code>-n LIMIT</code> LIMIT number of results (default: 100)"},{"location":"user-guide/users/cli/#example-report","title":"Example Report","text":"Client IP Username Realm Status Last Login Failed At 172.19.0.1 user api OK 2023-02-03 07:17:46 172.19.0.1 viewer api OK 2023-02-03 07:16:55 172.19.0.1 admin api OK 2023-02-03 06:55:06 <p>Run <code>photoprism audit reset --yes</code> to clear all audit logs and reset the database table to a clean state.</p>"},{"location":"user-guide/users/cli/#session-management","title":"Session Management","text":"<p>You can use the following terminal commands to generate, inspect and, if necessary, delete access tokens for the authentication of browsers and other clients (including app passwords):</p> CLI Command Description <code>photoprism auth ls [search]</code> Lists currently authenticated users and clients <code>photoprism auth add [username]</code> Adds a new authentication secret for client applications <code>photoprism auth show [identifier]</code> Shows detailed information about a session <code>photoprism auth rm [identifier]</code> Deletes a session by id or access token <code>photoprism auth reset --yes</code> Resets the authentication of all users and clients <p>In order to grant limited API access to other applications and services, the <code>photoprism clients add</code> command lets you generate OAuth2 client credentials for them, or you can use the <code>photoprism auth add</code> command to generate access tokens with a limited scope and lifetime.</p> <p>Learn more \u203a</p> <p>Should you experience login problems, for example after upgrading from a previous release or development preview, we recommend running the <code>photoprism auth reset --yes</code> command in a terminal to reset the <code>auth_sessions</code> table to a clean state and force a re-login of all users. Note that any client access tokens and app passwords that users may have created will also be deleted and must be recreated.</p>"},{"location":"user-guide/users/client-credentials/","title":"Authenticating External Apps and Services","text":"<p>In order to grant limited access to other applications and services, administrators can use the <code>photoprism auth</code> and <code>photoprism clients</code> subcommands to generate authentication tokens for them. While app passwords are bound to user accounts and can be generated by anyone from the UI, OAuth2 access tokens and client credentials can be used to access the REST API without being bound to an account.</p>"},{"location":"user-guide/users/client-credentials/#app-passwords","title":"App Passwords","text":"<p>All users can generate app-specific passwords for their own use from the web interface by navigating to Settings &gt; Account and then clicking the Apps and Devices button.</p> <p>Alternatively, running the following command in a terminal will generate a new app-specific password e.g. for the admin account, so that WebDAV-compatible clients can synchronize files even if 2FA is enabled for the account or the account password is changed:</p> <pre><code>docker compose exec photoprism photoprism auth add -n Sync -s \"webdav\" admin\n</code></pre> <p>You will then be shown the generated app password so you can copy it and keep it in a safe place or enter it directly into an app, as you will not be able to see it again:</p> <pre><code>|-----------------------------|---------------------|\n| App Password                | Authorization Scope |\n|-----------------------------|---------------------|\n| HY8fxO-8hvNqB-43UV4q-1AZ0vu | webdav              |\n|-----------------------------|---------------------|\n</code></pre> <p>For added security, we recommend setting an expiration date for the app passwords and access tokens you generate. Common scopes for use with app passwords are either \"*\" for Full Access or \"webdav\" for WebDAV-compatible file synchronization apps.</p> <p>Besides using app passwords to create sessions through the <code>POST /api/v1/session</code> endpoint, developers can also use them as access tokens in the Bearer Authorization header without first creating a session access token.</p>"},{"location":"user-guide/users/client-credentials/#command-options","title":"Command Options","text":"<p>The following flags can be used with the <code>photoprism auth add</code> command (if you omit name or scope, you will be asked to enter them interactively):</p> Command Flag Description <code>--name CLIENT, -n CLIENT</code> CLIENT name to help identify the application <code>--scope SCOPES, -s SCOPES</code> authorization SCOPES e.g. \"metrics\" or \"photos albums\" (<code>\"*\"</code> to allow all) <code>--expires LIFETIME, -e LIFETIME</code> authentication LIFETIME in seconds, after which access expires (-1 to disable the limit) (default: 31536000)"},{"location":"user-guide/users/client-credentials/#authorization-scopes","title":"Authorization Scopes","text":"<p>One or more of these scopes can be specified to limit the access to certain API endpoints:</p> <p>files, folders, shares, photos, videos, favorites, albums, moments, calendar, people, places, labels, config, settings, services, users, sessions, logs, webdav, metrics</p> <p>Clients authenticated with app passwords are unable to change the account password or manage user accounts, even if you specify all scopes or use the wildcard <code>\"*\"</code> to allow all.</p>"},{"location":"user-guide/users/client-credentials/#access-tokens","title":"Access Tokens","text":"<p>If you do not specify a username as argument for the <code>photoprism auth add</code> command, a client access token will be generated (the same flags and scopes as above can be used to limit token authorization and lifetime):</p> <pre><code>|--------------------------------------------------|---------------------|\n| Access Token                                     | Authorization Scope |\n|--------------------------------------------------|---------------------|\n| 7dbfa37b5a3db2a9e9dd186479018bfe2e3ce5a71fc2f955 | files folders       |\n|--------------------------------------------------|---------------------|\n</code></pre> <p>Generating access tokens is a good choice for developers and other advanced users to connect scripts and external services to the PhotoPrism API, e.g. services that collect metrics or start indexing at regular intervals.</p> <p>Please note, however, that client access tokens cannot be used to synchronize files via WebDAV, even if the token authorization scope is set to \"webdav\" or \"*\", as this requires a registered user account. Access tokens can also not be used as a direct password replacement for apps, since clients are not allowed to use the <code>POST /api/v1/session</code> endpoint, which is required for logging in through the user interface.</p>"},{"location":"user-guide/users/client-credentials/#client-credentials","title":"Client Credentials","text":"<p>If clients support authentication via OAuth2 client credentials, you can use the following terminal commands to generate a <code>client_id</code> and <code>client_secret</code> for them, list registered clients, and delete client credentials that are no longer used:</p> CLI Command Description <code>photoprism clients ls [search]</code> Lists registered client applications <code>photoprism clients add [username]</code> Registers a new client application <code>photoprism clients show [identifier]</code> Shows client configuration details <code>photoprism clients mod [identifier]</code> Updates client application settings <code>photoprism clients rm [identifier]</code> Deletes the specified client application <code>photoprism clients reset --yes</code> Removes all registered client applications <p>For example, running the following in a terminal will generate credentials for Prometheus, with access limited to the metrics endpoint:</p> <pre><code>docker compose exec photoprism photoprism clients add -n Prometheus -s metrics\n</code></pre> <p>You will then be shown the generated <code>client_id</code> and <code>client_secret</code> so you can copy them and keep them in a safe place:</p> <pre><code>|------------------|----------------------------------|\n| Client ID        | Client Secret                    |\n|------------------|----------------------------------|\n| csce0w2joodmirvi | 5VKkBeZLDvojjpE9XzCMXShnrxmxHWvN |\n|------------------|----------------------------------|\n</code></pre> <p>OAuth2 client credentials cannot be directly used for synchronizing files via WebDAV, as a password replacement for apps, or for logging in to the web interface.</p>"},{"location":"user-guide/users/client-credentials/#command-options_1","title":"Command Options","text":"<p>The following parameters can be used with the <code>photoprism clients add</code> command, e.g. to limit the number of access tokens the client can request:</p> Command Flag Description <code>--name CLIENT, -n CLIENT</code> CLIENT name to help identify the application <code>--role ROLE, -r ROLE</code> client authorization ROLE (default: \"client\") <code>--scope SCOPES, -s SCOPES</code> client authorization SCOPES e.g. \"metrics\" or \"photos albums\" (<code>\"*\"</code> to allow all) <code>--expires LIFETIME, -e LIFETIME</code> access token LIFETIME in seconds, after which a new token must be requested (default: 86400) <code>--tokens NUMBER, -t NUMBER</code> maximum NUMBER of access tokens that the client can request (-1 to disable the limit) (default: 10) <p>If you omit the name or scope parameter, you will be asked to enter them interactively. One or more of these scopes can be specified to limit the access to certain API endpoints:</p> <p>files, folders, shares, photos, videos, favorites, albums, moments, calendar, people, places, labels, config, settings, services, users, sessions, logs, webdav, metrics</p> <p>When requesting access tokens, clients can further restrict the scope of the tokens by passing the scope parameter to the <code>POST /api/v1/oauth/token</code> endpoint.</p>"},{"location":"user-guide/users/libraries/","title":"Multiple Libraries","text":"<p>PhotoPrism\u00ae Plus includes advanced multi-user functionality and additional account roles. These roles are intended for situations where you want other people to have access to your library, such as giving family members access to your pictures without granting write permissions or exposing private content.</p> <p>It is recommended to set up additional instances if you have multiple users in a family, so that everyone can manage their own files independently. This way you can avoid problems with conflicting library settings, file permissions, and dealing with duplicates.</p> <p>In future versions, users will be able to share albums and other content in a decentralized way, regardless of where their library is hosted. We are also working on a dedicated web interface for managing multiple libraries and user accounts, which will be made available as a separate tool.</p> <p>Our ultimate goal is to make personal sharing compatible with other apps like Pixelfed and Mastodon.</p>"},{"location":"user-guide/users/roles/","title":"Roles and Permissions","text":"Role Search Library View &amp; Download Upload WebDAV Manage admin optional user optional viewer except private except private guest shared visitor shared"},{"location":"user-guide/users/roles/#admin","title":"Admin","text":"<p>Admins have unrestricted access to all pictures, albums, and settings.</p> <p>Regular Admins can lose their privileges due to an intentional or accidental role change. However, accounts with the optional \"superadmin\" status (can be set with the <code>-s</code> flag) retain their admin privileges even if they are assigned a non-admin or invalid role. This is to prevent them from locking themselves out.</p> <p>When Super Admins change settings such as the language or theme, these automatically become the default settings for other users, unless they have explicitly made a different choice. In addition, global feature flags can only be changed by Super Admins.</p>"},{"location":"user-guide/users/roles/#user","title":"User","text":"<p>Users have full access to the library and can view, edit, and delete all pictures and albums. Unlike Admins, Users cannot view or change the Library and Advanced Settings, only personal  preferences such as theme, language, and password. In addition, their WebDAV access can be disabled. Future releases may include more ways to customize user privileges, e.g. with individual account attributes.</p>"},{"location":"user-guide/users/roles/#viewer","title":"Viewer","text":"<p>Viewers are similar to regular Users, except that they do not have write access to the library and cannot see content that has been archived or marked private. They also cannot upload/import files or trigger indexing. Like all registered users, Viewers can change and save personal preferences such as theme, language, and password.</p>"},{"location":"user-guide/users/roles/#guest","title":"Guest","text":"<p>Guests have read-only access to view and download the resources that other users have shared with them. They can also change personal settings such as theme, language, and password.</p>"},{"location":"user-guide/users/roles/#visitor","title":"Visitor","text":"<p>Visitors cannot be added manually. This special role is tied to a system account that represents anonymous users who use links to view albums or other content that has been shared with them. Visitors can only access these resources and cannot log in with a username or password. Other than guests, they also cannot retain their personal settings for longer than their browsing session lasts.</p> <p>Some user account roles such as User and Viewer are currently only available with a membership to support development and maintenance.</p>"},{"location":"user-guide/users/sharing/","title":"Sharing Albums with Guests","text":"<p>Users with the admin or user role can create secret links to give other user accounts shared access to selected Albums, Moments, Months, Regions, and Folders. This works in the same way as sharing with visitors who do not have an account.</p> <p>When authenticated users with limited privileges, such as guests, open a share link, they gain permanent read-only access to the shared items until the link is removed or expires.</p> <p>Learn more \u203a</p> <p>In a future release, you will be able to share content with local users directly from the web interface without having to create links first.</p>"}]}